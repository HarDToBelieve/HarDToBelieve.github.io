<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>lattice.c source code [webkit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_coding/codecs/isac/fix/source/lattice.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_coding/codecs/isac/fix/source/lattice.c'; var root_path = '../../../../../../../../../../../..'; var data_path = '../../../../../../../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../../../../../../..'>webkit</a>/<a href='../../../../../../../../../..'>Source</a>/<a href='../../../../../../../../..'>ThirdParty</a>/<a href='../../../../../../../..'>libwebrtc</a>/<a href='../../../../../../..'>Source</a>/<a href='../../../../../..'>webrtc</a>/<a href='../../../../..'>modules</a>/<a href='../../../..'>audio_coding</a>/<a href='../../..'>codecs</a>/<a href='../..'>isac</a>/<a href='..'>fix</a>/<a href='./'>source</a>/<a href='lattice.c.html'>lattice.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> *  Copyright (c) 2011 The WebRTC project authors. All Rights Reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> *  Use of this source code is governed by a BSD-style license</i></td></tr>
<tr><th id="5">5</th><td><i> *  that can be found in the LICENSE file in the root of the source</i></td></tr>
<tr><th id="6">6</th><td><i> *  tree. An additional intellectual property rights grant can be found</i></td></tr>
<tr><th id="7">7</th><td><i> *  in the file PATENTS.  All contributing project authors may</i></td></tr>
<tr><th id="8">8</th><td><i> *  be found in the AUTHORS file in the root of the source tree.</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><i>/*</i></td></tr>
<tr><th id="12">12</th><td><i> * lattice.c</i></td></tr>
<tr><th id="13">13</th><td><i> *</i></td></tr>
<tr><th id="14">14</th><td><i> * Contains the normalized lattice filter routines (MA and AR) for iSAC codec</i></td></tr>
<tr><th id="15">15</th><td><i> *</i></td></tr>
<tr><th id="16">16</th><td><i> */</i></td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="codec.h.html">"modules/audio_coding/codecs/isac/fix/source/codec.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="settings.h.html">"modules/audio_coding/codecs/isac/fix/source/settings.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../../../../../rtc_base/sanitizer.h.html">"rtc_base/sanitizer.h"</a></u></td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><u>#define <dfn class="macro" id="_M/LATTICE_MUL_32_32_RSFT16" data-ref="_M/LATTICE_MUL_32_32_RSFT16">LATTICE_MUL_32_32_RSFT16</dfn>(a32a, a32b, b32)                  \</u></td></tr>
<tr><th id="23">23</th><td><u>  ((<span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>)(WEBRTC_SPL_MUL(a32a, b32) + (WEBRTC_SPL_MUL_16_32_RSFT16(a32b, b32))))</u></td></tr>
<tr><th id="24">24</th><td><i>/* This macro is FORBIDDEN to use elsewhere than in a function in this file and</i></td></tr>
<tr><th id="25">25</th><td><i>   its corresponding neon version. It might give unpredictable results, since a</i></td></tr>
<tr><th id="26">26</th><td><i>   general int32_t*int32_t multiplication results in a 64 bit value.</i></td></tr>
<tr><th id="27">27</th><td><i>   The result is then shifted just 16 steps to the right, giving need for 48</i></td></tr>
<tr><th id="28">28</th><td><i>   bits, i.e. in the generel case, it will NOT fit in a int32_t. In the</i></td></tr>
<tr><th id="29">29</th><td><i>   cases used in here, the int32_t will be enough, since (for a good</i></td></tr>
<tr><th id="30">30</th><td><i>   reason) the involved multiplicands aren't big enough to overflow a</i></td></tr>
<tr><th id="31">31</th><td><i>   int32_t after shifting right 16 bits. I have compared the result of a</i></td></tr>
<tr><th id="32">32</th><td><i>   multiplication between t32 and tmp32, done in two ways:</i></td></tr>
<tr><th id="33">33</th><td><i>   1) Using (int32_t) (((float)(tmp32))*((float)(tmp32b))/65536.0);</i></td></tr>
<tr><th id="34">34</th><td><i>   2) Using LATTICE_MUL_32_32_RSFT16(t16a, t16b, tmp32b);</i></td></tr>
<tr><th id="35">35</th><td><i>   By running 25 files, I haven't found any bigger diff than 64 - this was in the</i></td></tr>
<tr><th id="36">36</th><td><i>   case when  method 1) gave 650235648 and 2) gave 650235712.</i></td></tr>
<tr><th id="37">37</th><td><i>*/</i></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><i>/* Function prototype: filtering ar_g_Q0[] and ar_f_Q0[] through an AR filter</i></td></tr>
<tr><th id="40">40</th><td><i>   with coefficients cth_Q15[] and sth_Q15[].</i></td></tr>
<tr><th id="41">41</th><td><i>   Implemented for both generic and ARMv7 platforms.</i></td></tr>
<tr><th id="42">42</th><td><i> */</i></td></tr>
<tr><th id="43">43</th><td><em>void</em> <dfn class="decl fn" id="WebRtcIsacfix_FilterArLoop" title='WebRtcIsacfix_FilterArLoop' data-ref="WebRtcIsacfix_FilterArLoop" data-ref-filename="WebRtcIsacfix_FilterArLoop">WebRtcIsacfix_FilterArLoop</dfn>(<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>* <dfn class="local col1 decl" id="1ar_g_Q0" title='ar_g_Q0' data-type='int16_t *' data-ref="1ar_g_Q0" data-ref-filename="1ar_g_Q0">ar_g_Q0</dfn>,</td></tr>
<tr><th id="44">44</th><td>                                <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>* <dfn class="local col2 decl" id="2ar_f_Q0" title='ar_f_Q0' data-type='int16_t *' data-ref="2ar_f_Q0" data-ref-filename="2ar_f_Q0">ar_f_Q0</dfn>,</td></tr>
<tr><th id="45">45</th><td>                                <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>* <dfn class="local col3 decl" id="3cth_Q15" title='cth_Q15' data-type='int16_t *' data-ref="3cth_Q15" data-ref-filename="3cth_Q15">cth_Q15</dfn>,</td></tr>
<tr><th id="46">46</th><td>                                <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>* <dfn class="local col4 decl" id="4sth_Q15" title='sth_Q15' data-type='int16_t *' data-ref="4sth_Q15" data-ref-filename="4sth_Q15">sth_Q15</dfn>,</td></tr>
<tr><th id="47">47</th><td>                                <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="5order_coef" title='order_coef' data-type='size_t' data-ref="5order_coef" data-ref-filename="5order_coef">order_coef</dfn>);</td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td><i>/* Inner loop used for function WebRtcIsacfix_NormLatticeFilterMa(). It does:</i></td></tr>
<tr><th id="50">50</th><td><i>   for 0 &lt;= n &lt; HALF_SUBFRAMELEN - 1:</i></td></tr>
<tr><th id="51">51</th><td><i>     *ptr2 = input2 * (*ptr2) + input0 * (*ptr0));</i></td></tr>
<tr><th id="52">52</th><td><i>     *ptr1 = input1 * (*ptr0) + input0 * (*ptr2);</i></td></tr>
<tr><th id="53">53</th><td><i>   Note, function WebRtcIsacfix_FilterMaLoopNeon and WebRtcIsacfix_FilterMaLoopC</i></td></tr>
<tr><th id="54">54</th><td><i>   are not bit-exact. The accuracy by the ARM Neon function is same or better.</i></td></tr>
<tr><th id="55">55</th><td><i>*/</i></td></tr>
<tr><th id="56">56</th><td><em>void</em> <dfn class="decl def fn" id="WebRtcIsacfix_FilterMaLoopC" title='WebRtcIsacfix_FilterMaLoopC' data-ref="WebRtcIsacfix_FilterMaLoopC" data-ref-filename="WebRtcIsacfix_FilterMaLoopC">WebRtcIsacfix_FilterMaLoopC</dfn>(<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col6 decl" id="6input0" title='input0' data-type='int16_t' data-ref="6input0" data-ref-filename="6input0">input0</dfn>,  <i>// Filter coefficient</i></td></tr>
<tr><th id="57">57</th><td>                                 <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col7 decl" id="7input1" title='input1' data-type='int16_t' data-ref="7input1" data-ref-filename="7input1">input1</dfn>,  <i>// Filter coefficient</i></td></tr>
<tr><th id="58">58</th><td>                                 <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col8 decl" id="8input2" title='input2' data-type='int32_t' data-ref="8input2" data-ref-filename="8input2">input2</dfn>,  <i>// Inverse coeff. (1/input1)</i></td></tr>
<tr><th id="59">59</th><td>                                 <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>* <dfn class="local col9 decl" id="9ptr0" title='ptr0' data-type='int32_t *' data-ref="9ptr0" data-ref-filename="9ptr0">ptr0</dfn>,   <i>// Sample buffer</i></td></tr>
<tr><th id="60">60</th><td>                                 <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>* <dfn class="local col0 decl" id="10ptr1" title='ptr1' data-type='int32_t *' data-ref="10ptr1" data-ref-filename="10ptr1">ptr1</dfn>,   <i>// Sample buffer</i></td></tr>
<tr><th id="61">61</th><td>                                 <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>* <dfn class="local col1 decl" id="11ptr2" title='ptr2' data-type='int32_t *' data-ref="11ptr2" data-ref-filename="11ptr2">ptr2</dfn>) { <i>// Sample buffer</i></td></tr>
<tr><th id="62">62</th><td>  <em>int</em> <dfn class="local col2 decl" id="12n" title='n' data-type='int' data-ref="12n" data-ref-filename="12n">n</dfn> = <var>0</var>;</td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td>  <i>// Separate the 32-bit variable input2 into two 16-bit integers (high 16 and</i></td></tr>
<tr><th id="65">65</th><td><i>  // low 16 bits), for using LATTICE_MUL_32_32_RSFT16 in the loop.</i></td></tr>
<tr><th id="66">66</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col3 decl" id="13t16a" title='t16a' data-type='int16_t' data-ref="13t16a" data-ref-filename="13t16a">t16a</dfn> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col8 ref" href="#8input2" title='input2' data-ref="8input2" data-ref-filename="8input2">input2</a> &gt;&gt; <var>16</var>);</td></tr>
<tr><th id="67">67</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col4 decl" id="14t16b" title='t16b' data-type='int16_t' data-ref="14t16b" data-ref-filename="14t16b">t16b</dfn> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)<a class="local col8 ref" href="#8input2" title='input2' data-ref="8input2" data-ref-filename="8input2">input2</a>;</td></tr>
<tr><th id="68">68</th><td>  <b>if</b> (<a class="local col4 ref" href="#14t16b" title='t16b' data-ref="14t16b" data-ref-filename="14t16b">t16b</a> &lt; <var>0</var>) <a class="local col3 ref" href="#13t16a" title='t16a' data-ref="13t16a" data-ref-filename="13t16a">t16a</a>++;</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>  <i>// The loop filtering the samples *ptr0, *ptr1, *ptr2 with filter coefficients</i></td></tr>
<tr><th id="71">71</th><td><i>  // input0, input1, and input2.</i></td></tr>
<tr><th id="72">72</th><td>  <b>for</b>(<a class="local col2 ref" href="#12n" title='n' data-ref="12n" data-ref-filename="12n">n</a> = <var>0</var>; <a class="local col2 ref" href="#12n" title='n' data-ref="12n" data-ref-filename="12n">n</a> &lt; <a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a> - <var>1</var>; <a class="local col2 ref" href="#12n" title='n' data-ref="12n" data-ref-filename="12n">n</a>++, <a class="local col9 ref" href="#9ptr0" title='ptr0' data-ref="9ptr0" data-ref-filename="9ptr0">ptr0</a>++, <a class="local col0 ref" href="#10ptr1" title='ptr1' data-ref="10ptr1" data-ref-filename="10ptr1">ptr1</a>++, <a class="local col1 ref" href="#11ptr2" title='ptr2' data-ref="11ptr2" data-ref-filename="11ptr2">ptr2</a>++) {</td></tr>
<tr><th id="73">73</th><td>    <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col5 decl" id="15tmp32a" title='tmp32a' data-type='int32_t' data-ref="15tmp32a" data-ref-filename="15tmp32a">tmp32a</dfn> = <var>0</var>;</td></tr>
<tr><th id="74">74</th><td>    <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col6 decl" id="16tmp32b" title='tmp32b' data-type='int32_t' data-ref="16tmp32b" data-ref-filename="16tmp32b">tmp32b</dfn> = <var>0</var>;</td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td>    <i>// Calculate *ptr2 = input2 * (*ptr2 + input0 * (*ptr0));</i></td></tr>
<tr><th id="77">77</th><td>    <a class="local col5 ref" href="#15tmp32a" title='tmp32a' data-ref="15tmp32a" data-ref-filename="15tmp32a">tmp32a</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(input0)) * ((int16_t)((*ptr0) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(input0) * (uint16_t)((uint16_t)(*ptr0))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col6 ref" href="#6input0" title='input0' data-ref="6input0" data-ref-filename="6input0">input0</a>, *<a class="local col9 ref" href="#9ptr0" title='ptr0' data-ref="9ptr0" data-ref-filename="9ptr0">ptr0</a>); <i>// Q15 * Q15 &gt;&gt; 15 = Q15</i></td></tr>
<tr><th id="78">78</th><td>    <a class="local col6 ref" href="#16tmp32b" title='tmp32b' data-ref="16tmp32b" data-ref-filename="16tmp32b">tmp32b</a> = *<a class="local col1 ref" href="#11ptr2" title='ptr2' data-ref="11ptr2" data-ref-filename="11ptr2">ptr2</a> + <a class="local col5 ref" href="#15tmp32a" title='tmp32a' data-ref="15tmp32a" data-ref-filename="15tmp32a">tmp32a</a>; <i>// Q15 + Q15 = Q15</i></td></tr>
<tr><th id="79">79</th><td>    *<a class="local col1 ref" href="#11ptr2" title='ptr2' data-ref="11ptr2" data-ref-filename="11ptr2">ptr2</a> = <a class="macro" href="#22" title="((int32_t)(((int32_t)((int32_t)(t16a) * (int32_t)(tmp32b))) + ((((int32_t)(((int16_t)(t16b)) * ((int16_t)(tmp32b &gt;&gt; 16)))) + ((((int32_t)(((int16_t)(t16b)) * ((int16_t)((tmp32b &amp; 0xffff) &gt;&gt; 1)))) + 0x4000) &gt;&gt; 15)))))" data-ref="_M/LATTICE_MUL_32_32_RSFT16">LATTICE_MUL_32_32_RSFT16</a>(<a class="local col3 ref" href="#13t16a" title='t16a' data-ref="13t16a" data-ref-filename="13t16a">t16a</a>, <a class="local col4 ref" href="#14t16b" title='t16b' data-ref="14t16b" data-ref-filename="14t16b">t16b</a>, <a class="local col6 ref" href="#16tmp32b" title='tmp32b' data-ref="16tmp32b" data-ref-filename="16tmp32b">tmp32b</a>);</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td>    <i>// Calculate *ptr1 = input1 * (*ptr0) + input0 * (*ptr2);</i></td></tr>
<tr><th id="82">82</th><td>    <a class="local col5 ref" href="#15tmp32a" title='tmp32a' data-ref="15tmp32a" data-ref-filename="15tmp32a">tmp32a</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(input1)) * ((int16_t)((*ptr0) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(input1) * (uint16_t)((uint16_t)(*ptr0))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col7 ref" href="#7input1" title='input1' data-ref="7input1" data-ref-filename="7input1">input1</a>, *<a class="local col9 ref" href="#9ptr0" title='ptr0' data-ref="9ptr0" data-ref-filename="9ptr0">ptr0</a>); <i>// Q15*Q15&gt;&gt;15 = Q15</i></td></tr>
<tr><th id="83">83</th><td>    <a class="local col6 ref" href="#16tmp32b" title='tmp32b' data-ref="16tmp32b" data-ref-filename="16tmp32b">tmp32b</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(input0)) * ((int16_t)((*ptr2) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(input0) * (uint16_t)((uint16_t)(*ptr2))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col6 ref" href="#6input0" title='input0' data-ref="6input0" data-ref-filename="6input0">input0</a>, *<a class="local col1 ref" href="#11ptr2" title='ptr2' data-ref="11ptr2" data-ref-filename="11ptr2">ptr2</a>); <i>// Q15*Q15&gt;&gt;15 = Q15</i></td></tr>
<tr><th id="84">84</th><td>    *<a class="local col0 ref" href="#10ptr1" title='ptr1' data-ref="10ptr1" data-ref-filename="10ptr1">ptr1</a> = <a class="local col5 ref" href="#15tmp32a" title='tmp32a' data-ref="15tmp32a" data-ref-filename="15tmp32a">tmp32a</a> + <a class="local col6 ref" href="#16tmp32b" title='tmp32b' data-ref="16tmp32b" data-ref-filename="16tmp32b">tmp32b</a>; <i>// Q15 + Q15 = Q15</i></td></tr>
<tr><th id="85">85</th><td>  }</td></tr>
<tr><th id="86">86</th><td>}</td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><i>/* filter the signal using normalized lattice filter */</i></td></tr>
<tr><th id="89">89</th><td><i>/* MA filter */</i></td></tr>
<tr><th id="90">90</th><td><em>void</em> <dfn class="decl def fn" id="WebRtcIsacfix_NormLatticeFilterMa" title='WebRtcIsacfix_NormLatticeFilterMa' data-ref="WebRtcIsacfix_NormLatticeFilterMa" data-ref-filename="WebRtcIsacfix_NormLatticeFilterMa">WebRtcIsacfix_NormLatticeFilterMa</dfn>(<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="17orderCoef" title='orderCoef' data-type='size_t' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</dfn>,</td></tr>
<tr><th id="91">91</th><td>                                       <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> *<dfn class="local col8 decl" id="18stateGQ15" title='stateGQ15' data-type='int32_t *' data-ref="18stateGQ15" data-ref-filename="18stateGQ15">stateGQ15</dfn>,</td></tr>
<tr><th id="92">92</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col9 decl" id="19lat_inQ0" title='lat_inQ0' data-type='int16_t *' data-ref="19lat_inQ0" data-ref-filename="19lat_inQ0">lat_inQ0</dfn>,</td></tr>
<tr><th id="93">93</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col0 decl" id="20filt_coefQ15" title='filt_coefQ15' data-type='int16_t *' data-ref="20filt_coefQ15" data-ref-filename="20filt_coefQ15">filt_coefQ15</dfn>,</td></tr>
<tr><th id="94">94</th><td>                                       <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> *<dfn class="local col1 decl" id="21gain_lo_hiQ17" title='gain_lo_hiQ17' data-type='int32_t *' data-ref="21gain_lo_hiQ17" data-ref-filename="21gain_lo_hiQ17">gain_lo_hiQ17</dfn>,</td></tr>
<tr><th id="95">95</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col2 decl" id="22lo_hi" title='lo_hi' data-type='int16_t' data-ref="22lo_hi" data-ref-filename="22lo_hi">lo_hi</dfn>,</td></tr>
<tr><th id="96">96</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col3 decl" id="23lat_outQ9" title='lat_outQ9' data-type='int16_t *' data-ref="23lat_outQ9" data-ref-filename="23lat_outQ9">lat_outQ9</dfn>)</td></tr>
<tr><th id="97">97</th><td>{</td></tr>
<tr><th id="98">98</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col4 decl" id="24sthQ15" title='sthQ15' data-type='int16_t [12]' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>];</td></tr>
<tr><th id="99">99</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col5 decl" id="25cthQ15" title='cthQ15' data-type='int16_t [12]' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>];</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td>  <em>int</em> <dfn class="local col6 decl" id="26u" title='u' data-type='int' data-ref="26u" data-ref-filename="26u">u</dfn>, <dfn class="local col7 decl" id="27n" title='n' data-type='int' data-ref="27n" data-ref-filename="27n">n</dfn>;</td></tr>
<tr><th id="102">102</th><td>  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="28i" title='i' data-type='size_t' data-ref="28i" data-ref-filename="28i">i</dfn>, <dfn class="local col9 decl" id="29k" title='k' data-type='size_t' data-ref="29k" data-ref-filename="29k">k</dfn>;</td></tr>
<tr><th id="103">103</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col0 decl" id="30temp2" title='temp2' data-type='int16_t' data-ref="30temp2" data-ref-filename="30temp2">temp2</dfn>,<dfn class="local col1 decl" id="31temp3" title='temp3' data-type='int16_t' data-ref="31temp3" data-ref-filename="31temp3">temp3</dfn>;</td></tr>
<tr><th id="104">104</th><td>  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="32ord_1" title='ord_1' data-type='size_t' data-ref="32ord_1" data-ref-filename="32ord_1">ord_1</dfn> = <a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a>+<var>1</var>;</td></tr>
<tr><th id="105">105</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col3 decl" id="33inv_cthQ16" title='inv_cthQ16' data-type='int32_t [12]' data-ref="33inv_cthQ16" data-ref-filename="33inv_cthQ16">inv_cthQ16</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>];</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col4 decl" id="34gain32" title='gain32' data-type='int32_t' data-ref="34gain32" data-ref-filename="34gain32">gain32</dfn>, <dfn class="local col5 decl" id="35fQtmp" title='fQtmp' data-type='int32_t' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</dfn>;</td></tr>
<tr><th id="108">108</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col6 decl" id="36gain16" title='gain16' data-type='int16_t' data-ref="36gain16" data-ref-filename="36gain16">gain16</dfn>;</td></tr>
<tr><th id="109">109</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col7 decl" id="37gain_sh" title='gain_sh' data-type='int16_t' data-ref="37gain_sh" data-ref-filename="37gain_sh">gain_sh</dfn>;</td></tr>
<tr><th id="110">110</th><td></td></tr>
<tr><th id="111">111</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col8 decl" id="38tmp32" title='tmp32' data-type='int32_t' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</dfn>, <dfn class="local col9 decl" id="39tmp32b" title='tmp32b' data-type='int32_t' data-ref="39tmp32b" data-ref-filename="39tmp32b">tmp32b</dfn>;</td></tr>
<tr><th id="112">112</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col0 decl" id="40fQ15vec" title='fQ15vec' data-type='int32_t [40]' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</dfn>[<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>];</td></tr>
<tr><th id="113">113</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col1 decl" id="41gQ15" title='gQ15' data-type='int32_t [13][40]' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>+<var>1</var>][<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>];</td></tr>
<tr><th id="114">114</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col2 decl" id="42sh" title='sh' data-type='int16_t' data-ref="42sh" data-ref-filename="42sh">sh</dfn>;</td></tr>
<tr><th id="115">115</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col3 decl" id="43t16a" title='t16a' data-type='int16_t' data-ref="43t16a" data-ref-filename="43t16a">t16a</dfn>;</td></tr>
<tr><th id="116">116</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col4 decl" id="44t16b" title='t16b' data-type='int16_t' data-ref="44t16b" data-ref-filename="44t16b">t16b</dfn>;</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td>  <b>for</b> (<a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a>=<var>0</var>;<a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a>&lt;<a class="macro" href="settings.h.html#45" title="6" data-ref="_M/SUBFRAMES">SUBFRAMES</a>;<a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a>++)</td></tr>
<tr><th id="119">119</th><td>  {</td></tr>
<tr><th id="120">120</th><td>    <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col5 decl" id="45temp1" title='temp1' data-type='int32_t' data-ref="45temp1" data-ref-filename="45temp1">temp1</dfn> = <a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a> * <a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>    <i>/* set the Direct Form coefficients */</i></td></tr>
<tr><th id="123">123</th><td>    <a class="local col0 ref" href="#30temp2" title='temp2' data-ref="30temp2" data-ref-filename="30temp2">temp2</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a> * <a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a>);</td></tr>
<tr><th id="124">124</th><td>    <a class="local col1 ref" href="#31temp3" title='temp3' data-ref="31temp3" data-ref-filename="31temp3">temp3</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<var>2</var> * <a class="local col6 ref" href="#26u" title='u' data-ref="26u" data-ref-filename="26u">u</a> + <a class="local col2 ref" href="#22lo_hi" title='lo_hi' data-ref="22lo_hi" data-ref-filename="22lo_hi">lo_hi</a>);</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td>    <i>/* compute lattice filter coefficients */</i></td></tr>
<tr><th id="127">127</th><td>    <span class="macro" title="__builtin___memcpy_chk (sthQ15, &amp;filt_coefQ15[temp2], orderCoef * sizeof(int16_t), __builtin_object_size (sthQ15, 0))" data-ref="_M/memcpy">memcpy</span>(<a class="local col4 ref" href="#24sthQ15" title='sthQ15' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</a>, &amp;<a class="local col0 ref" href="#20filt_coefQ15" title='filt_coefQ15' data-ref="20filt_coefQ15" data-ref-filename="20filt_coefQ15">filt_coefQ15</a>[<a class="local col0 ref" href="#30temp2" title='temp2' data-ref="30temp2" data-ref-filename="30temp2">temp2</a>], <a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a> * <b>sizeof</b>(<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>));</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td>    <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#WebRtcSpl_SqrtOfOneMinusXSquared" title='WebRtcSpl_SqrtOfOneMinusXSquared' data-ref="WebRtcSpl_SqrtOfOneMinusXSquared" data-ref-filename="WebRtcSpl_SqrtOfOneMinusXSquared">WebRtcSpl_SqrtOfOneMinusXSquared</a>(<a class="local col4 ref" href="#24sthQ15" title='sthQ15' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</a>, <a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a>, <a class="local col5 ref" href="#25cthQ15" title='cthQ15' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</a>);</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td>    <i>/* compute the gain */</i></td></tr>
<tr><th id="132">132</th><td>    <a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a> = <a class="local col1 ref" href="#21gain_lo_hiQ17" title='gain_lo_hiQ17' data-ref="21gain_lo_hiQ17" data-ref-filename="21gain_lo_hiQ17">gain_lo_hiQ17</a>[<a class="local col1 ref" href="#31temp3" title='temp3' data-ref="31temp3" data-ref-filename="31temp3">temp3</a>];</td></tr>
<tr><th id="133">133</th><td>    <a class="local col7 ref" href="#37gain_sh" title='gain_sh' data-ref="37gain_sh" data-ref-filename="37gain_sh">gain_sh</a> = <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/spl_inl.h.html#WebRtcSpl_NormW32" title='WebRtcSpl_NormW32' data-ref="WebRtcSpl_NormW32" data-ref-filename="WebRtcSpl_NormW32">WebRtcSpl_NormW32</a>(<a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a>);</td></tr>
<tr><th id="134">134</th><td>    <a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a> &lt;&lt;= <a class="local col7 ref" href="#37gain_sh" title='gain_sh' data-ref="37gain_sh" data-ref-filename="37gain_sh">gain_sh</a>;  <i>// Q(17+gain_sh)</i></td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td>    <b>for</b> (<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>=<var>0</var>;<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>&lt;<a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a>;<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>++)</td></tr>
<tr><th id="137">137</th><td>    {</td></tr>
<tr><th id="138">138</th><td>      <a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(cthQ15[k])) * ((int16_t)((gain32) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(cthQ15[k]) * (uint16_t)((uint16_t)(gain32))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col5 ref" href="#25cthQ15" title='cthQ15' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>], <a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a>); <i>//Q15*Q(17+gain_sh)&gt;&gt;15 = Q(17+gain_sh)</i></td></tr>
<tr><th id="139">139</th><td>      <a class="local col3 ref" href="#33inv_cthQ16" title='inv_cthQ16' data-ref="33inv_cthQ16" data-ref-filename="33inv_cthQ16">inv_cthQ16</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>] = <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#WebRtcSpl_DivW32W16" title='WebRtcSpl_DivW32W16' data-ref="WebRtcSpl_DivW32W16" data-ref-filename="WebRtcSpl_DivW32W16">WebRtcSpl_DivW32W16</a>((<span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>)<var>2147483647</var>, <a class="local col5 ref" href="#25cthQ15" title='cthQ15' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>]); <i>// 1/cth[k] in Q31/Q15 = Q16</i></td></tr>
<tr><th id="140">140</th><td>    }</td></tr>
<tr><th id="141">141</th><td>    <a class="local col6 ref" href="#36gain16" title='gain16' data-ref="36gain16" data-ref-filename="36gain16">gain16</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col4 ref" href="#34gain32" title='gain32' data-ref="34gain32" data-ref-filename="34gain32">gain32</a> &gt;&gt; <var>16</var>);  <i>// Q(1+gain_sh).</i></td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td>    <i>/* normalized lattice filter */</i></td></tr>
<tr><th id="144">144</th><td>    <i>/*****************************/</i></td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td>    <i>/* initial conditions */</i></td></tr>
<tr><th id="147">147</th><td>    <b>for</b> (<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>=<var>0</var>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>&lt;<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>++)</td></tr>
<tr><th id="148">148</th><td>    {</td></tr>
<tr><th id="149">149</th><td>      <a class="local col0 ref" href="#40fQ15vec" title='fQ15vec' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>] = <a class="local col9 ref" href="#19lat_inQ0" title='lat_inQ0' data-ref="19lat_inQ0" data-ref-filename="19lat_inQ0">lat_inQ0</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a> + <a class="local col5 ref" href="#45temp1" title='temp1' data-ref="45temp1" data-ref-filename="45temp1">temp1</a>] &lt;&lt; <var>15</var>;  <i>// Q15</i></td></tr>
<tr><th id="150">150</th><td>      <a class="local col1 ref" href="#41gQ15" title='gQ15' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</a>[<var>0</var>][<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>] = <a class="local col9 ref" href="#19lat_inQ0" title='lat_inQ0' data-ref="19lat_inQ0" data-ref-filename="19lat_inQ0">lat_inQ0</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a> + <a class="local col5 ref" href="#45temp1" title='temp1' data-ref="45temp1" data-ref-filename="45temp1">temp1</a>] &lt;&lt; <var>15</var>;  <i>// Q15</i></td></tr>
<tr><th id="151">151</th><td>    }</td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td>    <a class="local col5 ref" href="#35fQtmp" title='fQtmp' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</a> = <a class="local col0 ref" href="#40fQ15vec" title='fQ15vec' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</a>[<var>0</var>];</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td>    <i>/* get the state of f&amp;g for the first input, for all orders */</i></td></tr>
<tr><th id="157">157</th><td>    <b>for</b> (<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>=<var>1</var>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>&lt;<a class="local col2 ref" href="#32ord_1" title='ord_1' data-ref="32ord_1" data-ref-filename="32ord_1">ord_1</a>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>++)</td></tr>
<tr><th id="158">158</th><td>    {</td></tr>
<tr><th id="159">159</th><td>      <i>// Calculate f[i][0] = inv_cth[i-1]*(f[i-1][0] + sth[i-1]*stateG[i-1]);</i></td></tr>
<tr><th id="160">160</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(sthQ15[i-1])) * ((int16_t)((stateGQ15[i-1]) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(sthQ15[i-1]) * (uint16_t)((uint16_t)(stateGQ15[i-1]))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col4 ref" href="#24sthQ15" title='sthQ15' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>], <a class="local col8 ref" href="#18stateGQ15" title='stateGQ15' data-ref="18stateGQ15" data-ref-filename="18stateGQ15">stateGQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>]);<i>//Q15*Q15&gt;&gt;15 = Q15</i></td></tr>
<tr><th id="161">161</th><td>      <a class="local col9 ref" href="#39tmp32b" title='tmp32b' data-ref="39tmp32b" data-ref-filename="39tmp32b">tmp32b</a>= <a class="local col5 ref" href="#35fQtmp" title='fQtmp' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</a> + <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>; <i>//Q15+Q15=Q15</i></td></tr>
<tr><th id="162">162</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> = <a class="local col3 ref" href="#33inv_cthQ16" title='inv_cthQ16' data-ref="33inv_cthQ16" data-ref-filename="33inv_cthQ16">inv_cthQ16</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>]; <i>//Q16</i></td></tr>
<tr><th id="163">163</th><td>      <a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> &gt;&gt; <var>16</var>);</td></tr>
<tr><th id="164">164</th><td>      <a class="local col4 ref" href="#44t16b" title='t16b' data-ref="44t16b" data-ref-filename="44t16b">t16b</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> - (<a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a> &lt;&lt; <var>16</var>));</td></tr>
<tr><th id="165">165</th><td>      <b>if</b> (<a class="local col4 ref" href="#44t16b" title='t16b' data-ref="44t16b" data-ref-filename="44t16b">t16b</a>&lt;<var>0</var>) <a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a>++;</td></tr>
<tr><th id="166">166</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> = <a class="macro" href="#22" title="((int32_t)(((int32_t)((int32_t)(t16a) * (int32_t)(tmp32b))) + ((((int32_t)(((int16_t)(t16b)) * ((int16_t)(tmp32b &gt;&gt; 16)))) + ((((int32_t)(((int16_t)(t16b)) * ((int16_t)((tmp32b &amp; 0xffff) &gt;&gt; 1)))) + 0x4000) &gt;&gt; 15)))))" data-ref="_M/LATTICE_MUL_32_32_RSFT16">LATTICE_MUL_32_32_RSFT16</a>(<a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a>, <a class="local col4 ref" href="#44t16b" title='t16b' data-ref="44t16b" data-ref-filename="44t16b">t16b</a>, <a class="local col9 ref" href="#39tmp32b" title='tmp32b' data-ref="39tmp32b" data-ref-filename="39tmp32b">tmp32b</a>);</td></tr>
<tr><th id="167">167</th><td>      <a class="local col5 ref" href="#35fQtmp" title='fQtmp' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</a> = <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>; <i>// Q15</i></td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>      <i>// Calculate g[i][0] = cth[i-1]*stateG[i-1] + sth[i-1]* f[i][0];</i></td></tr>
<tr><th id="170">170</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>  = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(cthQ15[i-1])) * ((int16_t)((stateGQ15[i-1]) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(cthQ15[i-1]) * (uint16_t)((uint16_t)(stateGQ15[i-1]))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col5 ref" href="#25cthQ15" title='cthQ15' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>], <a class="local col8 ref" href="#18stateGQ15" title='stateGQ15' data-ref="18stateGQ15" data-ref-filename="18stateGQ15">stateGQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>]); <i>//Q15*Q15&gt;&gt;15 = Q15</i></td></tr>
<tr><th id="171">171</th><td>      <a class="local col9 ref" href="#39tmp32b" title='tmp32b' data-ref="39tmp32b" data-ref-filename="39tmp32b">tmp32b</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(sthQ15[i-1])) * ((int16_t)((fQtmp) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(sthQ15[i-1]) * (uint16_t)((uint16_t)(fQtmp))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col4 ref" href="#24sthQ15" title='sthQ15' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>-<var>1</var>], <a class="local col5 ref" href="#35fQtmp" title='fQtmp' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</a>); <i>//Q15*Q15&gt;&gt;15 = Q15</i></td></tr>
<tr><th id="172">172</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>  = <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> + <a class="local col9 ref" href="#39tmp32b" title='tmp32b' data-ref="39tmp32b" data-ref-filename="39tmp32b">tmp32b</a>;<i>//Q15+Q15 = Q15</i></td></tr>
<tr><th id="173">173</th><td>      <a class="local col1 ref" href="#41gQ15" title='gQ15' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>][<var>0</var>] = <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>; <i>// Q15</i></td></tr>
<tr><th id="174">174</th><td>    }</td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td>    <i>/* filtering */</i></td></tr>
<tr><th id="177">177</th><td>    <i>/* save the states */</i></td></tr>
<tr><th id="178">178</th><td>    <b>for</b>(<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>=<var>0</var>;<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>&lt;<a class="local col7 ref" href="#17orderCoef" title='orderCoef' data-ref="17orderCoef" data-ref-filename="17orderCoef">orderCoef</a>;<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>++)</td></tr>
<tr><th id="179">179</th><td>    {</td></tr>
<tr><th id="180">180</th><td>      <i>// for 0 &lt;= n &lt; HALF_SUBFRAMELEN - 1:</i></td></tr>
<tr><th id="181">181</th><td><i>      //   f[k+1][n+1] = inv_cth[k]*(f[k][n+1] + sth[k]*g[k][n]);</i></td></tr>
<tr><th id="182">182</th><td><i>      //   g[k+1][n+1] = cth[k]*g[k][n] + sth[k]* f[k+1][n+1];</i></td></tr>
<tr><th id="183">183</th><td>      <a class="ref" href="codec.h.html#WebRtcIsacfix_FilterMaLoopFix" title='WebRtcIsacfix_FilterMaLoopFix' data-ref="WebRtcIsacfix_FilterMaLoopFix" data-ref-filename="WebRtcIsacfix_FilterMaLoopFix">WebRtcIsacfix_FilterMaLoopFix</a>(<a class="local col4 ref" href="#24sthQ15" title='sthQ15' data-ref="24sthQ15" data-ref-filename="24sthQ15">sthQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>], <a class="local col5 ref" href="#25cthQ15" title='cthQ15' data-ref="25cthQ15" data-ref-filename="25cthQ15">cthQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>], <a class="local col3 ref" href="#33inv_cthQ16" title='inv_cthQ16' data-ref="33inv_cthQ16" data-ref-filename="33inv_cthQ16">inv_cthQ16</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>],</td></tr>
<tr><th id="184">184</th><td>                                    &amp;<a class="local col1 ref" href="#41gQ15" title='gQ15' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>][<var>0</var>], &amp;<a class="local col1 ref" href="#41gQ15" title='gQ15' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</a>[<a class="local col9 ref" href="#29k" title='k' data-ref="29k" data-ref-filename="29k">k</a>+<var>1</var>][<var>1</var>], &amp;<a class="local col0 ref" href="#40fQ15vec" title='fQ15vec' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</a>[<var>1</var>]);</td></tr>
<tr><th id="185">185</th><td>    }</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td>    <a class="local col0 ref" href="#40fQ15vec" title='fQ15vec' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</a>[<var>0</var>] = <a class="local col5 ref" href="#35fQtmp" title='fQtmp' data-ref="35fQtmp" data-ref-filename="35fQtmp">fQtmp</a>;</td></tr>
<tr><th id="188">188</th><td></td></tr>
<tr><th id="189">189</th><td>    <b>for</b>(<a class="local col7 ref" href="#27n" title='n' data-ref="27n" data-ref-filename="27n">n</a>=<var>0</var>;<a class="local col7 ref" href="#27n" title='n' data-ref="27n" data-ref-filename="27n">n</a>&lt;<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;<a class="local col7 ref" href="#27n" title='n' data-ref="27n" data-ref-filename="27n">n</a>++)</td></tr>
<tr><th id="190">190</th><td>    {</td></tr>
<tr><th id="191">191</th><td>      <i>//gain32 &gt;&gt;= gain_sh; // Q(17+gain_sh) -&gt; Q17</i></td></tr>
<tr><th id="192">192</th><td>      <a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#50" title="(((int32_t)(((int16_t)(gain16)) * ((int16_t)(fQ15vec[n] &gt;&gt; 16)))) + ((((int32_t)(((int16_t)(gain16)) * ((int16_t)((fQ15vec[n] &amp; 0xffff) &gt;&gt; 1)))) + 0x4000) &gt;&gt; 15))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT16">WEBRTC_SPL_MUL_16_32_RSFT16</a>(<a class="local col6 ref" href="#36gain16" title='gain16' data-ref="36gain16" data-ref-filename="36gain16">gain16</a>, <a class="local col0 ref" href="#40fQ15vec" title='fQ15vec' data-ref="40fQ15vec" data-ref-filename="40fQ15vec">fQ15vec</a>[<a class="local col7 ref" href="#27n" title='n' data-ref="27n" data-ref-filename="27n">n</a>]); <i>//Q(1+gain_sh)*Q15&gt;&gt;16 = Q(gain_sh)</i></td></tr>
<tr><th id="193">193</th><td>      <a class="local col2 ref" href="#42sh" title='sh' data-ref="42sh" data-ref-filename="42sh">sh</a> = <var>9</var>-<a class="local col7 ref" href="#37gain_sh" title='gain_sh' data-ref="37gain_sh" data-ref-filename="37gain_sh">gain_sh</a>; <i>//number of needed shifts to reach Q9</i></td></tr>
<tr><th id="194">194</th><td>      <a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>) <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#80" title="((sh) &gt;= 0 ? (tmp32) * (1 &lt;&lt; (sh)) : (tmp32) &gt;&gt; -(sh))" data-ref="_M/WEBRTC_SPL_SHIFT_W32">WEBRTC_SPL_SHIFT_W32</a>(<a class="local col8 ref" href="#38tmp32" title='tmp32' data-ref="38tmp32" data-ref-filename="38tmp32">tmp32</a>, <a class="local col2 ref" href="#42sh" title='sh' data-ref="42sh" data-ref-filename="42sh">sh</a>);</td></tr>
<tr><th id="195">195</th><td>      <a class="local col3 ref" href="#23lat_outQ9" title='lat_outQ9' data-ref="23lat_outQ9" data-ref-filename="23lat_outQ9">lat_outQ9</a>[<a class="local col7 ref" href="#27n" title='n' data-ref="27n" data-ref-filename="27n">n</a> + <a class="local col5 ref" href="#45temp1" title='temp1' data-ref="45temp1" data-ref-filename="45temp1">temp1</a>] = <a class="local col3 ref" href="#43t16a" title='t16a' data-ref="43t16a" data-ref-filename="43t16a">t16a</a>;</td></tr>
<tr><th id="196">196</th><td>    }</td></tr>
<tr><th id="197">197</th><td></td></tr>
<tr><th id="198">198</th><td>    <i>/* save the states */</i></td></tr>
<tr><th id="199">199</th><td>    <b>for</b> (<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>=<var>0</var>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>&lt;<a class="local col2 ref" href="#32ord_1" title='ord_1' data-ref="32ord_1" data-ref-filename="32ord_1">ord_1</a>;<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>++)</td></tr>
<tr><th id="200">200</th><td>    {</td></tr>
<tr><th id="201">201</th><td>      <a class="local col8 ref" href="#18stateGQ15" title='stateGQ15' data-ref="18stateGQ15" data-ref-filename="18stateGQ15">stateGQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>] = <a class="local col1 ref" href="#41gQ15" title='gQ15' data-ref="41gQ15" data-ref-filename="41gQ15">gQ15</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>][<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>-<var>1</var>];</td></tr>
<tr><th id="202">202</th><td>    }</td></tr>
<tr><th id="203">203</th><td>    <i>//process next frame</i></td></tr>
<tr><th id="204">204</th><td>  }</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td>  <b>return</b>;</td></tr>
<tr><th id="207">207</th><td>}</td></tr>
<tr><th id="208">208</th><td></td></tr>
<tr><th id="209">209</th><td><i  data-doc="OverflowingLShiftS32">// Left shift of an int32_t that's allowed to overflow. (It's still undefined</i></td></tr>
<tr><th id="210">210</th><td><i  data-doc="OverflowingLShiftS32">// behavior, so not a good idea; this just makes UBSan ignore the violation, so</i></td></tr>
<tr><th id="211">211</th><td><i  data-doc="OverflowingLShiftS32">// that our old code can continue to do what it's always been doing.)</i></td></tr>
<tr><th id="212">212</th><td><em>static</em> <b>inline</b> <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <a class="macro" href="../../../../../../rtc_base/sanitizer.h.html#44" title="__attribute__((no_sanitize(&quot;shift&quot;)))" data-ref="_M/RTC_NO_SANITIZE">RTC_NO_SANITIZE</a>(<q>"shift"</q>)</td></tr>
<tr><th id="213">213</th><td>    <dfn class="tu decl def fn" id="OverflowingLShiftS32" title='OverflowingLShiftS32' data-type='int32_t OverflowingLShiftS32(int32_t x, int shift)' data-ref="OverflowingLShiftS32" data-ref-filename="OverflowingLShiftS32">OverflowingLShiftS32</dfn>(<span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col6 decl" id="46x" title='x' data-type='int32_t' data-ref="46x" data-ref-filename="46x">x</dfn>, <em>int</em> <dfn class="local col7 decl" id="47shift" title='shift' data-type='int' data-ref="47shift" data-ref-filename="47shift">shift</dfn>) {</td></tr>
<tr><th id="214">214</th><td>  <b>return</b> <a class="local col6 ref" href="#46x" title='x' data-ref="46x" data-ref-filename="46x">x</a> &lt;&lt; <a class="local col7 ref" href="#47shift" title='shift' data-ref="47shift" data-ref-filename="47shift">shift</a>;</td></tr>
<tr><th id="215">215</th><td>}</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td><i>/* ----------------AR filter-------------------------*/</i></td></tr>
<tr><th id="218">218</th><td><i>/* filter the signal using normalized lattice filter */</i></td></tr>
<tr><th id="219">219</th><td><em>void</em> <dfn class="decl def fn" id="WebRtcIsacfix_NormLatticeFilterAr" title='WebRtcIsacfix_NormLatticeFilterAr' data-ref="WebRtcIsacfix_NormLatticeFilterAr" data-ref-filename="WebRtcIsacfix_NormLatticeFilterAr">WebRtcIsacfix_NormLatticeFilterAr</dfn>(<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="48orderCoef" title='orderCoef' data-type='size_t' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</dfn>,</td></tr>
<tr><th id="220">220</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col9 decl" id="49stateGQ0" title='stateGQ0' data-type='int16_t *' data-ref="49stateGQ0" data-ref-filename="49stateGQ0">stateGQ0</dfn>,</td></tr>
<tr><th id="221">221</th><td>                                       <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> *<dfn class="local col0 decl" id="50lat_inQ25" title='lat_inQ25' data-type='int32_t *' data-ref="50lat_inQ25" data-ref-filename="50lat_inQ25">lat_inQ25</dfn>,</td></tr>
<tr><th id="222">222</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col1 decl" id="51filt_coefQ15" title='filt_coefQ15' data-type='int16_t *' data-ref="51filt_coefQ15" data-ref-filename="51filt_coefQ15">filt_coefQ15</dfn>,</td></tr>
<tr><th id="223">223</th><td>                                       <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> *<dfn class="local col2 decl" id="52gain_lo_hiQ17" title='gain_lo_hiQ17' data-type='int32_t *' data-ref="52gain_lo_hiQ17" data-ref-filename="52gain_lo_hiQ17">gain_lo_hiQ17</dfn>,</td></tr>
<tr><th id="224">224</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col3 decl" id="53lo_hi" title='lo_hi' data-type='int16_t' data-ref="53lo_hi" data-ref-filename="53lo_hi">lo_hi</dfn>,</td></tr>
<tr><th id="225">225</th><td>                                       <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> *<dfn class="local col4 decl" id="54lat_outQ0" title='lat_outQ0' data-type='int16_t *' data-ref="54lat_outQ0" data-ref-filename="54lat_outQ0">lat_outQ0</dfn>)</td></tr>
<tr><th id="226">226</th><td>{</td></tr>
<tr><th id="227">227</th><td>  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="55ii" title='ii' data-type='size_t' data-ref="55ii" data-ref-filename="55ii">ii</dfn>, <dfn class="local col6 decl" id="56k" title='k' data-type='size_t' data-ref="56k" data-ref-filename="56k">k</dfn>, <dfn class="local col7 decl" id="57i" title='i' data-type='size_t' data-ref="57i" data-ref-filename="57i">i</dfn>;</td></tr>
<tr><th id="228">228</th><td>  <em>int</em> <dfn class="local col8 decl" id="58n" title='n' data-type='int' data-ref="58n" data-ref-filename="58n">n</dfn>, <dfn class="local col9 decl" id="59u" title='u' data-type='int' data-ref="59u" data-ref-filename="59u">u</dfn>;</td></tr>
<tr><th id="229">229</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col0 decl" id="60sthQ15" title='sthQ15' data-type='int16_t [12]' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>];</td></tr>
<tr><th id="230">230</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col1 decl" id="61cthQ15" title='cthQ15' data-type='int16_t [12]' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>];</td></tr>
<tr><th id="231">231</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col2 decl" id="62tmp32" title='tmp32' data-type='int32_t' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</dfn>;</td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col3 decl" id="63tmpAR" title='tmpAR' data-type='int16_t' data-ref="63tmpAR" data-ref-filename="63tmpAR">tmpAR</dfn>;</td></tr>
<tr><th id="235">235</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col4 decl" id="64ARfQ0vec" title='ARfQ0vec' data-type='int16_t [40]' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</dfn>[<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>];</td></tr>
<tr><th id="236">236</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col5 decl" id="65ARgQ0vec" title='ARgQ0vec' data-type='int16_t [13]' data-ref="65ARgQ0vec" data-ref-filename="65ARgQ0vec">ARgQ0vec</dfn>[<a class="macro" href="settings.h.html#111" title="12" data-ref="_M/MAX_AR_MODEL_ORDER">MAX_AR_MODEL_ORDER</a>+<var>1</var>];</td></tr>
<tr><th id="237">237</th><td></td></tr>
<tr><th id="238">238</th><td>  <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col6 decl" id="66inv_gain32" title='inv_gain32' data-type='int32_t' data-ref="66inv_gain32" data-ref-filename="66inv_gain32">inv_gain32</dfn>;</td></tr>
<tr><th id="239">239</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col7 decl" id="67inv_gain16" title='inv_gain16' data-type='int16_t' data-ref="67inv_gain16" data-ref-filename="67inv_gain16">inv_gain16</dfn>;</td></tr>
<tr><th id="240">240</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col8 decl" id="68den16" title='den16' data-type='int16_t' data-ref="68den16" data-ref-filename="68den16">den16</dfn>;</td></tr>
<tr><th id="241">241</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col9 decl" id="69sh" title='sh' data-type='int16_t' data-ref="69sh" data-ref-filename="69sh">sh</dfn>;</td></tr>
<tr><th id="242">242</th><td></td></tr>
<tr><th id="243">243</th><td>  <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span> <dfn class="local col0 decl" id="70temp2" title='temp2' data-type='int16_t' data-ref="70temp2" data-ref-filename="70temp2">temp2</dfn>,<dfn class="local col1 decl" id="71temp3" title='temp3' data-type='int16_t' data-ref="71temp3" data-ref-filename="71temp3">temp3</dfn>;</td></tr>
<tr><th id="244">244</th><td>  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="72ord_1" title='ord_1' data-type='size_t' data-ref="72ord_1" data-ref-filename="72ord_1">ord_1</dfn> = <a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>+<var>1</var>;</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>  <b>for</b> (<a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a>=<var>0</var>;<a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a>&lt;<a class="macro" href="settings.h.html#45" title="6" data-ref="_M/SUBFRAMES">SUBFRAMES</a>;<a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a>++)</td></tr>
<tr><th id="247">247</th><td>  {</td></tr>
<tr><th id="248">248</th><td>    <span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span> <dfn class="local col3 decl" id="73temp1" title='temp1' data-type='int32_t' data-ref="73temp1" data-ref-filename="73temp1">temp1</dfn> = <a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a> * <a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>    <i>//set the denominator and numerator of the Direct Form</i></td></tr>
<tr><th id="251">251</th><td>    <a class="local col0 ref" href="#70temp2" title='temp2' data-ref="70temp2" data-ref-filename="70temp2">temp2</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a> * <a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>);</td></tr>
<tr><th id="252">252</th><td>    <a class="local col1 ref" href="#71temp3" title='temp3' data-ref="71temp3" data-ref-filename="71temp3">temp3</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<var>2</var> * <a class="local col9 ref" href="#59u" title='u' data-ref="59u" data-ref-filename="59u">u</a> + <a class="local col3 ref" href="#53lo_hi" title='lo_hi' data-ref="53lo_hi" data-ref-filename="53lo_hi">lo_hi</a>);</td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td>    <b>for</b> (<a class="local col5 ref" href="#55ii" title='ii' data-ref="55ii" data-ref-filename="55ii">ii</a>=<var>0</var>; <a class="local col5 ref" href="#55ii" title='ii' data-ref="55ii" data-ref-filename="55ii">ii</a>&lt;<a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>; <a class="local col5 ref" href="#55ii" title='ii' data-ref="55ii" data-ref-filename="55ii">ii</a>++) {</td></tr>
<tr><th id="255">255</th><td>      <a class="local col0 ref" href="#60sthQ15" title='sthQ15' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</a>[<a class="local col5 ref" href="#55ii" title='ii' data-ref="55ii" data-ref-filename="55ii">ii</a>] = <a class="local col1 ref" href="#51filt_coefQ15" title='filt_coefQ15' data-ref="51filt_coefQ15" data-ref-filename="51filt_coefQ15">filt_coefQ15</a>[<a class="local col0 ref" href="#70temp2" title='temp2' data-ref="70temp2" data-ref-filename="70temp2">temp2</a>+<a class="local col5 ref" href="#55ii" title='ii' data-ref="55ii" data-ref-filename="55ii">ii</a>];</td></tr>
<tr><th id="256">256</th><td>    }</td></tr>
<tr><th id="257">257</th><td></td></tr>
<tr><th id="258">258</th><td>    <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#WebRtcSpl_SqrtOfOneMinusXSquared" title='WebRtcSpl_SqrtOfOneMinusXSquared' data-ref="WebRtcSpl_SqrtOfOneMinusXSquared" data-ref-filename="WebRtcSpl_SqrtOfOneMinusXSquared">WebRtcSpl_SqrtOfOneMinusXSquared</a>(<a class="local col0 ref" href="#60sthQ15" title='sthQ15' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</a>, <a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>, <a class="local col1 ref" href="#61cthQ15" title='cthQ15' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</a>);</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td>    <i>// Originally, this line was assumed to never overflow, since "[s]imulation</i></td></tr>
<tr><th id="261">261</th><td><i>    // of the 25 files shows that maximum value in the vector gain_lo_hiQ17[]</i></td></tr>
<tr><th id="262">262</th><td><i>    // is 441344, which means that it is log2((2^31)/441344) = 12.2 shifting</i></td></tr>
<tr><th id="263">263</th><td><i>    // bits from saturation. Therefore, it should be safe to use Q27 instead of</i></td></tr>
<tr><th id="264">264</th><td><i>    // Q17." However, a fuzzer test succeeded in provoking an overflow here,</i></td></tr>
<tr><th id="265">265</th><td><i>    // which we ignore on the theory that only "abnormal" inputs cause</i></td></tr>
<tr><th id="266">266</th><td><i>    // overflow.</i></td></tr>
<tr><th id="267">267</th><td>    <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = <a class="tu ref fn" href="#OverflowingLShiftS32" title='OverflowingLShiftS32' data-use='c' data-ref="OverflowingLShiftS32" data-ref-filename="OverflowingLShiftS32">OverflowingLShiftS32</a>(<a class="local col2 ref" href="#52gain_lo_hiQ17" title='gain_lo_hiQ17' data-ref="52gain_lo_hiQ17" data-ref-filename="52gain_lo_hiQ17">gain_lo_hiQ17</a>[<a class="local col1 ref" href="#71temp3" title='temp3' data-ref="71temp3" data-ref-filename="71temp3">temp3</a>], <var>10</var>);  <i>// Q27</i></td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>    <b>for</b> (<a class="local col6 ref" href="#56k" title='k' data-ref="56k" data-ref-filename="56k">k</a>=<var>0</var>;<a class="local col6 ref" href="#56k" title='k' data-ref="56k" data-ref-filename="56k">k</a>&lt;<a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>;<a class="local col6 ref" href="#56k" title='k' data-ref="56k" data-ref-filename="56k">k</a>++) {</td></tr>
<tr><th id="270">270</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#62" title="((((int32_t)(((int16_t)(cthQ15[k])) * ((int16_t)((tmp32) &gt;&gt; 16)))) * (1 &lt;&lt; 1)) + (((((int32_t)(int16_t)(cthQ15[k]) * (uint16_t)((uint16_t)(tmp32))) &gt;&gt; 1) + 0x2000) &gt;&gt; 14))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT15">WEBRTC_SPL_MUL_16_32_RSFT15</a>(<a class="local col1 ref" href="#61cthQ15" title='cthQ15' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</a>[<a class="local col6 ref" href="#56k" title='k' data-ref="56k" data-ref-filename="56k">k</a>], <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>// Q15*Q27&gt;&gt;15 = Q27</i></td></tr>
<tr><th id="271">271</th><td>    }</td></tr>
<tr><th id="272">272</th><td></td></tr>
<tr><th id="273">273</th><td>    <a class="local col9 ref" href="#69sh" title='sh' data-ref="69sh" data-ref-filename="69sh">sh</a> = <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/spl_inl.h.html#WebRtcSpl_NormW32" title='WebRtcSpl_NormW32' data-ref="WebRtcSpl_NormW32" data-ref-filename="WebRtcSpl_NormW32">WebRtcSpl_NormW32</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>// tmp32 is the gain</i></td></tr>
<tr><th id="274">274</th><td>    <a class="local col8 ref" href="#68den16" title='den16' data-ref="68den16" data-ref-filename="68den16">den16</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>) <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#80" title="((sh-16) &gt;= 0 ? (tmp32) * (1 &lt;&lt; (sh-16)) : (tmp32) &gt;&gt; -(sh-16))" data-ref="_M/WEBRTC_SPL_SHIFT_W32">WEBRTC_SPL_SHIFT_W32</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>, <a class="local col9 ref" href="#69sh" title='sh' data-ref="69sh" data-ref-filename="69sh">sh</a>-<var>16</var>); <i>//Q(27+sh-16) = Q(sh+11) (all 16 bits are value bits)</i></td></tr>
<tr><th id="275">275</th><td>    <a class="local col6 ref" href="#66inv_gain32" title='inv_gain32' data-ref="66inv_gain32" data-ref-filename="66inv_gain32">inv_gain32</a> = <a class="ref fn" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#WebRtcSpl_DivW32W16" title='WebRtcSpl_DivW32W16' data-ref="WebRtcSpl_DivW32W16" data-ref-filename="WebRtcSpl_DivW32W16">WebRtcSpl_DivW32W16</a>((<span class='typedef' title='int32_t' data-type='int' data-ref="int32_t" data-ref-filename="int32_t">int32_t</span>)<var>2147483647</var>, <a class="local col8 ref" href="#68den16" title='den16' data-ref="68den16" data-ref-filename="68den16">den16</a>); <i>// 1/gain in Q31/Q(sh+11) = Q(20-sh)</i></td></tr>
<tr><th id="276">276</th><td></td></tr>
<tr><th id="277">277</th><td>    <i>//initial conditions</i></td></tr>
<tr><th id="278">278</th><td>    <a class="local col7 ref" href="#67inv_gain16" title='inv_gain16' data-ref="67inv_gain16" data-ref-filename="67inv_gain16">inv_gain16</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)(<a class="local col6 ref" href="#66inv_gain32" title='inv_gain32' data-ref="66inv_gain32" data-ref-filename="66inv_gain32">inv_gain32</a> &gt;&gt; <var>2</var>);  <i>// 1/gain in Q(20-sh-2) = Q(18-sh)</i></td></tr>
<tr><th id="279">279</th><td></td></tr>
<tr><th id="280">280</th><td>    <b>for</b> (<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>=<var>0</var>;<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>&lt;<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>++)</td></tr>
<tr><th id="281">281</th><td>    {</td></tr>
<tr><th id="282">282</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = <a class="tu ref fn" href="#OverflowingLShiftS32" title='OverflowingLShiftS32' data-use='c' data-ref="OverflowingLShiftS32" data-ref-filename="OverflowingLShiftS32">OverflowingLShiftS32</a>(<a class="local col0 ref" href="#50lat_inQ25" title='lat_inQ25' data-ref="50lat_inQ25" data-ref-filename="50lat_inQ25">lat_inQ25</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> + <a class="local col3 ref" href="#73temp1" title='temp1' data-ref="73temp1" data-ref-filename="73temp1">temp1</a>], <var>1</var>);  <i>// Q25-&gt;Q26</i></td></tr>
<tr><th id="283">283</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#50" title="(((int32_t)(((int16_t)(inv_gain16)) * ((int16_t)(tmp32 &gt;&gt; 16)))) + ((((int32_t)(((int16_t)(inv_gain16)) * ((int16_t)((tmp32 &amp; 0xffff) &gt;&gt; 1)))) + 0x4000) &gt;&gt; 15))" data-ref="_M/WEBRTC_SPL_MUL_16_32_RSFT16">WEBRTC_SPL_MUL_16_32_RSFT16</a>(<a class="local col7 ref" href="#67inv_gain16" title='inv_gain16' data-ref="67inv_gain16" data-ref-filename="67inv_gain16">inv_gain16</a>, <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>//lat_in[]*inv_gain in (Q(18-sh)*Q26)&gt;&gt;16 = Q(28-sh)</i></td></tr>
<tr><th id="284">284</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = <a class="macro" href="../../../../../../common_audio/signal_processing/include/signal_processing_library.h.html#80" title="((-(28-sh)) &gt;= 0 ? (tmp32) * (1 &lt;&lt; (-(28-sh))) : (tmp32) &gt;&gt; -(-(28-sh)))" data-ref="_M/WEBRTC_SPL_SHIFT_W32">WEBRTC_SPL_SHIFT_W32</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>, -(<var>28</var>-<a class="local col9 ref" href="#69sh" title='sh' data-ref="69sh" data-ref-filename="69sh">sh</a>)); <i>// lat_in[]*inv_gain in Q0</i></td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td>      <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>] = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)<a class="ref fn" href="../../../../../../common_audio/signal_processing/include/spl_inl.h.html#WebRtcSpl_SatW32ToW16" title='WebRtcSpl_SatW32ToW16' data-ref="WebRtcSpl_SatW32ToW16" data-ref-filename="WebRtcSpl_SatW32ToW16">WebRtcSpl_SatW32ToW16</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>// Q0</i></td></tr>
<tr><th id="287">287</th><td>    }</td></tr>
<tr><th id="288">288</th><td></td></tr>
<tr><th id="289">289</th><td>    <i>// Get the state of f &amp; g for the first input, for all orders.</i></td></tr>
<tr><th id="290">290</th><td>    <b>for</b> (<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> = <a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>; <a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> &gt; <var>0</var>; <a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>--)</td></tr>
<tr><th id="291">291</th><td>    {</td></tr>
<tr><th id="292">292</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = (<a class="local col1 ref" href="#61cthQ15" title='cthQ15' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] * <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<var>0</var>] - <a class="local col0 ref" href="#60sthQ15" title='sthQ15' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] * <a class="local col9 ref" href="#49stateGQ0" title='stateGQ0' data-ref="49stateGQ0" data-ref-filename="49stateGQ0">stateGQ0</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] +</td></tr>
<tr><th id="293">293</th><td>               <var>16384</var>) &gt;&gt; <var>15</var>;</td></tr>
<tr><th id="294">294</th><td>      <a class="local col3 ref" href="#63tmpAR" title='tmpAR' data-ref="63tmpAR" data-ref-filename="63tmpAR">tmpAR</a> = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)<a class="ref fn" href="../../../../../../common_audio/signal_processing/include/spl_inl.h.html#WebRtcSpl_SatW32ToW16" title='WebRtcSpl_SatW32ToW16' data-ref="WebRtcSpl_SatW32ToW16" data-ref-filename="WebRtcSpl_SatW32ToW16">WebRtcSpl_SatW32ToW16</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>// Q0</i></td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>      <a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a> = (<a class="local col0 ref" href="#60sthQ15" title='sthQ15' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] * <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<var>0</var>] + <a class="local col1 ref" href="#61cthQ15" title='cthQ15' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] * <a class="local col9 ref" href="#49stateGQ0" title='stateGQ0' data-ref="49stateGQ0" data-ref-filename="49stateGQ0">stateGQ0</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a> - <var>1</var>] +</td></tr>
<tr><th id="297">297</th><td>               <var>16384</var>) &gt;&gt; <var>15</var>;</td></tr>
<tr><th id="298">298</th><td>      <a class="local col5 ref" href="#65ARgQ0vec" title='ARgQ0vec' data-ref="65ARgQ0vec" data-ref-filename="65ARgQ0vec">ARgQ0vec</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>] = (<span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>)<a class="ref fn" href="../../../../../../common_audio/signal_processing/include/spl_inl.h.html#WebRtcSpl_SatW32ToW16" title='WebRtcSpl_SatW32ToW16' data-ref="WebRtcSpl_SatW32ToW16" data-ref-filename="WebRtcSpl_SatW32ToW16">WebRtcSpl_SatW32ToW16</a>(<a class="local col2 ref" href="#62tmp32" title='tmp32' data-ref="62tmp32" data-ref-filename="62tmp32">tmp32</a>); <i>// Q0</i></td></tr>
<tr><th id="299">299</th><td>      <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<var>0</var>] = <a class="local col3 ref" href="#63tmpAR" title='tmpAR' data-ref="63tmpAR" data-ref-filename="63tmpAR">tmpAR</a>;</td></tr>
<tr><th id="300">300</th><td>    }</td></tr>
<tr><th id="301">301</th><td>    <a class="local col5 ref" href="#65ARgQ0vec" title='ARgQ0vec' data-ref="65ARgQ0vec" data-ref-filename="65ARgQ0vec">ARgQ0vec</a>[<var>0</var>] = <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<var>0</var>];</td></tr>
<tr><th id="302">302</th><td></td></tr>
<tr><th id="303">303</th><td>    <i>// Filter ARgQ0vec[] and ARfQ0vec[] through coefficients cthQ15[] and sthQ15[].</i></td></tr>
<tr><th id="304">304</th><td>    <a class="ref fn" href="#WebRtcIsacfix_FilterArLoop" title='WebRtcIsacfix_FilterArLoop' data-ref="WebRtcIsacfix_FilterArLoop" data-ref-filename="WebRtcIsacfix_FilterArLoop">WebRtcIsacfix_FilterArLoop</a>(<a class="local col5 ref" href="#65ARgQ0vec" title='ARgQ0vec' data-ref="65ARgQ0vec" data-ref-filename="65ARgQ0vec">ARgQ0vec</a>, <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>, <a class="local col1 ref" href="#61cthQ15" title='cthQ15' data-ref="61cthQ15" data-ref-filename="61cthQ15">cthQ15</a>, <a class="local col0 ref" href="#60sthQ15" title='sthQ15' data-ref="60sthQ15" data-ref-filename="60sthQ15">sthQ15</a>, <a class="local col8 ref" href="#48orderCoef" title='orderCoef' data-ref="48orderCoef" data-ref-filename="48orderCoef">orderCoef</a>);</td></tr>
<tr><th id="305">305</th><td></td></tr>
<tr><th id="306">306</th><td>    <b>for</b>(<a class="local col8 ref" href="#58n" title='n' data-ref="58n" data-ref-filename="58n">n</a>=<var>0</var>;<a class="local col8 ref" href="#58n" title='n' data-ref="58n" data-ref-filename="58n">n</a>&lt;<a class="macro" href="settings.h.html#49" title="40" data-ref="_M/HALF_SUBFRAMELEN">HALF_SUBFRAMELEN</a>;<a class="local col8 ref" href="#58n" title='n' data-ref="58n" data-ref-filename="58n">n</a>++)</td></tr>
<tr><th id="307">307</th><td>    {</td></tr>
<tr><th id="308">308</th><td>      <a class="local col4 ref" href="#54lat_outQ0" title='lat_outQ0' data-ref="54lat_outQ0" data-ref-filename="54lat_outQ0">lat_outQ0</a>[<a class="local col8 ref" href="#58n" title='n' data-ref="58n" data-ref-filename="58n">n</a> + <a class="local col3 ref" href="#73temp1" title='temp1' data-ref="73temp1" data-ref-filename="73temp1">temp1</a>] = <a class="local col4 ref" href="#64ARfQ0vec" title='ARfQ0vec' data-ref="64ARfQ0vec" data-ref-filename="64ARfQ0vec">ARfQ0vec</a>[<a class="local col8 ref" href="#58n" title='n' data-ref="58n" data-ref-filename="58n">n</a>];</td></tr>
<tr><th id="309">309</th><td>    }</td></tr>
<tr><th id="310">310</th><td></td></tr>
<tr><th id="311">311</th><td></td></tr>
<tr><th id="312">312</th><td>    <i>/* cannot use memcpy in the following */</i></td></tr>
<tr><th id="313">313</th><td></td></tr>
<tr><th id="314">314</th><td>    <b>for</b> (<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>=<var>0</var>;<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>&lt;<a class="local col2 ref" href="#72ord_1" title='ord_1' data-ref="72ord_1" data-ref-filename="72ord_1">ord_1</a>;<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>++)</td></tr>
<tr><th id="315">315</th><td>    {</td></tr>
<tr><th id="316">316</th><td>      <a class="local col9 ref" href="#49stateGQ0" title='stateGQ0' data-ref="49stateGQ0" data-ref-filename="49stateGQ0">stateGQ0</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>] = <a class="local col5 ref" href="#65ARgQ0vec" title='ARgQ0vec' data-ref="65ARgQ0vec" data-ref-filename="65ARgQ0vec">ARgQ0vec</a>[<a class="local col7 ref" href="#57i" title='i' data-ref="57i" data-ref-filename="57i">i</a>];</td></tr>
<tr><th id="317">317</th><td>    }</td></tr>
<tr><th id="318">318</th><td>  }</td></tr>
<tr><th id="319">319</th><td></td></tr>
<tr><th id="320">320</th><td>  <b>return</b>;</td></tr>
<tr><th id="321">321</th><td>}</td></tr>
<tr><th id="322">322</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
