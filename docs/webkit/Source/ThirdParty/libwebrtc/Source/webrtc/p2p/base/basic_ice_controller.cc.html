<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>basic_ice_controller.cc source code [webkit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc'; var root_path = '../../../../../../../..'; var data_path = '../../../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../../..'>webkit</a>/<a href='../../../../../..'>Source</a>/<a href='../../../../..'>ThirdParty</a>/<a href='../../../..'>libwebrtc</a>/<a href='../../..'>Source</a>/<a href='../..'>webrtc</a>/<a href='..'>p2p</a>/<a href='./'>base</a>/<a href='basic_ice_controller.cc.html'>basic_ice_controller.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> *  Copyright 2019 The WebRTC Project Authors. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> *  Use of this source code is governed by a BSD-style license</i></td></tr>
<tr><th id="5">5</th><td><i> *  that can be found in the LICENSE file in the root of the source</i></td></tr>
<tr><th id="6">6</th><td><i> *  tree. An additional intellectual property rights grant can be found</i></td></tr>
<tr><th id="7">7</th><td><i> *  in the file PATENTS.  All contributing project authors may</i></td></tr>
<tr><th id="8">8</th><td><i> *  be found in the AUTHORS file in the root of the source tree.</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="basic_ice_controller.h.html">"p2p/base/basic_ice_controller.h"</a></u></td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><b>namespace</b> {</td></tr>
<tr><th id="14">14</th><td></td></tr>
<tr><th id="15">15</th><td><i  data-doc="(anonymousnamespace)::kMinImprovement">// The minimum improvement in RTT that justifies a switch.</i></td></tr>
<tr><th id="16">16</th><td><em>const</em> <em>int</em> <dfn class="tu decl def" id="(anonymousnamespace)::kMinImprovement" title='(anonymous namespace)::kMinImprovement' data-type='const int' data-ref="(anonymousnamespace)::kMinImprovement" data-ref-filename="(anonymousnamespace)..kMinImprovement">kMinImprovement</dfn> = <var>10</var>;</td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><em>bool</em> <dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsRelayRelay' data-type='bool (anonymous namespace)::IsRelayRelay(const cricket::Connection * conn)' data-ref="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE">IsRelayRelay</dfn>(<em>const</em> <span class="namespace">cricket::</span><a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col5 decl" id="45conn" title='conn' data-type='const cricket::Connection *' data-ref="45conn" data-ref-filename="45conn">conn</dfn>) {</td></tr>
<tr><th id="19">19</th><td>  <b>return</b> <a class="local col5 ref" href="#45conn" title='conn' data-ref="45conn" data-ref-filename="45conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection15local_candidateEv" title='cricket::Connection::local_candidate' data-ref="_ZNK7cricket10Connection15local_candidateEv" data-ref-filename="_ZNK7cricket10Connection15local_candidateEv">local_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate4typeEv" title='cricket::Candidate::type' data-ref="_ZNK7cricket9Candidate4typeEv" data-ref-filename="_ZNK7cricket9Candidate4typeEv">type</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <span class="namespace">cricket::</span><a class="ref" href="port.h.html#cricket::RELAY_PORT_TYPE" title='cricket::RELAY_PORT_TYPE' data-ref="cricket::RELAY_PORT_TYPE" data-ref-filename="cricket..RELAY_PORT_TYPE">RELAY_PORT_TYPE</a> &amp;&amp;</td></tr>
<tr><th id="20">20</th><td>         <a class="local col5 ref" href="#45conn" title='conn' data-ref="45conn" data-ref-filename="45conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate4typeEv" title='cricket::Candidate::type' data-ref="_ZNK7cricket9Candidate4typeEv" data-ref-filename="_ZNK7cricket9Candidate4typeEv">type</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <span class="namespace">cricket::</span><a class="ref" href="port.h.html#cricket::RELAY_PORT_TYPE" title='cricket::RELAY_PORT_TYPE' data-ref="cricket::RELAY_PORT_TYPE" data-ref-filename="cricket..RELAY_PORT_TYPE">RELAY_PORT_TYPE</a>;</td></tr>
<tr><th id="21">21</th><td>}</td></tr>
<tr><th id="22">22</th><td></td></tr>
<tr><th id="23">23</th><td><em>bool</em> <dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsUdp' data-type='bool (anonymous namespace)::IsUdp(const cricket::Connection * conn)' data-ref="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE">IsUdp</dfn>(<em>const</em> <span class="namespace">cricket::</span><a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="46conn" title='conn' data-type='const cricket::Connection *' data-ref="46conn" data-ref-filename="46conn">conn</dfn>) {</td></tr>
<tr><th id="24">24</th><td>  <b>return</b> <a class="local col6 ref" href="#46conn" title='conn' data-ref="46conn" data-ref-filename="46conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection15local_candidateEv" title='cricket::Connection::local_candidate' data-ref="_ZNK7cricket10Connection15local_candidateEv" data-ref-filename="_ZNK7cricket10Connection15local_candidateEv">local_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate14relay_protocolEv" title='cricket::Candidate::relay_protocol' data-ref="_ZNK7cricket9Candidate14relay_protocolEv" data-ref-filename="_ZNK7cricket9Candidate14relay_protocolEv">relay_protocol</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <span class="namespace">cricket::</span><a class="ref" href="../../rtc_base/net_helper.h.html#cricket::UDP_PROTOCOL_NAME" title='cricket::UDP_PROTOCOL_NAME' data-ref="cricket::UDP_PROTOCOL_NAME" data-ref-filename="cricket..UDP_PROTOCOL_NAME">UDP_PROTOCOL_NAME</a>;</td></tr>
<tr><th id="25">25</th><td>}</td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><i  data-doc="(anonymousnamespace)::a_is_better">// TODO(qingsi) Use an enum to replace the following constants for all</i></td></tr>
<tr><th id="28">28</th><td><i  data-doc="(anonymousnamespace)::a_is_better">// comparision results.</i></td></tr>
<tr><th id="29">29</th><td><em>static</em> <b>constexpr</b> <em>int</em> <dfn class="tu decl def" id="(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-type='const int' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</dfn> = <var>1</var>;</td></tr>
<tr><th id="30">30</th><td><em>static</em> <b>constexpr</b> <em>int</em> <dfn class="tu decl def" id="(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-type='const int' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</dfn> = -<var>1</var>;</td></tr>
<tr><th id="31">31</th><td><em>static</em> <b>constexpr</b> <em>int</em> <dfn class="tu decl def" id="(anonymousnamespace)::a_and_b_equal" title='(anonymous namespace)::a_and_b_equal' data-type='const int' data-ref="(anonymousnamespace)::a_and_b_equal" data-ref-filename="(anonymousnamespace)..a_and_b_equal">a_and_b_equal</dfn> = <var>0</var>;</td></tr>
<tr><th id="32">32</th><td></td></tr>
<tr><th id="33">33</th><td><em>bool</em> <dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" title='(anonymous namespace)::LocalCandidateUsesPreferredNetwork' data-type='bool (anonymous namespace)::LocalCandidateUsesPreferredNetwork(const cricket::Connection * conn, absl::optional&lt;rtc::AdapterType&gt; network_preference)' data-ref="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE">LocalCandidateUsesPreferredNetwork</dfn>(</td></tr>
<tr><th id="34">34</th><td>    <em>const</em> <span class="namespace">cricket::</span><a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col7 decl" id="47conn" title='conn' data-type='const cricket::Connection *' data-ref="47conn" data-ref-filename="47conn">conn</dfn>,</td></tr>
<tr><th id="35">35</th><td>    <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network_constants.h.html#rtc::AdapterType" title='rtc::AdapterType' data-ref="rtc::AdapterType" data-ref-filename="rtc..AdapterType">AdapterType</a>&gt; <dfn class="local col8 decl" id="48network_preference" title='network_preference' data-type='absl::optional&lt;rtc::AdapterType&gt;' data-ref="48network_preference" data-ref-filename="48network_preference">network_preference</dfn>) {</td></tr>
<tr><th id="36">36</th><td>  <span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network_constants.h.html#rtc::AdapterType" title='rtc::AdapterType' data-ref="rtc::AdapterType" data-ref-filename="rtc..AdapterType">AdapterType</a> <dfn class="local col9 decl" id="49network_type" title='network_type' data-type='rtc::AdapterType' data-ref="49network_type" data-ref-filename="49network_type">network_type</dfn> = <a class="local col7 ref" href="#47conn" title='conn' data-ref="47conn" data-ref-filename="47conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection7networkEv" title='cricket::Connection::network' data-ref="_ZNK7cricket10Connection7networkEv" data-ref-filename="_ZNK7cricket10Connection7networkEv">network</a>()-&gt;<a class="ref fn" href="../../rtc_base/network.h.html#_ZNK3rtc7Network4typeEv" title='rtc::Network::type' data-ref="_ZNK3rtc7Network4typeEv" data-ref-filename="_ZNK3rtc7Network4typeEv">type</a>();</td></tr>
<tr><th id="37">37</th><td>  <b>return</b> <a class="local col8 ref" href="#48network_preference" title='network_preference' data-ref="48network_preference" data-ref-filename="48network_preference">network_preference</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>() &amp;&amp; (<a class="local col9 ref" href="#49network_type" title='network_type' data-ref="49network_type" data-ref-filename="49network_type">network_type</a> <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKT_RKNS_8optionalIT0_EE" data-ref-filename="_ZNSt3__1eqERKT_RKNS_8optionalIT0_EE">==</span> <a class="local col8 ref" href="#48network_preference" title='network_preference' data-ref="48network_preference" data-ref-filename="48network_preference">network_preference</a>);</td></tr>
<tr><th id="38">38</th><td>}</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><em>int</em> <dfn class="tu decl def fn" id="_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" title='(anonymous namespace)::CompareCandidatePairsByNetworkPreference' data-type='int (anonymous namespace)::CompareCandidatePairsByNetworkPreference(const cricket::Connection * a, const cricket::Connection * b, absl::optional&lt;rtc::AdapterType&gt; network_preference)' data-ref="_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE">CompareCandidatePairsByNetworkPreference</dfn>(</td></tr>
<tr><th id="41">41</th><td>    <em>const</em> <span class="namespace">cricket::</span><a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col0 decl" id="50a" title='a' data-type='const cricket::Connection *' data-ref="50a" data-ref-filename="50a">a</dfn>,</td></tr>
<tr><th id="42">42</th><td>    <em>const</em> <span class="namespace">cricket::</span><a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col1 decl" id="51b" title='b' data-type='const cricket::Connection *' data-ref="51b" data-ref-filename="51b">b</dfn>,</td></tr>
<tr><th id="43">43</th><td>    <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network_constants.h.html#rtc::AdapterType" title='rtc::AdapterType' data-ref="rtc::AdapterType" data-ref-filename="rtc..AdapterType">AdapterType</a>&gt; <dfn class="local col2 decl" id="52network_preference" title='network_preference' data-type='absl::optional&lt;rtc::AdapterType&gt;' data-ref="52network_preference" data-ref-filename="52network_preference">network_preference</dfn>) {</td></tr>
<tr><th id="44">44</th><td>  <em>bool</em> <dfn class="local col3 decl" id="53a_uses_preferred_network" title='a_uses_preferred_network' data-type='bool' data-ref="53a_uses_preferred_network" data-ref-filename="53a_uses_preferred_network">a_uses_preferred_network</dfn> =</td></tr>
<tr><th id="45">45</th><td>      <a class="tu ref fn" href="#_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" title='(anonymous namespace)::LocalCandidateUsesPreferredNetwork' data-use='c' data-ref="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE">LocalCandidateUsesPreferredNetwork</a>(<a class="local col0 ref" href="#50a" title='a' data-ref="50a" data-ref-filename="50a">a</a>, <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="local col2 ref" href="#52network_preference" title='network_preference' data-ref="52network_preference" data-ref-filename="52network_preference">network_preference</a>);</td></tr>
<tr><th id="46">46</th><td>  <em>bool</em> <dfn class="local col4 decl" id="54b_uses_preferred_network" title='b_uses_preferred_network' data-type='bool' data-ref="54b_uses_preferred_network" data-ref-filename="54b_uses_preferred_network">b_uses_preferred_network</dfn> =</td></tr>
<tr><th id="47">47</th><td>      <a class="tu ref fn" href="#_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" title='(anonymous namespace)::LocalCandidateUsesPreferredNetwork' data-use='c' data-ref="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZN12_GLOBAL__N_134LocalCandidateUsesPreferredNetworkEPKN7cricket10ConnectionENSt3__18optionalIN3rtc11AdapterTypeEEE">LocalCandidateUsesPreferredNetwork</a>(<a class="local col1 ref" href="#51b" title='b' data-ref="51b" data-ref-filename="51b">b</a>, <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="local col2 ref" href="#52network_preference" title='network_preference' data-ref="52network_preference" data-ref-filename="52network_preference">network_preference</a>);</td></tr>
<tr><th id="48">48</th><td>  <b>if</b> (<a class="local col3 ref" href="#53a_uses_preferred_network" title='a_uses_preferred_network' data-ref="53a_uses_preferred_network" data-ref-filename="53a_uses_preferred_network">a_uses_preferred_network</a> &amp;&amp; !<a class="local col4 ref" href="#54b_uses_preferred_network" title='b_uses_preferred_network' data-ref="54b_uses_preferred_network" data-ref-filename="54b_uses_preferred_network">b_uses_preferred_network</a>) {</td></tr>
<tr><th id="49">49</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="50">50</th><td>  } <b>else</b> <b>if</b> (!<a class="local col3 ref" href="#53a_uses_preferred_network" title='a_uses_preferred_network' data-ref="53a_uses_preferred_network" data-ref-filename="53a_uses_preferred_network">a_uses_preferred_network</a> &amp;&amp; <a class="local col4 ref" href="#54b_uses_preferred_network" title='b_uses_preferred_network' data-ref="54b_uses_preferred_network" data-ref-filename="54b_uses_preferred_network">b_uses_preferred_network</a>) {</td></tr>
<tr><th id="51">51</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="52">52</th><td>  }</td></tr>
<tr><th id="53">53</th><td>  <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_and_b_equal" title='(anonymous namespace)::a_and_b_equal' data-use='r' data-ref="(anonymousnamespace)::a_and_b_equal" data-ref-filename="(anonymousnamespace)..a_and_b_equal">a_and_b_equal</a>;</td></tr>
<tr><th id="54">54</th><td>}</td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td>}  <i>// namespace</i></td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td><b>namespace</b> <span class="namespace">cricket</span> {</td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceControllerC1ERKNS_24IceControllerFactoryArgsE" title='cricket::BasicIceController::BasicIceController' data-ref="_ZN7cricket18BasicIceControllerC1ERKNS_24IceControllerFactoryArgsE" data-ref-filename="_ZN7cricket18BasicIceControllerC1ERKNS_24IceControllerFactoryArgsE">BasicIceController</dfn>(<em>const</em> <a class="type" href="ice_controller_factory_interface.h.html#cricket::IceControllerFactoryArgs" title='cricket::IceControllerFactoryArgs' data-ref="cricket::IceControllerFactoryArgs" data-ref-filename="cricket..IceControllerFactoryArgs">IceControllerFactoryArgs</a>&amp; <dfn class="local col5 decl" id="55args" title='args' data-type='const cricket::IceControllerFactoryArgs &amp;' data-ref="55args" data-ref-filename="55args">args</dfn>)</td></tr>
<tr><th id="61">61</th><td>    : <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::ice_transport_state_func_" title='cricket::BasicIceController::ice_transport_state_func_' data-ref="cricket::BasicIceController::ice_transport_state_func_" data-ref-filename="cricket..BasicIceController..ice_transport_state_func_">ice_transport_state_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE" data-ref-filename="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE">(</span><a class="local col5 ref" href="#55args" title='args' data-ref="55args" data-ref-filename="55args">args</a>.<a class="ref field" href="ice_controller_factory_interface.h.html#cricket::IceControllerFactoryArgs::ice_transport_state_func" title='cricket::IceControllerFactoryArgs::ice_transport_state_func' data-ref="cricket::IceControllerFactoryArgs::ice_transport_state_func" data-ref-filename="cricket..IceControllerFactoryArgs..ice_transport_state_func">ice_transport_state_func</a>),</td></tr>
<tr><th id="62">62</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::ice_role_func_" title='cricket::BasicIceController::ice_role_func_' data-ref="cricket::BasicIceController::ice_role_func_" data-ref-filename="cricket..BasicIceController..ice_role_func_">ice_role_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE" data-ref-filename="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE">(</span><a class="local col5 ref" href="#55args" title='args' data-ref="55args" data-ref-filename="55args">args</a>.<a class="ref field" href="ice_controller_factory_interface.h.html#cricket::IceControllerFactoryArgs::ice_role_func" title='cricket::IceControllerFactoryArgs::ice_role_func' data-ref="cricket::IceControllerFactoryArgs::ice_role_func" data-ref-filename="cricket..IceControllerFactoryArgs..ice_role_func">ice_role_func</a>),</td></tr>
<tr><th id="63">63</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::is_connection_pruned_func_" title='cricket::BasicIceController::is_connection_pruned_func_' data-ref="cricket::BasicIceController::is_connection_pruned_func_" data-ref-filename="cricket..BasicIceController..is_connection_pruned_func_">is_connection_pruned_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE" data-ref-filename="_ZNSt3__18functionIFT_DpT0_EEC1ERKNS0_IS4_EE">(</span><a class="local col5 ref" href="#55args" title='args' data-ref="55args" data-ref-filename="55args">args</a>.<a class="ref field" href="ice_controller_factory_interface.h.html#cricket::IceControllerFactoryArgs::is_connection_pruned_func" title='cricket::IceControllerFactoryArgs::is_connection_pruned_func' data-ref="cricket::IceControllerFactoryArgs::is_connection_pruned_func" data-ref-filename="cricket..IceControllerFactoryArgs..is_connection_pruned_func">is_connection_pruned_func</a>),</td></tr>
<tr><th id="64">64</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>(<a class="local col5 ref" href="#55args" title='args' data-ref="55args" data-ref-filename="55args">args</a>.<a class="ref field" href="ice_controller_factory_interface.h.html#cricket::IceControllerFactoryArgs::ice_field_trials" title='cricket::IceControllerFactoryArgs::ice_field_trials' data-ref="cricket::IceControllerFactoryArgs::ice_field_trials" data-ref-filename="cricket..IceControllerFactoryArgs..ice_field_trials">ice_field_trials</a>) {}</td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceControllerD1Ev" title='cricket::BasicIceController::~BasicIceController' data-ref="_ZN7cricket18BasicIceControllerD1Ev" data-ref-filename="_ZN7cricket18BasicIceControllerD1Ev">~BasicIceController</dfn>() {}</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td><em>void</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController12SetIceConfigERKNS_9IceConfigE" title='cricket::BasicIceController::SetIceConfig' data-ref="_ZN7cricket18BasicIceController12SetIceConfigERKNS_9IceConfigE" data-ref-filename="_ZN7cricket18BasicIceController12SetIceConfigERKNS_9IceConfigE">SetIceConfig</dfn>(<em>const</em> <a class="type" href="ice_transport_internal.h.html#cricket::IceConfig" title='cricket::IceConfig' data-ref="cricket::IceConfig" data-ref-filename="cricket..IceConfig">IceConfig</a>&amp; <dfn class="local col6 decl" id="56config" title='config' data-type='const cricket::IceConfig &amp;' data-ref="56config" data-ref-filename="56config">config</dfn>) {</td></tr>
<tr><th id="69">69</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a> <a class="ref fn" href="ice_transport_internal.h.html#92" title='cricket::IceConfig::operator=' data-ref="_ZN7cricket9IceConfigaSERKS0_" data-ref-filename="_ZN7cricket9IceConfigaSERKS0_">=</a> <a class="local col6 ref" href="#56config" title='config' data-ref="56config" data-ref-filename="56config">config</a>;</td></tr>
<tr><th id="70">70</th><td>}</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><em>void</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController21SetSelectedConnectionEPKNS_10ConnectionE" title='cricket::BasicIceController::SetSelectedConnection' data-ref="_ZN7cricket18BasicIceController21SetSelectedConnectionEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController21SetSelectedConnectionEPKNS_10ConnectionE">SetSelectedConnection</dfn>(</td></tr>
<tr><th id="73">73</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col7 decl" id="57selected_connection" title='selected_connection' data-type='const cricket::Connection *' data-ref="57selected_connection" data-ref-filename="57selected_connection">selected_connection</dfn>) {</td></tr>
<tr><th id="74">74</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> = <a class="local col7 ref" href="#57selected_connection" title='selected_connection' data-ref="57selected_connection" data-ref-filename="57selected_connection">selected_connection</a>;</td></tr>
<tr><th id="75">75</th><td>}</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td><em>void</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController13AddConnectionEPKNS_10ConnectionE" title='cricket::BasicIceController::AddConnection' data-ref="_ZN7cricket18BasicIceController13AddConnectionEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController13AddConnectionEPKNS_10ConnectionE">AddConnection</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="58connection" title='connection' data-type='const cricket::Connection *' data-ref="58connection" data-ref-filename="58connection">connection</dfn>) {</td></tr>
<tr><th id="78">78</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE" data-ref-filename="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE">push_back</span>(<a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a>);</td></tr>
<tr><th id="79">79</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a>);</td></tr>
<tr><th id="80">80</th><td>}</td></tr>
<tr><th id="81">81</th><td></td></tr>
<tr><th id="82">82</th><td><em>void</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController21OnConnectionDestroyedEPKNS_10ConnectionE" title='cricket::BasicIceController::OnConnectionDestroyed' data-ref="_ZN7cricket18BasicIceController21OnConnectionDestroyedEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController21OnConnectionDestroyedEPKNS_10ConnectionE">OnConnectionDestroyed</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col9 decl" id="59connection" title='connection' data-type='const cricket::Connection *' data-ref="59connection" data-ref-filename="59connection">connection</dfn>) {</td></tr>
<tr><th id="83">83</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::erase' data-ref="_ZNSt3__13set5eraseERKT_" data-ref-filename="_ZNSt3__13set5eraseERKT_">erase</span>(<a class="local col9 ref" href="#59connection" title='connection' data-ref="59connection" data-ref-filename="59connection">connection</a>);</td></tr>
<tr><th id="84">84</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>.<span class='ref fn' title='std::__1::set::erase' data-ref="_ZNSt3__13set5eraseERKT_" data-ref-filename="_ZNSt3__13set5eraseERKT_">erase</span>(<a class="local col9 ref" href="#59connection" title='connection' data-ref="59connection" data-ref-filename="59connection">connection</a>);</td></tr>
<tr><th id="85">85</th><td>  <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::erase' data-ref="_ZNSt3__16vector5eraseENS_11__wrap_iterINS_13__vector_baseIT_T0_E13const_pointerEEE" data-ref-filename="_ZNSt3__16vector5eraseENS_11__wrap_iterINS_13__vector_baseIT_T0_E13const_pointerEEE">erase</span>(<span class='ref fn fake' title='std::__1::__wrap_iter::__wrap_iter&lt;_Iter&gt;' data-ref="_ZNSt3__111__wrap_iterC1ERKNS_11__wrap_iterITL0__EEPNS_9enable_ifIXsr14is_convertibleIS2_T_EE5valueEvE4typeE" data-ref-filename="_ZNSt3__111__wrap_iterC1ERKNS_11__wrap_iterITL0__EEPNS_9enable_ifIXsr14is_convertibleIS2_T_EE5valueEvE4typeE"></span><span class="namespace">absl::</span><a class="ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl6c_findERT_OT0_" title='absl::c_find' data-ref="_ZN4absl6c_findERT_OT0_" data-ref-filename="_ZN4absl6c_findERT_OT0_">c_find</a>(<span class='refarg'><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a></span>, <span class='refarg'><a class="local col9 ref" href="#59connection" title='connection' data-ref="59connection" data-ref-filename="59connection">connection</a></span>));</td></tr>
<tr><th id="86">86</th><td>}</td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZNK7cricket18BasicIceController21HasPingableConnectionEv" title='cricket::BasicIceController::HasPingableConnection' data-ref="_ZNK7cricket18BasicIceController21HasPingableConnectionEv" data-ref-filename="_ZNK7cricket18BasicIceController21HasPingableConnectionEv">HasPingableConnection</dfn>() <em>const</em> {</td></tr>
<tr><th id="89">89</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col0 decl" id="60now" title='now' data-type='int64_t' data-ref="60now" data-ref-filename="60now">now</dfn> = <span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/time_utils.h.html#_ZN3rtc10TimeMillisEv" title='rtc::TimeMillis' data-ref="_ZN3rtc10TimeMillisEv" data-ref-filename="_ZN3rtc10TimeMillisEv">TimeMillis</a>();</td></tr>
<tr><th id="90">90</th><td>  <b>return</b> <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl8c_any_ofERKT_OT0_" title='absl::c_any_of' data-use='c' data-ref="_ZN4absl8c_any_ofERKT_OT0_" data-ref-filename="_ZN4absl8c_any_ofERKT_OT0_">c_any_of</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>, [<b>this</b>, <a class="local col0 ref" href="#60now" title='now' data-ref="60now" data-ref-filename="60now">now</a>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col1 decl" id="61c" title='c' data-type='const cricket::Connection *' data-ref="61c" data-ref-filename="61c">c</dfn>) {</td></tr>
<tr><th id="91">91</th><td>    <b>return</b> <a class="member fn" href="#_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" title='cricket::BasicIceController::IsPingable' data-ref="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx">IsPingable</a>(<a class="local col1 ref" href="#61c" title='c' data-ref="61c" data-ref-filename="61c">c</a>, <a class="local col0 ref" href="#60now" title='now' data-ref="60now" data-ref-filename="60now">now</a>);</td></tr>
<tr><th id="92">92</th><td>  });</td></tr>
<tr><th id="93">93</th><td>}</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td><a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface" title='cricket::IceControllerInterface' data-ref="cricket::IceControllerInterface" data-ref-filename="cricket..IceControllerInterface">IceControllerInterface</a>::<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface::PingResult" title='cricket::IceControllerInterface::PingResult' data-ref="cricket::IceControllerInterface::PingResult" data-ref-filename="cricket..IceControllerInterface..PingResult">PingResult</a> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController22SelectConnectionToPingEx" title='cricket::BasicIceController::SelectConnectionToPing' data-ref="_ZN7cricket18BasicIceController22SelectConnectionToPingEx" data-ref-filename="_ZN7cricket18BasicIceController22SelectConnectionToPingEx">SelectConnectionToPing</dfn>(</td></tr>
<tr><th id="96">96</th><td>    <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col2 decl" id="62last_ping_sent_ms" title='last_ping_sent_ms' data-type='int64_t' data-ref="62last_ping_sent_ms" data-ref-filename="62last_ping_sent_ms">last_ping_sent_ms</dfn>) {</td></tr>
<tr><th id="97">97</th><td>  <i>// When the selected connection is not receiving or not writable, or any</i></td></tr>
<tr><th id="98">98</th><td><i>  // active connection has not been pinged enough times, use the weak ping</i></td></tr>
<tr><th id="99">99</th><td><i>  // interval.</i></td></tr>
<tr><th id="100">100</th><td>  <em>bool</em> <dfn class="local col3 decl" id="63need_more_pings_at_weak_interval" title='need_more_pings_at_weak_interval' data-type='bool' data-ref="63need_more_pings_at_weak_interval" data-ref-filename="63need_more_pings_at_weak_interval">need_more_pings_at_weak_interval</dfn> =</td></tr>
<tr><th id="101">101</th><td>      <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl8c_any_ofERKT_OT0_" title='absl::c_any_of' data-use='c' data-ref="_ZN4absl8c_any_ofERKT_OT0_" data-ref-filename="_ZN4absl8c_any_ofERKT_OT0_">c_any_of</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>, [](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col4 decl" id="64conn" title='conn' data-type='const cricket::Connection *' data-ref="64conn" data-ref-filename="64conn">conn</dfn>) {</td></tr>
<tr><th id="102">102</th><td>        <b>return</b> <a class="local col4 ref" href="#64conn" title='conn' data-ref="64conn" data-ref-filename="64conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection6activeEv" title='cricket::Connection::active' data-ref="_ZNK7cricket10Connection6activeEv" data-ref-filename="_ZNK7cricket10Connection6activeEv">active</a>() &amp;&amp;</td></tr>
<tr><th id="103">103</th><td>               <a class="local col4 ref" href="#64conn" title='conn' data-ref="64conn" data-ref-filename="64conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14num_pings_sentEv" title='cricket::Connection::num_pings_sent' data-ref="_ZNK7cricket10Connection14num_pings_sentEv" data-ref-filename="_ZNK7cricket10Connection14num_pings_sentEv">num_pings_sent</a>() &lt; <a class="ref" href="p2p_transport_channel.h.html#cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL" title='cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL' data-ref="cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL" data-ref-filename="cricket..MIN_PINGS_AT_WEAK_PING_INTERVAL">MIN_PINGS_AT_WEAK_PING_INTERVAL</a>;</td></tr>
<tr><th id="104">104</th><td>      });</td></tr>
<tr><th id="105">105</th><td>  <em>int</em> <dfn class="local col5 decl" id="65ping_interval" title='ping_interval' data-type='int' data-ref="65ping_interval" data-ref-filename="65ping_interval">ping_interval</dfn> = (<a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController4weakEv" title='cricket::BasicIceController::weak' data-ref="_ZNK7cricket18BasicIceController4weakEv" data-ref-filename="_ZNK7cricket18BasicIceController4weakEv">weak</a>() || <a class="local col3 ref" href="#63need_more_pings_at_weak_interval" title='need_more_pings_at_weak_interval' data-ref="63need_more_pings_at_weak_interval" data-ref-filename="63need_more_pings_at_weak_interval">need_more_pings_at_weak_interval</a>)</td></tr>
<tr><th id="106">106</th><td>                          ? <a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController18weak_ping_intervalEv" title='cricket::BasicIceController::weak_ping_interval' data-ref="_ZNK7cricket18BasicIceController18weak_ping_intervalEv" data-ref-filename="_ZNK7cricket18BasicIceController18weak_ping_intervalEv">weak_ping_interval</a>()</td></tr>
<tr><th id="107">107</th><td>                          : <a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController20strong_ping_intervalEv" title='cricket::BasicIceController::strong_ping_interval' data-ref="_ZNK7cricket18BasicIceController20strong_ping_intervalEv" data-ref-filename="_ZNK7cricket18BasicIceController20strong_ping_intervalEv">strong_ping_interval</a>();</td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td>  <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="66conn" title='conn' data-type='const cricket::Connection *' data-ref="66conn" data-ref-filename="66conn">conn</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="110">110</th><td>  <b>if</b> (<span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/time_utils.h.html#_ZN3rtc10TimeMillisEv" title='rtc::TimeMillis' data-ref="_ZN3rtc10TimeMillisEv" data-ref-filename="_ZN3rtc10TimeMillisEv">TimeMillis</a>() &gt;= <a class="local col2 ref" href="#62last_ping_sent_ms" title='last_ping_sent_ms' data-ref="62last_ping_sent_ms" data-ref-filename="62last_ping_sent_ms">last_ping_sent_ms</a> + <a class="local col5 ref" href="#65ping_interval" title='ping_interval' data-ref="65ping_interval" data-ref-filename="65ping_interval">ping_interval</a>) {</td></tr>
<tr><th id="111">111</th><td>    <a class="local col6 ref" href="#66conn" title='conn' data-ref="66conn" data-ref-filename="66conn">conn</a> = <a class="virtual member fn" href="#_ZN7cricket18BasicIceController26FindNextPingableConnectionEv" title='cricket::BasicIceController::FindNextPingableConnection' data-ref="_ZN7cricket18BasicIceController26FindNextPingableConnectionEv" data-ref-filename="_ZN7cricket18BasicIceController26FindNextPingableConnectionEv">FindNextPingableConnection</a>();</td></tr>
<tr><th id="112">112</th><td>  }</td></tr>
<tr><th id="113">113</th><td>  <a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface::PingResult" title='cricket::IceControllerInterface::PingResult' data-ref="cricket::IceControllerInterface::PingResult" data-ref-filename="cricket..IceControllerInterface..PingResult">PingResult</a> <dfn class="local col7 decl" id="67res" title='res' data-type='cricket::IceControllerInterface::PingResult' data-ref="67res" data-ref-filename="67res">res</dfn><a class="ref fn" href="ice_controller_interface.h.html#_ZN7cricket22IceControllerInterface10PingResultC1EPKNS_10ConnectionEi" title='cricket::IceControllerInterface::PingResult::PingResult' data-ref="_ZN7cricket22IceControllerInterface10PingResultC1EPKNS_10ConnectionEi" data-ref-filename="_ZN7cricket22IceControllerInterface10PingResultC1EPKNS_10ConnectionEi">(</a><a class="local col6 ref" href="#66conn" title='conn' data-ref="66conn" data-ref-filename="66conn">conn</a>, <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(<a class="local col5 ref" href="#65ping_interval" title='ping_interval' data-ref="65ping_interval" data-ref-filename="65ping_interval">ping_interval</a>, <a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController24check_receiving_intervalEv" title='cricket::BasicIceController::check_receiving_interval' data-ref="_ZNK7cricket18BasicIceController24check_receiving_intervalEv" data-ref-filename="_ZNK7cricket18BasicIceController24check_receiving_intervalEv">check_receiving_interval</a>()));</td></tr>
<tr><th id="114">114</th><td>  <b>return</b> <a class="local col7 ref" href="#67res" title='res' data-ref="67res" data-ref-filename="67res">res</a>;</td></tr>
<tr><th id="115">115</th><td>}</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td><em>void</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController20MarkConnectionPingedEPKNS_10ConnectionE" title='cricket::BasicIceController::MarkConnectionPinged' data-ref="_ZN7cricket18BasicIceController20MarkConnectionPingedEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController20MarkConnectionPingedEPKNS_10ConnectionE">MarkConnectionPinged</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="68conn" title='conn' data-type='const cricket::Connection *' data-ref="68conn" data-ref-filename="68conn">conn</dfn>) {</td></tr>
<tr><th id="118">118</th><td>  <b>if</b> (<a class="local col8 ref" href="#68conn" title='conn' data-ref="68conn" data-ref-filename="68conn">conn</a> &amp;&amp; <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="local col8 ref" href="#68conn" title='conn' data-ref="68conn" data-ref-filename="68conn">conn</a>).<span class='ref field' title='std::__1::pair&lt;std::__1::__tree_const_iterator&lt;const cricket::Connection *, std::__1::__tree_node&lt;const cricket::Connection *, void *&gt; *, long&gt;, bool&gt;::second' data-ref="std::__1::pair::second" data-ref-filename="std..__1..pair..second">second</span>) {</td></tr>
<tr><th id="119">119</th><td>    <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>.<span class='ref fn' title='std::__1::set::erase' data-ref="_ZNSt3__13set5eraseERKT_" data-ref-filename="_ZNSt3__13set5eraseERKT_">erase</span>(<a class="local col8 ref" href="#68conn" title='conn' data-ref="68conn" data-ref-filename="68conn">conn</a>);</td></tr>
<tr><th id="120">120</th><td>  }</td></tr>
<tr><th id="121">121</th><td>}</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td><i>// Returns the next pingable connection to ping.</i></td></tr>
<tr><th id="124">124</th><td><em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController26FindNextPingableConnectionEv" title='cricket::BasicIceController::FindNextPingableConnection' data-ref="_ZN7cricket18BasicIceController26FindNextPingableConnectionEv" data-ref-filename="_ZN7cricket18BasicIceController26FindNextPingableConnectionEv">FindNextPingableConnection</dfn>() {</td></tr>
<tr><th id="125">125</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col9 decl" id="69now" title='now' data-type='int64_t' data-ref="69now" data-ref-filename="69now">now</dfn> = <span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/time_utils.h.html#_ZN3rtc10TimeMillisEv" title='rtc::TimeMillis' data-ref="_ZN3rtc10TimeMillisEv" data-ref-filename="_ZN3rtc10TimeMillisEv">TimeMillis</a>();</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td>  <i>// Rule 1: Selected connection takes priority over non-selected ones.</i></td></tr>
<tr><th id="128">128</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> &amp;&amp; <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>() &amp;&amp;</td></tr>
<tr><th id="129">129</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() &amp;&amp;</td></tr>
<tr><th id="130">130</th><td>      <a class="member fn" href="#_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::WritableConnectionPastPingInterval' data-ref="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx">WritableConnectionPastPingInterval</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>)) {</td></tr>
<tr><th id="131">131</th><td>    <b>return</b> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>;</td></tr>
<tr><th id="132">132</th><td>  }</td></tr>
<tr><th id="133">133</th><td></td></tr>
<tr><th id="134">134</th><td>  <i>// Rule 2: If the channel is weak, we need to find a new writable and</i></td></tr>
<tr><th id="135">135</th><td><i>  // receiving connection, probably on a different network. If there are lots of</i></td></tr>
<tr><th id="136">136</th><td><i>  // connections, it may take several seconds between two pings for every</i></td></tr>
<tr><th id="137">137</th><td><i>  // non-selected connection. This will cause the receiving state of those</i></td></tr>
<tr><th id="138">138</th><td><i>  // connections to be false, and thus they won't be selected. This is</i></td></tr>
<tr><th id="139">139</th><td><i>  // problematic for network fail-over. We want to make sure at least one</i></td></tr>
<tr><th id="140">140</th><td><i>  // connection per network is pinged frequently enough in order for it to be</i></td></tr>
<tr><th id="141">141</th><td><i>  // selectable. So we prioritize one connection per network.</i></td></tr>
<tr><th id="142">142</th><td><i>  // Rule 2.1: Among such connections, pick the one with the earliest</i></td></tr>
<tr><th id="143">143</th><td><i>  // last-ping-sent time.</i></td></tr>
<tr><th id="144">144</th><td>  <b>if</b> (<a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController4weakEv" title='cricket::BasicIceController::weak' data-ref="_ZNK7cricket18BasicIceController4weakEv" data-ref-filename="_ZNK7cricket18BasicIceController4weakEv">weak</a>()) {</td></tr>
<tr><th id="145">145</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev"></span><dfn class="local col0 decl" id="70pingable_selectable_connections" title='pingable_selectable_connections' data-type='std::vector&lt;const Connection *&gt;' data-ref="70pingable_selectable_connections" data-ref-filename="70pingable_selectable_connections">pingable_selectable_connections</dfn>;</td></tr>
<tr><th id="146">146</th><td>    <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl9c_copy_ifERKT_T0_OT1_" title='absl::c_copy_if' data-use='c' data-ref="_ZN4absl9c_copy_ifERKT_T0_OT1_" data-ref-filename="_ZN4absl9c_copy_ifERKT_T0_OT1_">c_copy_if</a>(<a class="member fn" href="#_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv" title='cricket::BasicIceController::GetBestWritableConnectionPerNetwork' data-ref="_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv" data-ref-filename="_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv">GetBestWritableConnectionPerNetwork</a>(),</td></tr>
<tr><th id="147">147</th><td>                    <span class="namespace">std::</span><span class='ref fn' title='std::__1::back_inserter' data-ref="_ZNSt3__1L13back_inserterERT_" data-ref-filename="_ZNSt3__1L13back_inserterERT_">back_inserter</span>(<span class='refarg'><a class="local col0 ref" href="#70pingable_selectable_connections" title='pingable_selectable_connections' data-ref="70pingable_selectable_connections" data-ref-filename="70pingable_selectable_connections">pingable_selectable_connections</a></span>),</td></tr>
<tr><th id="148">148</th><td>                    [<b>this</b>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col1 decl" id="71conn" title='conn' data-type='const cricket::Connection *' data-ref="71conn" data-ref-filename="71conn">conn</dfn>) {</td></tr>
<tr><th id="149">149</th><td>                      <b>return</b> <a class="member fn" href="#_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::WritableConnectionPastPingInterval' data-ref="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx">WritableConnectionPastPingInterval</a>(<a class="local col1 ref" href="#71conn" title='conn' data-ref="71conn" data-ref-filename="71conn">conn</a>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>);</td></tr>
<tr><th id="150">150</th><td>                    });</td></tr>
<tr><th id="151">151</th><td>    <em>auto</em> <dfn class="local col2 decl" id="72iter" title='iter' data-type='std::__1::__wrap_iter&lt;const cricket::Connection **&gt;' data-ref="72iter" data-ref-filename="72iter">iter</dfn> = <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl13c_min_elementERT_OT0_" title='absl::c_min_element' data-use='c' data-ref="_ZN4absl13c_min_elementERT_OT0_" data-ref-filename="_ZN4absl13c_min_elementERT_OT0_">c_min_element</a>(</td></tr>
<tr><th id="152">152</th><td>        <span class='refarg'><a class="local col0 ref" href="#70pingable_selectable_connections" title='pingable_selectable_connections' data-ref="70pingable_selectable_connections" data-ref-filename="70pingable_selectable_connections">pingable_selectable_connections</a></span>,</td></tr>
<tr><th id="153">153</th><td>        [](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col3 decl" id="73conn1" title='conn1' data-type='const cricket::Connection *' data-ref="73conn1" data-ref-filename="73conn1">conn1</dfn>, <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col4 decl" id="74conn2" title='conn2' data-type='const cricket::Connection *' data-ref="74conn2" data-ref-filename="74conn2">conn2</dfn>) {</td></tr>
<tr><th id="154">154</th><td>          <b>return</b> <a class="local col3 ref" href="#73conn1" title='conn1' data-ref="73conn1" data-ref-filename="73conn1">conn1</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>() &lt; <a class="local col4 ref" href="#74conn2" title='conn2' data-ref="74conn2" data-ref-filename="74conn2">conn2</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>();</td></tr>
<tr><th id="155">155</th><td>        });</td></tr>
<tr><th id="156">156</th><td>    <b>if</b> (<a class="local col2 ref" href="#72iter" title='iter' data-ref="72iter" data-ref-filename="72iter">iter</a> <span class='ref fn' title='std::__1::operator!=' data-ref="_ZNSt3__1neERKNS_11__wrap_iterIT_EES4_" data-ref-filename="_ZNSt3__1neERKNS_11__wrap_iterIT_EES4_">!=</span> <a class="local col0 ref" href="#70pingable_selectable_connections" title='pingable_selectable_connections' data-ref="70pingable_selectable_connections" data-ref-filename="70pingable_selectable_connections">pingable_selectable_connections</a>.<span class='ref fn' title='std::__1::vector::end' data-ref="_ZNSt3__16vector3endEv" data-ref-filename="_ZNSt3__16vector3endEv">end</span>()) {</td></tr>
<tr><th id="157">157</th><td>      <b>return</b> <span class='ref fn' title='std::__1::__wrap_iter::operator*' data-ref="_ZNKSt3__111__wrap_iterdeEv" data-ref-filename="_ZNKSt3__111__wrap_iterdeEv">*</span><a class="local col2 ref" href="#72iter" title='iter' data-ref="72iter" data-ref-filename="72iter">iter</a>;</td></tr>
<tr><th id="158">158</th><td>    }</td></tr>
<tr><th id="159">159</th><td>  }</td></tr>
<tr><th id="160">160</th><td></td></tr>
<tr><th id="161">161</th><td>  <i>// Rule 3: Triggered checks have priority over non-triggered connections.</i></td></tr>
<tr><th id="162">162</th><td><i>  // Rule 3.1: Among triggered checks, oldest takes precedence.</i></td></tr>
<tr><th id="163">163</th><td>  <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col5 decl" id="75oldest_triggered_check" title='oldest_triggered_check' data-type='const cricket::Connection *' data-ref="75oldest_triggered_check" data-ref-filename="75oldest_triggered_check">oldest_triggered_check</dfn> =</td></tr>
<tr><th id="164">164</th><td>      <a class="member fn" href="#_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx" title='cricket::BasicIceController::FindOldestConnectionNeedingTriggeredCheck' data-ref="_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx" data-ref-filename="_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx">FindOldestConnectionNeedingTriggeredCheck</a>(<a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>);</td></tr>
<tr><th id="165">165</th><td>  <b>if</b> (<a class="local col5 ref" href="#75oldest_triggered_check" title='oldest_triggered_check' data-ref="75oldest_triggered_check" data-ref-filename="75oldest_triggered_check">oldest_triggered_check</a>) {</td></tr>
<tr><th id="166">166</th><td>    <b>return</b> <a class="local col5 ref" href="#75oldest_triggered_check" title='oldest_triggered_check' data-ref="75oldest_triggered_check" data-ref-filename="75oldest_triggered_check">oldest_triggered_check</a>;</td></tr>
<tr><th id="167">167</th><td>  }</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>  <i>// Rule 4: Unpinged connections have priority over pinged ones.</i></td></tr>
<tr><th id="170">170</th><td>  <a class="macro" href="../../rtc_base/checks.h.html#386" title="(connections_.size() == pinged_connections_.size() + unpinged_connections_.size()) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 171, &quot;connections_.size() == pinged_connections_.size() + unpinged_connections_.size()&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_CHECK">RTC_CHECK</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::size' data-ref="_ZNKSt3__16vector4sizeEv" data-ref-filename="_ZNKSt3__16vector4sizeEv">size</span>() ==</td></tr>
<tr><th id="171">171</th><td>            <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::size' data-ref="_ZNKSt3__13set4sizeEv" data-ref-filename="_ZNKSt3__13set4sizeEv">size</span>() + <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>.<span class='ref fn' title='std::__1::set::size' data-ref="_ZNKSt3__13set4sizeEv" data-ref-filename="_ZNKSt3__13set4sizeEv">size</span>());</td></tr>
<tr><th id="172">172</th><td>  <i>// If there are unpinged and pingable connections, only ping those.</i></td></tr>
<tr><th id="173">173</th><td><i>  // Otherwise, treat everything as unpinged.</i></td></tr>
<tr><th id="174">174</th><td><i>  // TODO(honghaiz): Instead of adding two separate vectors, we can add a state</i></td></tr>
<tr><th id="175">175</th><td><i>  // "pinged" to filter out unpinged connections.</i></td></tr>
<tr><th id="176">176</th><td>  <b>if</b> (<span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl9c_none_ofERKT_OT0_" title='absl::c_none_of' data-use='c' data-ref="_ZN4absl9c_none_ofERKT_OT0_" data-ref-filename="_ZN4absl9c_none_ofERKT_OT0_">c_none_of</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>,</td></tr>
<tr><th id="177">177</th><td>                      [<b>this</b>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="76conn" title='conn' data-type='const cricket::Connection *' data-ref="76conn" data-ref-filename="76conn">conn</dfn>) {</td></tr>
<tr><th id="178">178</th><td>                        <b>return</b> <b>this</b>-&gt;<a class="member fn" href="#_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" title='cricket::BasicIceController::IsPingable' data-ref="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx">IsPingable</a>(<a class="local col6 ref" href="#76conn" title='conn' data-ref="76conn" data-ref-filename="76conn">conn</a>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>);</td></tr>
<tr><th id="179">179</th><td>                      })) {</td></tr>
<tr><th id="180">180</th><td>    <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertETL0__S1_" data-ref-filename="_ZNSt3__13set6insertETL0__S1_">insert</span>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::begin' data-ref="_ZNSt3__13set5beginEv" data-ref-filename="_ZNSt3__13set5beginEv">begin</span>(),</td></tr>
<tr><th id="181">181</th><td>                                 <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::end' data-ref="_ZNSt3__13set3endEv" data-ref-filename="_ZNSt3__13set3endEv">end</span>());</td></tr>
<tr><th id="182">182</th><td>    <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::pinged_connections_" title='cricket::BasicIceController::pinged_connections_' data-ref="cricket::BasicIceController::pinged_connections_" data-ref-filename="cricket..BasicIceController..pinged_connections_">pinged_connections_</a>.<span class='ref fn' title='std::__1::set::clear' data-ref="_ZNSt3__13set5clearEv" data-ref-filename="_ZNSt3__13set5clearEv">clear</span>();</td></tr>
<tr><th id="183">183</th><td>  }</td></tr>
<tr><th id="184">184</th><td></td></tr>
<tr><th id="185">185</th><td>  <i>// Among un-pinged pingable connections, "more pingable" takes precedence.</i></td></tr>
<tr><th id="186">186</th><td>  <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev"></span><dfn class="local col7 decl" id="77pingable_connections" title='pingable_connections' data-type='std::vector&lt;const Connection *&gt;' data-ref="77pingable_connections" data-ref-filename="77pingable_connections">pingable_connections</dfn>;</td></tr>
<tr><th id="187">187</th><td>  <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl9c_copy_ifERKT_T0_OT1_" title='absl::c_copy_if' data-use='c' data-ref="_ZN4absl9c_copy_ifERKT_T0_OT1_" data-ref-filename="_ZN4absl9c_copy_ifERKT_T0_OT1_">c_copy_if</a>(</td></tr>
<tr><th id="188">188</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::unpinged_connections_" title='cricket::BasicIceController::unpinged_connections_' data-ref="cricket::BasicIceController::unpinged_connections_" data-ref-filename="cricket..BasicIceController..unpinged_connections_">unpinged_connections_</a>, <span class="namespace">std::</span><span class='ref fn' title='std::__1::back_inserter' data-ref="_ZNSt3__1L13back_inserterERT_" data-ref-filename="_ZNSt3__1L13back_inserterERT_">back_inserter</span>(<span class='refarg'><a class="local col7 ref" href="#77pingable_connections" title='pingable_connections' data-ref="77pingable_connections" data-ref-filename="77pingable_connections">pingable_connections</a></span>),</td></tr>
<tr><th id="189">189</th><td>      [<b>this</b>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="78conn" title='conn' data-type='const cricket::Connection *' data-ref="78conn" data-ref-filename="78conn">conn</dfn>) { <b>return</b> <a class="member fn" href="#_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" title='cricket::BasicIceController::IsPingable' data-ref="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx">IsPingable</a>(<a class="local col8 ref" href="#78conn" title='conn' data-ref="78conn" data-ref-filename="78conn">conn</a>, <a class="local col9 ref" href="#69now" title='now' data-ref="69now" data-ref-filename="69now">now</a>); });</td></tr>
<tr><th id="190">190</th><td>  <em>auto</em> <dfn class="local col9 decl" id="79iter" title='iter' data-type='std::__1::__wrap_iter&lt;const cricket::Connection **&gt;' data-ref="79iter" data-ref-filename="79iter">iter</dfn> = <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl13c_max_elementERT_OT0_" title='absl::c_max_element' data-use='c' data-ref="_ZN4absl13c_max_elementERT_OT0_" data-ref-filename="_ZN4absl13c_max_elementERT_OT0_">c_max_element</a>(</td></tr>
<tr><th id="191">191</th><td>      <span class='refarg'><a class="local col7 ref" href="#77pingable_connections" title='pingable_connections' data-ref="77pingable_connections" data-ref-filename="77pingable_connections">pingable_connections</a></span>,</td></tr>
<tr><th id="192">192</th><td>      [<b>this</b>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col0 decl" id="80conn1" title='conn1' data-type='const cricket::Connection *' data-ref="80conn1" data-ref-filename="80conn1">conn1</dfn>, <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col1 decl" id="81conn2" title='conn2' data-type='const cricket::Connection *' data-ref="81conn2" data-ref-filename="81conn2">conn2</dfn>) {</td></tr>
<tr><th id="193">193</th><td>        <i>// Some implementations of max_element</i></td></tr>
<tr><th id="194">194</th><td><i>        // compare an element with itself.</i></td></tr>
<tr><th id="195">195</th><td>        <b>if</b> (<a class="local col0 ref" href="#80conn1" title='conn1' data-ref="80conn1" data-ref-filename="80conn1">conn1</a> == <a class="local col1 ref" href="#81conn2" title='conn2' data-ref="81conn2" data-ref-filename="81conn2">conn2</a>) {</td></tr>
<tr><th id="196">196</th><td>          <b>return</b> <b>false</b>;</td></tr>
<tr><th id="197">197</th><td>        }</td></tr>
<tr><th id="198">198</th><td>        <b>return</b> <a class="member fn" href="#_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_" title='cricket::BasicIceController::MorePingable' data-ref="_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_">MorePingable</a>(<a class="local col0 ref" href="#80conn1" title='conn1' data-ref="80conn1" data-ref-filename="80conn1">conn1</a>, <a class="local col1 ref" href="#81conn2" title='conn2' data-ref="81conn2" data-ref-filename="81conn2">conn2</a>) == <a class="local col1 ref" href="#81conn2" title='conn2' data-ref="81conn2" data-ref-filename="81conn2">conn2</a>;</td></tr>
<tr><th id="199">199</th><td>      });</td></tr>
<tr><th id="200">200</th><td>  <b>if</b> (<a class="local col9 ref" href="#79iter" title='iter' data-ref="79iter" data-ref-filename="79iter">iter</a> <span class='ref fn' title='std::__1::operator!=' data-ref="_ZNSt3__1neERKNS_11__wrap_iterIT_EES4_" data-ref-filename="_ZNSt3__1neERKNS_11__wrap_iterIT_EES4_">!=</span> <a class="local col7 ref" href="#77pingable_connections" title='pingable_connections' data-ref="77pingable_connections" data-ref-filename="77pingable_connections">pingable_connections</a>.<span class='ref fn' title='std::__1::vector::end' data-ref="_ZNSt3__16vector3endEv" data-ref-filename="_ZNSt3__16vector3endEv">end</span>()) {</td></tr>
<tr><th id="201">201</th><td>    <b>return</b> <span class='ref fn' title='std::__1::__wrap_iter::operator*' data-ref="_ZNKSt3__111__wrap_iterdeEv" data-ref-filename="_ZNKSt3__111__wrap_iterdeEv">*</span><a class="local col9 ref" href="#79iter" title='iter' data-ref="79iter" data-ref-filename="79iter">iter</a>;</td></tr>
<tr><th id="202">202</th><td>  }</td></tr>
<tr><th id="203">203</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="204">204</th><td>}</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td><i>// Find "triggered checks".  We ping first those connections that have</i></td></tr>
<tr><th id="207">207</th><td><i>// received a ping but have not sent a ping since receiving it</i></td></tr>
<tr><th id="208">208</th><td><i>// (last_ping_received &gt; last_ping_sent).  But we shouldn't do</i></td></tr>
<tr><th id="209">209</th><td><i>// triggered checks if the connection is already writable.</i></td></tr>
<tr><th id="210">210</th><td><em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx" title='cricket::BasicIceController::FindOldestConnectionNeedingTriggeredCheck' data-ref="_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx" data-ref-filename="_ZN7cricket18BasicIceController41FindOldestConnectionNeedingTriggeredCheckEx">FindOldestConnectionNeedingTriggeredCheck</dfn>(</td></tr>
<tr><th id="211">211</th><td>    <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col2 decl" id="82now" title='now' data-type='int64_t' data-ref="82now" data-ref-filename="82now">now</dfn>) {</td></tr>
<tr><th id="212">212</th><td>  <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col3 decl" id="83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-type='const cricket::Connection *' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="213">213</th><td>  <b>for</b> (<em>auto</em>* <dfn class="local col4 decl" id="84conn" title='conn' data-type='const cricket::Connection *' data-ref="84conn" data-ref-filename="84conn">conn</dfn> : <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>) {</td></tr>
<tr><th id="214">214</th><td>    <b>if</b> (!<a class="member fn" href="#_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" title='cricket::BasicIceController::IsPingable' data-ref="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx">IsPingable</a>(<a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>, <a class="local col2 ref" href="#82now" title='now' data-ref="82now" data-ref-filename="82now">now</a>)) {</td></tr>
<tr><th id="215">215</th><td>      <b>continue</b>;</td></tr>
<tr><th id="216">216</th><td>    }</td></tr>
<tr><th id="217">217</th><td>    <em>bool</em> <dfn class="local col5 decl" id="85needs_triggered_check" title='needs_triggered_check' data-type='bool' data-ref="85needs_triggered_check" data-ref-filename="85needs_triggered_check">needs_triggered_check</dfn> =</td></tr>
<tr><th id="218">218</th><td>        (!<a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() &amp;&amp;</td></tr>
<tr><th id="219">219</th><td>         <a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_ping_receivedEv" title='cricket::Connection::last_ping_received' data-ref="_ZNK7cricket10Connection18last_ping_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_ping_receivedEv">last_ping_received</a>() &gt; <a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>());</td></tr>
<tr><th id="220">220</th><td>    <b>if</b> (<a class="local col5 ref" href="#85needs_triggered_check" title='needs_triggered_check' data-ref="85needs_triggered_check" data-ref-filename="85needs_triggered_check">needs_triggered_check</a> &amp;&amp;</td></tr>
<tr><th id="221">221</th><td>        (!<a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a> ||</td></tr>
<tr><th id="222">222</th><td>         (<a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_ping_receivedEv" title='cricket::Connection::last_ping_received' data-ref="_ZNK7cricket10Connection18last_ping_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_ping_receivedEv">last_ping_received</a>() &lt;</td></tr>
<tr><th id="223">223</th><td>          <a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_ping_receivedEv" title='cricket::Connection::last_ping_received' data-ref="_ZNK7cricket10Connection18last_ping_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_ping_receivedEv">last_ping_received</a>()))) {</td></tr>
<tr><th id="224">224</th><td>      <a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a> = <a class="local col4 ref" href="#84conn" title='conn' data-ref="84conn" data-ref-filename="84conn">conn</a>;</td></tr>
<tr><th id="225">225</th><td>    }</td></tr>
<tr><th id="226">226</th><td>  }</td></tr>
<tr><th id="227">227</th><td></td></tr>
<tr><th id="228">228</th><td>  <b>if</b> (<a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a>) {</td></tr>
<tr><th id="229">229</th><td>    <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_INFO&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 229, ::rtc::LS_INFO)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_INFO" title='rtc::LS_INFO' data-ref="rtc::LS_INFO" data-ref-filename="rtc..LS_INFO">LS_INFO</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"Selecting connection for triggered check: "</q></td></tr>
<tr><th id="230">230</th><td>                     <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8ToStringEv" title='cricket::Connection::ToString' data-ref="_ZNK7cricket10Connection8ToStringEv" data-ref-filename="_ZNK7cricket10Connection8ToStringEv">ToString</a>();</td></tr>
<tr><th id="231">231</th><td>  }</td></tr>
<tr><th id="232">232</th><td>  <b>return</b> <a class="local col3 ref" href="#83oldest_needing_triggered_check" title='oldest_needing_triggered_check' data-ref="83oldest_needing_triggered_check" data-ref-filename="83oldest_needing_triggered_check">oldest_needing_triggered_check</a>;</td></tr>
<tr><th id="233">233</th><td>}</td></tr>
<tr><th id="234">234</th><td></td></tr>
<tr><th id="235">235</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::WritableConnectionPastPingInterval' data-ref="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx">WritableConnectionPastPingInterval</dfn>(</td></tr>
<tr><th id="236">236</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="86conn" title='conn' data-type='const cricket::Connection *' data-ref="86conn" data-ref-filename="86conn">conn</dfn>,</td></tr>
<tr><th id="237">237</th><td>    <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col7 decl" id="87now" title='now' data-type='int64_t' data-ref="87now" data-ref-filename="87now">now</dfn>) <em>const</em> {</td></tr>
<tr><th id="238">238</th><td>  <em>int</em> <dfn class="local col8 decl" id="88interval" title='interval' data-type='int' data-ref="88interval" data-ref-filename="88interval">interval</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::CalculateActiveWritablePingInterval' data-ref="_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx">CalculateActiveWritablePingInterval</a>(<a class="local col6 ref" href="#86conn" title='conn' data-ref="86conn" data-ref-filename="86conn">conn</a>, <a class="local col7 ref" href="#87now" title='now' data-ref="87now" data-ref-filename="87now">now</a>);</td></tr>
<tr><th id="239">239</th><td>  <b>return</b> <a class="local col6 ref" href="#86conn" title='conn' data-ref="86conn" data-ref-filename="86conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>() + <a class="local col8 ref" href="#88interval" title='interval' data-ref="88interval" data-ref-filename="88interval">interval</a> &lt;= <a class="local col7 ref" href="#87now" title='now' data-ref="87now" data-ref-filename="87now">now</a>;</td></tr>
<tr><th id="240">240</th><td>}</td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td><em>int</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::CalculateActiveWritablePingInterval' data-ref="_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController35CalculateActiveWritablePingIntervalEPKNS_10ConnectionEx">CalculateActiveWritablePingInterval</dfn>(</td></tr>
<tr><th id="243">243</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col9 decl" id="89conn" title='conn' data-type='const cricket::Connection *' data-ref="89conn" data-ref-filename="89conn">conn</dfn>,</td></tr>
<tr><th id="244">244</th><td>    <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col0 decl" id="90now" title='now' data-type='int64_t' data-ref="90now" data-ref-filename="90now">now</dfn>) <em>const</em> {</td></tr>
<tr><th id="245">245</th><td>  <i>// Ping each connection at a higher rate at least</i></td></tr>
<tr><th id="246">246</th><td><i>  // MIN_PINGS_AT_WEAK_PING_INTERVAL times.</i></td></tr>
<tr><th id="247">247</th><td>  <b>if</b> (<a class="local col9 ref" href="#89conn" title='conn' data-ref="89conn" data-ref-filename="89conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14num_pings_sentEv" title='cricket::Connection::num_pings_sent' data-ref="_ZNK7cricket10Connection14num_pings_sentEv" data-ref-filename="_ZNK7cricket10Connection14num_pings_sentEv">num_pings_sent</a>() &lt; <a class="ref" href="p2p_transport_channel.h.html#cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL" title='cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL' data-ref="cricket::MIN_PINGS_AT_WEAK_PING_INTERVAL" data-ref-filename="cricket..MIN_PINGS_AT_WEAK_PING_INTERVAL">MIN_PINGS_AT_WEAK_PING_INTERVAL</a>) {</td></tr>
<tr><th id="248">248</th><td>    <b>return</b> <a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController18weak_ping_intervalEv" title='cricket::BasicIceController::weak_ping_interval' data-ref="_ZNK7cricket18BasicIceController18weak_ping_intervalEv" data-ref-filename="_ZNK7cricket18BasicIceController18weak_ping_intervalEv">weak_ping_interval</a>();</td></tr>
<tr><th id="249">249</th><td>  }</td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td>  <em>int</em> <dfn class="local col1 decl" id="91stable_interval" title='stable_interval' data-type='int' data-ref="91stable_interval" data-ref-filename="91stable_interval">stable_interval</dfn> =</td></tr>
<tr><th id="252">252</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref fn" href="ice_transport_internal.h.html#_ZNK7cricket9IceConfig51stable_writable_connection_ping_interval_or_defaultEv" title='cricket::IceConfig::stable_writable_connection_ping_interval_or_default' data-ref="_ZNK7cricket9IceConfig51stable_writable_connection_ping_interval_or_defaultEv" data-ref-filename="_ZNK7cricket9IceConfig51stable_writable_connection_ping_interval_or_defaultEv">stable_writable_connection_ping_interval_or_default</a>();</td></tr>
<tr><th id="253">253</th><td>  <em>int</em> <dfn class="local col2 decl" id="92weak_or_stablizing_interval" title='weak_or_stablizing_interval' data-type='int' data-ref="92weak_or_stablizing_interval" data-ref-filename="92weak_or_stablizing_interval">weak_or_stablizing_interval</dfn> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(</td></tr>
<tr><th id="254">254</th><td>      <a class="local col1 ref" href="#91stable_interval" title='stable_interval' data-ref="91stable_interval" data-ref-filename="91stable_interval">stable_interval</a>, <a class="ref" href="p2p_constants.h.html#cricket::WEAK_OR_STABILIZING_WRITABLE_CONNECTION_PING_INTERVAL" title='cricket::WEAK_OR_STABILIZING_WRITABLE_CONNECTION_PING_INTERVAL' data-ref="cricket::WEAK_OR_STABILIZING_WRITABLE_CONNECTION_PING_INTERVAL" data-ref-filename="cricket..WEAK_OR_STABILIZING_WRITABLE_CONNECTION_PING_INTERVAL">WEAK_OR_STABILIZING_WRITABLE_CONNECTION_PING_INTERVAL</a>);</td></tr>
<tr><th id="255">255</th><td>  <i>// If the channel is weak or the connection is not stable yet, use the</i></td></tr>
<tr><th id="256">256</th><td><i>  // weak_or_stablizing_interval.</i></td></tr>
<tr><th id="257">257</th><td>  <b>return</b> (!<a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController4weakEv" title='cricket::BasicIceController::weak' data-ref="_ZNK7cricket18BasicIceController4weakEv" data-ref-filename="_ZNK7cricket18BasicIceController4weakEv">weak</a>() &amp;&amp; <a class="local col9 ref" href="#89conn" title='conn' data-ref="89conn" data-ref-filename="89conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection6stableEx" title='cricket::Connection::stable' data-ref="_ZNK7cricket10Connection6stableEx" data-ref-filename="_ZNK7cricket10Connection6stableEx">stable</a>(<a class="local col0 ref" href="#90now" title='now' data-ref="90now" data-ref-filename="90now">now</a>)) ? <a class="local col1 ref" href="#91stable_interval" title='stable_interval' data-ref="91stable_interval" data-ref-filename="91stable_interval">stable_interval</a></td></tr>
<tr><th id="258">258</th><td>                                        : <a class="local col2 ref" href="#92weak_or_stablizing_interval" title='weak_or_stablizing_interval' data-ref="92weak_or_stablizing_interval" data-ref-filename="92weak_or_stablizing_interval">weak_or_stablizing_interval</a>;</td></tr>
<tr><th id="259">259</th><td>}</td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td><i>// Is the connection in a state for us to even consider pinging the other side?</i></td></tr>
<tr><th id="262">262</th><td><i>// We consider a connection pingable even if it's not connected because that's</i></td></tr>
<tr><th id="263">263</th><td><i>// how a TCP connection is kicked into reconnecting on the active side.</i></td></tr>
<tr><th id="264">264</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" title='cricket::BasicIceController::IsPingable' data-ref="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController10IsPingableEPKNS_10ConnectionEx">IsPingable</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col3 decl" id="93conn" title='conn' data-type='const cricket::Connection *' data-ref="93conn" data-ref-filename="93conn">conn</dfn>, <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col4 decl" id="94now" title='now' data-type='int64_t' data-ref="94now" data-ref-filename="94now">now</dfn>) <em>const</em> {</td></tr>
<tr><th id="265">265</th><td>  <em>const</em> <a class="type" href="../../api/candidate.h.html#cricket::Candidate" title='cricket::Candidate' data-ref="cricket::Candidate" data-ref-filename="cricket..Candidate">Candidate</a>&amp; <dfn class="local col5 decl" id="95remote" title='remote' data-type='const cricket::Candidate &amp;' data-ref="95remote" data-ref-filename="95remote">remote</dfn> = <a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>();</td></tr>
<tr><th id="266">266</th><td>  <i>// We should never get this far with an empty remote ufrag.</i></td></tr>
<tr><th id="267">267</th><td>  <a class="macro" href="../../rtc_base/checks.h.html#429" title="(!remote.username().empty()) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 267, &quot;!remote.username().empty()&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_DCHECK">RTC_DCHECK</a>(!<a class="local col5 ref" href="#95remote" title='remote' data-ref="95remote" data-ref-filename="95remote">remote</a>.<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate8usernameEv" title='cricket::Candidate::username' data-ref="_ZNK7cricket9Candidate8usernameEv" data-ref-filename="_ZNK7cricket9Candidate8usernameEv">username</a>().<span class='ref fn' title='std::__1::basic_string::empty' data-ref="_ZNKSt3__112basic_string5emptyEv" data-ref-filename="_ZNKSt3__112basic_string5emptyEv">empty</span>());</td></tr>
<tr><th id="268">268</th><td>  <b>if</b> (<a class="local col5 ref" href="#95remote" title='remote' data-ref="95remote" data-ref-filename="95remote">remote</a>.<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate8usernameEv" title='cricket::Candidate::username' data-ref="_ZNK7cricket9Candidate8usernameEv" data-ref-filename="_ZNK7cricket9Candidate8usernameEv">username</a>().<span class='ref fn' title='std::__1::basic_string::empty' data-ref="_ZNKSt3__112basic_string5emptyEv" data-ref-filename="_ZNKSt3__112basic_string5emptyEv">empty</span>() || <a class="local col5 ref" href="#95remote" title='remote' data-ref="95remote" data-ref-filename="95remote">remote</a>.<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate8passwordEv" title='cricket::Candidate::password' data-ref="_ZNK7cricket9Candidate8passwordEv" data-ref-filename="_ZNK7cricket9Candidate8passwordEv">password</a>().<span class='ref fn' title='std::__1::basic_string::empty' data-ref="_ZNKSt3__112basic_string5emptyEv" data-ref-filename="_ZNKSt3__112basic_string5emptyEv">empty</span>()) {</td></tr>
<tr><th id="269">269</th><td>    <i>// If we don't have an ICE ufrag and pwd, there's no way we can ping.</i></td></tr>
<tr><th id="270">270</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="271">271</th><td>  }</td></tr>
<tr><th id="272">272</th><td></td></tr>
<tr><th id="273">273</th><td>  <i>// A failed connection will not be pinged.</i></td></tr>
<tr><th id="274">274</th><td>  <b>if</b> (<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection5stateEv" title='cricket::Connection::state' data-ref="_ZNK7cricket10Connection5stateEv" data-ref-filename="_ZNK7cricket10Connection5stateEv">state</a>() == <a class="type" href="connection_info.h.html#cricket::IceCandidatePairState" title='cricket::IceCandidatePairState' data-ref="cricket::IceCandidatePairState" data-ref-filename="cricket..IceCandidatePairState">IceCandidatePairState</a>::<a class="enum" href="connection_info.h.html#cricket::IceCandidatePairState::FAILED" title='cricket::IceCandidatePairState::FAILED' data-ref="cricket::IceCandidatePairState::FAILED" data-ref-filename="cricket..IceCandidatePairState..FAILED">FAILED</a>) {</td></tr>
<tr><th id="275">275</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="276">276</th><td>  }</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td>  <i>// An never connected connection cannot be written to at all, so pinging is</i></td></tr>
<tr><th id="279">279</th><td><i>  // out of the question. However, if it has become WRITABLE, it is in the</i></td></tr>
<tr><th id="280">280</th><td><i>  // reconnecting state so ping is needed.</i></td></tr>
<tr><th id="281">281</th><td>  <b>if</b> (!<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>() &amp;&amp; !<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>()) {</td></tr>
<tr><th id="282">282</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="283">283</th><td>  }</td></tr>
<tr><th id="284">284</th><td></td></tr>
<tr><th id="285">285</th><td>  <i>// If we sent a number of pings wo/ reply, skip sending more</i></td></tr>
<tr><th id="286">286</th><td><i>  // until we get one.</i></td></tr>
<tr><th id="287">287</th><td>  <b>if</b> (<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection23TooManyOutstandingPingsERKNSt3__18optionalIiEE" title='cricket::Connection::TooManyOutstandingPings' data-ref="_ZNK7cricket10Connection23TooManyOutstandingPingsERKNSt3__18optionalIiEE" data-ref-filename="_ZNK7cricket10Connection23TooManyOutstandingPingsERKNSt3__18optionalIiEE">TooManyOutstandingPings</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::max_outstanding_pings" title='cricket::IceFieldTrials::max_outstanding_pings' data-ref="cricket::IceFieldTrials::max_outstanding_pings" data-ref-filename="cricket..IceFieldTrials..max_outstanding_pings">max_outstanding_pings</a>)) {</td></tr>
<tr><th id="288">288</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="289">289</th><td>  }</td></tr>
<tr><th id="290">290</th><td></td></tr>
<tr><th id="291">291</th><td>  <i>// If the channel is weakly connected, ping all connections.</i></td></tr>
<tr><th id="292">292</th><td>  <b>if</b> (<a class="member fn" href="basic_ice_controller.h.html#_ZNK7cricket18BasicIceController4weakEv" title='cricket::BasicIceController::weak' data-ref="_ZNK7cricket18BasicIceController4weakEv" data-ref-filename="_ZNK7cricket18BasicIceController4weakEv">weak</a>()) {</td></tr>
<tr><th id="293">293</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="294">294</th><td>  }</td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>  <i>// Always ping active connections regardless whether the channel is completed</i></td></tr>
<tr><th id="297">297</th><td><i>  // or not, but backup connections are pinged at a slower rate.</i></td></tr>
<tr><th id="298">298</th><td>  <b>if</b> (<a class="member fn" href="#_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE" title='cricket::BasicIceController::IsBackupConnection' data-ref="_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE">IsBackupConnection</a>(<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>)) {</td></tr>
<tr><th id="299">299</th><td>    <b>return</b> <a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11rtt_samplesEv" title='cricket::Connection::rtt_samples' data-ref="_ZNK7cricket10Connection11rtt_samplesEv" data-ref-filename="_ZNK7cricket10Connection11rtt_samplesEv">rtt_samples</a>() == <var>0</var> ||</td></tr>
<tr><th id="300">300</th><td>           (<a class="local col4 ref" href="#94now" title='now' data-ref="94now" data-ref-filename="94now">now</a> &gt;= <a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection27last_ping_response_receivedEv" title='cricket::Connection::last_ping_response_received' data-ref="_ZNK7cricket10Connection27last_ping_response_receivedEv" data-ref-filename="_ZNK7cricket10Connection27last_ping_response_receivedEv">last_ping_response_received</a>() +</td></tr>
<tr><th id="301">301</th><td>                       <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref fn" href="ice_transport_internal.h.html#_ZNK7cricket9IceConfig42backup_connection_ping_interval_or_defaultEv" title='cricket::IceConfig::backup_connection_ping_interval_or_default' data-ref="_ZNK7cricket9IceConfig42backup_connection_ping_interval_or_defaultEv" data-ref-filename="_ZNK7cricket9IceConfig42backup_connection_ping_interval_or_defaultEv">backup_connection_ping_interval_or_default</a>());</td></tr>
<tr><th id="302">302</th><td>  }</td></tr>
<tr><th id="303">303</th><td>  <i>// Don't ping inactive non-backup connections.</i></td></tr>
<tr><th id="304">304</th><td>  <b>if</b> (!<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection6activeEv" title='cricket::Connection::active' data-ref="_ZNK7cricket10Connection6activeEv" data-ref-filename="_ZNK7cricket10Connection6activeEv">active</a>()) {</td></tr>
<tr><th id="305">305</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="306">306</th><td>  }</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td>  <i>// Do ping unwritable, active connections.</i></td></tr>
<tr><th id="309">309</th><td>  <b>if</b> (!<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>()) {</td></tr>
<tr><th id="310">310</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="311">311</th><td>  }</td></tr>
<tr><th id="312">312</th><td></td></tr>
<tr><th id="313">313</th><td>  <i>// Ping writable, active connections if it's been long enough since the last</i></td></tr>
<tr><th id="314">314</th><td><i>  // ping.</i></td></tr>
<tr><th id="315">315</th><td>  <b>return</b> <a class="member fn" href="#_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" title='cricket::BasicIceController::WritableConnectionPastPingInterval' data-ref="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx" data-ref-filename="_ZNK7cricket18BasicIceController34WritableConnectionPastPingIntervalEPKNS_10ConnectionEx">WritableConnectionPastPingInterval</a>(<a class="local col3 ref" href="#93conn" title='conn' data-ref="93conn" data-ref-filename="93conn">conn</a>, <a class="local col4 ref" href="#94now" title='now' data-ref="94now" data-ref-filename="94now">now</a>);</td></tr>
<tr><th id="316">316</th><td>}</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td><i>// A connection is considered a backup connection if the channel state</i></td></tr>
<tr><th id="319">319</th><td><i>// is completed, the connection is not the selected connection and it is active.</i></td></tr>
<tr><th id="320">320</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE" title='cricket::BasicIceController::IsBackupConnection' data-ref="_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController18IsBackupConnectionEPKNS_10ConnectionE">IsBackupConnection</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="96conn" title='conn' data-type='const cricket::Connection *' data-ref="96conn" data-ref-filename="96conn">conn</dfn>) <em>const</em> {</td></tr>
<tr><th id="321">321</th><td>  <b>return</b> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::ice_transport_state_func_" title='cricket::BasicIceController::ice_transport_state_func_' data-ref="cricket::BasicIceController::ice_transport_state_func_" data-ref-filename="cricket..BasicIceController..ice_transport_state_func_">ice_transport_state_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNKSt3__18functionIFT_DpT0_EEclES3_" data-ref-filename="_ZNKSt3__18functionIFT_DpT0_EEclES3_">()</span> == <a class="type" href="ice_transport_internal.h.html#cricket::IceTransportState" title='cricket::IceTransportState' data-ref="cricket::IceTransportState" data-ref-filename="cricket..IceTransportState">IceTransportState</a>::<a class="enum" href="ice_transport_internal.h.html#cricket::IceTransportState::STATE_COMPLETED" title='cricket::IceTransportState::STATE_COMPLETED' data-ref="cricket::IceTransportState::STATE_COMPLETED" data-ref-filename="cricket..IceTransportState..STATE_COMPLETED">STATE_COMPLETED</a> &amp;&amp;</td></tr>
<tr><th id="322">322</th><td>         <a class="local col6 ref" href="#96conn" title='conn' data-ref="96conn" data-ref-filename="96conn">conn</a> != <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> &amp;&amp; <a class="local col6 ref" href="#96conn" title='conn' data-ref="96conn" data-ref-filename="96conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection6activeEv" title='cricket::Connection::active' data-ref="_ZNK7cricket10Connection6activeEv" data-ref-filename="_ZNK7cricket10Connection6activeEv">active</a>();</td></tr>
<tr><th id="323">323</th><td>}</td></tr>
<tr><th id="324">324</th><td></td></tr>
<tr><th id="325">325</th><td><em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_" title='cricket::BasicIceController::MorePingable' data-ref="_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController12MorePingableEPKNS_10ConnectionES3_">MorePingable</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col7 decl" id="97conn1" title='conn1' data-type='const cricket::Connection *' data-ref="97conn1" data-ref-filename="97conn1">conn1</dfn>,</td></tr>
<tr><th id="326">326</th><td>                                                   <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="98conn2" title='conn2' data-type='const cricket::Connection *' data-ref="98conn2" data-ref-filename="98conn2">conn2</dfn>) {</td></tr>
<tr><th id="327">327</th><td>  <a class="macro" href="../../rtc_base/checks.h.html#429" title="(conn1 != conn2) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 327, &quot;conn1 != conn2&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_DCHECK">RTC_DCHECK</a>(<a class="local col7 ref" href="#97conn1" title='conn1' data-ref="97conn1" data-ref-filename="97conn1">conn1</a> != <a class="local col8 ref" href="#98conn2" title='conn2' data-ref="98conn2" data-ref-filename="98conn2">conn2</a>);</td></tr>
<tr><th id="328">328</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref field" href="ice_transport_internal.h.html#cricket::IceConfig::prioritize_most_likely_candidate_pairs" title='cricket::IceConfig::prioritize_most_likely_candidate_pairs' data-ref="cricket::IceConfig::prioritize_most_likely_candidate_pairs" data-ref-filename="cricket..IceConfig..prioritize_most_likely_candidate_pairs">prioritize_most_likely_candidate_pairs</a>) {</td></tr>
<tr><th id="329">329</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col9 decl" id="99most_likely_to_work_conn" title='most_likely_to_work_conn' data-type='const cricket::Connection *' data-ref="99most_likely_to_work_conn" data-ref-filename="99most_likely_to_work_conn">most_likely_to_work_conn</dfn> = <a class="member fn" href="#_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_" title='cricket::BasicIceController::MostLikelyToWork' data-ref="_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_">MostLikelyToWork</a>(<a class="local col7 ref" href="#97conn1" title='conn1' data-ref="97conn1" data-ref-filename="97conn1">conn1</a>, <a class="local col8 ref" href="#98conn2" title='conn2' data-ref="98conn2" data-ref-filename="98conn2">conn2</a>);</td></tr>
<tr><th id="330">330</th><td>    <b>if</b> (<a class="local col9 ref" href="#99most_likely_to_work_conn" title='most_likely_to_work_conn' data-ref="99most_likely_to_work_conn" data-ref-filename="99most_likely_to_work_conn">most_likely_to_work_conn</a>) {</td></tr>
<tr><th id="331">331</th><td>      <b>return</b> <a class="local col9 ref" href="#99most_likely_to_work_conn" title='most_likely_to_work_conn' data-ref="99most_likely_to_work_conn" data-ref-filename="99most_likely_to_work_conn">most_likely_to_work_conn</a>;</td></tr>
<tr><th id="332">332</th><td>    }</td></tr>
<tr><th id="333">333</th><td>  }</td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td>  <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col0 decl" id="100least_recently_pinged_conn" title='least_recently_pinged_conn' data-type='const cricket::Connection *' data-ref="100least_recently_pinged_conn" data-ref-filename="100least_recently_pinged_conn">least_recently_pinged_conn</dfn> =</td></tr>
<tr><th id="336">336</th><td>      <a class="member fn" href="#_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_" title='cricket::BasicIceController::LeastRecentlyPinged' data-ref="_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_">LeastRecentlyPinged</a>(<a class="local col7 ref" href="#97conn1" title='conn1' data-ref="97conn1" data-ref-filename="97conn1">conn1</a>, <a class="local col8 ref" href="#98conn2" title='conn2' data-ref="98conn2" data-ref-filename="98conn2">conn2</a>);</td></tr>
<tr><th id="337">337</th><td>  <b>if</b> (<a class="local col0 ref" href="#100least_recently_pinged_conn" title='least_recently_pinged_conn' data-ref="100least_recently_pinged_conn" data-ref-filename="100least_recently_pinged_conn">least_recently_pinged_conn</a>) {</td></tr>
<tr><th id="338">338</th><td>    <b>return</b> <a class="local col0 ref" href="#100least_recently_pinged_conn" title='least_recently_pinged_conn' data-ref="100least_recently_pinged_conn" data-ref-filename="100least_recently_pinged_conn">least_recently_pinged_conn</a>;</td></tr>
<tr><th id="339">339</th><td>  }</td></tr>
<tr><th id="340">340</th><td></td></tr>
<tr><th id="341">341</th><td>  <i>// During the initial state when nothing has been pinged yet, return the first</i></td></tr>
<tr><th id="342">342</th><td><i>  // one in the ordered |connections_|.</i></td></tr>
<tr><th id="343">343</th><td>  <em>auto</em> <dfn class="local col1 decl" id="101connections" title='connections' data-type='std::__1::vector&lt;const cricket::Connection *, std::__1::allocator&lt;const cricket::Connection *&gt;&gt;' data-ref="101connections" data-ref-filename="101connections">connections</dfn> = <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1ERKNS_6vectorIT_T0_EE" data-ref-filename="_ZNSt3__16vectorC1ERKNS_6vectorIT_T0_EE"></span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>;</td></tr>
<tr><th id="344">344</th><td>  <b>return</b> <span class='ref fn' title='std::__1::__wrap_iter::operator*' data-ref="_ZNKSt3__111__wrap_iterdeEv" data-ref-filename="_ZNKSt3__111__wrap_iterdeEv">*</span>(<span class="namespace">std::</span><span class='ref fn' title='std::__1::find_if' data-ref="_ZNSt3__1L7find_ifET_S0_T0_" data-ref-filename="_ZNSt3__1L7find_ifET_S0_T0_">find_if</span>(<a class="local col1 ref" href="#101connections" title='connections' data-ref="101connections" data-ref-filename="101connections">connections</a>.<span class='ref fn' title='std::__1::vector::begin' data-ref="_ZNSt3__16vector5beginEv" data-ref-filename="_ZNSt3__16vector5beginEv">begin</span>(), <a class="local col1 ref" href="#101connections" title='connections' data-ref="101connections" data-ref-filename="101connections">connections</a>.<span class='ref fn' title='std::__1::vector::end' data-ref="_ZNSt3__16vector3endEv" data-ref-filename="_ZNSt3__16vector3endEv">end</span>(),</td></tr>
<tr><th id="345">345</th><td>                        [<a class="local col7 ref" href="#97conn1" title='conn1' data-ref="97conn1" data-ref-filename="97conn1">conn1</a>, <a class="local col8 ref" href="#98conn2" title='conn2' data-ref="98conn2" data-ref-filename="98conn2">conn2</a>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col2 decl" id="102conn" title='conn' data-type='const cricket::Connection *' data-ref="102conn" data-ref-filename="102conn">conn</dfn>) {</td></tr>
<tr><th id="346">346</th><td>                          <b>return</b> <a class="local col2 ref" href="#102conn" title='conn' data-ref="102conn" data-ref-filename="102conn">conn</a> == <a class="local col7 ref" href="#97conn1" title='conn1' data-ref="97conn1" data-ref-filename="97conn1">conn1</a> || <a class="local col2 ref" href="#102conn" title='conn' data-ref="102conn" data-ref-filename="102conn">conn</a> == <a class="local col8 ref" href="#98conn2" title='conn2' data-ref="98conn2" data-ref-filename="98conn2">conn2</a>;</td></tr>
<tr><th id="347">347</th><td>                        }));</td></tr>
<tr><th id="348">348</th><td>}</td></tr>
<tr><th id="349">349</th><td></td></tr>
<tr><th id="350">350</th><td><em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_" title='cricket::BasicIceController::MostLikelyToWork' data-ref="_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController16MostLikelyToWorkEPKNS_10ConnectionES3_">MostLikelyToWork</dfn>(</td></tr>
<tr><th id="351">351</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col3 decl" id="103conn1" title='conn1' data-type='const cricket::Connection *' data-ref="103conn1" data-ref-filename="103conn1">conn1</dfn>,</td></tr>
<tr><th id="352">352</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col4 decl" id="104conn2" title='conn2' data-type='const cricket::Connection *' data-ref="104conn2" data-ref-filename="104conn2">conn2</dfn>) {</td></tr>
<tr><th id="353">353</th><td>  <em>bool</em> <dfn class="local col5 decl" id="105rr1" title='rr1' data-type='bool' data-ref="105rr1" data-ref-filename="105rr1">rr1</dfn> = <a class="tu ref fn" href="#_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsRelayRelay' data-use='c' data-ref="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE">IsRelayRelay</a>(<a class="local col3 ref" href="#103conn1" title='conn1' data-ref="103conn1" data-ref-filename="103conn1">conn1</a>);</td></tr>
<tr><th id="354">354</th><td>  <em>bool</em> <dfn class="local col6 decl" id="106rr2" title='rr2' data-type='bool' data-ref="106rr2" data-ref-filename="106rr2">rr2</dfn> = <a class="tu ref fn" href="#_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsRelayRelay' data-use='c' data-ref="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_112IsRelayRelayEPKN7cricket10ConnectionE">IsRelayRelay</a>(<a class="local col4 ref" href="#104conn2" title='conn2' data-ref="104conn2" data-ref-filename="104conn2">conn2</a>);</td></tr>
<tr><th id="355">355</th><td>  <b>if</b> (<a class="local col5 ref" href="#105rr1" title='rr1' data-ref="105rr1" data-ref-filename="105rr1">rr1</a> &amp;&amp; !<a class="local col6 ref" href="#106rr2" title='rr2' data-ref="106rr2" data-ref-filename="106rr2">rr2</a>) {</td></tr>
<tr><th id="356">356</th><td>    <b>return</b> <a class="local col3 ref" href="#103conn1" title='conn1' data-ref="103conn1" data-ref-filename="103conn1">conn1</a>;</td></tr>
<tr><th id="357">357</th><td>  } <b>else</b> <b>if</b> (<a class="local col6 ref" href="#106rr2" title='rr2' data-ref="106rr2" data-ref-filename="106rr2">rr2</a> &amp;&amp; !<a class="local col5 ref" href="#105rr1" title='rr1' data-ref="105rr1" data-ref-filename="105rr1">rr1</a>) {</td></tr>
<tr><th id="358">358</th><td>    <b>return</b> <a class="local col4 ref" href="#104conn2" title='conn2' data-ref="104conn2" data-ref-filename="104conn2">conn2</a>;</td></tr>
<tr><th id="359">359</th><td>  } <b>else</b> <b>if</b> (<a class="local col5 ref" href="#105rr1" title='rr1' data-ref="105rr1" data-ref-filename="105rr1">rr1</a> &amp;&amp; <a class="local col6 ref" href="#106rr2" title='rr2' data-ref="106rr2" data-ref-filename="106rr2">rr2</a>) {</td></tr>
<tr><th id="360">360</th><td>    <em>bool</em> <dfn class="local col7 decl" id="107udp1" title='udp1' data-type='bool' data-ref="107udp1" data-ref-filename="107udp1">udp1</dfn> = <a class="tu ref fn" href="#_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsUdp' data-use='c' data-ref="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE">IsUdp</a>(<a class="local col3 ref" href="#103conn1" title='conn1' data-ref="103conn1" data-ref-filename="103conn1">conn1</a>);</td></tr>
<tr><th id="361">361</th><td>    <em>bool</em> <dfn class="local col8 decl" id="108udp2" title='udp2' data-type='bool' data-ref="108udp2" data-ref-filename="108udp2">udp2</dfn> = <a class="tu ref fn" href="#_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" title='(anonymous namespace)::IsUdp' data-use='c' data-ref="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE" data-ref-filename="_ZN12_GLOBAL__N_15IsUdpEPKN7cricket10ConnectionE">IsUdp</a>(<a class="local col4 ref" href="#104conn2" title='conn2' data-ref="104conn2" data-ref-filename="104conn2">conn2</a>);</td></tr>
<tr><th id="362">362</th><td>    <b>if</b> (<a class="local col7 ref" href="#107udp1" title='udp1' data-ref="107udp1" data-ref-filename="107udp1">udp1</a> &amp;&amp; !<a class="local col8 ref" href="#108udp2" title='udp2' data-ref="108udp2" data-ref-filename="108udp2">udp2</a>) {</td></tr>
<tr><th id="363">363</th><td>      <b>return</b> <a class="local col3 ref" href="#103conn1" title='conn1' data-ref="103conn1" data-ref-filename="103conn1">conn1</a>;</td></tr>
<tr><th id="364">364</th><td>    } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#108udp2" title='udp2' data-ref="108udp2" data-ref-filename="108udp2">udp2</a> &amp;&amp; <a class="local col7 ref" href="#107udp1" title='udp1' data-ref="107udp1" data-ref-filename="107udp1">udp1</a>) {</td></tr>
<tr><th id="365">365</th><td>      <b>return</b> <a class="local col4 ref" href="#104conn2" title='conn2' data-ref="104conn2" data-ref-filename="104conn2">conn2</a>;</td></tr>
<tr><th id="366">366</th><td>    }</td></tr>
<tr><th id="367">367</th><td>  }</td></tr>
<tr><th id="368">368</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="369">369</th><td>}</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_" title='cricket::BasicIceController::LeastRecentlyPinged' data-ref="_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_" data-ref-filename="_ZN7cricket18BasicIceController19LeastRecentlyPingedEPKNS_10ConnectionES3_">LeastRecentlyPinged</dfn>(</td></tr>
<tr><th id="372">372</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col9 decl" id="109conn1" title='conn1' data-type='const cricket::Connection *' data-ref="109conn1" data-ref-filename="109conn1">conn1</dfn>,</td></tr>
<tr><th id="373">373</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col0 decl" id="110conn2" title='conn2' data-type='const cricket::Connection *' data-ref="110conn2" data-ref-filename="110conn2">conn2</dfn>) {</td></tr>
<tr><th id="374">374</th><td>  <b>if</b> (<a class="local col9 ref" href="#109conn1" title='conn1' data-ref="109conn1" data-ref-filename="109conn1">conn1</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>() &lt; <a class="local col0 ref" href="#110conn2" title='conn2' data-ref="110conn2" data-ref-filename="110conn2">conn2</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>()) {</td></tr>
<tr><th id="375">375</th><td>    <b>return</b> <a class="local col9 ref" href="#109conn1" title='conn1' data-ref="109conn1" data-ref-filename="109conn1">conn1</a>;</td></tr>
<tr><th id="376">376</th><td>  }</td></tr>
<tr><th id="377">377</th><td>  <b>if</b> (<a class="local col9 ref" href="#109conn1" title='conn1' data-ref="109conn1" data-ref-filename="109conn1">conn1</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>() &gt; <a class="local col0 ref" href="#110conn2" title='conn2' data-ref="110conn2" data-ref-filename="110conn2">conn2</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection14last_ping_sentEv" title='cricket::Connection::last_ping_sent' data-ref="_ZNK7cricket10Connection14last_ping_sentEv" data-ref-filename="_ZNK7cricket10Connection14last_ping_sentEv">last_ping_sent</a>()) {</td></tr>
<tr><th id="378">378</th><td>    <b>return</b> <a class="local col0 ref" href="#110conn2" title='conn2' data-ref="110conn2" data-ref-filename="110conn2">conn2</a>;</td></tr>
<tr><th id="379">379</th><td>  }</td></tr>
<tr><th id="380">380</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="381">381</th><td>}</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td><span class="namespace">std::</span><span class='type' title='std::__1::map' data-ref="std::__1::map" data-ref-filename="std..__1..map">map</span>&lt;<em>const</em> <span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network.h.html#rtc::Network" title='rtc::Network' data-ref="rtc::Network" data-ref-filename="rtc..Network">Network</a>*, <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt;</td></tr>
<tr><th id="384">384</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" title='cricket::BasicIceController::GetBestConnectionByNetwork' data-ref="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" data-ref-filename="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv">GetBestConnectionByNetwork</dfn>() <em>const</em> {</td></tr>
<tr><th id="385">385</th><td>  <i>// |connections_| has been sorted, so the first one in the list on a given</i></td></tr>
<tr><th id="386">386</th><td><i>  // network is the best connection on the network, except that the selected</i></td></tr>
<tr><th id="387">387</th><td><i>  // connection is always the best connection on the network.</i></td></tr>
<tr><th id="388">388</th><td>  <span class="namespace">std::</span><span class='type' title='std::__1::map' data-ref="std::__1::map" data-ref-filename="std..__1..map">map</span>&lt;<em>const</em> <span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network.h.html#rtc::Network" title='rtc::Network' data-ref="rtc::Network" data-ref-filename="rtc..Network">Network</a>*, <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <span class='ref fn fake' title='std::__1::map::map&lt;_Key, _Tp, _Compare, _Allocator&gt;' data-ref="_ZNSt3__13mapC1Ev" data-ref-filename="_ZNSt3__13mapC1Ev"></span><dfn class="local col1 decl" id="111best_connection_by_network" title='best_connection_by_network' data-type='std::map&lt;const rtc::Network *, const Connection *&gt;' data-ref="111best_connection_by_network" data-ref-filename="111best_connection_by_network">best_connection_by_network</dfn>;</td></tr>
<tr><th id="389">389</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>) {</td></tr>
<tr><th id="390">390</th><td>    <a class="local col1 ref" href="#111best_connection_by_network" title='best_connection_by_network' data-ref="111best_connection_by_network" data-ref-filename="111best_connection_by_network">best_connection_by_network</a><span class='ref fn' title='std::__1::map::operator[]' data-ref="_ZNSt3__13mapixEOT_" data-ref-filename="_ZNSt3__13mapixEOT_">[<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection7networkEv" title='cricket::Connection::network' data-ref="_ZNK7cricket10Connection7networkEv" data-ref-filename="_ZNK7cricket10Connection7networkEv">network</a>()]</span> =</td></tr>
<tr><th id="391">391</th><td>        <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>;</td></tr>
<tr><th id="392">392</th><td>  }</td></tr>
<tr><th id="393">393</th><td>  <i>// TODO(honghaiz): Need to update this if |connections_| are not sorted.</i></td></tr>
<tr><th id="394">394</th><td>  <b>for</b> (<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col2 decl" id="112conn" title='conn' data-type='const cricket::Connection *' data-ref="112conn" data-ref-filename="112conn">conn</dfn> : <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>) {</td></tr>
<tr><th id="395">395</th><td>    <em>const</em> <span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network.h.html#rtc::Network" title='rtc::Network' data-ref="rtc::Network" data-ref-filename="rtc..Network">Network</a>* <dfn class="local col3 decl" id="113network" title='network' data-type='const rtc::Network *' data-ref="113network" data-ref-filename="113network">network</dfn> = <a class="local col2 ref" href="#112conn" title='conn' data-ref="112conn" data-ref-filename="112conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection7networkEv" title='cricket::Connection::network' data-ref="_ZNK7cricket10Connection7networkEv" data-ref-filename="_ZNK7cricket10Connection7networkEv">network</a>();</td></tr>
<tr><th id="396">396</th><td>    <i>// This only inserts when the network does not exist in the map.</i></td></tr>
<tr><th id="397">397</th><td>    <a class="local col1 ref" href="#111best_connection_by_network" title='best_connection_by_network' data-ref="111best_connection_by_network" data-ref-filename="111best_connection_by_network">best_connection_by_network</a>.<span class='ref fn' title='std::__1::map::insert' data-ref="_ZNSt3__13map6insertEOTL0__" data-ref-filename="_ZNSt3__13map6insertEOTL0__">insert</span>(<span class="namespace">std::</span><span class='ref fn' title='std::__1::make_pair' data-ref="_ZNSt3__1L9make_pairEOT_OT0_" data-ref-filename="_ZNSt3__1L9make_pairEOT_OT0_">make_pair</span>(<span class='refarg'><a class="local col3 ref" href="#113network" title='network' data-ref="113network" data-ref-filename="113network">network</a></span>, <span class='refarg'><a class="local col2 ref" href="#112conn" title='conn' data-ref="112conn" data-ref-filename="112conn">conn</a></span>));</td></tr>
<tr><th id="398">398</th><td>  }</td></tr>
<tr><th id="399">399</th><td>  <b>return</b> <a class="local col1 ref" href="#111best_connection_by_network" title='best_connection_by_network' data-ref="111best_connection_by_network" data-ref-filename="111best_connection_by_network">best_connection_by_network</a>;</td></tr>
<tr><th id="400">400</th><td>}</td></tr>
<tr><th id="401">401</th><td></td></tr>
<tr><th id="402">402</th><td><span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt;</td></tr>
<tr><th id="403">403</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv" title='cricket::BasicIceController::GetBestWritableConnectionPerNetwork' data-ref="_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv" data-ref-filename="_ZNK7cricket18BasicIceController35GetBestWritableConnectionPerNetworkEv">GetBestWritableConnectionPerNetwork</dfn>() <em>const</em> {</td></tr>
<tr><th id="404">404</th><td>  <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev"></span><dfn class="local col4 decl" id="114connections" title='connections' data-type='std::vector&lt;const Connection *&gt;' data-ref="114connections" data-ref-filename="114connections">connections</dfn>;</td></tr>
<tr><th id="405">405</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="115kv" title='kv' data-type='std::__1::pair&lt;const rtc::Network *const, const cricket::Connection *&gt;' data-ref="115kv" data-ref-filename="115kv">kv</dfn> : <a class="member fn" href="#_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" title='cricket::BasicIceController::GetBestConnectionByNetwork' data-ref="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" data-ref-filename="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv">GetBestConnectionByNetwork</a>()) {</td></tr>
<tr><th id="406">406</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="116conn" title='conn' data-type='const cricket::Connection *' data-ref="116conn" data-ref-filename="116conn">conn</dfn> = <a class="local col5 ref" href="#115kv" title='kv' data-ref="115kv" data-ref-filename="115kv">kv</a>.<span class='ref field' title='std::__1::pair&lt;const rtc::Network *const, const cricket::Connection *&gt;::second' data-ref="std::__1::pair::second" data-ref-filename="std..__1..pair..second">second</span>;</td></tr>
<tr><th id="407">407</th><td>    <b>if</b> (<a class="local col6 ref" href="#116conn" title='conn' data-ref="116conn" data-ref-filename="116conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() &amp;&amp; <a class="local col6 ref" href="#116conn" title='conn' data-ref="116conn" data-ref-filename="116conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>()) {</td></tr>
<tr><th id="408">408</th><td>      <a class="local col4 ref" href="#114connections" title='connections' data-ref="114connections" data-ref-filename="114connections">connections</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE" data-ref-filename="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE">push_back</span>(<a class="local col6 ref" href="#116conn" title='conn' data-ref="116conn" data-ref-filename="116conn">conn</a>);</td></tr>
<tr><th id="409">409</th><td>    }</td></tr>
<tr><th id="410">410</th><td>  }</td></tr>
<tr><th id="411">411</th><td>  <b>return</b> <a class="local col4 ref" href="#114connections" title='connections' data-ref="114connections" data-ref-filename="114connections">connections</a>;</td></tr>
<tr><th id="412">412</th><td>}</td></tr>
<tr><th id="413">413</th><td></td></tr>
<tr><th id="414">414</th><td><a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface" title='cricket::IceControllerInterface' data-ref="cricket::IceControllerInterface" data-ref-filename="cricket..IceControllerInterface">IceControllerInterface</a>::<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface::SwitchResult" title='cricket::IceControllerInterface::SwitchResult' data-ref="cricket::IceControllerInterface::SwitchResult" data-ref-filename="cricket..IceControllerInterface..SwitchResult">SwitchResult</a></td></tr>
<tr><th id="415">415</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE" title='cricket::BasicIceController::HandleInitialSelectDampening' data-ref="_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE">HandleInitialSelectDampening</dfn>(</td></tr>
<tr><th id="416">416</th><td>    <a class="type" href="ice_controller_interface.h.html#cricket::IceControllerEvent" title='cricket::IceControllerEvent' data-ref="cricket::IceControllerEvent" data-ref-filename="cricket..IceControllerEvent">IceControllerEvent</a> <dfn class="local col7 decl" id="117reason" title='reason' data-type='cricket::IceControllerEvent' data-ref="117reason" data-ref-filename="117reason">reason</dfn>,</td></tr>
<tr><th id="417">417</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="118new_connection" title='new_connection' data-type='const cricket::Connection *' data-ref="118new_connection" data-ref-filename="118new_connection">new_connection</dfn>) {</td></tr>
<tr><th id="418">418</th><td>  <b>if</b> (!<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening" title='cricket::IceFieldTrials::initial_select_dampening' data-ref="cricket::IceFieldTrials::initial_select_dampening" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening">initial_select_dampening</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>() &amp;&amp;</td></tr>
<tr><th id="419">419</th><td>      !<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening_ping_received" title='cricket::IceFieldTrials::initial_select_dampening_ping_received' data-ref="cricket::IceFieldTrials::initial_select_dampening_ping_received" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening_ping_received">initial_select_dampening_ping_received</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>()) {</td></tr>
<tr><th id="420">420</th><td>    <i>// experiment not enabled =&gt; select connection.</i></td></tr>
<tr><th id="421">421</th><td>    <b>return</b> {<a class="local col8 ref" href="#118new_connection" title='new_connection' data-ref="118new_connection" data-ref-filename="118new_connection">new_connection</a>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="422">422</th><td>  }</td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col9 decl" id="119now" title='now' data-type='int64_t' data-ref="119now" data-ref-filename="119now">now</dfn> = <span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/time_utils.h.html#_ZN3rtc10TimeMillisEv" title='rtc::TimeMillis' data-ref="_ZN3rtc10TimeMillisEv" data-ref-filename="_ZN3rtc10TimeMillisEv">TimeMillis</a>();</td></tr>
<tr><th id="425">425</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col0 decl" id="120max_delay" title='max_delay' data-type='int64_t' data-ref="120max_delay" data-ref-filename="120max_delay">max_delay</dfn> = <var>0</var>;</td></tr>
<tr><th id="426">426</th><td>  <b>if</b> (<a class="local col8 ref" href="#118new_connection" title='new_connection' data-ref="118new_connection" data-ref-filename="118new_connection">new_connection</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_ping_receivedEv" title='cricket::Connection::last_ping_received' data-ref="_ZNK7cricket10Connection18last_ping_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_ping_receivedEv">last_ping_received</a>() &gt; <var>0</var> &amp;&amp;</td></tr>
<tr><th id="427">427</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening_ping_received" title='cricket::IceFieldTrials::initial_select_dampening_ping_received' data-ref="cricket::IceFieldTrials::initial_select_dampening_ping_received" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening_ping_received">initial_select_dampening_ping_received</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>()) {</td></tr>
<tr><th id="428">428</th><td>    <a class="local col0 ref" href="#120max_delay" title='max_delay' data-ref="120max_delay" data-ref-filename="120max_delay">max_delay</a> = <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNKRSt3__18optionaldeEv" data-ref-filename="_ZNKRSt3__18optionaldeEv">*</span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening_ping_received" title='cricket::IceFieldTrials::initial_select_dampening_ping_received' data-ref="cricket::IceFieldTrials::initial_select_dampening_ping_received" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening_ping_received">initial_select_dampening_ping_received</a>;</td></tr>
<tr><th id="429">429</th><td>  } <b>else</b> <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening" title='cricket::IceFieldTrials::initial_select_dampening' data-ref="cricket::IceFieldTrials::initial_select_dampening" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening">initial_select_dampening</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>()) {</td></tr>
<tr><th id="430">430</th><td>    <a class="local col0 ref" href="#120max_delay" title='max_delay' data-ref="120max_delay" data-ref-filename="120max_delay">max_delay</a> = <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNKRSt3__18optionaldeEv" data-ref-filename="_ZNKRSt3__18optionaldeEv">*</span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening" title='cricket::IceFieldTrials::initial_select_dampening' data-ref="cricket::IceFieldTrials::initial_select_dampening" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening">initial_select_dampening</a>;</td></tr>
<tr><th id="431">431</th><td>  }</td></tr>
<tr><th id="432">432</th><td></td></tr>
<tr><th id="433">433</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col1 decl" id="121start_wait" title='start_wait' data-type='int64_t' data-ref="121start_wait" data-ref-filename="121start_wait">start_wait</dfn> =</td></tr>
<tr><th id="434">434</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a> == <var>0</var> ? <a class="local col9 ref" href="#119now" title='now' data-ref="119now" data-ref-filename="119now">now</a> : <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a>;</td></tr>
<tr><th id="435">435</th><td>  <span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span> <dfn class="local col2 decl" id="122max_wait_until" title='max_wait_until' data-type='int64_t' data-ref="122max_wait_until" data-ref-filename="122max_wait_until">max_wait_until</dfn> = <a class="local col1 ref" href="#121start_wait" title='start_wait' data-ref="121start_wait" data-ref-filename="121start_wait">start_wait</a> + <a class="local col0 ref" href="#120max_delay" title='max_delay' data-ref="120max_delay" data-ref-filename="120max_delay">max_delay</a>;</td></tr>
<tr><th id="436">436</th><td></td></tr>
<tr><th id="437">437</th><td>  <b>if</b> (<a class="local col9 ref" href="#119now" title='now' data-ref="119now" data-ref-filename="119now">now</a> &gt;= <a class="local col2 ref" href="#122max_wait_until" title='max_wait_until' data-ref="122max_wait_until" data-ref-filename="122max_wait_until">max_wait_until</a>) {</td></tr>
<tr><th id="438">438</th><td>    <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_INFO&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 438, ::rtc::LS_INFO)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_INFO" title='rtc::LS_INFO' data-ref="rtc::LS_INFO" data-ref-filename="rtc..LS_INFO">LS_INFO</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"reset initial_select_timestamp_ = "</q></td></tr>
<tr><th id="439">439</th><td>                     <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__">&lt;&lt;</a> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a></td></tr>
<tr><th id="440">440</th><td>                     <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>" selection delayed by: "</q> <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__">&lt;&lt;</a> (<a class="local col9 ref" href="#119now" title='now' data-ref="119now" data-ref-filename="119now">now</a> - <a class="local col1 ref" href="#121start_wait" title='start_wait' data-ref="121start_wait" data-ref-filename="121start_wait">start_wait</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"ms"</q>;</td></tr>
<tr><th id="441">441</th><td>    <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a> = <var>0</var>;</td></tr>
<tr><th id="442">442</th><td>    <b>return</b> {<a class="local col8 ref" href="#118new_connection" title='new_connection' data-ref="118new_connection" data-ref-filename="118new_connection">new_connection</a>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="443">443</th><td>  }</td></tr>
<tr><th id="444">444</th><td></td></tr>
<tr><th id="445">445</th><td>  <i>// We are not yet ready to select first connection...</i></td></tr>
<tr><th id="446">446</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a> == <var>0</var>) {</td></tr>
<tr><th id="447">447</th><td>    <i>// Set timestamp on first time...</i></td></tr>
<tr><th id="448">448</th><td><i>    // but run the delayed invokation everytime to</i></td></tr>
<tr><th id="449">449</th><td><i>    // avoid possibility that we miss it.</i></td></tr>
<tr><th id="450">450</th><td>    <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a> = <a class="local col9 ref" href="#119now" title='now' data-ref="119now" data-ref-filename="119now">now</a>;</td></tr>
<tr><th id="451">451</th><td>    <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_INFO&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 451, ::rtc::LS_INFO)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_INFO" title='rtc::LS_INFO' data-ref="rtc::LS_INFO" data-ref-filename="rtc..LS_INFO">LS_INFO</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"set initial_select_timestamp_ms_ = "</q></td></tr>
<tr><th id="452">452</th><td>                     <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__">&lt;&lt;</a> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::initial_select_timestamp_ms_" title='cricket::BasicIceController::initial_select_timestamp_ms_' data-ref="cricket::BasicIceController::initial_select_timestamp_ms_" data-ref-filename="cricket..BasicIceController..initial_select_timestamp_ms_">initial_select_timestamp_ms_</a>;</td></tr>
<tr><th id="453">453</th><td>  }</td></tr>
<tr><th id="454">454</th><td></td></tr>
<tr><th id="455">455</th><td>  <em>int</em> <dfn class="local col3 decl" id="123min_delay" title='min_delay' data-type='int' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</dfn> = <a class="local col0 ref" href="#120max_delay" title='max_delay' data-ref="120max_delay" data-ref-filename="120max_delay">max_delay</a>;</td></tr>
<tr><th id="456">456</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening" title='cricket::IceFieldTrials::initial_select_dampening' data-ref="cricket::IceFieldTrials::initial_select_dampening" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening">initial_select_dampening</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>()) {</td></tr>
<tr><th id="457">457</th><td>    <a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(<a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a>, <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNKRSt3__18optionaldeEv" data-ref-filename="_ZNKRSt3__18optionaldeEv">*</span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening" title='cricket::IceFieldTrials::initial_select_dampening' data-ref="cricket::IceFieldTrials::initial_select_dampening" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening">initial_select_dampening</a>);</td></tr>
<tr><th id="458">458</th><td>  }</td></tr>
<tr><th id="459">459</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening_ping_received" title='cricket::IceFieldTrials::initial_select_dampening_ping_received' data-ref="cricket::IceFieldTrials::initial_select_dampening_ping_received" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening_ping_received">initial_select_dampening_ping_received</a>.<span class='ref fn' title='std::__1::__optional_storage_base::has_value' data-ref="_ZNKSt3__123__optional_storage_base9has_valueEv" data-ref-filename="_ZNKSt3__123__optional_storage_base9has_valueEv">has_value</span>()) {</td></tr>
<tr><th id="460">460</th><td>    <a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(</td></tr>
<tr><th id="461">461</th><td>        <a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a>, <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNKRSt3__18optionaldeEv" data-ref-filename="_ZNKRSt3__18optionaldeEv">*</span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::field_trials_" title='cricket::BasicIceController::field_trials_' data-ref="cricket::BasicIceController::field_trials_" data-ref-filename="cricket..BasicIceController..field_trials_">field_trials_</a>-&gt;<a class="ref field" href="p2p_transport_channel_ice_field_trials.h.html#cricket::IceFieldTrials::initial_select_dampening_ping_received" title='cricket::IceFieldTrials::initial_select_dampening_ping_received' data-ref="cricket::IceFieldTrials::initial_select_dampening_ping_received" data-ref-filename="cricket..IceFieldTrials..initial_select_dampening_ping_received">initial_select_dampening_ping_received</a>);</td></tr>
<tr><th id="462">462</th><td>  }</td></tr>
<tr><th id="463">463</th><td></td></tr>
<tr><th id="464">464</th><td>  <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_INFO&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 464, ::rtc::LS_INFO)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_INFO" title='rtc::LS_INFO' data-ref="rtc::LS_INFO" data-ref-filename="rtc..LS_INFO">LS_INFO</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"delay initial selection up to "</q> <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__">&lt;&lt;</a> <a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a> <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"ms"</q>;</td></tr>
<tr><th id="465">465</th><td>  <a class="local col7 ref" href="#117reason" title='reason' data-ref="117reason" data-ref-filename="117reason">reason</a>.<a class="ref field" href="ice_controller_interface.h.html#cricket::IceControllerEvent::type" title='cricket::IceControllerEvent::type' data-ref="cricket::IceControllerEvent::type" data-ref-filename="cricket..IceControllerEvent..type">type</a> = <a class="type" href="ice_controller_interface.h.html#cricket::IceControllerEvent" title='cricket::IceControllerEvent' data-ref="cricket::IceControllerEvent" data-ref-filename="cricket..IceControllerEvent">IceControllerEvent</a>::<a class="enum" href="ice_controller_interface.h.html#cricket::IceControllerEvent::ICE_CONTROLLER_RECHECK" title='cricket::IceControllerEvent::ICE_CONTROLLER_RECHECK' data-ref="cricket::IceControllerEvent::ICE_CONTROLLER_RECHECK" data-ref-filename="cricket..IceControllerEvent..ICE_CONTROLLER_RECHECK">ICE_CONTROLLER_RECHECK</a>;</td></tr>
<tr><th id="466">466</th><td>  <a class="local col7 ref" href="#117reason" title='reason' data-ref="117reason" data-ref-filename="117reason">reason</a>.<a class="ref field" href="ice_controller_interface.h.html#cricket::IceControllerEvent::recheck_delay_ms" title='cricket::IceControllerEvent::recheck_delay_ms' data-ref="cricket::IceControllerEvent::recheck_delay_ms" data-ref-filename="cricket..IceControllerEvent..recheck_delay_ms">recheck_delay_ms</a> = <a class="local col3 ref" href="#123min_delay" title='min_delay' data-ref="123min_delay" data-ref-filename="123min_delay">min_delay</a>;</td></tr>
<tr><th id="467">467</th><td>  <b>return</b> {<span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <a class="local col7 ref" href="#117reason" title='reason' data-ref="117reason" data-ref-filename="117reason">reason</a>};</td></tr>
<tr><th id="468">468</th><td>}</td></tr>
<tr><th id="469">469</th><td></td></tr>
<tr><th id="470">470</th><td><a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface" title='cricket::IceControllerInterface' data-ref="cricket::IceControllerInterface" data-ref-filename="cricket..IceControllerInterface">IceControllerInterface</a>::<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface::SwitchResult" title='cricket::IceControllerInterface::SwitchResult' data-ref="cricket::IceControllerInterface::SwitchResult" data-ref-filename="cricket..IceControllerInterface..SwitchResult">SwitchResult</a> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE" title='cricket::BasicIceController::ShouldSwitchConnection' data-ref="_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE">ShouldSwitchConnection</dfn>(</td></tr>
<tr><th id="471">471</th><td>    <a class="type" href="ice_controller_interface.h.html#cricket::IceControllerEvent" title='cricket::IceControllerEvent' data-ref="cricket::IceControllerEvent" data-ref-filename="cricket..IceControllerEvent">IceControllerEvent</a> <dfn class="local col4 decl" id="124reason" title='reason' data-type='cricket::IceControllerEvent' data-ref="124reason" data-ref-filename="124reason">reason</dfn>,</td></tr>
<tr><th id="472">472</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col5 decl" id="125new_connection" title='new_connection' data-type='const cricket::Connection *' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</dfn>) {</td></tr>
<tr><th id="473">473</th><td>  <b>if</b> (!<a class="member fn" href="#_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE" title='cricket::BasicIceController::ReadyToSend' data-ref="_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE">ReadyToSend</a>(<a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>) || <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> == <a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>) {</td></tr>
<tr><th id="474">474</th><td>    <b>return</b> {<span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="475">475</th><td>  }</td></tr>
<tr><th id="476">476</th><td></td></tr>
<tr><th id="477">477</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> == <b>nullptr</b>) {</td></tr>
<tr><th id="478">478</th><td>    <b>return</b> <a class="member fn" href="#_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE" title='cricket::BasicIceController::HandleInitialSelectDampening' data-ref="_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController28HandleInitialSelectDampeningENS_18IceControllerEventEPKNS_10ConnectionE">HandleInitialSelectDampening</a>(<a class="ref fn fake" href="ice_controller_interface.h.html#25" title='cricket::IceControllerEvent::IceControllerEvent' data-ref="_ZN7cricket18IceControllerEventC1ERKS0_" data-ref-filename="_ZN7cricket18IceControllerEventC1ERKS0_"></a><a class="local col4 ref" href="#124reason" title='reason' data-ref="124reason" data-ref-filename="124reason">reason</a>, <a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>);</td></tr>
<tr><th id="479">479</th><td>  }</td></tr>
<tr><th id="480">480</th><td></td></tr>
<tr><th id="481">481</th><td>  <i>// Do not switch to a connection that is not receiving if it is not on a</i></td></tr>
<tr><th id="482">482</th><td><i>  // preferred network or it has higher cost because it may be just spuriously</i></td></tr>
<tr><th id="483">483</th><td><i>  // better.</i></td></tr>
<tr><th id="484">484</th><td>  <em>int</em> <dfn class="local col6 decl" id="126compare_a_b_by_networks" title='compare_a_b_by_networks' data-type='int' data-ref="126compare_a_b_by_networks" data-ref-filename="126compare_a_b_by_networks">compare_a_b_by_networks</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" title='cricket::BasicIceController::CompareCandidatePairNetworks' data-ref="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE">CompareCandidatePairNetworks</a>(</td></tr>
<tr><th id="485">485</th><td>      <a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>, <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>, <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref field" href="ice_transport_internal.h.html#cricket::IceConfig::network_preference" title='cricket::IceConfig::network_preference' data-ref="cricket::IceConfig::network_preference" data-ref-filename="cricket..IceConfig..network_preference">network_preference</a>);</td></tr>
<tr><th id="486">486</th><td>  <b>if</b> (<a class="local col6 ref" href="#126compare_a_b_by_networks" title='compare_a_b_by_networks' data-ref="126compare_a_b_by_networks" data-ref-filename="126compare_a_b_by_networks">compare_a_b_by_networks</a> == <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a> &amp;&amp; !<a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9receivingEv" title='cricket::Connection::receiving' data-ref="_ZNK7cricket10Connection9receivingEv" data-ref-filename="_ZNK7cricket10Connection9receivingEv">receiving</a>()) {</td></tr>
<tr><th id="487">487</th><td>    <b>return</b> {<span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="488">488</th><td>  }</td></tr>
<tr><th id="489">489</th><td></td></tr>
<tr><th id="490">490</th><td>  <em>bool</em> <dfn class="local col7 decl" id="127missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-type='bool' data-ref="127missed_receiving_unchanged_threshold" data-ref-filename="127missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</dfn> = <b>false</b>;</td></tr>
<tr><th id="491">491</th><td>  <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span>&gt; <dfn class="local col8 decl" id="128receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-type='absl::optional&lt;int64_t&gt;' data-ref="128receiving_unchanged_threshold" data-ref-filename="128receiving_unchanged_threshold">receiving_unchanged_threshold</dfn><span class='ref fn' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__">(</span></td></tr>
<tr><th id="492">492</th><td>      <span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/time_utils.h.html#_ZN3rtc10TimeMillisEv" title='rtc::TimeMillis' data-ref="_ZN3rtc10TimeMillisEv" data-ref-filename="_ZN3rtc10TimeMillisEv">TimeMillis</a>() - <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref fn" href="ice_transport_internal.h.html#_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" title='cricket::IceConfig::receiving_switching_delay_or_default' data-ref="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" data-ref-filename="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv">receiving_switching_delay_or_default</a>());</td></tr>
<tr><th id="493">493</th><td>  <em>int</em> <dfn class="local col9 decl" id="129cmp" title='cmp' data-type='int' data-ref="129cmp" data-ref-filename="129cmp">cmp</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" title='cricket::BasicIceController::CompareConnections' data-ref="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" data-ref-filename="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb">CompareConnections</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>, <a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>,</td></tr>
<tr><th id="494">494</th><td>                               <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="local col8 ref" href="#128receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-ref="128receiving_unchanged_threshold" data-ref-filename="128receiving_unchanged_threshold">receiving_unchanged_threshold</a>,</td></tr>
<tr><th id="495">495</th><td>                               &amp;<a class="local col7 ref" href="#127missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-ref="127missed_receiving_unchanged_threshold" data-ref-filename="127missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</a>);</td></tr>
<tr><th id="496">496</th><td></td></tr>
<tr><th id="497">497</th><td>  <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerEvent" title='cricket::IceControllerEvent' data-ref="cricket::IceControllerEvent" data-ref-filename="cricket..IceControllerEvent">IceControllerEvent</a>&gt; <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1Ev" data-ref-filename="_ZNSt3__18optionalC1Ev"></span><dfn class="local col0 decl" id="130recheck_event" title='recheck_event' data-type='absl::optional&lt;IceControllerEvent&gt;' data-ref="130recheck_event" data-ref-filename="130recheck_event">recheck_event</dfn>;</td></tr>
<tr><th id="498">498</th><td>  <b>if</b> (<a class="local col7 ref" href="#127missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-ref="127missed_receiving_unchanged_threshold" data-ref-filename="127missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</a> &amp;&amp;</td></tr>
<tr><th id="499">499</th><td>      <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref fn" href="ice_transport_internal.h.html#_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" title='cricket::IceConfig::receiving_switching_delay_or_default' data-ref="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" data-ref-filename="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv">receiving_switching_delay_or_default</a>()) {</td></tr>
<tr><th id="500">500</th><td>    <i>// If we do not switch to the connection because it missed the receiving</i></td></tr>
<tr><th id="501">501</th><td><i>    // threshold, the new connection is in a better receiving state than the</i></td></tr>
<tr><th id="502">502</th><td><i>    // currently selected connection. So we need to re-check whether it needs</i></td></tr>
<tr><th id="503">503</th><td><i>    // to be switched at a later time.</i></td></tr>
<tr><th id="504">504</th><td>    <a class="local col0 ref" href="#130recheck_event" title='recheck_event' data-ref="130recheck_event" data-ref-filename="130recheck_event">recheck_event</a> <span class='ref fn' title='std::__1::optional::operator=' data-ref="_ZNSt3__18optionalaSEOTL0__" data-ref-filename="_ZNSt3__18optionalaSEOTL0__">=</span> <a class="local col4 ref" href="#124reason" title='reason' data-ref="124reason" data-ref-filename="124reason">reason</a>;</td></tr>
<tr><th id="505">505</th><td>    <a class="local col0 ref" href="#130recheck_event" title='recheck_event' data-ref="130recheck_event" data-ref-filename="130recheck_event">recheck_event</a><span class='ref fn' title='std::__1::optional::operator-&gt;' data-ref="_ZNSt3__18optionalptEv" data-ref-filename="_ZNSt3__18optionalptEv">-&gt;</span><a class="ref field" href="ice_controller_interface.h.html#cricket::IceControllerEvent::recheck_delay_ms" title='cricket::IceControllerEvent::recheck_delay_ms' data-ref="cricket::IceControllerEvent::recheck_delay_ms" data-ref-filename="cricket..IceControllerEvent..recheck_delay_ms">recheck_delay_ms</a> =</td></tr>
<tr><th id="506">506</th><td>        <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref fn" href="ice_transport_internal.h.html#_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" title='cricket::IceConfig::receiving_switching_delay_or_default' data-ref="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv" data-ref-filename="_ZNK7cricket9IceConfig36receiving_switching_delay_or_defaultEv">receiving_switching_delay_or_default</a>();</td></tr>
<tr><th id="507">507</th><td>  }</td></tr>
<tr><th id="508">508</th><td></td></tr>
<tr><th id="509">509</th><td>  <b>if</b> (<a class="local col9 ref" href="#129cmp" title='cmp' data-ref="129cmp" data-ref-filename="129cmp">cmp</a> &lt; <var>0</var>) {</td></tr>
<tr><th id="510">510</th><td>    <b>return</b> {<a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="511">511</th><td>  } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#129cmp" title='cmp' data-ref="129cmp" data-ref-filename="129cmp">cmp</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="512">512</th><td>    <b>return</b> {<span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <a class="local col0 ref" href="#130recheck_event" title='recheck_event' data-ref="130recheck_event" data-ref-filename="130recheck_event">recheck_event</a>};</td></tr>
<tr><th id="513">513</th><td>  }</td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td>  <i>// If everything else is the same, switch only if rtt has improved by</i></td></tr>
<tr><th id="516">516</th><td><i>  // a margin.</i></td></tr>
<tr><th id="517">517</th><td>  <b>if</b> (<a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection3rttEv" title='cricket::Connection::rtt' data-ref="_ZNK7cricket10Connection3rttEv" data-ref-filename="_ZNK7cricket10Connection3rttEv">rtt</a>() &lt;= <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection3rttEv" title='cricket::Connection::rtt' data-ref="_ZNK7cricket10Connection3rttEv" data-ref-filename="_ZNK7cricket10Connection3rttEv">rtt</a>() - <a class="tu ref" href="#(anonymousnamespace)::kMinImprovement" title='(anonymous namespace)::kMinImprovement' data-use='r' data-ref="(anonymousnamespace)::kMinImprovement" data-ref-filename="(anonymousnamespace)..kMinImprovement">kMinImprovement</a>) {</td></tr>
<tr><th id="518">518</th><td>    <b>return</b> {<a class="local col5 ref" href="#125new_connection" title='new_connection' data-ref="125new_connection" data-ref-filename="125new_connection">new_connection</a>, <span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>};</td></tr>
<tr><th id="519">519</th><td>  }</td></tr>
<tr><th id="520">520</th><td></td></tr>
<tr><th id="521">521</th><td>  <b>return</b> {<span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <a class="local col0 ref" href="#130recheck_event" title='recheck_event' data-ref="130recheck_event" data-ref-filename="130recheck_event">recheck_event</a>};</td></tr>
<tr><th id="522">522</th><td>}</td></tr>
<tr><th id="523">523</th><td></td></tr>
<tr><th id="524">524</th><td><a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface" title='cricket::IceControllerInterface' data-ref="cricket::IceControllerInterface" data-ref-filename="cricket..IceControllerInterface">IceControllerInterface</a>::<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerInterface::SwitchResult" title='cricket::IceControllerInterface::SwitchResult' data-ref="cricket::IceControllerInterface::SwitchResult" data-ref-filename="cricket..IceControllerInterface..SwitchResult">SwitchResult</a></td></tr>
<tr><th id="525">525</th><td><a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController23SortAndSwitchConnectionENS_18IceControllerEventE" title='cricket::BasicIceController::SortAndSwitchConnection' data-ref="_ZN7cricket18BasicIceController23SortAndSwitchConnectionENS_18IceControllerEventE" data-ref-filename="_ZN7cricket18BasicIceController23SortAndSwitchConnectionENS_18IceControllerEventE">SortAndSwitchConnection</dfn>(<a class="type" href="ice_controller_interface.h.html#cricket::IceControllerEvent" title='cricket::IceControllerEvent' data-ref="cricket::IceControllerEvent" data-ref-filename="cricket..IceControllerEvent">IceControllerEvent</a> <dfn class="local col1 decl" id="131reason" title='reason' data-type='cricket::IceControllerEvent' data-ref="131reason" data-ref-filename="131reason">reason</dfn>) {</td></tr>
<tr><th id="526">526</th><td>  <i>// Find the best alternative connection by sorting.  It is important to note</i></td></tr>
<tr><th id="527">527</th><td><i>  // that amongst equal preference, writable connections, this will choose the</i></td></tr>
<tr><th id="528">528</th><td><i>  // one whose estimated latency is lowest.  So it is the only one that we</i></td></tr>
<tr><th id="529">529</th><td><i>  // need to consider switching to.</i></td></tr>
<tr><th id="530">530</th><td><i>  // TODO(honghaiz): Don't sort;  Just use std::max_element in the right places.</i></td></tr>
<tr><th id="531">531</th><td>  <span class="namespace">absl::</span><a class="tu ref fn" href="../../../third_party/abseil-cpp/absl/algorithm/container.h.html#_ZN4absl13c_stable_sortERT_OT0_" title='absl::c_stable_sort' data-use='c' data-ref="_ZN4absl13c_stable_sortERT_OT0_" data-ref-filename="_ZN4absl13c_stable_sortERT_OT0_">c_stable_sort</a>(</td></tr>
<tr><th id="532">532</th><td>      <span class='refarg'><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a></span>, [<b>this</b>](<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col2 decl" id="132a" title='a' data-type='const cricket::Connection *' data-ref="132a" data-ref-filename="132a">a</dfn>, <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col3 decl" id="133b" title='b' data-type='const cricket::Connection *' data-ref="133b" data-ref-filename="133b">b</dfn>) {</td></tr>
<tr><th id="533">533</th><td>        <em>int</em> <dfn class="local col4 decl" id="134cmp" title='cmp' data-type='int' data-ref="134cmp" data-ref-filename="134cmp">cmp</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" title='cricket::BasicIceController::CompareConnections' data-ref="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" data-ref-filename="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb">CompareConnections</a>(<a class="local col2 ref" href="#132a" title='a' data-ref="132a" data-ref-filename="132a">a</a>, <a class="local col3 ref" href="#133b" title='b' data-ref="133b" data-ref-filename="133b">b</a>, <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">absl::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>, <b>nullptr</b>);</td></tr>
<tr><th id="534">534</th><td>        <b>if</b> (<a class="local col4 ref" href="#134cmp" title='cmp' data-ref="134cmp" data-ref-filename="134cmp">cmp</a> != <var>0</var>) {</td></tr>
<tr><th id="535">535</th><td>          <b>return</b> <a class="local col4 ref" href="#134cmp" title='cmp' data-ref="134cmp" data-ref-filename="134cmp">cmp</a> &gt; <var>0</var>;</td></tr>
<tr><th id="536">536</th><td>        }</td></tr>
<tr><th id="537">537</th><td>        <i>// Otherwise, sort based on latency estimate.</i></td></tr>
<tr><th id="538">538</th><td>        <b>return</b> <a class="local col2 ref" href="#132a" title='a' data-ref="132a" data-ref-filename="132a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection3rttEv" title='cricket::Connection::rtt' data-ref="_ZNK7cricket10Connection3rttEv" data-ref-filename="_ZNK7cricket10Connection3rttEv">rtt</a>() &lt; <a class="local col3 ref" href="#133b" title='b' data-ref="133b" data-ref-filename="133b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection3rttEv" title='cricket::Connection::rtt' data-ref="_ZNK7cricket10Connection3rttEv" data-ref-filename="_ZNK7cricket10Connection3rttEv">rtt</a>();</td></tr>
<tr><th id="539">539</th><td>      });</td></tr>
<tr><th id="540">540</th><td></td></tr>
<tr><th id="541">541</th><td>  <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_VERBOSE&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 541, ::rtc::LS_VERBOSE)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_VERBOSE" title='rtc::LS_VERBOSE' data-ref="rtc::LS_VERBOSE" data-ref-filename="rtc..LS_VERBOSE">LS_VERBOSE</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>"Sorting "</q> <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsETL0__">&lt;&lt;</a> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::size' data-ref="_ZNKSt3__16vector4sizeEv" data-ref-filename="_ZNKSt3__16vector4sizeEv">size</span>()</td></tr>
<tr><th id="542">542</th><td>                      <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <q>" available connections"</q>;</td></tr>
<tr><th id="543">543</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="135i" title='i' data-type='size_t' data-ref="135i" data-ref-filename="135i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#135i" title='i' data-ref="135i" data-ref-filename="135i">i</a> &lt; <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::size' data-ref="_ZNKSt3__16vector4sizeEv" data-ref-filename="_ZNKSt3__16vector4sizeEv">size</span>(); ++<a class="local col5 ref" href="#135i" title='i' data-ref="135i" data-ref-filename="135i">i</a>) {</td></tr>
<tr><th id="544">544</th><td>    <a class="macro" href="../../rtc_base/logging.h.html#622" title="!rtc::LogMessage::IsNoop&lt;::rtc::LS_VERBOSE&gt;() &amp;&amp; ::rtc::webrtc_logging_impl::LogCall() &amp; ::rtc::webrtc_logging_impl::LogStreamer&lt;&gt;() &lt;&lt; ::rtc::webrtc_logging_impl::LogMetadata(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 544, ::rtc::LS_VERBOSE)" data-ref="_M/RTC_LOG">RTC_LOG</a>(<a class="enum" href="../../rtc_base/logging.h.html#rtc::LS_VERBOSE" title='rtc::LS_VERBOSE' data-ref="rtc::LS_VERBOSE" data-ref-filename="rtc..LS_VERBOSE">LS_VERBOSE</a>) <a class="ref fn" href="../../rtc_base/logging.h.html#_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" title='rtc::webrtc_logging_impl::LogStreamer&lt;type-parameter-0-0, type-parameter-0-1...&gt;::operator&lt;&lt;' data-ref="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__" data-ref-filename="_ZNK3rtc19webrtc_logging_impl11LogStreamerIJT_DpT0_EElsERKTL0__">&lt;&lt;</a> <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a><span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col5 ref" href="#135i" title='i' data-ref="135i" data-ref-filename="135i">i</a>]</span>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8ToStringEv" title='cricket::Connection::ToString' data-ref="_ZNK7cricket10Connection8ToStringEv" data-ref-filename="_ZNK7cricket10Connection8ToStringEv">ToString</a>();</td></tr>
<tr><th id="545">545</th><td>  }</td></tr>
<tr><th id="546">546</th><td></td></tr>
<tr><th id="547">547</th><td>  <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="136top_connection" title='top_connection' data-type='const cricket::Connection *' data-ref="136top_connection" data-ref-filename="136top_connection">top_connection</dfn> =</td></tr>
<tr><th id="548">548</th><td>      (!<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>()) ? <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a><span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<var>0</var>]</span> : <b>nullptr</b>;</td></tr>
<tr><th id="549">549</th><td></td></tr>
<tr><th id="550">550</th><td>  <b>return</b> <a class="virtual member fn" href="#_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE" title='cricket::BasicIceController::ShouldSwitchConnection' data-ref="_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE" data-ref-filename="_ZN7cricket18BasicIceController22ShouldSwitchConnectionENS_18IceControllerEventEPKNS_10ConnectionE">ShouldSwitchConnection</a>(<a class="ref fn fake" href="ice_controller_interface.h.html#25" title='cricket::IceControllerEvent::IceControllerEvent' data-ref="_ZN7cricket18IceControllerEventC1ERKS0_" data-ref-filename="_ZN7cricket18IceControllerEventC1ERKS0_"></a><a class="local col1 ref" href="#131reason" title='reason' data-ref="131reason" data-ref-filename="131reason">reason</a>, <a class="local col6 ref" href="#136top_connection" title='top_connection' data-ref="136top_connection" data-ref-filename="136top_connection">top_connection</a>);</td></tr>
<tr><th id="551">551</th><td>}</td></tr>
<tr><th id="552">552</th><td></td></tr>
<tr><th id="553">553</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE" title='cricket::BasicIceController::ReadyToSend' data-ref="_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController11ReadyToSendEPKNS_10ConnectionE">ReadyToSend</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col7 decl" id="137connection" title='connection' data-type='const cricket::Connection *' data-ref="137connection" data-ref-filename="137connection">connection</dfn>) <em>const</em> {</td></tr>
<tr><th id="554">554</th><td>  <i>// Note that we allow sending on an unreliable connection, because it's</i></td></tr>
<tr><th id="555">555</th><td><i>  // possible that it became unreliable simply due to bad chance.</i></td></tr>
<tr><th id="556">556</th><td><i>  // So this shouldn't prevent attempting to send media.</i></td></tr>
<tr><th id="557">557</th><td>  <b>return</b> <a class="local col7 ref" href="#137connection" title='connection' data-ref="137connection" data-ref-filename="137connection">connection</a> != <b>nullptr</b> &amp;&amp;</td></tr>
<tr><th id="558">558</th><td>         (<a class="local col7 ref" href="#137connection" title='connection' data-ref="137connection" data-ref-filename="137connection">connection</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() ||</td></tr>
<tr><th id="559">559</th><td>          <a class="local col7 ref" href="#137connection" title='connection' data-ref="137connection" data-ref-filename="137connection">connection</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() == <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>::<a class="enum" href="connection.h.html#cricket::Connection::STATE_WRITE_UNRELIABLE" title='cricket::Connection::STATE_WRITE_UNRELIABLE' data-ref="cricket::Connection::STATE_WRITE_UNRELIABLE" data-ref-filename="cricket..Connection..STATE_WRITE_UNRELIABLE">STATE_WRITE_UNRELIABLE</a> ||</td></tr>
<tr><th id="560">560</th><td>          <a class="member fn" href="#_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" title='cricket::BasicIceController::PresumedWritable' data-ref="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE">PresumedWritable</a>(<a class="local col7 ref" href="#137connection" title='connection' data-ref="137connection" data-ref-filename="137connection">connection</a>));</td></tr>
<tr><th id="561">561</th><td>}</td></tr>
<tr><th id="562">562</th><td></td></tr>
<tr><th id="563">563</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" title='cricket::BasicIceController::PresumedWritable' data-ref="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE">PresumedWritable</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col8 decl" id="138conn" title='conn' data-type='const cricket::Connection *' data-ref="138conn" data-ref-filename="138conn">conn</dfn>) <em>const</em> {</td></tr>
<tr><th id="564">564</th><td>  <b>return</b> (<a class="local col8 ref" href="#138conn" title='conn' data-ref="138conn" data-ref-filename="138conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() == <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>::<a class="enum" href="connection.h.html#cricket::Connection::STATE_WRITE_INIT" title='cricket::Connection::STATE_WRITE_INIT' data-ref="cricket::Connection::STATE_WRITE_INIT" data-ref-filename="cricket..Connection..STATE_WRITE_INIT">STATE_WRITE_INIT</a> &amp;&amp;</td></tr>
<tr><th id="565">565</th><td>          <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref field" href="ice_transport_internal.h.html#cricket::IceConfig::presume_writable_when_fully_relayed" title='cricket::IceConfig::presume_writable_when_fully_relayed' data-ref="cricket::IceConfig::presume_writable_when_fully_relayed" data-ref-filename="cricket..IceConfig..presume_writable_when_fully_relayed">presume_writable_when_fully_relayed</a> &amp;&amp;</td></tr>
<tr><th id="566">566</th><td>          <a class="local col8 ref" href="#138conn" title='conn' data-ref="138conn" data-ref-filename="138conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection15local_candidateEv" title='cricket::Connection::local_candidate' data-ref="_ZNK7cricket10Connection15local_candidateEv" data-ref-filename="_ZNK7cricket10Connection15local_candidateEv">local_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate4typeEv" title='cricket::Candidate::type' data-ref="_ZNK7cricket9Candidate4typeEv" data-ref-filename="_ZNK7cricket9Candidate4typeEv">type</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <a class="ref" href="port.h.html#cricket::RELAY_PORT_TYPE" title='cricket::RELAY_PORT_TYPE' data-ref="cricket::RELAY_PORT_TYPE" data-ref-filename="cricket..RELAY_PORT_TYPE">RELAY_PORT_TYPE</a> &amp;&amp;</td></tr>
<tr><th id="567">567</th><td>          (<a class="local col8 ref" href="#138conn" title='conn' data-ref="138conn" data-ref-filename="138conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate4typeEv" title='cricket::Candidate::type' data-ref="_ZNK7cricket9Candidate4typeEv" data-ref-filename="_ZNK7cricket9Candidate4typeEv">type</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <a class="ref" href="port.h.html#cricket::RELAY_PORT_TYPE" title='cricket::RELAY_PORT_TYPE' data-ref="cricket::RELAY_PORT_TYPE" data-ref-filename="cricket..RELAY_PORT_TYPE">RELAY_PORT_TYPE</a> ||</td></tr>
<tr><th id="568">568</th><td>           <a class="local col8 ref" href="#138conn" title='conn' data-ref="138conn" data-ref-filename="138conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate4typeEv" title='cricket::Candidate::type' data-ref="_ZNK7cricket9Candidate4typeEv" data-ref-filename="_ZNK7cricket9Candidate4typeEv">type</a>() <span class='ref fn' title='std::__1::operator==' data-ref="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZNSt3__1eqERKNS_12basic_stringIT_T0_T1_EEPKS1_">==</span> <a class="ref" href="port.h.html#cricket::PRFLX_PORT_TYPE" title='cricket::PRFLX_PORT_TYPE' data-ref="cricket::PRFLX_PORT_TYPE" data-ref-filename="cricket..PRFLX_PORT_TYPE">PRFLX_PORT_TYPE</a>));</td></tr>
<tr><th id="569">569</th><td>}</td></tr>
<tr><th id="570">570</th><td></td></tr>
<tr><th id="571">571</th><td><i>// Compare two connections based on their writing, receiving, and connected</i></td></tr>
<tr><th id="572">572</th><td><i>// states.</i></td></tr>
<tr><th id="573">573</th><td><em>int</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" title='cricket::BasicIceController::CompareConnectionStates' data-ref="_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" data-ref-filename="_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb">CompareConnectionStates</dfn>(</td></tr>
<tr><th id="574">574</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col9 decl" id="139a" title='a' data-type='const cricket::Connection *' data-ref="139a" data-ref-filename="139a">a</dfn>,</td></tr>
<tr><th id="575">575</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col0 decl" id="140b" title='b' data-type='const cricket::Connection *' data-ref="140b" data-ref-filename="140b">b</dfn>,</td></tr>
<tr><th id="576">576</th><td>    <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span>&gt; <dfn class="local col1 decl" id="141receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-type='absl::optional&lt;int64_t&gt;' data-ref="141receiving_unchanged_threshold" data-ref-filename="141receiving_unchanged_threshold">receiving_unchanged_threshold</dfn>,</td></tr>
<tr><th id="577">577</th><td>    <em>bool</em>* <dfn class="local col2 decl" id="142missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-type='bool *' data-ref="142missed_receiving_unchanged_threshold" data-ref-filename="142missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</dfn>) <em>const</em> {</td></tr>
<tr><th id="578">578</th><td>  <i>// First, prefer a connection that's writable or presumed writable over</i></td></tr>
<tr><th id="579">579</th><td><i>  // one that's not writable.</i></td></tr>
<tr><th id="580">580</th><td>  <em>bool</em> <dfn class="local col3 decl" id="143a_writable" title='a_writable' data-type='bool' data-ref="143a_writable" data-ref-filename="143a_writable">a_writable</dfn> = <a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() || <a class="member fn" href="#_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" title='cricket::BasicIceController::PresumedWritable' data-ref="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE">PresumedWritable</a>(<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>);</td></tr>
<tr><th id="581">581</th><td>  <em>bool</em> <dfn class="local col4 decl" id="144b_writable" title='b_writable' data-type='bool' data-ref="144b_writable" data-ref-filename="144b_writable">b_writable</dfn> = <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() || <a class="member fn" href="#_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" title='cricket::BasicIceController::PresumedWritable' data-ref="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE" data-ref-filename="_ZNK7cricket18BasicIceController16PresumedWritableEPKNS_10ConnectionE">PresumedWritable</a>(<a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>);</td></tr>
<tr><th id="582">582</th><td>  <b>if</b> (<a class="local col3 ref" href="#143a_writable" title='a_writable' data-ref="143a_writable" data-ref-filename="143a_writable">a_writable</a> &amp;&amp; !<a class="local col4 ref" href="#144b_writable" title='b_writable' data-ref="144b_writable" data-ref-filename="144b_writable">b_writable</a>) {</td></tr>
<tr><th id="583">583</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="584">584</th><td>  }</td></tr>
<tr><th id="585">585</th><td>  <b>if</b> (!<a class="local col3 ref" href="#143a_writable" title='a_writable' data-ref="143a_writable" data-ref-filename="143a_writable">a_writable</a> &amp;&amp; <a class="local col4 ref" href="#144b_writable" title='b_writable' data-ref="144b_writable" data-ref-filename="144b_writable">b_writable</a>) {</td></tr>
<tr><th id="586">586</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="587">587</th><td>  }</td></tr>
<tr><th id="588">588</th><td></td></tr>
<tr><th id="589">589</th><td>  <i>// Sort based on write-state. Better states have lower values.</i></td></tr>
<tr><th id="590">590</th><td>  <b>if</b> (<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() &lt; <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>()) {</td></tr>
<tr><th id="591">591</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="592">592</th><td>  }</td></tr>
<tr><th id="593">593</th><td>  <b>if</b> (<a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() &lt; <a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>()) {</td></tr>
<tr><th id="594">594</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="595">595</th><td>  }</td></tr>
<tr><th id="596">596</th><td></td></tr>
<tr><th id="597">597</th><td>  <i>// We prefer a receiving connection to a non-receiving, higher-priority</i></td></tr>
<tr><th id="598">598</th><td><i>  // connection when sorting connections and choosing which connection to</i></td></tr>
<tr><th id="599">599</th><td><i>  // switch to.</i></td></tr>
<tr><th id="600">600</th><td>  <b>if</b> (<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9receivingEv" title='cricket::Connection::receiving' data-ref="_ZNK7cricket10Connection9receivingEv" data-ref-filename="_ZNK7cricket10Connection9receivingEv">receiving</a>() &amp;&amp; !<a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9receivingEv" title='cricket::Connection::receiving' data-ref="_ZNK7cricket10Connection9receivingEv" data-ref-filename="_ZNK7cricket10Connection9receivingEv">receiving</a>()) {</td></tr>
<tr><th id="601">601</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="602">602</th><td>  }</td></tr>
<tr><th id="603">603</th><td>  <b>if</b> (!<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9receivingEv" title='cricket::Connection::receiving' data-ref="_ZNK7cricket10Connection9receivingEv" data-ref-filename="_ZNK7cricket10Connection9receivingEv">receiving</a>() &amp;&amp; <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9receivingEv" title='cricket::Connection::receiving' data-ref="_ZNK7cricket10Connection9receivingEv" data-ref-filename="_ZNK7cricket10Connection9receivingEv">receiving</a>()) {</td></tr>
<tr><th id="604">604</th><td>    <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col1 ref" href="#141receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-ref="141receiving_unchanged_threshold" data-ref-filename="141receiving_unchanged_threshold">receiving_unchanged_threshold</a> ||</td></tr>
<tr><th id="605">605</th><td>        (<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection25receiving_unchanged_sinceEv" title='cricket::Connection::receiving_unchanged_since' data-ref="_ZNK7cricket10Connection25receiving_unchanged_sinceEv" data-ref-filename="_ZNK7cricket10Connection25receiving_unchanged_sinceEv">receiving_unchanged_since</a>() &lt;= <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span><a class="local col1 ref" href="#141receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-ref="141receiving_unchanged_threshold" data-ref-filename="141receiving_unchanged_threshold">receiving_unchanged_threshold</a> &amp;&amp;</td></tr>
<tr><th id="606">606</th><td>         <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection25receiving_unchanged_sinceEv" title='cricket::Connection::receiving_unchanged_since' data-ref="_ZNK7cricket10Connection25receiving_unchanged_sinceEv" data-ref-filename="_ZNK7cricket10Connection25receiving_unchanged_sinceEv">receiving_unchanged_since</a>() &lt;= <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span><a class="local col1 ref" href="#141receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-ref="141receiving_unchanged_threshold" data-ref-filename="141receiving_unchanged_threshold">receiving_unchanged_threshold</a>)) {</td></tr>
<tr><th id="607">607</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="608">608</th><td>    }</td></tr>
<tr><th id="609">609</th><td>    *<a class="local col2 ref" href="#142missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-ref="142missed_receiving_unchanged_threshold" data-ref-filename="142missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</a> = <b>true</b>;</td></tr>
<tr><th id="610">610</th><td>  }</td></tr>
<tr><th id="611">611</th><td></td></tr>
<tr><th id="612">612</th><td>  <i>// WARNING: Some complexity here about TCP reconnecting.</i></td></tr>
<tr><th id="613">613</th><td><i>  // When a TCP connection fails because of a TCP socket disconnecting, the</i></td></tr>
<tr><th id="614">614</th><td><i>  // active side of the connection will attempt to reconnect for 5 seconds while</i></td></tr>
<tr><th id="615">615</th><td><i>  // pretending to be writable (the connection is not set to the unwritable</i></td></tr>
<tr><th id="616">616</th><td><i>  // state).  On the passive side, the connection also remains writable even</i></td></tr>
<tr><th id="617">617</th><td><i>  // though it is disconnected, and a new connection is created when the active</i></td></tr>
<tr><th id="618">618</th><td><i>  // side connects.  At that point, there are two TCP connections on the passive</i></td></tr>
<tr><th id="619">619</th><td><i>  // side: 1. the old, disconnected one that is pretending to be writable, and</i></td></tr>
<tr><th id="620">620</th><td><i>  // 2.  the new, connected one that is maybe not yet writable.  For purposes of</i></td></tr>
<tr><th id="621">621</th><td><i>  // pruning, pinging, and selecting the selected connection, we want to treat</i></td></tr>
<tr><th id="622">622</th><td><i>  // the new connection as "better" than the old one. We could add a method</i></td></tr>
<tr><th id="623">623</th><td><i>  // called something like Connection::ImReallyBadEvenThoughImWritable, but that</i></td></tr>
<tr><th id="624">624</th><td><i>  // is equivalent to the existing Connection::connected(), which we already</i></td></tr>
<tr><th id="625">625</th><td><i>  // have. So, in code throughout this file, we'll check whether the connection</i></td></tr>
<tr><th id="626">626</th><td><i>  // is connected() or not, and if it is not, treat it as "worse" than a</i></td></tr>
<tr><th id="627">627</th><td><i>  // connected one, even though it's writable.  In the code below, we're doing</i></td></tr>
<tr><th id="628">628</th><td><i>  // so to make sure we treat a new writable connection as better than an old</i></td></tr>
<tr><th id="629">629</th><td><i>  // disconnected connection.</i></td></tr>
<tr><th id="630">630</th><td><i></i></td></tr>
<tr><th id="631">631</th><td><i>  // In the case where we reconnect TCP connections, the original best</i></td></tr>
<tr><th id="632">632</th><td><i>  // connection is disconnected without changing to WRITE_TIMEOUT. In this case,</i></td></tr>
<tr><th id="633">633</th><td><i>  // the new connection, when it becomes writable, should have higher priority.</i></td></tr>
<tr><th id="634">634</th><td>  <b>if</b> (<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() == <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>::<a class="enum" href="connection.h.html#cricket::Connection::STATE_WRITABLE" title='cricket::Connection::STATE_WRITABLE' data-ref="cricket::Connection::STATE_WRITABLE" data-ref-filename="cricket..Connection..STATE_WRITABLE">STATE_WRITABLE</a> &amp;&amp;</td></tr>
<tr><th id="635">635</th><td>      <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection11write_stateEv" title='cricket::Connection::write_state' data-ref="_ZNK7cricket10Connection11write_stateEv" data-ref-filename="_ZNK7cricket10Connection11write_stateEv">write_state</a>() == <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>::<a class="enum" href="connection.h.html#cricket::Connection::STATE_WRITABLE" title='cricket::Connection::STATE_WRITABLE' data-ref="cricket::Connection::STATE_WRITABLE" data-ref-filename="cricket..Connection..STATE_WRITABLE">STATE_WRITABLE</a>) {</td></tr>
<tr><th id="636">636</th><td>    <b>if</b> (<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>() &amp;&amp; !<a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>()) {</td></tr>
<tr><th id="637">637</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="638">638</th><td>    }</td></tr>
<tr><th id="639">639</th><td>    <b>if</b> (!<a class="local col9 ref" href="#139a" title='a' data-ref="139a" data-ref-filename="139a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>() &amp;&amp; <a class="local col0 ref" href="#140b" title='b' data-ref="140b" data-ref-filename="140b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection9connectedEv" title='cricket::Connection::connected' data-ref="_ZNK7cricket10Connection9connectedEv" data-ref-filename="_ZNK7cricket10Connection9connectedEv">connected</a>()) {</td></tr>
<tr><th id="640">640</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="641">641</th><td>    }</td></tr>
<tr><th id="642">642</th><td>  }</td></tr>
<tr><th id="643">643</th><td></td></tr>
<tr><th id="644">644</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="645">645</th><td>}</td></tr>
<tr><th id="646">646</th><td></td></tr>
<tr><th id="647">647</th><td><i>// Compares two connections based only on the candidate and network information.</i></td></tr>
<tr><th id="648">648</th><td><i>// Returns positive if |a| is better than |b|.</i></td></tr>
<tr><th id="649">649</th><td><em>int</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" title='cricket::BasicIceController::CompareConnectionCandidates' data-ref="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" data-ref-filename="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_">CompareConnectionCandidates</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col5 decl" id="145a" title='a' data-type='const cricket::Connection *' data-ref="145a" data-ref-filename="145a">a</dfn>,</td></tr>
<tr><th id="650">650</th><td>                                                    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="146b" title='b' data-type='const cricket::Connection *' data-ref="146b" data-ref-filename="146b">b</dfn>) <em>const</em> {</td></tr>
<tr><th id="651">651</th><td>  <em>int</em> <dfn class="local col7 decl" id="147compare_a_b_by_networks" title='compare_a_b_by_networks' data-type='int' data-ref="147compare_a_b_by_networks" data-ref-filename="147compare_a_b_by_networks">compare_a_b_by_networks</dfn> =</td></tr>
<tr><th id="652">652</th><td>      <a class="member fn" href="#_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" title='cricket::BasicIceController::CompareCandidatePairNetworks' data-ref="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE">CompareCandidatePairNetworks</a>(<a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>, <a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>, <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref field" href="ice_transport_internal.h.html#cricket::IceConfig::network_preference" title='cricket::IceConfig::network_preference' data-ref="cricket::IceConfig::network_preference" data-ref-filename="cricket..IceConfig..network_preference">network_preference</a>);</td></tr>
<tr><th id="653">653</th><td>  <b>if</b> (<a class="local col7 ref" href="#147compare_a_b_by_networks" title='compare_a_b_by_networks' data-ref="147compare_a_b_by_networks" data-ref-filename="147compare_a_b_by_networks">compare_a_b_by_networks</a> != <a class="tu ref" href="#(anonymousnamespace)::a_and_b_equal" title='(anonymous namespace)::a_and_b_equal' data-use='r' data-ref="(anonymousnamespace)::a_and_b_equal" data-ref-filename="(anonymousnamespace)..a_and_b_equal">a_and_b_equal</a>) {</td></tr>
<tr><th id="654">654</th><td>    <b>return</b> <a class="local col7 ref" href="#147compare_a_b_by_networks" title='compare_a_b_by_networks' data-ref="147compare_a_b_by_networks" data-ref-filename="147compare_a_b_by_networks">compare_a_b_by_networks</a>;</td></tr>
<tr><th id="655">655</th><td>  }</td></tr>
<tr><th id="656">656</th><td></td></tr>
<tr><th id="657">657</th><td>  <i>// Compare connection priority. Lower values get sorted last.</i></td></tr>
<tr><th id="658">658</th><td>  <b>if</b> (<a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection8priorityEv" title='cricket::Connection::priority' data-ref="_ZNK7cricket10Connection8priorityEv" data-ref-filename="_ZNK7cricket10Connection8priorityEv">priority</a>() &gt; <a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection8priorityEv" title='cricket::Connection::priority' data-ref="_ZNK7cricket10Connection8priorityEv" data-ref-filename="_ZNK7cricket10Connection8priorityEv">priority</a>()) {</td></tr>
<tr><th id="659">659</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="660">660</th><td>  }</td></tr>
<tr><th id="661">661</th><td>  <b>if</b> (<a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection8priorityEv" title='cricket::Connection::priority' data-ref="_ZNK7cricket10Connection8priorityEv" data-ref-filename="_ZNK7cricket10Connection8priorityEv">priority</a>() &lt; <a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection8priorityEv" title='cricket::Connection::priority' data-ref="_ZNK7cricket10Connection8priorityEv" data-ref-filename="_ZNK7cricket10Connection8priorityEv">priority</a>()) {</td></tr>
<tr><th id="662">662</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="663">663</th><td>  }</td></tr>
<tr><th id="664">664</th><td></td></tr>
<tr><th id="665">665</th><td>  <i>// If we're still tied at this point, prefer a younger generation.</i></td></tr>
<tr><th id="666">666</th><td><i>  // (Younger generation means a larger generation number).</i></td></tr>
<tr><th id="667">667</th><td>  <em>int</em> <dfn class="local col8 decl" id="148cmp" title='cmp' data-type='int' data-ref="148cmp" data-ref-filename="148cmp">cmp</dfn> = (<a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate10generationEv" title='cricket::Candidate::generation' data-ref="_ZNK7cricket9Candidate10generationEv" data-ref-filename="_ZNK7cricket9Candidate10generationEv">generation</a>() + <a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection10generationEv" title='cricket::Connection::generation' data-ref="_ZNK7cricket10Connection10generationEv" data-ref-filename="_ZNK7cricket10Connection10generationEv">generation</a>()) -</td></tr>
<tr><th id="668">668</th><td>            (<a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection16remote_candidateEv" title='cricket::Connection::remote_candidate' data-ref="_ZNK7cricket10Connection16remote_candidateEv" data-ref-filename="_ZNK7cricket10Connection16remote_candidateEv">remote_candidate</a>().<a class="ref fn" href="../../api/candidate.h.html#_ZNK7cricket9Candidate10generationEv" title='cricket::Candidate::generation' data-ref="_ZNK7cricket9Candidate10generationEv" data-ref-filename="_ZNK7cricket9Candidate10generationEv">generation</a>() + <a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection10generationEv" title='cricket::Connection::generation' data-ref="_ZNK7cricket10Connection10generationEv" data-ref-filename="_ZNK7cricket10Connection10generationEv">generation</a>());</td></tr>
<tr><th id="669">669</th><td>  <b>if</b> (<a class="local col8 ref" href="#148cmp" title='cmp' data-ref="148cmp" data-ref-filename="148cmp">cmp</a> != <var>0</var>) {</td></tr>
<tr><th id="670">670</th><td>    <b>return</b> <a class="local col8 ref" href="#148cmp" title='cmp' data-ref="148cmp" data-ref-filename="148cmp">cmp</a>;</td></tr>
<tr><th id="671">671</th><td>  }</td></tr>
<tr><th id="672">672</th><td></td></tr>
<tr><th id="673">673</th><td>  <i>// A periodic regather (triggered by the regather_all_networks_interval_range)</i></td></tr>
<tr><th id="674">674</th><td><i>  // will produce candidates that appear the same but would use a new port. We</i></td></tr>
<tr><th id="675">675</th><td><i>  // want to use the new candidates and purge the old candidates as they come</i></td></tr>
<tr><th id="676">676</th><td><i>  // in, so use the fact that the old ports get pruned immediately to rank the</i></td></tr>
<tr><th id="677">677</th><td><i>  // candidates with an active port/remote candidate higher.</i></td></tr>
<tr><th id="678">678</th><td>  <em>bool</em> <dfn class="local col9 decl" id="149a_pruned" title='a_pruned' data-type='bool' data-ref="149a_pruned" data-ref-filename="149a_pruned">a_pruned</dfn> = <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::is_connection_pruned_func_" title='cricket::BasicIceController::is_connection_pruned_func_' data-ref="cricket::BasicIceController::is_connection_pruned_func_" data-ref-filename="cricket..BasicIceController..is_connection_pruned_func_">is_connection_pruned_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNKSt3__18functionIFT_DpT0_EEclES3_" data-ref-filename="_ZNKSt3__18functionIFT_DpT0_EEclES3_">(<a class="local col5 ref" href="#145a" title='a' data-ref="145a" data-ref-filename="145a">a</a>)</span>;</td></tr>
<tr><th id="679">679</th><td>  <em>bool</em> <dfn class="local col0 decl" id="150b_pruned" title='b_pruned' data-type='bool' data-ref="150b_pruned" data-ref-filename="150b_pruned">b_pruned</dfn> = <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::is_connection_pruned_func_" title='cricket::BasicIceController::is_connection_pruned_func_' data-ref="cricket::BasicIceController::is_connection_pruned_func_" data-ref-filename="cricket..BasicIceController..is_connection_pruned_func_">is_connection_pruned_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNKSt3__18functionIFT_DpT0_EEclES3_" data-ref-filename="_ZNKSt3__18functionIFT_DpT0_EEclES3_">(<a class="local col6 ref" href="#146b" title='b' data-ref="146b" data-ref-filename="146b">b</a>)</span>;</td></tr>
<tr><th id="680">680</th><td>  <b>if</b> (!<a class="local col9 ref" href="#149a_pruned" title='a_pruned' data-ref="149a_pruned" data-ref-filename="149a_pruned">a_pruned</a> &amp;&amp; <a class="local col0 ref" href="#150b_pruned" title='b_pruned' data-ref="150b_pruned" data-ref-filename="150b_pruned">b_pruned</a>) {</td></tr>
<tr><th id="681">681</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="682">682</th><td>  }</td></tr>
<tr><th id="683">683</th><td>  <b>if</b> (<a class="local col9 ref" href="#149a_pruned" title='a_pruned' data-ref="149a_pruned" data-ref-filename="149a_pruned">a_pruned</a> &amp;&amp; !<a class="local col0 ref" href="#150b_pruned" title='b_pruned' data-ref="150b_pruned" data-ref-filename="150b_pruned">b_pruned</a>) {</td></tr>
<tr><th id="684">684</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="685">685</th><td>  }</td></tr>
<tr><th id="686">686</th><td></td></tr>
<tr><th id="687">687</th><td>  <i>// Otherwise, must be equal</i></td></tr>
<tr><th id="688">688</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="689">689</th><td>}</td></tr>
<tr><th id="690">690</th><td></td></tr>
<tr><th id="691">691</th><td><em>int</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" title='cricket::BasicIceController::CompareConnections' data-ref="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" data-ref-filename="_ZNK7cricket18BasicIceController18CompareConnectionsEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb">CompareConnections</dfn>(</td></tr>
<tr><th id="692">692</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col1 decl" id="151a" title='a' data-type='const cricket::Connection *' data-ref="151a" data-ref-filename="151a">a</dfn>,</td></tr>
<tr><th id="693">693</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col2 decl" id="152b" title='b' data-type='const cricket::Connection *' data-ref="152b" data-ref-filename="152b">b</dfn>,</td></tr>
<tr><th id="694">694</th><td>    <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class='typedef' title='int64_t' data-type='long long' data-ref="int64_t" data-ref-filename="int64_t">int64_t</span>&gt; <dfn class="local col3 decl" id="153receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-type='absl::optional&lt;int64_t&gt;' data-ref="153receiving_unchanged_threshold" data-ref-filename="153receiving_unchanged_threshold">receiving_unchanged_threshold</dfn>,</td></tr>
<tr><th id="695">695</th><td>    <em>bool</em>* <dfn class="local col4 decl" id="154missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-type='bool *' data-ref="154missed_receiving_unchanged_threshold" data-ref-filename="154missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</dfn>) <em>const</em> {</td></tr>
<tr><th id="696">696</th><td>  <a class="macro" href="../../rtc_base/checks.h.html#386" title="(a != nullptr) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 696, &quot;a != nullptr&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_CHECK">RTC_CHECK</a>(<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a> != <b>nullptr</b>);</td></tr>
<tr><th id="697">697</th><td>  <a class="macro" href="../../rtc_base/checks.h.html#386" title="(b != nullptr) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 697, &quot;b != nullptr&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_CHECK">RTC_CHECK</a>(<a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a> != <b>nullptr</b>);</td></tr>
<tr><th id="698">698</th><td></td></tr>
<tr><th id="699">699</th><td>  <i>// We prefer to switch to a writable and receiving connection over a</i></td></tr>
<tr><th id="700">700</th><td><i>  // non-writable or non-receiving connection, even if the latter has</i></td></tr>
<tr><th id="701">701</th><td><i>  // been nominated by the controlling side.</i></td></tr>
<tr><th id="702">702</th><td>  <em>int</em> <dfn class="local col5 decl" id="155state_cmp" title='state_cmp' data-type='int' data-ref="155state_cmp" data-ref-filename="155state_cmp">state_cmp</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" title='cricket::BasicIceController::CompareConnectionStates' data-ref="_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb" data-ref-filename="_ZNK7cricket18BasicIceController23CompareConnectionStatesEPKNS_10ConnectionES3_NSt3__18optionalIxEEPb">CompareConnectionStates</a>(<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>, <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>, <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="local col3 ref" href="#153receiving_unchanged_threshold" title='receiving_unchanged_threshold' data-ref="153receiving_unchanged_threshold" data-ref-filename="153receiving_unchanged_threshold">receiving_unchanged_threshold</a>,</td></tr>
<tr><th id="703">703</th><td>                                          <a class="local col4 ref" href="#154missed_receiving_unchanged_threshold" title='missed_receiving_unchanged_threshold' data-ref="154missed_receiving_unchanged_threshold" data-ref-filename="154missed_receiving_unchanged_threshold">missed_receiving_unchanged_threshold</a>);</td></tr>
<tr><th id="704">704</th><td>  <b>if</b> (<a class="local col5 ref" href="#155state_cmp" title='state_cmp' data-ref="155state_cmp" data-ref-filename="155state_cmp">state_cmp</a> != <var>0</var>) {</td></tr>
<tr><th id="705">705</th><td>    <b>return</b> <a class="local col5 ref" href="#155state_cmp" title='state_cmp' data-ref="155state_cmp" data-ref-filename="155state_cmp">state_cmp</a>;</td></tr>
<tr><th id="706">706</th><td>  }</td></tr>
<tr><th id="707">707</th><td></td></tr>
<tr><th id="708">708</th><td>  <b>if</b> (<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::ice_role_func_" title='cricket::BasicIceController::ice_role_func_' data-ref="cricket::BasicIceController::ice_role_func_" data-ref-filename="cricket..BasicIceController..ice_role_func_">ice_role_func_</a><span class='ref fn' title='std::__1::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNKSt3__18functionIFT_DpT0_EEclES3_" data-ref-filename="_ZNKSt3__18functionIFT_DpT0_EEclES3_">()</span> == <a class="enum" href="transport_description.h.html#cricket::ICEROLE_CONTROLLED" title='cricket::ICEROLE_CONTROLLED' data-ref="cricket::ICEROLE_CONTROLLED" data-ref-filename="cricket..ICEROLE_CONTROLLED">ICEROLE_CONTROLLED</a>) {</td></tr>
<tr><th id="709">709</th><td>    <i>// Compare the connections based on the nomination states and the last data</i></td></tr>
<tr><th id="710">710</th><td><i>    // received time if this is on the controlled side.</i></td></tr>
<tr><th id="711">711</th><td>    <b>if</b> (<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection17remote_nominationEv" title='cricket::Connection::remote_nomination' data-ref="_ZNK7cricket10Connection17remote_nominationEv" data-ref-filename="_ZNK7cricket10Connection17remote_nominationEv">remote_nomination</a>() &gt; <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection17remote_nominationEv" title='cricket::Connection::remote_nomination' data-ref="_ZNK7cricket10Connection17remote_nominationEv" data-ref-filename="_ZNK7cricket10Connection17remote_nominationEv">remote_nomination</a>()) {</td></tr>
<tr><th id="712">712</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="713">713</th><td>    }</td></tr>
<tr><th id="714">714</th><td>    <b>if</b> (<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection17remote_nominationEv" title='cricket::Connection::remote_nomination' data-ref="_ZNK7cricket10Connection17remote_nominationEv" data-ref-filename="_ZNK7cricket10Connection17remote_nominationEv">remote_nomination</a>() &lt; <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection17remote_nominationEv" title='cricket::Connection::remote_nomination' data-ref="_ZNK7cricket10Connection17remote_nominationEv" data-ref-filename="_ZNK7cricket10Connection17remote_nominationEv">remote_nomination</a>()) {</td></tr>
<tr><th id="715">715</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="716">716</th><td>    }</td></tr>
<tr><th id="717">717</th><td></td></tr>
<tr><th id="718">718</th><td>    <b>if</b> (<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_data_receivedEv" title='cricket::Connection::last_data_received' data-ref="_ZNK7cricket10Connection18last_data_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_data_receivedEv">last_data_received</a>() &gt; <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_data_receivedEv" title='cricket::Connection::last_data_received' data-ref="_ZNK7cricket10Connection18last_data_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_data_receivedEv">last_data_received</a>()) {</td></tr>
<tr><th id="719">719</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="720">720</th><td>    }</td></tr>
<tr><th id="721">721</th><td>    <b>if</b> (<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_data_receivedEv" title='cricket::Connection::last_data_received' data-ref="_ZNK7cricket10Connection18last_data_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_data_receivedEv">last_data_received</a>() &lt; <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18last_data_receivedEv" title='cricket::Connection::last_data_received' data-ref="_ZNK7cricket10Connection18last_data_receivedEv" data-ref-filename="_ZNK7cricket10Connection18last_data_receivedEv">last_data_received</a>()) {</td></tr>
<tr><th id="722">722</th><td>      <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="723">723</th><td>    }</td></tr>
<tr><th id="724">724</th><td>  }</td></tr>
<tr><th id="725">725</th><td></td></tr>
<tr><th id="726">726</th><td>  <i>// Compare the network cost and priority.</i></td></tr>
<tr><th id="727">727</th><td>  <b>return</b> <a class="member fn" href="#_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" title='cricket::BasicIceController::CompareConnectionCandidates' data-ref="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" data-ref-filename="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_">CompareConnectionCandidates</a>(<a class="local col1 ref" href="#151a" title='a' data-ref="151a" data-ref-filename="151a">a</a>, <a class="local col2 ref" href="#152b" title='b' data-ref="152b" data-ref-filename="152b">b</a>);</td></tr>
<tr><th id="728">728</th><td>}</td></tr>
<tr><th id="729">729</th><td></td></tr>
<tr><th id="730">730</th><td><em>int</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="decl def fn" id="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" title='cricket::BasicIceController::CompareCandidatePairNetworks' data-ref="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZNK7cricket18BasicIceController28CompareCandidatePairNetworksEPKNS_10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE">CompareCandidatePairNetworks</dfn>(</td></tr>
<tr><th id="731">731</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="156a" title='a' data-type='const cricket::Connection *' data-ref="156a" data-ref-filename="156a">a</dfn>,</td></tr>
<tr><th id="732">732</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col7 decl" id="157b" title='b' data-type='const cricket::Connection *' data-ref="157b" data-ref-filename="157b">b</dfn>,</td></tr>
<tr><th id="733">733</th><td>    <span class="namespace">absl::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<span class="namespace">rtc::</span><a class="type" href="../../rtc_base/network_constants.h.html#rtc::AdapterType" title='rtc::AdapterType' data-ref="rtc::AdapterType" data-ref-filename="rtc..AdapterType">AdapterType</a>&gt; <dfn class="local col8 decl" id="158network_preference" title='network_preference' data-type='absl::optional&lt;rtc::AdapterType&gt;' data-ref="158network_preference" data-ref-filename="158network_preference">network_preference</dfn>) <em>const</em> {</td></tr>
<tr><th id="734">734</th><td>  <em>int</em> <dfn class="local col9 decl" id="159compare_a_b_by_network_preference" title='compare_a_b_by_network_preference' data-type='int' data-ref="159compare_a_b_by_network_preference" data-ref-filename="159compare_a_b_by_network_preference">compare_a_b_by_network_preference</dfn> =</td></tr>
<tr><th id="735">735</th><td>      <a class="tu ref fn" href="#_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" title='(anonymous namespace)::CompareCandidatePairsByNetworkPreference' data-use='c' data-ref="_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE" data-ref-filename="_ZN12_GLOBAL__N_140CompareCandidatePairsByNetworkPreferenceEPKN7cricket10ConnectionES3_NSt3__18optionalIN3rtc11AdapterTypeEEE">CompareCandidatePairsByNetworkPreference</a>(<a class="local col6 ref" href="#156a" title='a' data-ref="156a" data-ref-filename="156a">a</a>, <a class="local col7 ref" href="#157b" title='b' data-ref="157b" data-ref-filename="157b">b</a>,</td></tr>
<tr><th id="736">736</th><td>                                               <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE" data-ref-filename="_ZNSt3__18optionalC1ERKNS_8optionalIT_EE"></span><a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::config_" title='cricket::BasicIceController::config_' data-ref="cricket::BasicIceController::config_" data-ref-filename="cricket..BasicIceController..config_">config_</a>.<a class="ref field" href="ice_transport_internal.h.html#cricket::IceConfig::network_preference" title='cricket::IceConfig::network_preference' data-ref="cricket::IceConfig::network_preference" data-ref-filename="cricket..IceConfig..network_preference">network_preference</a>);</td></tr>
<tr><th id="737">737</th><td>  <i>// The network preference has a higher precedence than the network cost.</i></td></tr>
<tr><th id="738">738</th><td>  <b>if</b> (<a class="local col9 ref" href="#159compare_a_b_by_network_preference" title='compare_a_b_by_network_preference' data-ref="159compare_a_b_by_network_preference" data-ref-filename="159compare_a_b_by_network_preference">compare_a_b_by_network_preference</a> != <a class="tu ref" href="#(anonymousnamespace)::a_and_b_equal" title='(anonymous namespace)::a_and_b_equal' data-use='r' data-ref="(anonymousnamespace)::a_and_b_equal" data-ref-filename="(anonymousnamespace)..a_and_b_equal">a_and_b_equal</a>) {</td></tr>
<tr><th id="739">739</th><td>    <b>return</b> <a class="local col9 ref" href="#159compare_a_b_by_network_preference" title='compare_a_b_by_network_preference' data-ref="159compare_a_b_by_network_preference" data-ref-filename="159compare_a_b_by_network_preference">compare_a_b_by_network_preference</a>;</td></tr>
<tr><th id="740">740</th><td>  }</td></tr>
<tr><th id="741">741</th><td></td></tr>
<tr><th id="742">742</th><td>  <span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span> <dfn class="local col0 decl" id="160a_cost" title='a_cost' data-type='uint32_t' data-ref="160a_cost" data-ref-filename="160a_cost">a_cost</dfn> = <a class="local col6 ref" href="#156a" title='a' data-ref="156a" data-ref-filename="156a">a</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18ComputeNetworkCostEv" title='cricket::Connection::ComputeNetworkCost' data-ref="_ZNK7cricket10Connection18ComputeNetworkCostEv" data-ref-filename="_ZNK7cricket10Connection18ComputeNetworkCostEv">ComputeNetworkCost</a>();</td></tr>
<tr><th id="743">743</th><td>  <span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span> <dfn class="local col1 decl" id="161b_cost" title='b_cost' data-type='uint32_t' data-ref="161b_cost" data-ref-filename="161b_cost">b_cost</dfn> = <a class="local col7 ref" href="#157b" title='b' data-ref="157b" data-ref-filename="157b">b</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection18ComputeNetworkCostEv" title='cricket::Connection::ComputeNetworkCost' data-ref="_ZNK7cricket10Connection18ComputeNetworkCostEv" data-ref-filename="_ZNK7cricket10Connection18ComputeNetworkCostEv">ComputeNetworkCost</a>();</td></tr>
<tr><th id="744">744</th><td>  <i>// Prefer lower network cost.</i></td></tr>
<tr><th id="745">745</th><td>  <b>if</b> (<a class="local col0 ref" href="#160a_cost" title='a_cost' data-ref="160a_cost" data-ref-filename="160a_cost">a_cost</a> &lt; <a class="local col1 ref" href="#161b_cost" title='b_cost' data-ref="161b_cost" data-ref-filename="161b_cost">b_cost</a>) {</td></tr>
<tr><th id="746">746</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_is_better" title='(anonymous namespace)::a_is_better' data-use='r' data-ref="(anonymousnamespace)::a_is_better" data-ref-filename="(anonymousnamespace)..a_is_better">a_is_better</a>;</td></tr>
<tr><th id="747">747</th><td>  }</td></tr>
<tr><th id="748">748</th><td>  <b>if</b> (<a class="local col0 ref" href="#160a_cost" title='a_cost' data-ref="160a_cost" data-ref-filename="160a_cost">a_cost</a> &gt; <a class="local col1 ref" href="#161b_cost" title='b_cost' data-ref="161b_cost" data-ref-filename="161b_cost">b_cost</a>) {</td></tr>
<tr><th id="749">749</th><td>    <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::b_is_better" title='(anonymous namespace)::b_is_better' data-use='r' data-ref="(anonymousnamespace)::b_is_better" data-ref-filename="(anonymousnamespace)..b_is_better">b_is_better</a>;</td></tr>
<tr><th id="750">750</th><td>  }</td></tr>
<tr><th id="751">751</th><td>  <b>return</b> <a class="tu ref" href="#(anonymousnamespace)::a_and_b_equal" title='(anonymous namespace)::a_and_b_equal' data-use='r' data-ref="(anonymousnamespace)::a_and_b_equal" data-ref-filename="(anonymousnamespace)..a_and_b_equal">a_and_b_equal</a>;</td></tr>
<tr><th id="752">752</th><td>}</td></tr>
<tr><th id="753">753</th><td></td></tr>
<tr><th id="754">754</th><td><span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZN7cricket18BasicIceController16PruneConnectionsEv" title='cricket::BasicIceController::PruneConnections' data-ref="_ZN7cricket18BasicIceController16PruneConnectionsEv" data-ref-filename="_ZN7cricket18BasicIceController16PruneConnectionsEv">PruneConnections</dfn>() {</td></tr>
<tr><th id="755">755</th><td>  <i>// We can prune any connection for which there is a connected, writable</i></td></tr>
<tr><th id="756">756</th><td><i>  // connection on the same network with better or equal priority.  We leave</i></td></tr>
<tr><th id="757">757</th><td><i>  // those with better priority just in case they become writable later (at</i></td></tr>
<tr><th id="758">758</th><td><i>  // which point, we would prune out the current selected connection).  We leave</i></td></tr>
<tr><th id="759">759</th><td><i>  // connections on other networks because they may not be using the same</i></td></tr>
<tr><th id="760">760</th><td><i>  // resources and they may represent very distinct paths over which we can</i></td></tr>
<tr><th id="761">761</th><td><i>  // switch. If |best_conn_on_network| is not connected, we may be reconnecting</i></td></tr>
<tr><th id="762">762</th><td><i>  // a TCP connection and should not prune connections in this network.</i></td></tr>
<tr><th id="763">763</th><td><i>  // See the big comment in CompareConnectionStates.</i></td></tr>
<tr><th id="764">764</th><td><i>  //</i></td></tr>
<tr><th id="765">765</th><td><i>  // An exception is made for connections on an "any address" network, meaning</i></td></tr>
<tr><th id="766">766</th><td><i>  // not bound to any specific network interface. We don't want to keep one of</i></td></tr>
<tr><th id="767">767</th><td><i>  // these alive as a backup, since it could be using the same network</i></td></tr>
<tr><th id="768">768</th><td><i>  // interface as the higher-priority, selected candidate pair.</i></td></tr>
<tr><th id="769">769</th><td>  <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>*&gt; <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev"></span><dfn class="local col2 decl" id="162connections_to_prune" title='connections_to_prune' data-type='std::vector&lt;const Connection *&gt;' data-ref="162connections_to_prune" data-ref-filename="162connections_to_prune">connections_to_prune</dfn>;</td></tr>
<tr><th id="770">770</th><td>  <em>auto</em> <dfn class="local col3 decl" id="163best_connection_by_network" title='best_connection_by_network' data-type='std::__1::map&lt;const rtc::Network *, const cricket::Connection *, std::__1::less&lt;const rtc::Network *&gt;, std::__1::allocator&lt;std::__1::pair&lt;const rtc::Network *const, const cricket::Connection *&gt;&gt;&gt;' data-ref="163best_connection_by_network" data-ref-filename="163best_connection_by_network">best_connection_by_network</dfn> = <a class="member fn" href="#_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" title='cricket::BasicIceController::GetBestConnectionByNetwork' data-ref="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv" data-ref-filename="_ZNK7cricket18BasicIceController26GetBestConnectionByNetworkEv">GetBestConnectionByNetwork</a>();</td></tr>
<tr><th id="771">771</th><td>  <b>for</b> (<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col4 decl" id="164conn" title='conn' data-type='const cricket::Connection *' data-ref="164conn" data-ref-filename="164conn">conn</dfn> : <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::connections_" title='cricket::BasicIceController::connections_' data-ref="cricket::BasicIceController::connections_" data-ref-filename="cricket..BasicIceController..connections_">connections_</a>) {</td></tr>
<tr><th id="772">772</th><td>    <em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col5 decl" id="165best_conn" title='best_conn' data-type='const cricket::Connection *' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</dfn> = <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>;</td></tr>
<tr><th id="773">773</th><td>    <b>if</b> (!<span class="namespace">rtc::</span><a class="ref fn" href="../../rtc_base/ip_address.h.html#_ZN3rtc7IPIsAnyERKNS_9IPAddressE" title='rtc::IPIsAny' data-ref="_ZN3rtc7IPIsAnyERKNS_9IPAddressE" data-ref-filename="_ZN3rtc7IPIsAnyERKNS_9IPAddressE">IPIsAny</a>(<a class="local col4 ref" href="#164conn" title='conn' data-ref="164conn" data-ref-filename="164conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection7networkEv" title='cricket::Connection::network' data-ref="_ZNK7cricket10Connection7networkEv" data-ref-filename="_ZNK7cricket10Connection7networkEv">network</a>()-&gt;<a class="ref fn" href="../../rtc_base/network.h.html#_ZNK3rtc7Network2ipEv" title='rtc::Network::ip' data-ref="_ZNK3rtc7Network2ipEv" data-ref-filename="_ZNK3rtc7Network2ipEv">ip</a>())) {</td></tr>
<tr><th id="774">774</th><td>      <i>// If the connection is bound to a specific network interface (not an</i></td></tr>
<tr><th id="775">775</th><td><i>      // "any address" network), compare it against the best connection for</i></td></tr>
<tr><th id="776">776</th><td><i>      // that network interface rather than the best connection overall. This</i></td></tr>
<tr><th id="777">777</th><td><i>      // ensures that at least one connection per network will be left</i></td></tr>
<tr><th id="778">778</th><td><i>      // unpruned.</i></td></tr>
<tr><th id="779">779</th><td>      <a class="local col5 ref" href="#165best_conn" title='best_conn' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</a> = <a class="local col3 ref" href="#163best_connection_by_network" title='best_connection_by_network' data-ref="163best_connection_by_network" data-ref-filename="163best_connection_by_network">best_connection_by_network</a><span class='ref fn' title='std::__1::map::operator[]' data-ref="_ZNSt3__13mapixEOT_" data-ref-filename="_ZNSt3__13mapixEOT_">[<a class="local col4 ref" href="#164conn" title='conn' data-ref="164conn" data-ref-filename="164conn">conn</a>-&gt;<a class="virtual ref fn" href="connection.h.html#_ZNK7cricket10Connection7networkEv" title='cricket::Connection::network' data-ref="_ZNK7cricket10Connection7networkEv" data-ref-filename="_ZNK7cricket10Connection7networkEv">network</a>()]</span>;</td></tr>
<tr><th id="780">780</th><td>    }</td></tr>
<tr><th id="781">781</th><td>    <i>// Do not prune connections if the connection being compared against is</i></td></tr>
<tr><th id="782">782</th><td><i>    // weak. Otherwise, it may delete connections prematurely.</i></td></tr>
<tr><th id="783">783</th><td>    <b>if</b> (<a class="local col5 ref" href="#165best_conn" title='best_conn' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</a> &amp;&amp; <a class="local col4 ref" href="#164conn" title='conn' data-ref="164conn" data-ref-filename="164conn">conn</a> != <a class="local col5 ref" href="#165best_conn" title='best_conn' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</a> &amp;&amp; !<a class="local col5 ref" href="#165best_conn" title='best_conn' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection4weakEv" title='cricket::Connection::weak' data-ref="_ZNK7cricket10Connection4weakEv" data-ref-filename="_ZNK7cricket10Connection4weakEv">weak</a>() &amp;&amp;</td></tr>
<tr><th id="784">784</th><td>        <a class="member fn" href="#_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" title='cricket::BasicIceController::CompareConnectionCandidates' data-ref="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" data-ref-filename="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_">CompareConnectionCandidates</a>(<a class="local col5 ref" href="#165best_conn" title='best_conn' data-ref="165best_conn" data-ref-filename="165best_conn">best_conn</a>, <a class="local col4 ref" href="#164conn" title='conn' data-ref="164conn" data-ref-filename="164conn">conn</a>) &gt;= <var>0</var>) {</td></tr>
<tr><th id="785">785</th><td>      <a class="local col2 ref" href="#162connections_to_prune" title='connections_to_prune' data-ref="162connections_to_prune" data-ref-filename="162connections_to_prune">connections_to_prune</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE" data-ref-filename="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE">push_back</span>(<a class="local col4 ref" href="#164conn" title='conn' data-ref="164conn" data-ref-filename="164conn">conn</a>);</td></tr>
<tr><th id="786">786</th><td>    }</td></tr>
<tr><th id="787">787</th><td>  }</td></tr>
<tr><th id="788">788</th><td>  <b>return</b> <a class="local col2 ref" href="#162connections_to_prune" title='connections_to_prune' data-ref="162connections_to_prune" data-ref-filename="162connections_to_prune">connections_to_prune</a>;</td></tr>
<tr><th id="789">789</th><td>}</td></tr>
<tr><th id="790">790</th><td></td></tr>
<tr><th id="791">791</th><td><em>bool</em> <a class="type" href="basic_ice_controller.h.html#cricket::BasicIceController" title='cricket::BasicIceController' data-ref="cricket::BasicIceController" data-ref-filename="cricket..BasicIceController">BasicIceController</a>::<dfn class="virtual decl def fn" id="_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE" title='cricket::BasicIceController::GetUseCandidateAttr' data-ref="_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE" data-ref-filename="_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE">GetUseCandidateAttr</dfn>(<em>const</em> <a class="type" href="connection.h.html#cricket::Connection" title='cricket::Connection' data-ref="cricket::Connection" data-ref-filename="cricket..Connection">Connection</a>* <dfn class="local col6 decl" id="166conn" title='conn' data-type='const cricket::Connection *' data-ref="166conn" data-ref-filename="166conn">conn</dfn>,</td></tr>
<tr><th id="792">792</th><td>                                             <a class="type" href="ice_transport_internal.h.html#cricket::NominationMode" title='cricket::NominationMode' data-ref="cricket::NominationMode" data-ref-filename="cricket..NominationMode">NominationMode</a> <dfn class="local col7 decl" id="167mode" title='mode' data-type='cricket::NominationMode' data-ref="167mode" data-ref-filename="167mode">mode</dfn>,</td></tr>
<tr><th id="793">793</th><td>                                             <a class="type" href="transport_description.h.html#cricket::IceMode" title='cricket::IceMode' data-ref="cricket::IceMode" data-ref-filename="cricket..IceMode">IceMode</a> <dfn class="local col8 decl" id="168remote_ice_mode" title='remote_ice_mode' data-type='cricket::IceMode' data-ref="168remote_ice_mode" data-ref-filename="168remote_ice_mode">remote_ice_mode</dfn>) <em>const</em> {</td></tr>
<tr><th id="794">794</th><td>  <b>switch</b> (<a class="local col7 ref" href="#167mode" title='mode' data-ref="167mode" data-ref-filename="167mode">mode</a>) {</td></tr>
<tr><th id="795">795</th><td>    <b>case</b> <a class="type" href="ice_transport_internal.h.html#cricket::NominationMode" title='cricket::NominationMode' data-ref="cricket::NominationMode" data-ref-filename="cricket..NominationMode">NominationMode</a>::<a class="enum" href="ice_transport_internal.h.html#cricket::NominationMode::REGULAR" title='cricket::NominationMode::REGULAR' data-ref="cricket::NominationMode::REGULAR" data-ref-filename="cricket..NominationMode..REGULAR">REGULAR</a>:</td></tr>
<tr><th id="796">796</th><td>      <i>// TODO(honghaiz): Implement regular nomination.</i></td></tr>
<tr><th id="797">797</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="798">798</th><td>    <b>case</b> <a class="type" href="ice_transport_internal.h.html#cricket::NominationMode" title='cricket::NominationMode' data-ref="cricket::NominationMode" data-ref-filename="cricket..NominationMode">NominationMode</a>::<a class="enum" href="ice_transport_internal.h.html#cricket::NominationMode::AGGRESSIVE" title='cricket::NominationMode::AGGRESSIVE' data-ref="cricket::NominationMode::AGGRESSIVE" data-ref-filename="cricket..NominationMode..AGGRESSIVE">AGGRESSIVE</a>:</td></tr>
<tr><th id="799">799</th><td>      <b>if</b> (<a class="local col8 ref" href="#168remote_ice_mode" title='remote_ice_mode' data-ref="168remote_ice_mode" data-ref-filename="168remote_ice_mode">remote_ice_mode</a> == <a class="enum" href="transport_description.h.html#cricket::ICEMODE_LITE" title='cricket::ICEMODE_LITE' data-ref="cricket::ICEMODE_LITE" data-ref-filename="cricket..ICEMODE_LITE">ICEMODE_LITE</a>) {</td></tr>
<tr><th id="800">800</th><td>        <b>return</b> <a class="virtual member fn" href="#_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE" title='cricket::BasicIceController::GetUseCandidateAttr' data-ref="_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE" data-ref-filename="_ZNK7cricket18BasicIceController19GetUseCandidateAttrEPKNS_10ConnectionENS_14NominationModeENS_7IceModeE">GetUseCandidateAttr</a>(<a class="local col6 ref" href="#166conn" title='conn' data-ref="166conn" data-ref-filename="166conn">conn</a>, <a class="type" href="ice_transport_internal.h.html#cricket::NominationMode" title='cricket::NominationMode' data-ref="cricket::NominationMode" data-ref-filename="cricket..NominationMode">NominationMode</a>::<a class="enum" href="ice_transport_internal.h.html#cricket::NominationMode::REGULAR" title='cricket::NominationMode::REGULAR' data-ref="cricket::NominationMode::REGULAR" data-ref-filename="cricket..NominationMode..REGULAR">REGULAR</a>,</td></tr>
<tr><th id="801">801</th><td>                                   <a class="local col8 ref" href="#168remote_ice_mode" title='remote_ice_mode' data-ref="168remote_ice_mode" data-ref-filename="168remote_ice_mode">remote_ice_mode</a>);</td></tr>
<tr><th id="802">802</th><td>      }</td></tr>
<tr><th id="803">803</th><td>      <b>return</b> <b>true</b>;</td></tr>
<tr><th id="804">804</th><td>    <b>case</b> <a class="type" href="ice_transport_internal.h.html#cricket::NominationMode" title='cricket::NominationMode' data-ref="cricket::NominationMode" data-ref-filename="cricket..NominationMode">NominationMode</a>::<a class="enum" href="ice_transport_internal.h.html#cricket::NominationMode::SEMI_AGGRESSIVE" title='cricket::NominationMode::SEMI_AGGRESSIVE' data-ref="cricket::NominationMode::SEMI_AGGRESSIVE" data-ref-filename="cricket..NominationMode..SEMI_AGGRESSIVE">SEMI_AGGRESSIVE</a>: {</td></tr>
<tr><th id="805">805</th><td>      <i>// Nominate if</i></td></tr>
<tr><th id="806">806</th><td><i>      // a) Remote is in FULL ICE AND</i></td></tr>
<tr><th id="807">807</th><td><i>      //    a.1) |conn| is the selected connection OR</i></td></tr>
<tr><th id="808">808</th><td><i>      //    a.2) there is no selected connection OR</i></td></tr>
<tr><th id="809">809</th><td><i>      //    a.3) the selected connection is unwritable OR</i></td></tr>
<tr><th id="810">810</th><td><i>      //    a.4) |conn| has higher priority than selected_connection.</i></td></tr>
<tr><th id="811">811</th><td><i>      // b) Remote is in LITE ICE AND</i></td></tr>
<tr><th id="812">812</th><td><i>      //    b.1) |conn| is the selected_connection AND</i></td></tr>
<tr><th id="813">813</th><td><i>      //    b.2) |conn| is writable.</i></td></tr>
<tr><th id="814">814</th><td>      <em>bool</em> <dfn class="local col9 decl" id="169selected" title='selected' data-type='bool' data-ref="169selected" data-ref-filename="169selected">selected</dfn> = <a class="local col6 ref" href="#166conn" title='conn' data-ref="166conn" data-ref-filename="166conn">conn</a> == <a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>;</td></tr>
<tr><th id="815">815</th><td>      <b>if</b> (<a class="local col8 ref" href="#168remote_ice_mode" title='remote_ice_mode' data-ref="168remote_ice_mode" data-ref-filename="168remote_ice_mode">remote_ice_mode</a> == <a class="enum" href="transport_description.h.html#cricket::ICEMODE_LITE" title='cricket::ICEMODE_LITE' data-ref="cricket::ICEMODE_LITE" data-ref-filename="cricket..ICEMODE_LITE">ICEMODE_LITE</a>) {</td></tr>
<tr><th id="816">816</th><td>        <b>return</b> <a class="local col9 ref" href="#169selected" title='selected' data-ref="169selected" data-ref-filename="169selected">selected</a> &amp;&amp; <a class="local col6 ref" href="#166conn" title='conn' data-ref="166conn" data-ref-filename="166conn">conn</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>();</td></tr>
<tr><th id="817">817</th><td>      }</td></tr>
<tr><th id="818">818</th><td>      <em>bool</em> <dfn class="local col0 decl" id="170better_than_selected" title='better_than_selected' data-type='bool' data-ref="170better_than_selected" data-ref-filename="170better_than_selected">better_than_selected</dfn> =</td></tr>
<tr><th id="819">819</th><td>          !<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a> || !<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>-&gt;<a class="ref fn" href="connection.h.html#_ZNK7cricket10Connection8writableEv" title='cricket::Connection::writable' data-ref="_ZNK7cricket10Connection8writableEv" data-ref-filename="_ZNK7cricket10Connection8writableEv">writable</a>() ||</td></tr>
<tr><th id="820">820</th><td>          <a class="member fn" href="#_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" title='cricket::BasicIceController::CompareConnectionCandidates' data-ref="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_" data-ref-filename="_ZNK7cricket18BasicIceController27CompareConnectionCandidatesEPKNS_10ConnectionES3_">CompareConnectionCandidates</a>(<a class="member field" href="basic_ice_controller.h.html#cricket::BasicIceController::selected_connection_" title='cricket::BasicIceController::selected_connection_' data-ref="cricket::BasicIceController::selected_connection_" data-ref-filename="cricket..BasicIceController..selected_connection_">selected_connection_</a>, <a class="local col6 ref" href="#166conn" title='conn' data-ref="166conn" data-ref-filename="166conn">conn</a>) &lt; <var>0</var>;</td></tr>
<tr><th id="821">821</th><td>      <b>return</b> <a class="local col9 ref" href="#169selected" title='selected' data-ref="169selected" data-ref-filename="169selected">selected</a> || <a class="local col0 ref" href="#170better_than_selected" title='better_than_selected' data-ref="170better_than_selected" data-ref-filename="170better_than_selected">better_than_selected</a>;</td></tr>
<tr><th id="822">822</th><td>    }</td></tr>
<tr><th id="823">823</th><td>    <b>default</b>:</td></tr>
<tr><th id="824">824</th><td>      <a class="macro" href="../../rtc_base/checks.h.html#447" title="(false) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;false&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/p2p/base/basic_ice_controller.cc&quot;, 824, &quot;false&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;()" data-ref="_M/RTC_NOTREACHED">RTC_NOTREACHED</a>();</td></tr>
<tr><th id="825">825</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="826">826</th><td>  }</td></tr>
<tr><th id="827">827</th><td>}</td></tr>
<tr><th id="828">828</th><td></td></tr>
<tr><th id="829">829</th><td>}  <i>// namespace cricket</i></td></tr>
<tr><th id="830">830</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
