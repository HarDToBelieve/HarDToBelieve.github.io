<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>HistoryController.cpp source code [webkit/Source/WebCore/loader/HistoryController.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/WebCore/loader/HistoryController.cpp'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>webkit</a>/<a href='../..'>Source</a>/<a href='..'>WebCore</a>/<a href='./'>loader</a>/<a href='HistoryController.cpp.html'>HistoryController.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2006, 2007, 2008, 2009 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> * Copyright (C) 2008 Nokia Corporation and/or its subsidiary(-ies)</i></td></tr>
<tr><th id="4">4</th><td><i> * Copyright (C) 2008, 2009 Torch Mobile Inc. All rights reserved. (<a href="http://www.torchmobile.com/">http://www.torchmobile.com/</a>)</i></td></tr>
<tr><th id="5">5</th><td><i> *</i></td></tr>
<tr><th id="6">6</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="7">7</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="8">8</th><td><i> * are met:</i></td></tr>
<tr><th id="9">9</th><td><i> *</i></td></tr>
<tr><th id="10">10</th><td><i> * 1.  Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="11">11</th><td><i> *     notice, this list of conditions and the following disclaimer. </i></td></tr>
<tr><th id="12">12</th><td><i> * 2.  Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="13">13</th><td><i> *     notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="14">14</th><td><i> *     documentation and/or other materials provided with the distribution. </i></td></tr>
<tr><th id="15">15</th><td><i> * 3.  Neither the name of Apple Inc. ("Apple") nor the names of</i></td></tr>
<tr><th id="16">16</th><td><i> *     its contributors may be used to endorse or promote products derived</i></td></tr>
<tr><th id="17">17</th><td><i> *     from this software without specific prior written permission. </i></td></tr>
<tr><th id="18">18</th><td><i> *</i></td></tr>
<tr><th id="19">19</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY</i></td></tr>
<tr><th id="20">20</th><td><i> * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</i></td></tr>
<tr><th id="21">21</th><td><i> * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</i></td></tr>
<tr><th id="22">22</th><td><i> * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY</i></td></tr>
<tr><th id="23">23</th><td><i> * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</i></td></tr>
<tr><th id="24">24</th><td><i> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</i></td></tr>
<tr><th id="25">25</th><td><i> * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</i></td></tr>
<tr><th id="26">26</th><td><i> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</i></td></tr>
<tr><th id="27">27</th><td><i> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</i></td></tr>
<tr><th id="28">28</th><td><i> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="29">29</th><td><i> */</i></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="HistoryController.h.html">"HistoryController.h"</a></u></td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../history/BackForwardCache.h.html">"BackForwardCache.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../history/BackForwardController.h.html">"BackForwardController.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../history/CachedPage.h.html">"CachedPage.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../dom/Document.h.html">"Document.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="DocumentLoader.h.html">"DocumentLoader.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../page/Frame.h.html">"Frame.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="FrameLoader.h.html">"FrameLoader.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="FrameLoaderClient.h.html">"FrameLoaderClient.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="FrameLoaderStateMachine.h.html">"FrameLoaderStateMachine.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../page/FrameTree.h.html">"FrameTree.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../page/FrameView.h.html">"FrameView.h"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="../html/HTMLObjectElement.h.html">"HTMLObjectElement.h"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../history/HistoryItem.h.html">"HistoryItem.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../platform/Logging.h.html">"Logging.h"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../page/Page.h.html">"Page.h"</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../page/scrolling/ScrollingCoordinator.h.html">"ScrollingCoordinator.h"</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../bindings/js/SerializedScriptValue.h.html">"SerializedScriptValue.h"</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../platform/SharedStringHash.h.html">"SharedStringHash.h"</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="ShouldTreatAsContinuingLoad.h.html">"ShouldTreatAsContinuingLoad.h"</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../page/VisitedLinkStore.h.html">"VisitedLinkStore.h"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html">&lt;wtf/text/CString.h&gt;</a></u></td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><b>namespace</b> <span class="namespace">WebCore</span> {</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td><em>static</em> <b>inline</b> <em>void</em> <dfn class="decl def fn" id="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</dfn>(<a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>&amp; <dfn class="local col1 decl" id="671page" title='page' data-type='WebCore::Page &amp;' data-ref="671page" data-ref-filename="671page">page</dfn>, <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a>&amp; <dfn class="local col2 decl" id="672url" title='url' data-type='const WTF::URL &amp;' data-ref="672url" data-ref-filename="672url">url</dfn>)</td></tr>
<tr><th id="59">59</th><td>{</td></tr>
<tr><th id="60">60</th><td>    <a class="local col1 ref" href="#671page" title='page' data-ref="671page" data-ref-filename="671page">page</a>.<a class="ref fn" href="../page/Page.h.html#_ZN7WebCore4Page16visitedLinkStoreEv" title='WebCore::Page::visitedLinkStore' data-ref="_ZN7WebCore4Page16visitedLinkStoreEv" data-ref-filename="_ZN7WebCore4Page16visitedLinkStoreEv">visitedLinkStore</a>().<a class="virtual ref fn" href="../page/VisitedLinkStore.h.html#_ZN7WebCore16VisitedLinkStore14addVisitedLinkERNS_4PageEj" title='WebCore::VisitedLinkStore::addVisitedLink' data-ref="_ZN7WebCore16VisitedLinkStore14addVisitedLinkERNS_4PageEj" data-ref-filename="_ZN7WebCore16VisitedLinkStore14addVisitedLinkERNS_4PageEj">addVisitedLink</a>(<span class='refarg'><a class="local col1 ref" href="#671page" title='page' data-ref="671page" data-ref-filename="671page">page</a></span>, <a class="ref fn" href="../platform/SharedStringHash.h.html#_ZN7WebCore23computeSharedStringHashERKN3WTF6StringE" title='WebCore::computeSharedStringHash' data-ref="_ZN7WebCore23computeSharedStringHashERKN3WTF6StringE" data-ref-filename="_ZN7WebCore23computeSharedStringHashERKN3WTF6StringE">computeSharedStringHash</a>(<a class="local col2 ref" href="#672url" title='url' data-ref="672url" data-ref-filename="672url">url</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>()));</td></tr>
<tr><th id="61">61</th><td>}</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td><a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryControllerC1ERNS_5FrameE" title='WebCore::FrameLoader::HistoryController::HistoryController' data-ref="_ZN7WebCore11FrameLoader17HistoryControllerC1ERNS_5FrameE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryControllerC1ERNS_5FrameE">HistoryController</dfn>(<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>&amp; <dfn class="local col3 decl" id="673frame" title='frame' data-type='WebCore::Frame &amp;' data-ref="673frame" data-ref-filename="673frame">frame</dfn>)</td></tr>
<tr><th id="64">64</th><td>    : <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>(<a class="local col3 ref" href="#673frame" title='frame' data-ref="673frame" data-ref-filename="673frame">frame</a>)</td></tr>
<tr><th id="65">65</th><td>    , <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a>(<b>true</b>)</td></tr>
<tr><th id="66">66</th><td>    , <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_defersLoading" title='WebCore::FrameLoader::HistoryController::m_defersLoading' data-ref="WebCore::FrameLoader::HistoryController::m_defersLoading" data-ref-filename="WebCore..FrameLoader..HistoryController..m_defersLoading">m_defersLoading</a>(<b>false</b>)</td></tr>
<tr><th id="67">67</th><td>{</td></tr>
<tr><th id="68">68</th><td>}</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryControllerD1Ev" title='WebCore::FrameLoader::HistoryController::~HistoryController' data-ref="_ZN7WebCore11FrameLoader17HistoryControllerD1Ev" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryControllerD1Ev">~HistoryController</dfn>() = <b>default</b>;</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col4 decl" id="674item" title='item' data-type='WebCore::HistoryItem *' data-ref="674item" data-ref-filename="674item">item</dfn>)</td></tr>
<tr><th id="73">73</th><td>{</td></tr>
<tr><th id="74">74</th><td>    <a class="type" href="../page/FrameView.h.html#WebCore::FrameView" title='WebCore::FrameView' data-ref="WebCore::FrameView" data-ref-filename="WebCore..FrameView">FrameView</a>* <dfn class="local col5 decl" id="675frameView" title='frameView' data-type='WebCore::FrameView *' data-ref="675frameView" data-ref-filename="675frameView">frameView</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4viewEv" title='WebCore::Frame::view' data-ref="_ZNK7WebCore5Frame4viewEv" data-ref-filename="_ZNK7WebCore5Frame4viewEv">view</a>();</td></tr>
<tr><th id="75">75</th><td>    <b>if</b> (!<a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a> || !<a class="local col5 ref" href="#675frameView" title='frameView' data-ref="675frameView" data-ref-filename="675frameView">frameView</a>)</td></tr>
<tr><th id="76">76</th><td>        <b>return</b>;</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document21backForwardCacheStateEv" title='WebCore::Document::backForwardCacheState' data-ref="_ZNK7WebCore8Document21backForwardCacheStateEv" data-ref-filename="_ZNK7WebCore8Document21backForwardCacheStateEv">backForwardCacheState</a>() != <a class="type" href="../dom/Document.h.html#WebCore::Document" title='WebCore::Document' data-ref="WebCore::Document" data-ref-filename="WebCore..Document">Document</a>::<a class="enum" href="../dom/Document.h.html#WebCore::Document::NotInBackForwardCache" title='WebCore::Document::NotInBackForwardCache' data-ref="WebCore::Document::NotInBackForwardCache" data-ref-filename="WebCore..Document..NotInBackForwardCache">NotInBackForwardCache</a>)</td></tr>
<tr><th id="79">79</th><td>        <a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE" title='WebCore::HistoryItem::setScrollPosition' data-ref="_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE" data-ref-filename="_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE">setScrollPosition</a>(<a class="local col5 ref" href="#675frameView" title='frameView' data-ref="675frameView" data-ref-filename="675frameView">frameView</a>-&gt;<a class="ref fn" href="../platform/ScrollView.h.html#_ZNK7WebCore10ScrollView20cachedScrollPositionEv" title='WebCore::ScrollView::cachedScrollPosition' data-ref="_ZNK7WebCore10ScrollView20cachedScrollPositionEv" data-ref-filename="_ZNK7WebCore10ScrollView20cachedScrollPositionEv">cachedScrollPosition</a>());</td></tr>
<tr><th id="80">80</th><td>    <b>else</b></td></tr>
<tr><th id="81">81</th><td>        <a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE" title='WebCore::HistoryItem::setScrollPosition' data-ref="_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE" data-ref-filename="_ZN7WebCore11HistoryItem17setScrollPositionERKNS_8IntPointE">setScrollPosition</a>(<a class="local col5 ref" href="#675frameView" title='frameView' data-ref="675frameView" data-ref-filename="675frameView">frameView</a>-&gt;<a class="virtual ref fn" href="../platform/ScrollView.h.html#_ZNK7WebCore10ScrollView14scrollPositionEv" title='WebCore::ScrollView::scrollPosition' data-ref="_ZNK7WebCore10ScrollView14scrollPositionEv" data-ref-filename="_ZNK7WebCore10ScrollView14scrollPositionEv">scrollPosition</a>());</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><u>#<span data-ppcond="83">if</span> <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined WTF_PLATFORM_IOS_FAMILY &amp;&amp; WTF_PLATFORM_IOS_FAMILY)" data-ref="_M/PLATFORM">PLATFORM</a>(IOS_FAMILY)</u></td></tr>
<tr><th id="84">84</th><td>    item-&gt;setExposedContentRect(frameView-&gt;exposedContentRect());</td></tr>
<tr><th id="85">85</th><td>    item-&gt;setUnobscuredContentRect(frameView-&gt;unobscuredContentRect());</td></tr>
<tr><th id="86">86</th><td><u>#<span data-ppcond="83">endif</span></u></td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td>    <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col6 decl" id="676page" title='page' data-type='WebCore::Page *' data-ref="676page" data-ref-filename="676page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="89">89</th><td>    <b>if</b> (<a class="local col6 ref" href="#676page" title='page' data-ref="676page" data-ref-filename="676page">page</a> &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>()) {</td></tr>
<tr><th id="90">90</th><td>        <a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem18setPageScaleFactorEf" title='WebCore::HistoryItem::setPageScaleFactor' data-ref="_ZN7WebCore11HistoryItem18setPageScaleFactorEf" data-ref-filename="_ZN7WebCore11HistoryItem18setPageScaleFactorEf">setPageScaleFactor</a>(<a class="local col6 ref" href="#676page" title='page' data-ref="676page" data-ref-filename="676page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page15pageScaleFactorEv" title='WebCore::Page::pageScaleFactor' data-ref="_ZNK7WebCore4Page15pageScaleFactorEv" data-ref-filename="_ZNK7WebCore4Page15pageScaleFactorEv">pageScaleFactor</a>() / <a class="local col6 ref" href="#676page" title='page' data-ref="676page" data-ref-filename="676page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page15viewScaleFactorEv" title='WebCore::Page::viewScaleFactor' data-ref="_ZNK7WebCore4Page15viewScaleFactorEv" data-ref-filename="_ZNK7WebCore4Page15viewScaleFactorEv">viewScaleFactor</a>());</td></tr>
<tr><th id="91">91</th><td><u>#<span data-ppcond="91">if</span> <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined WTF_PLATFORM_IOS_FAMILY &amp;&amp; WTF_PLATFORM_IOS_FAMILY)" data-ref="_M/PLATFORM">PLATFORM</a>(IOS_FAMILY)</u></td></tr>
<tr><th id="92">92</th><td>        item-&gt;setObscuredInsets(page-&gt;obscuredInsets());</td></tr>
<tr><th id="93">93</th><td><u>#<span data-ppcond="91">endif</span></u></td></tr>
<tr><th id="94">94</th><td>    }</td></tr>
<tr><th id="95">95</th><td></td></tr>
<tr><th id="96">96</th><td>    <i>// FIXME: It would be great to work out a way to put this code in WebCore instead of calling through to the client.</i></td></tr>
<tr><th id="97">97</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19saveViewStateToItemERNS_11HistoryItemE" title='WebCore::FrameLoaderClient::saveViewStateToItem' data-ref="_ZN7WebCore17FrameLoaderClient19saveViewStateToItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore17FrameLoaderClient19saveViewStateToItemERNS_11HistoryItemE">saveViewStateToItem</a>(<span class='refarg'>*<a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a></span>);</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td>    <i>// Notify clients that the HistoryItem has changed.</i></td></tr>
<tr><th id="100">100</th><td>    <a class="local col4 ref" href="#674item" title='item' data-ref="674item" data-ref-filename="674item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem13notifyChangedEv" title='WebCore::HistoryItem::notifyChanged' data-ref="_ZN7WebCore11HistoryItem13notifyChangedEv" data-ref-filename="_ZN7WebCore11HistoryItem13notifyChangedEv">notifyChanged</a>();</td></tr>
<tr><th id="101">101</th><td>}</td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController31clearScrollPositionAndViewStateEv" title='WebCore::FrameLoader::HistoryController::clearScrollPositionAndViewState' data-ref="_ZN7WebCore11FrameLoader17HistoryController31clearScrollPositionAndViewStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController31clearScrollPositionAndViewStateEv">clearScrollPositionAndViewState</dfn>()</td></tr>
<tr><th id="104">104</th><td>{</td></tr>
<tr><th id="105">105</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="106">106</th><td>        <b>return</b>;</td></tr>
<tr><th id="107">107</th><td></td></tr>
<tr><th id="108">108</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem19clearScrollPositionEv" title='WebCore::HistoryItem::clearScrollPosition' data-ref="_ZN7WebCore11HistoryItem19clearScrollPositionEv" data-ref-filename="_ZN7WebCore11HistoryItem19clearScrollPositionEv">clearScrollPosition</a>();</td></tr>
<tr><th id="109">109</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem18setPageScaleFactorEf" title='WebCore::HistoryItem::setPageScaleFactor' data-ref="_ZN7WebCore11HistoryItem18setPageScaleFactorEf" data-ref-filename="_ZN7WebCore11HistoryItem18setPageScaleFactorEf">setPageScaleFactor</a>(<var>0</var>);</td></tr>
<tr><th id="110">110</th><td>}</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td><i>/*</i></td></tr>
<tr><th id="113">113</th><td><i> There is a race condition between the layout and load completion that affects restoring the scroll position.</i></td></tr>
<tr><th id="114">114</th><td><i> We try to restore the scroll position at both the first layout and upon load completion.</i></td></tr>
<tr><th id="115">115</th><td><i> </i></td></tr>
<tr><th id="116">116</th><td><i> 1) If first layout happens before the load completes, we want to restore the scroll position then so that the</i></td></tr>
<tr><th id="117">117</th><td><i> first time we draw the page is already scrolled to the right place, instead of starting at the top and later</i></td></tr>
<tr><th id="118">118</th><td><i> jumping down.  It is possible that the old scroll position is past the part of the doc laid out so far, in</i></td></tr>
<tr><th id="119">119</th><td><i> which case the restore silent fails and we will fix it in when we try to restore on doc completion.</i></td></tr>
<tr><th id="120">120</th><td><i> 2) If the layout happens after the load completes, the attempt to restore at load completion time silently</i></td></tr>
<tr><th id="121">121</th><td><i> fails.  We then successfully restore it when the layout happens.</i></td></tr>
<tr><th id="122">122</th><td><i>*/</i></td></tr>
<tr><th id="123">123</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv" title='WebCore::FrameLoader::HistoryController::restoreScrollPositionAndViewState' data-ref="_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv">restoreScrollPositionAndViewState</dfn>()</td></tr>
<tr><th id="124">124</th><td>{</td></tr>
<tr><th id="125">125</th><td>    <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader12stateMachineEv" title='WebCore::FrameLoader::stateMachine' data-ref="_ZN7WebCore11FrameLoader12stateMachineEv" data-ref-filename="_ZN7WebCore11FrameLoader12stateMachineEv">stateMachine</a>().<a class="ref fn" href="FrameLoaderStateMachine.cpp.html#_ZNK7WebCore23FrameLoaderStateMachine30committedFirstRealDocumentLoadEv" title='WebCore::FrameLoaderStateMachine::committedFirstRealDocumentLoad' data-ref="_ZNK7WebCore23FrameLoaderStateMachine30committedFirstRealDocumentLoadEv" data-ref-filename="_ZNK7WebCore23FrameLoaderStateMachine30committedFirstRealDocumentLoadEv">committedFirstRealDocumentLoad</a>())</td></tr>
<tr><th id="126">126</th><td>        <b>return</b>;</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_currentItem)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 128, __PRETTY_FUNCTION__, &quot;m_currentItem&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(128, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3550); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>);</td></tr>
<tr><th id="129">129</th><td>    </td></tr>
<tr><th id="130">130</th><td>    <i>// FIXME: As the ASSERT attests, it seems we should always have a currentItem here.</i></td></tr>
<tr><th id="131">131</th><td><i>    // One counterexample is &lt;rdar://problem/4917290&gt;</i></td></tr>
<tr><th id="132">132</th><td><i>    // For now, to cover this issue in release builds, there is no technical harm to returning</i></td></tr>
<tr><th id="133">133</th><td><i>    // early and from a user standpoint - as in the above radar - the previous page load failed </i></td></tr>
<tr><th id="134">134</th><td><i>    // so there *is* no scroll or view state to restore!</i></td></tr>
<tr><th id="135">135</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="136">136</th><td>        <b>return</b>;</td></tr>
<tr><th id="137">137</th><td></td></tr>
<tr><th id="138">138</th><td>    <em>auto</em> <dfn class="local col7 decl" id="677view" title='view' data-type='WTF::RefPtr&lt;WebCore::FrameView, WTF::RawPtrTraits&lt;WebCore::FrameView&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::FrameView&gt;&gt;' data-ref="677view" data-ref-filename="677view">view</dfn> = <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF10makeRefPtrEPT_" title='WTF::makeRefPtr' data-ref="_ZN3WTF10makeRefPtrEPT_" data-ref-filename="_ZN3WTF10makeRefPtrEPT_">makeRefPtr</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4viewEv" title='WebCore::Frame::view' data-ref="_ZNK7WebCore5Frame4viewEv" data-ref-filename="_ZNK7WebCore5Frame4viewEv">view</a>());</td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td>    <i>// FIXME: There is some scrolling related work that needs to happen whenever a page goes into the</i></td></tr>
<tr><th id="141">141</th><td><i>    // back/forward cache and similar work that needs to occur when it comes out. This is where we do the work</i></td></tr>
<tr><th id="142">142</th><td><i>    // that needs to happen when we exit, and the work that needs to happen when we enter is in</i></td></tr>
<tr><th id="143">143</th><td><i>    // Document::setIsInBackForwardCache(bool). It would be nice if there was more symmetry in these spots.</i></td></tr>
<tr><th id="144">144</th><td><i>    // <a href="https://bugs.webkit.org/show_bug.cgi?id=98698">https://bugs.webkit.org/show_bug.cgi?id=98698</a></i></td></tr>
<tr><th id="145">145</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a>) {</td></tr>
<tr><th id="146">146</th><td>        <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col8 decl" id="678page" title='page' data-type='WebCore::Page *' data-ref="678page" data-ref-filename="678page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="147">147</th><td>        <b>if</b> (<a class="local col8 ref" href="#678page" title='page' data-ref="678page" data-ref-filename="678page">page</a> &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>()) {</td></tr>
<tr><th id="148">148</th><td>            <b>if</b> (<a class="type" href="../page/scrolling/ScrollingCoordinator.h.html#WebCore::ScrollingCoordinator" title='WebCore::ScrollingCoordinator' data-ref="WebCore::ScrollingCoordinator" data-ref-filename="WebCore..ScrollingCoordinator">ScrollingCoordinator</a>* <dfn class="local col9 decl" id="679scrollingCoordinator" title='scrollingCoordinator' data-type='WebCore::ScrollingCoordinator *' data-ref="679scrollingCoordinator" data-ref-filename="679scrollingCoordinator"><a class="local col9 ref" href="#679scrollingCoordinator" title='scrollingCoordinator' data-ref="679scrollingCoordinator" data-ref-filename="679scrollingCoordinator">scrollingCoordinator</a></dfn> = <a class="local col8 ref" href="#678page" title='page' data-ref="678page" data-ref-filename="678page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZN7WebCore4Page20scrollingCoordinatorEv" title='WebCore::Page::scrollingCoordinator' data-ref="_ZN7WebCore4Page20scrollingCoordinatorEv" data-ref-filename="_ZN7WebCore4Page20scrollingCoordinatorEv">scrollingCoordinator</a>())</td></tr>
<tr><th id="149">149</th><td>                <a class="local col9 ref" href="#679scrollingCoordinator" title='scrollingCoordinator' data-ref="679scrollingCoordinator" data-ref-filename="679scrollingCoordinator">scrollingCoordinator</a>-&gt;<a class="virtual ref fn" href="../page/scrolling/ScrollingCoordinator.h.html#_ZN7WebCore20ScrollingCoordinator27frameViewRootLayerDidChangeERNS_9FrameViewE" title='WebCore::ScrollingCoordinator::frameViewRootLayerDidChange' data-ref="_ZN7WebCore20ScrollingCoordinator27frameViewRootLayerDidChangeERNS_9FrameViewE" data-ref-filename="_ZN7WebCore20ScrollingCoordinator27frameViewRootLayerDidChangeERNS_9FrameViewE">frameViewRootLayerDidChange</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a></span>);</td></tr>
<tr><th id="150">150</th><td>        }</td></tr>
<tr><th id="151">151</th><td>    }</td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td>    <i>// FIXME: It would be great to work out a way to put this code in WebCore instead of calling</i></td></tr>
<tr><th id="154">154</th><td><i>    // through to the client.</i></td></tr>
<tr><th id="155">155</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient16restoreViewStateEv" title='WebCore::FrameLoaderClient::restoreViewState' data-ref="_ZN7WebCore17FrameLoaderClient16restoreViewStateEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient16restoreViewStateEv">restoreViewState</a>();</td></tr>
<tr><th id="156">156</th><td></td></tr>
<tr><th id="157">157</th><td><u>#<span data-ppcond="157">if</span> !<a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined WTF_PLATFORM_IOS_FAMILY &amp;&amp; WTF_PLATFORM_IOS_FAMILY)" data-ref="_M/PLATFORM">PLATFORM</a>(IOS_FAMILY)</u></td></tr>
<tr><th id="158">158</th><td>    <i>// Don't restore scroll point on iOS as FrameLoaderClient::restoreViewState() does that.</i></td></tr>
<tr><th id="159">159</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a> &amp;&amp; !<a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../page/FrameView.h.html#_ZNK7WebCore9FrameView17wasScrolledByUserEv" title='WebCore::FrameView::wasScrolledByUser' data-ref="_ZNK7WebCore9FrameView17wasScrolledByUserEv" data-ref-filename="_ZNK7WebCore9FrameView17wasScrolledByUserEv">wasScrolledByUser</a>()) {</td></tr>
<tr><th id="160">160</th><td>        <a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../page/FrameView.h.html#_ZN7WebCore9FrameView41scrollToFocusedElementImmediatelyIfNeededEv" title='WebCore::FrameView::scrollToFocusedElementImmediatelyIfNeeded' data-ref="_ZN7WebCore9FrameView41scrollToFocusedElementImmediatelyIfNeededEv" data-ref-filename="_ZN7WebCore9FrameView41scrollToFocusedElementImmediatelyIfNeededEv">scrollToFocusedElementImmediatelyIfNeeded</a>();</td></tr>
<tr><th id="161">161</th><td></td></tr>
<tr><th id="162">162</th><td>        <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col0 decl" id="680page" title='page' data-type='WebCore::Page *' data-ref="680page" data-ref-filename="680page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="163">163</th><td>        <em>auto</em> <dfn class="local col1 decl" id="681desiredScrollPosition" title='desiredScrollPosition' data-type='WebCore::IntPoint' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" title='WebCore::HistoryItem::shouldRestoreScrollPosition' data-ref="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" data-ref-filename="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv">shouldRestoreScrollPosition</a>() ? <a class="ref fn fake" href="../platform/graphics/IntPoint.h.html#64" title='WebCore::IntPoint::IntPoint' data-ref="_ZN7WebCore8IntPointC1ERKS0_" data-ref-filename="_ZN7WebCore8IntPointC1ERKS0_"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem14scrollPositionEv" title='WebCore::HistoryItem::scrollPosition' data-ref="_ZNK7WebCore11HistoryItem14scrollPositionEv" data-ref-filename="_ZNK7WebCore11HistoryItem14scrollPositionEv">scrollPosition</a>() : <a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="virtual ref fn" href="../platform/ScrollView.h.html#_ZNK7WebCore10ScrollView14scrollPositionEv" title='WebCore::ScrollView::scrollPosition' data-ref="_ZNK7WebCore10ScrollView14scrollPositionEv" data-ref-filename="_ZNK7WebCore10ScrollView14scrollPositionEv">scrollPosition</a>();</td></tr>
<tr><th id="164">164</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogScrolling, &quot;HistoryController::restoreScrollPositionAndViewState scrolling to %d,%d&quot;, desiredScrollPosition.x(), desiredScrollPosition.y())" data-ref="_M/LOG">LOG</a>(Scrolling, <q>"HistoryController::restoreScrollPositionAndViewState scrolling to %d,%d"</q>, <a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a>.<a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZNK7WebCore8IntPoint1xEv" title='WebCore::IntPoint::x' data-ref="_ZNK7WebCore8IntPoint1xEv" data-ref-filename="_ZNK7WebCore8IntPoint1xEv">x</a>(), <a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a>.<a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZNK7WebCore8IntPoint1yEv" title='WebCore::IntPoint::y' data-ref="_ZNK7WebCore8IntPoint1yEv" data-ref-filename="_ZNK7WebCore8IntPoint1yEv">y</a>());</td></tr>
<tr><th id="165">165</th><td>        <b>if</b> (<a class="local col0 ref" href="#680page" title='page' data-ref="680page" data-ref-filename="680page">page</a> &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>() &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem15pageScaleFactorEv" title='WebCore::HistoryItem::pageScaleFactor' data-ref="_ZNK7WebCore11HistoryItem15pageScaleFactorEv" data-ref-filename="_ZNK7WebCore11HistoryItem15pageScaleFactorEv">pageScaleFactor</a>())</td></tr>
<tr><th id="166">166</th><td>            <a class="local col0 ref" href="#680page" title='page' data-ref="680page" data-ref-filename="680page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZN7WebCore4Page18setPageScaleFactorEfRKNS_8IntPointEb" title='WebCore::Page::setPageScaleFactor' data-ref="_ZN7WebCore4Page18setPageScaleFactorEfRKNS_8IntPointEb" data-ref-filename="_ZN7WebCore4Page18setPageScaleFactorEfRKNS_8IntPointEb">setPageScaleFactor</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem15pageScaleFactorEv" title='WebCore::HistoryItem::pageScaleFactor' data-ref="_ZNK7WebCore11HistoryItem15pageScaleFactorEv" data-ref-filename="_ZNK7WebCore11HistoryItem15pageScaleFactorEv">pageScaleFactor</a>() * <a class="local col0 ref" href="#680page" title='page' data-ref="680page" data-ref-filename="680page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page15viewScaleFactorEv" title='WebCore::Page::viewScaleFactor' data-ref="_ZNK7WebCore4Page15viewScaleFactorEv" data-ref-filename="_ZNK7WebCore4Page15viewScaleFactorEv">viewScaleFactor</a>(), <a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a>);</td></tr>
<tr><th id="167">167</th><td>        <b>else</b></td></tr>
<tr><th id="168">168</th><td>            <a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="virtual ref fn" href="../page/FrameView.h.html#_ZN7WebCore9FrameView17setScrollPositionERKNS_8IntPointERKNS_27ScrollPositionChangeOptionsE" title='WebCore::FrameView::setScrollPosition' data-ref="_ZN7WebCore9FrameView17setScrollPositionERKNS_8IntPointERKNS_27ScrollPositionChangeOptionsE" data-ref-filename="_ZN7WebCore9FrameView17setScrollPositionERKNS_8IntPointERKNS_27ScrollPositionChangeOptionsE">setScrollPosition</a>(<a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a>);</td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td>        <i>// If the scroll position doesn't have to be clamped, consider it successfully restored.</i></td></tr>
<tr><th id="171">171</th><td>        <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>()) {</td></tr>
<tr><th id="172">172</th><td>            <em>auto</em> <dfn class="local col2 decl" id="682adjustedDesiredScrollPosition" title='adjustedDesiredScrollPosition' data-type='WebCore::IntPoint' data-ref="682adjustedDesiredScrollPosition" data-ref-filename="682adjustedDesiredScrollPosition">adjustedDesiredScrollPosition</dfn> = <a class="local col7 ref" href="#677view" title='view' data-ref="677view" data-ref-filename="677view">view</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../platform/ScrollView.h.html#_ZNK7WebCore10ScrollView31adjustScrollPositionWithinRangeERKNS_8IntPointE" title='WebCore::ScrollView::adjustScrollPositionWithinRange' data-ref="_ZNK7WebCore10ScrollView31adjustScrollPositionWithinRangeERKNS_8IntPointE" data-ref-filename="_ZNK7WebCore10ScrollView31adjustScrollPositionWithinRangeERKNS_8IntPointE">adjustScrollPositionWithinRange</a>(<a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a>);</td></tr>
<tr><th id="173">173</th><td>            <b>if</b> (<a class="local col1 ref" href="#681desiredScrollPosition" title='desiredScrollPosition' data-ref="681desiredScrollPosition" data-ref-filename="681desiredScrollPosition">desiredScrollPosition</a> <a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZN7WebCoreeqERKNS_8IntPointES2_" title='WebCore::operator==' data-ref="_ZN7WebCoreeqERKNS_8IntPointES2_" data-ref-filename="_ZN7WebCoreeqERKNS_8IntPointES2_">==</a> <a class="local col2 ref" href="#682adjustedDesiredScrollPosition" title='adjustedDesiredScrollPosition' data-ref="682adjustedDesiredScrollPosition" data-ref-filename="682adjustedDesiredScrollPosition">adjustedDesiredScrollPosition</a>)</td></tr>
<tr><th id="174">174</th><td>                <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient24didRestoreScrollPositionEv" title='WebCore::FrameLoaderClient::didRestoreScrollPosition' data-ref="_ZN7WebCore17FrameLoaderClient24didRestoreScrollPositionEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient24didRestoreScrollPositionEv">didRestoreScrollPosition</a>();</td></tr>
<tr><th id="175">175</th><td>        }</td></tr>
<tr><th id="176">176</th><td></td></tr>
<tr><th id="177">177</th><td>    }</td></tr>
<tr><th id="178">178</th><td><u>#<span data-ppcond="157">endif</span></u></td></tr>
<tr><th id="179">179</th><td>}</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController38updateBackForwardListForFragmentScrollEv" title='WebCore::FrameLoader::HistoryController::updateBackForwardListForFragmentScroll' data-ref="_ZN7WebCore11FrameLoader17HistoryController38updateBackForwardListForFragmentScrollEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController38updateBackForwardListForFragmentScrollEv">updateBackForwardListForFragmentScroll</dfn>()</td></tr>
<tr><th id="182">182</th><td>{</td></tr>
<tr><th id="183">183</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" title='WebCore::FrameLoader::HistoryController::updateBackForwardListClippedAtTarget' data-ref="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb">updateBackForwardListClippedAtTarget</a>(<b>false</b>);</td></tr>
<tr><th id="184">184</th><td>}</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" title='WebCore::FrameLoader::HistoryController::saveDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv">saveDocumentState</dfn>()</td></tr>
<tr><th id="187">187</th><td>{</td></tr>
<tr><th id="188">188</th><td>    <i>// FIXME: Reading this bit of FrameLoader state here is unfortunate.  I need to study</i></td></tr>
<tr><th id="189">189</th><td><i>    // this more to see if we can remove this dependency.</i></td></tr>
<tr><th id="190">190</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader12stateMachineEv" title='WebCore::FrameLoader::stateMachine' data-ref="_ZN7WebCore11FrameLoader12stateMachineEv" data-ref-filename="_ZN7WebCore11FrameLoader12stateMachineEv">stateMachine</a>().<a class="ref fn" href="FrameLoaderStateMachine.cpp.html#_ZNK7WebCore23FrameLoaderStateMachine28creatingInitialEmptyDocumentEv" title='WebCore::FrameLoaderStateMachine::creatingInitialEmptyDocument' data-ref="_ZNK7WebCore23FrameLoaderStateMachine28creatingInitialEmptyDocumentEv" data-ref-filename="_ZNK7WebCore23FrameLoaderStateMachine28creatingInitialEmptyDocumentEv">creatingInitialEmptyDocument</a>())</td></tr>
<tr><th id="191">191</th><td>        <b>return</b>;</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td>    <i>// For a standard page load, we will have a previous item set, which will be used to</i></td></tr>
<tr><th id="194">194</th><td><i>    // store the form state.  However, in some cases we will have no previous item, and</i></td></tr>
<tr><th id="195">195</th><td><i>    // the current item is the right place to save the state.  One example is when we</i></td></tr>
<tr><th id="196">196</th><td><i>    // detach a bunch of frames because we are navigating from a site with frames to</i></td></tr>
<tr><th id="197">197</th><td><i>    // another site.  Another is when saving the frame state of a frame that is not the</i></td></tr>
<tr><th id="198">198</th><td><i>    // target of the current navigation (if we even decide to save with that granularity).</i></td></tr>
<tr><th id="199">199</th><td><i></i></td></tr>
<tr><th id="200">200</th><td><i>    // Because of previousItem's "masking" of currentItem for this purpose, it's important</i></td></tr>
<tr><th id="201">201</th><td><i>    // that we keep track of the end of a page transition with m_frameLoadComplete.  We</i></td></tr>
<tr><th id="202">202</th><td><i>    // leverage the checkLoadComplete recursion to achieve this goal.</i></td></tr>
<tr><th id="203">203</th><td></td></tr>
<tr><th id="204">204</th><td>    <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col3 decl" id="683item" title='item' data-type='WebCore::HistoryItem *' data-ref="683item" data-ref-filename="683item">item</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a> ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>() : <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>();</td></tr>
<tr><th id="205">205</th><td>    <b>if</b> (!<a class="local col3 ref" href="#683item" title='item' data-ref="683item" data-ref-filename="683item">item</a>)</td></tr>
<tr><th id="206">206</th><td>        <b>return</b>;</td></tr>
<tr><th id="207">207</th><td></td></tr>
<tr><th id="208">208</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_frame.document())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 208, __PRETTY_FUNCTION__, &quot;m_frame.document()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(208, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3552); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>());</td></tr>
<tr><th id="209">209</th><td>    <a class="type" href="../dom/Document.h.html#WebCore::Document" title='WebCore::Document' data-ref="WebCore::Document" data-ref-filename="WebCore..Document">Document</a>&amp; <dfn class="local col4 decl" id="684document" title='document' data-type='WebCore::Document &amp;' data-ref="684document" data-ref-filename="684document">document</dfn> = *<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>();</td></tr>
<tr><th id="210">210</th><td>    <b>if</b> (<a class="local col3 ref" href="#683item" title='item' data-ref="683item" data-ref-filename="683item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem17isCurrentDocumentERNS_8DocumentE" title='WebCore::HistoryItem::isCurrentDocument' data-ref="_ZNK7WebCore11HistoryItem17isCurrentDocumentERNS_8DocumentE" data-ref-filename="_ZNK7WebCore11HistoryItem17isCurrentDocumentERNS_8DocumentE">isCurrentDocument</a>(<span class='refarg'><a class="local col4 ref" href="#684document" title='document' data-ref="684document" data-ref-filename="684document">document</a></span>) &amp;&amp; <a class="local col4 ref" href="#684document" title='document' data-ref="684document" data-ref-filename="684document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document19hasLivingRenderTreeEv" title='WebCore::Document::hasLivingRenderTree' data-ref="_ZNK7WebCore8Document19hasLivingRenderTreeEv" data-ref-filename="_ZNK7WebCore8Document19hasLivingRenderTreeEv">hasLivingRenderTree</a>()) {</td></tr>
<tr><th id="211">211</th><td>        <b>if</b> (<a class="type" href="DocumentLoader.h.html#WebCore::DocumentLoader" title='WebCore::DocumentLoader' data-ref="WebCore::DocumentLoader" data-ref-filename="WebCore..DocumentLoader">DocumentLoader</a>* <dfn class="local col5 decl" id="685documentLoader" title='documentLoader' data-type='WebCore::DocumentLoader *' data-ref="685documentLoader" data-ref-filename="685documentLoader"><a class="local col5 ref" href="#685documentLoader" title='documentLoader' data-ref="685documentLoader" data-ref-filename="685documentLoader">documentLoader</a></dfn> = <a class="local col4 ref" href="#684document" title='document' data-ref="684document" data-ref-filename="684document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document6loaderEv" title='WebCore::Document::loader' data-ref="_ZNK7WebCore8Document6loaderEv" data-ref-filename="_ZNK7WebCore8Document6loaderEv">loader</a>())</td></tr>
<tr><th id="212">212</th><td>            <a class="local col3 ref" href="#683item" title='item' data-ref="683item" data-ref-filename="683item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" title='WebCore::HistoryItem::setShouldOpenExternalURLsPolicy' data-ref="_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" data-ref-filename="_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE">setShouldOpenExternalURLsPolicy</a>(<a class="local col5 ref" href="#685documentLoader" title='documentLoader' data-ref="685documentLoader" data-ref-filename="685documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv" title='WebCore::DocumentLoader::shouldOpenExternalURLsPolicyToPropagate' data-ref="_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv" data-ref-filename="_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv">shouldOpenExternalURLsPolicyToPropagate</a>());</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogLoading, &quot;WebCoreLoading %s: saving form state to %p&quot;, m_frame.tree().uniqueName().string().utf8().data(), item)" data-ref="_M/LOG">LOG</a>(Loading, <q>"WebCoreLoading %s: saving form state to %p"</q>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10uniqueNameEv" title='WebCore::FrameTree::uniqueName' data-ref="_ZNK7WebCore9FrameTree10uniqueNameEv" data-ref-filename="_ZNK7WebCore9FrameTree10uniqueNameEv">uniqueName</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZNK3WTF10AtomString6stringEv" title='WTF::AtomString::string' data-ref="_ZNK3WTF10AtomString6stringEv" data-ref-filename="_ZNK3WTF10AtomString6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>(), <a class="local col3 ref" href="#683item" title='item' data-ref="683item" data-ref-filename="683item">item</a>);</td></tr>
<tr><th id="215">215</th><td>        <a class="local col3 ref" href="#683item" title='item' data-ref="683item" data-ref-filename="683item">item</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem16setDocumentStateERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE" title='WebCore::HistoryItem::setDocumentState' data-ref="_ZN7WebCore11HistoryItem16setDocumentStateERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE" data-ref-filename="_ZN7WebCore11HistoryItem16setDocumentStateERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE">setDocumentState</a>(<a class="local col4 ref" href="#684document" title='document' data-ref="684document" data-ref-filename="684document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document17formElementsStateEv" title='WebCore::Document::formElementsState' data-ref="_ZNK7WebCore8Document17formElementsStateEv" data-ref-filename="_ZNK7WebCore8Document17formElementsStateEv">formElementsState</a>());</td></tr>
<tr><th id="216">216</th><td>    }</td></tr>
<tr><th id="217">217</th><td>}</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td><i>// Walk the frame tree, telling all frames to save their form state into their current</i></td></tr>
<tr><th id="220">220</th><td><i>// history item.</i></td></tr>
<tr><th id="221">221</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController26saveDocumentAndScrollStateEv" title='WebCore::FrameLoader::HistoryController::saveDocumentAndScrollState' data-ref="_ZN7WebCore11FrameLoader17HistoryController26saveDocumentAndScrollStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController26saveDocumentAndScrollStateEv">saveDocumentAndScrollState</dfn>()</td></tr>
<tr><th id="222">222</th><td>{</td></tr>
<tr><th id="223">223</th><td>    <b>for</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col6 decl" id="686frame" title='frame' data-type='WebCore::Frame *' data-ref="686frame" data-ref-filename="686frame">frame</dfn> = &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>; <a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a>; <a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a> = <a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree12traverseNextEPKNS_5FrameE" title='WebCore::FrameTree::traverseNext' data-ref="_ZNK7WebCore9FrameTree12traverseNextEPKNS_5FrameE" data-ref-filename="_ZNK7WebCore9FrameTree12traverseNextEPKNS_5FrameE">traverseNext</a>(&amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>)) {</td></tr>
<tr><th id="224">224</th><td>        <a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" title='WebCore::FrameLoader::HistoryController::saveDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv">saveDocumentState</a>();</td></tr>
<tr><th id="225">225</th><td>        <a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</a>(<a class="local col6 ref" href="#686frame" title='frame' data-ref="686frame" data-ref-filename="686frame">frame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="HistoryController.h.html#_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" title='WebCore::FrameLoader::HistoryController::currentItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv">currentItem</a>());</td></tr>
<tr><th id="226">226</th><td>    }</td></tr>
<tr><th id="227">227</th><td>}</td></tr>
<tr><th id="228">228</th><td></td></tr>
<tr><th id="229">229</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv" title='WebCore::FrameLoader::HistoryController::restoreDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv">restoreDocumentState</dfn>()</td></tr>
<tr><th id="230">230</th><td>{</td></tr>
<tr><th id="231">231</th><td>    <b>switch</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.cpp.html#_ZNK7WebCore11FrameLoader8loadTypeEv" title='WebCore::FrameLoader::loadType' data-ref="_ZNK7WebCore11FrameLoader8loadTypeEv" data-ref-filename="_ZNK7WebCore11FrameLoader8loadTypeEv">loadType</a>()) {</td></tr>
<tr><th id="232">232</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Reload" title='WebCore::FrameLoadType::Reload' data-ref="WebCore::FrameLoadType::Reload" data-ref-filename="WebCore..FrameLoadType..Reload">Reload</a>:</td></tr>
<tr><th id="233">233</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::ReloadFromOrigin" title='WebCore::FrameLoadType::ReloadFromOrigin' data-ref="WebCore::FrameLoadType::ReloadFromOrigin" data-ref-filename="WebCore..FrameLoadType..ReloadFromOrigin">ReloadFromOrigin</a>:</td></tr>
<tr><th id="234">234</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::ReloadExpiredOnly" title='WebCore::FrameLoadType::ReloadExpiredOnly' data-ref="WebCore::FrameLoadType::ReloadExpiredOnly" data-ref-filename="WebCore..FrameLoadType..ReloadExpiredOnly">ReloadExpiredOnly</a>:</td></tr>
<tr><th id="235">235</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Same" title='WebCore::FrameLoadType::Same' data-ref="WebCore::FrameLoadType::Same" data-ref-filename="WebCore..FrameLoadType..Same">Same</a>:</td></tr>
<tr><th id="236">236</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Replace" title='WebCore::FrameLoadType::Replace' data-ref="WebCore::FrameLoadType::Replace" data-ref-filename="WebCore..FrameLoadType..Replace">Replace</a>:</td></tr>
<tr><th id="237">237</th><td>        <i>// Not restoring the document state.</i></td></tr>
<tr><th id="238">238</th><td>        <b>return</b>;</td></tr>
<tr><th id="239">239</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Back" title='WebCore::FrameLoadType::Back' data-ref="WebCore::FrameLoadType::Back" data-ref-filename="WebCore..FrameLoadType..Back">Back</a>:</td></tr>
<tr><th id="240">240</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Forward" title='WebCore::FrameLoadType::Forward' data-ref="WebCore::FrameLoadType::Forward" data-ref-filename="WebCore..FrameLoadType..Forward">Forward</a>:</td></tr>
<tr><th id="241">241</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::IndexedBackForward" title='WebCore::FrameLoadType::IndexedBackForward' data-ref="WebCore::FrameLoadType::IndexedBackForward" data-ref-filename="WebCore..FrameLoadType..IndexedBackForward">IndexedBackForward</a>:</td></tr>
<tr><th id="242">242</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::RedirectWithLockedBackForwardList" title='WebCore::FrameLoadType::RedirectWithLockedBackForwardList' data-ref="WebCore::FrameLoadType::RedirectWithLockedBackForwardList" data-ref-filename="WebCore..FrameLoadType..RedirectWithLockedBackForwardList">RedirectWithLockedBackForwardList</a>:</td></tr>
<tr><th id="243">243</th><td>    <b>case</b> <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Standard" title='WebCore::FrameLoadType::Standard' data-ref="WebCore::FrameLoadType::Standard" data-ref-filename="WebCore..FrameLoadType..Standard">Standard</a>:</td></tr>
<tr><th id="244">244</th><td>        <b>break</b>;</td></tr>
<tr><th id="245">245</th><td>    }</td></tr>
<tr><th id="246">246</th><td>    </td></tr>
<tr><th id="247">247</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="248">248</th><td>        <b>return</b>;</td></tr>
<tr><th id="249">249</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader20requestedHistoryItemEv" title='WebCore::FrameLoader::requestedHistoryItem' data-ref="_ZNK7WebCore11FrameLoader20requestedHistoryItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader20requestedHistoryItemEv">requestedHistoryItem</a>() != <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>())</td></tr>
<tr><th id="250">250</th><td>        <b>return</b>;</td></tr>
<tr><th id="251">251</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader16isClientRedirectEv" title='WebCore::DocumentLoader::isClientRedirect' data-ref="_ZNK7WebCore14DocumentLoader16isClientRedirectEv" data-ref-filename="_ZNK7WebCore14DocumentLoader16isClientRedirectEv">isClientRedirect</a>())</td></tr>
<tr><th id="252">252</th><td>        <b>return</b>;</td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZN7WebCore14DocumentLoader31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" title='WebCore::DocumentLoader::setShouldOpenExternalURLsPolicy' data-ref="_ZN7WebCore14DocumentLoader31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" data-ref-filename="_ZN7WebCore14DocumentLoader31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE">setShouldOpenExternalURLsPolicy</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem28shouldOpenExternalURLsPolicyEv" title='WebCore::HistoryItem::shouldOpenExternalURLsPolicy' data-ref="_ZNK7WebCore11HistoryItem28shouldOpenExternalURLsPolicyEv" data-ref-filename="_ZNK7WebCore11HistoryItem28shouldOpenExternalURLsPolicyEv">shouldOpenExternalURLsPolicy</a>());</td></tr>
<tr><th id="255">255</th><td></td></tr>
<tr><th id="256">256</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogLoading, &quot;WebCoreLoading %s: restoring form state from %p&quot;, m_frame.tree().uniqueName().string().utf8().data(), m_currentItem.get())" data-ref="_M/LOG">LOG</a>(Loading, <q>"WebCoreLoading %s: restoring form state from %p"</q>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10uniqueNameEv" title='WebCore::FrameTree::uniqueName' data-ref="_ZNK7WebCore9FrameTree10uniqueNameEv" data-ref-filename="_ZNK7WebCore9FrameTree10uniqueNameEv">uniqueName</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZNK3WTF10AtomString6stringEv" title='WTF::AtomString::string' data-ref="_ZNK3WTF10AtomString6stringEv" data-ref-filename="_ZNK3WTF10AtomString6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="257">257</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="ref fn" href="../dom/Document.h.html#_ZN7WebCore8Document26setStateForNewFormElementsERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE" title='WebCore::Document::setStateForNewFormElements' data-ref="_ZN7WebCore8Document26setStateForNewFormElementsERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE" data-ref-filename="_ZN7WebCore8Document26setStateForNewFormElementsERKN3WTF6VectorINS1_6StringELm0ENS1_15CrashOnOverflowELm16ENS1_10FastMallocEEE">setStateForNewFormElements</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem13documentStateEv" title='WebCore::HistoryItem::documentState' data-ref="_ZNK7WebCore11HistoryItem13documentStateEv" data-ref-filename="_ZNK7WebCore11HistoryItem13documentStateEv">documentState</a>());</td></tr>
<tr><th id="258">258</th><td>}</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController31invalidateCurrentItemCachedPageEv" title='WebCore::FrameLoader::HistoryController::invalidateCurrentItemCachedPage' data-ref="_ZN7WebCore11FrameLoader17HistoryController31invalidateCurrentItemCachedPageEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController31invalidateCurrentItemCachedPageEv">invalidateCurrentItemCachedPage</dfn>()</td></tr>
<tr><th id="261">261</th><td>{</td></tr>
<tr><th id="262">262</th><td>    <b>if</b> (!<a class="member fn" href="HistoryController.h.html#_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" title='WebCore::FrameLoader::HistoryController::currentItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv">currentItem</a>())</td></tr>
<tr><th id="263">263</th><td>        <b>return</b>;</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td>    <i>// When we are pre-commit, the currentItem is where any back/forward cache data resides.</i></td></tr>
<tr><th id="266">266</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::unique_ptr' data-ref="std::__1::unique_ptr" data-ref-filename="std..__1..unique_ptr">unique_ptr</span>&lt;<a class="type" href="../history/CachedPage.h.html#WebCore::CachedPage" title='WebCore::CachedPage' data-ref="WebCore::CachedPage" data-ref-filename="WebCore..CachedPage">CachedPage</a>&gt; <dfn class="local col7 decl" id="687cachedPage" title='cachedPage' data-type='std::unique_ptr&lt;CachedPage&gt;' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</dfn> = <a class="type" href="../history/BackForwardCache.h.html#WebCore::BackForwardCache" title='WebCore::BackForwardCache' data-ref="WebCore::BackForwardCache" data-ref-filename="WebCore..BackForwardCache">BackForwardCache</a>::<a class="ref fn" href="../history/BackForwardCache.h.html#_ZN7WebCore16BackForwardCache9singletonEv" title='WebCore::BackForwardCache::singleton' data-ref="_ZN7WebCore16BackForwardCache9singletonEv" data-ref-filename="_ZN7WebCore16BackForwardCache9singletonEv">singleton</a>().<a class="ref fn" href="../history/BackForwardCache.h.html#_ZN7WebCore16BackForwardCache4takeERNS_11HistoryItemEPNS_4PageE" title='WebCore::BackForwardCache::take' data-ref="_ZN7WebCore16BackForwardCache4takeERNS_11HistoryItemEPNS_4PageE" data-ref-filename="_ZN7WebCore16BackForwardCache4takeERNS_11HistoryItemEPNS_4PageE">take</a>(<span class='refarg'>*<a class="member fn" href="HistoryController.h.html#_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" title='WebCore::FrameLoader::HistoryController::currentItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv">currentItem</a>()</span>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>());</td></tr>
<tr><th id="267">267</th><td>    <b>if</b> (!<span class='ref fn fake' title='std::__1::unique_ptr::operator bool' data-ref="_ZNKSt3__110unique_ptrcvbEv" data-ref-filename="_ZNKSt3__110unique_ptrcvbEv"></span><a class="local col7 ref" href="#687cachedPage" title='cachedPage' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</a>)</td></tr>
<tr><th id="268">268</th><td>        <b>return</b>;</td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td>    <i>// FIXME: This is a grotesque hack to fix &lt;rdar://problem/4059059&gt; Crash in RenderFlow::detach</i></td></tr>
<tr><th id="271">271</th><td><i>    // Somehow the PageState object is not properly updated, and is holding onto a stale document.</i></td></tr>
<tr><th id="272">272</th><td><i>    // Both Xcode and FileMaker see this crash, Safari does not.</i></td></tr>
<tr><th id="273">273</th><td>    </td></tr>
<tr><th id="274">274</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(cachedPage-&gt;document() == m_frame.document())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 274, __PRETTY_FUNCTION__, &quot;cachedPage-&gt;document() == m_frame.document()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(274, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3554); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col7 ref" href="#687cachedPage" title='cachedPage' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="../history/CachedPage.h.html#_ZNK7WebCore10CachedPage8documentEv" title='WebCore::CachedPage::document' data-ref="_ZNK7WebCore10CachedPage8documentEv" data-ref-filename="_ZNK7WebCore10CachedPage8documentEv">document</a>() == <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>());</td></tr>
<tr><th id="275">275</th><td>    <b>if</b> (<a class="local col7 ref" href="#687cachedPage" title='cachedPage' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="../history/CachedPage.h.html#_ZNK7WebCore10CachedPage8documentEv" title='WebCore::CachedPage::document' data-ref="_ZNK7WebCore10CachedPage8documentEv" data-ref-filename="_ZNK7WebCore10CachedPage8documentEv">document</a>() == <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()) {</td></tr>
<tr><th id="276">276</th><td>        <a class="local col7 ref" href="#687cachedPage" title='cachedPage' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="../history/CachedPage.h.html#_ZNK7WebCore10CachedPage8documentEv" title='WebCore::CachedPage::document' data-ref="_ZNK7WebCore10CachedPage8documentEv" data-ref-filename="_ZNK7WebCore10CachedPage8documentEv">document</a>()-&gt;<a class="ref fn" href="../dom/Document.h.html#_ZN7WebCore8Document24setBackForwardCacheStateENS0_21BackForwardCacheStateE" title='WebCore::Document::setBackForwardCacheState' data-ref="_ZN7WebCore8Document24setBackForwardCacheStateENS0_21BackForwardCacheStateE" data-ref-filename="_ZN7WebCore8Document24setBackForwardCacheStateENS0_21BackForwardCacheStateE">setBackForwardCacheState</a>(<a class="type" href="../dom/Document.h.html#WebCore::Document" title='WebCore::Document' data-ref="WebCore::Document" data-ref-filename="WebCore..Document">Document</a>::<a class="enum" href="../dom/Document.h.html#WebCore::Document::NotInBackForwardCache" title='WebCore::Document::NotInBackForwardCache' data-ref="WebCore::Document::NotInBackForwardCache" data-ref-filename="WebCore..Document..NotInBackForwardCache">NotInBackForwardCache</a>);</td></tr>
<tr><th id="277">277</th><td>        <a class="local col7 ref" href="#687cachedPage" title='cachedPage' data-ref="687cachedPage" data-ref-filename="687cachedPage">cachedPage</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="../history/CachedPage.h.html#_ZN7WebCore10CachedPage5clearEv" title='WebCore::CachedPage::clear' data-ref="_ZN7WebCore10CachedPage5clearEv" data-ref-filename="_ZN7WebCore10CachedPage5clearEv">clear</a>();</td></tr>
<tr><th id="278">278</th><td>    }</td></tr>
<tr><th id="279">279</th><td>}</td></tr>
<tr><th id="280">280</th><td></td></tr>
<tr><th id="281">281</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZNK7WebCore11FrameLoader17HistoryController31shouldStopLoadingForHistoryItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::shouldStopLoadingForHistoryItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController31shouldStopLoadingForHistoryItemERNS_11HistoryItemE" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController31shouldStopLoadingForHistoryItemERNS_11HistoryItemE">shouldStopLoadingForHistoryItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col8 decl" id="688targetItem" title='targetItem' data-type='WebCore::HistoryItem &amp;' data-ref="688targetItem" data-ref-filename="688targetItem">targetItem</dfn>) <em>const</em></td></tr>
<tr><th id="282">282</th><td>{</td></tr>
<tr><th id="283">283</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="284">284</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td>    <i>// Don't abort the current load if we're navigating within the current document.</i></td></tr>
<tr><th id="287">287</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_" title='WebCore::HistoryItem::shouldDoSameDocumentNavigationTo' data-ref="_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_" data-ref-filename="_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_">shouldDoSameDocumentNavigationTo</a>(<span class='refarg'><a class="local col8 ref" href="#688targetItem" title='targetItem' data-ref="688targetItem" data-ref-filename="688targetItem">targetItem</a></span>))</td></tr>
<tr><th id="288">288</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="289">289</th><td></td></tr>
<tr><th id="290">290</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="291">291</th><td>}</td></tr>
<tr><th id="292">292</th><td></td></tr>
<tr><th id="293">293</th><td><i>// Main funnel for navigating to a previous location (back/forward, non-search snap-back)</i></td></tr>
<tr><th id="294">294</th><td><i>// This includes recursion to handle loading into framesets properly</i></td></tr>
<tr><th id="295">295</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::HistoryController::goToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">goToItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col9 decl" id="689targetItem" title='targetItem' data-type='WebCore::HistoryItem &amp;' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</dfn>, <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a> <dfn class="local col0 decl" id="690type" title='type' data-type='WebCore::FrameLoadType' data-ref="690type" data-ref-filename="690type">type</dfn>, <a class="type" href="FrameLoader.h.html#WebCore::ShouldTreatAsContinuingLoad" title='WebCore::ShouldTreatAsContinuingLoad' data-ref="WebCore::ShouldTreatAsContinuingLoad" data-ref-filename="WebCore..ShouldTreatAsContinuingLoad">ShouldTreatAsContinuingLoad</a> <dfn class="local col1 decl" id="691shouldTreatAsContinuingLoad" title='shouldTreatAsContinuingLoad' data-type='WebCore::ShouldTreatAsContinuingLoad' data-ref="691shouldTreatAsContinuingLoad" data-ref-filename="691shouldTreatAsContinuingLoad">shouldTreatAsContinuingLoad</dfn>)</td></tr>
<tr><th id="296">296</th><td>{</td></tr>
<tr><th id="297">297</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p goToItem %p type=%d&quot;, this, &amp;targetItem, static_cast&lt;int&gt;(type))" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p goToItem %p type=%d"</q>, <b>this</b>, &amp;<a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a>, <b>static_cast</b>&lt;<em>int</em>&gt;(<a class="local col0 ref" href="#690type" title='type' data-ref="690type" data-ref-filename="690type">type</a>));</td></tr>
<tr><th id="298">298</th><td></td></tr>
<tr><th id="299">299</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!m_frame.tree().parent())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 299, __PRETTY_FUNCTION__, &quot;!m_frame.tree().parent()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(299, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3556); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree6parentEv" title='WebCore::FrameTree::parent' data-ref="_ZNK7WebCore9FrameTree6parentEv" data-ref-filename="_ZNK7WebCore9FrameTree6parentEv">parent</a>());</td></tr>
<tr><th id="300">300</th><td>    </td></tr>
<tr><th id="301">301</th><td>    <i>// shouldGoToHistoryItem is a private delegate method. This is needed to fix:</i></td></tr>
<tr><th id="302">302</th><td><i>    // &lt;rdar://problem/3951283&gt; can view pages from the back/forward cache that should be disallowed by Parental Controls</i></td></tr>
<tr><th id="303">303</th><td><i>    // Ultimately, history item navigations should go through the policy delegate. That's covered in:</i></td></tr>
<tr><th id="304">304</th><td><i>    // &lt;rdar://problem/3979539&gt; back/forward cache navigations should consult policy delegate</i></td></tr>
<tr><th id="305">305</th><td>    <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col2 decl" id="692page" title='page' data-type='WebCore::Page *' data-ref="692page" data-ref-filename="692page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="306">306</th><td>    <b>if</b> (!<a class="local col2 ref" href="#692page" title='page' data-ref="692page" data-ref-filename="692page">page</a>)</td></tr>
<tr><th id="307">307</th><td>        <b>return</b>;</td></tr>
<tr><th id="308">308</th><td>    <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZNK7WebCore17FrameLoaderClient21shouldGoToHistoryItemERNS_11HistoryItemE" title='WebCore::FrameLoaderClient::shouldGoToHistoryItem' data-ref="_ZNK7WebCore17FrameLoaderClient21shouldGoToHistoryItemERNS_11HistoryItemE" data-ref-filename="_ZNK7WebCore17FrameLoaderClient21shouldGoToHistoryItemERNS_11HistoryItemE">shouldGoToHistoryItem</a>(<span class='refarg'><a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a></span>))</td></tr>
<tr><th id="309">309</th><td>        <b>return</b>;</td></tr>
<tr><th id="310">310</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_defersLoading" title='WebCore::FrameLoader::HistoryController::m_defersLoading' data-ref="WebCore::FrameLoader::HistoryController::m_defersLoading" data-ref-filename="WebCore..FrameLoader..HistoryController..m_defersLoading">m_defersLoading</a>) {</td></tr>
<tr><th id="311">311</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredItem" title='WebCore::FrameLoader::HistoryController::m_deferredItem' data-ref="WebCore::FrameLoader::HistoryController::m_deferredItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredItem">m_deferredItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> &amp;<a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a>;</td></tr>
<tr><th id="312">312</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType" title='WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType' data-ref="WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredFrameLoadType">m_deferredFrameLoadType</a> = <a class="local col0 ref" href="#690type" title='type' data-ref="690type" data-ref-filename="690type">type</a>;</td></tr>
<tr><th id="313">313</th><td>        <b>return</b>;</td></tr>
<tr><th id="314">314</th><td>    }</td></tr>
<tr><th id="315">315</th><td></td></tr>
<tr><th id="316">316</th><td>    <i>// Set the BF cursor before commit, which lets the user quickly click back/forward again.</i></td></tr>
<tr><th id="317">317</th><td><i>    // - plus, it only makes sense for the top level of the operation through the frame tree,</i></td></tr>
<tr><th id="318">318</th><td><i>    // as opposed to happening for some/one of the page commits that might happen soon</i></td></tr>
<tr><th id="319">319</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RefPtr" title='WTF::RefPtr' data-ref="WTF::RefPtr" data-ref-filename="WTF..RefPtr">RefPtr</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <dfn class="local col3 decl" id="693currentItem" title='currentItem' data-type='RefPtr&lt;WebCore::HistoryItem&gt;' data-ref="693currentItem" data-ref-filename="693currentItem">currentItem</dfn> = <a class="local col2 ref" href="#692page" title='page' data-ref="692page" data-ref-filename="692page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page11backForwardEv" title='WebCore::Page::backForward' data-ref="_ZNK7WebCore4Page11backForwardEv" data-ref-filename="_ZNK7WebCore4Page11backForwardEv">backForward</a>().<a class="ref fn" href="../history/BackForwardController.h.html#_ZN7WebCore21BackForwardController11currentItemEv" title='WebCore::BackForwardController::currentItem' data-ref="_ZN7WebCore21BackForwardController11currentItemEv" data-ref-filename="_ZN7WebCore21BackForwardController11currentItemEv">currentItem</a>();</td></tr>
<tr><th id="320">320</th><td>    <a class="local col2 ref" href="#692page" title='page' data-ref="692page" data-ref-filename="692page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page11backForwardEv" title='WebCore::Page::backForward' data-ref="_ZNK7WebCore4Page11backForwardEv" data-ref-filename="_ZNK7WebCore4Page11backForwardEv">backForward</a>().<a class="ref fn" href="../history/BackForwardController.h.html#_ZN7WebCore21BackForwardController14setCurrentItemERNS_11HistoryItemE" title='WebCore::BackForwardController::setCurrentItem' data-ref="_ZN7WebCore21BackForwardController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore21BackForwardController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</a>(<span class='refarg'><a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a></span>);</td></tr>
<tr><th id="321">321</th><td></td></tr>
<tr><th id="322">322</th><td>    <i>// First set the provisional item of any frames that are not actually navigating.</i></td></tr>
<tr><th id="323">323</th><td><i>    // This must be done before trying to navigate the desired frame, because some</i></td></tr>
<tr><th id="324">324</th><td><i>    // navigations can commit immediately (such as about:blank).  We must be sure that</i></td></tr>
<tr><th id="325">325</th><td><i>    // all frames have provisional items set before the commit.</i></td></tr>
<tr><th id="326">326</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::recursiveSetProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_">recursiveSetProvisionalItem</a>(<span class='refarg'><a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a></span>, <a class="local col3 ref" href="#693currentItem" title='currentItem' data-ref="693currentItem" data-ref-filename="693currentItem">currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="327">327</th><td></td></tr>
<tr><th id="328">328</th><td>    <i>// Now that all other frames have provisional items, do the actual navigation.</i></td></tr>
<tr><th id="329">329</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::HistoryController::recursiveGoToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">recursiveGoToItem</a>(<span class='refarg'><a class="local col9 ref" href="#689targetItem" title='targetItem' data-ref="689targetItem" data-ref-filename="689targetItem">targetItem</a></span>, <a class="local col3 ref" href="#693currentItem" title='currentItem' data-ref="693currentItem" data-ref-filename="693currentItem">currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>(), <a class="local col0 ref" href="#690type" title='type' data-ref="690type" data-ref-filename="690type">type</a>, <a class="local col1 ref" href="#691shouldTreatAsContinuingLoad" title='shouldTreatAsContinuingLoad' data-ref="691shouldTreatAsContinuingLoad" data-ref-filename="691shouldTreatAsContinuingLoad">shouldTreatAsContinuingLoad</a>);</td></tr>
<tr><th id="330">330</th><td>}</td></tr>
<tr><th id="331">331</th><td></td></tr>
<tr><th id="332">332</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController16setDefersLoadingEb" title='WebCore::FrameLoader::HistoryController::setDefersLoading' data-ref="_ZN7WebCore11FrameLoader17HistoryController16setDefersLoadingEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController16setDefersLoadingEb">setDefersLoading</dfn>(<em>bool</em> <dfn class="local col4 decl" id="694defer" title='defer' data-type='bool' data-ref="694defer" data-ref-filename="694defer">defer</dfn>)</td></tr>
<tr><th id="333">333</th><td>{</td></tr>
<tr><th id="334">334</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_defersLoading" title='WebCore::FrameLoader::HistoryController::m_defersLoading' data-ref="WebCore::FrameLoader::HistoryController::m_defersLoading" data-ref-filename="WebCore..FrameLoader..HistoryController..m_defersLoading">m_defersLoading</a> = <a class="local col4 ref" href="#694defer" title='defer' data-ref="694defer" data-ref-filename="694defer">defer</a>;</td></tr>
<tr><th id="335">335</th><td>    <b>if</b> (!<a class="local col4 ref" href="#694defer" title='defer' data-ref="694defer" data-ref-filename="694defer">defer</a> &amp;&amp; <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredItem" title='WebCore::FrameLoader::HistoryController::m_deferredItem' data-ref="WebCore::FrameLoader::HistoryController::m_deferredItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredItem">m_deferredItem</a>) {</td></tr>
<tr><th id="336">336</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::HistoryController::goToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController8goToItemERNS_11HistoryItemENS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">goToItem</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredItem" title='WebCore::FrameLoader::HistoryController::m_deferredItem' data-ref="WebCore::FrameLoader::HistoryController::m_deferredItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredItem">m_deferredItem</a></span>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType" title='WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType' data-ref="WebCore::FrameLoader::HistoryController::m_deferredFrameLoadType" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredFrameLoadType">m_deferredFrameLoadType</a>, <a class="type" href="FrameLoader.h.html#WebCore::ShouldTreatAsContinuingLoad" title='WebCore::ShouldTreatAsContinuingLoad' data-ref="WebCore::ShouldTreatAsContinuingLoad" data-ref-filename="WebCore..ShouldTreatAsContinuingLoad">ShouldTreatAsContinuingLoad</a>::<a class="enum" href="ShouldTreatAsContinuingLoad.h.html#WebCore::ShouldTreatAsContinuingLoad::No" title='WebCore::ShouldTreatAsContinuingLoad::No' data-ref="WebCore::ShouldTreatAsContinuingLoad::No" data-ref-filename="WebCore..ShouldTreatAsContinuingLoad..No">No</a>);</td></tr>
<tr><th id="337">337</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_deferredItem" title='WebCore::FrameLoader::HistoryController::m_deferredItem' data-ref="WebCore::FrameLoader::HistoryController::m_deferredItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_deferredItem">m_deferredItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="338">338</th><td>    }</td></tr>
<tr><th id="339">339</th><td>}</td></tr>
<tr><th id="340">340</th><td></td></tr>
<tr><th id="341">341</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController30updateForBackForwardNavigationEv" title='WebCore::FrameLoader::HistoryController::updateForBackForwardNavigation' data-ref="_ZN7WebCore11FrameLoader17HistoryController30updateForBackForwardNavigationEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController30updateForBackForwardNavigationEv">updateForBackForwardNavigation</dfn>()</td></tr>
<tr><th id="342">342</th><td>{</td></tr>
<tr><th id="343">343</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForBackForwardNavigation: Updating History for back/forward navigation in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader() ? m_frame.loader().documentLoader()-&gt;url().string().utf8().data() : &quot;&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForBackForwardNavigation: Updating History for back/forward navigation in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>() : <q>""</q>);</td></tr>
<tr><th id="344">344</th><td></td></tr>
<tr><th id="345">345</th><td>    <i>// Must grab the current scroll position before disturbing it</i></td></tr>
<tr><th id="346">346</th><td>    <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a>)</td></tr>
<tr><th id="347">347</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td>    <i>// When traversing history, we may end up redirecting to a different URL</i></td></tr>
<tr><th id="350">350</th><td><i>    // this time (e.g., due to cookies).  See <a href="http://webkit.org/b/49654">http://webkit.org/b/49654</a>.</i></td></tr>
<tr><th id="351">351</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" title='WebCore::FrameLoader::HistoryController::updateCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv">updateCurrentItem</a>();</td></tr>
<tr><th id="352">352</th><td>}</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController15updateForReloadEv" title='WebCore::FrameLoader::HistoryController::updateForReload' data-ref="_ZN7WebCore11FrameLoader17HistoryController15updateForReloadEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController15updateForReloadEv">updateForReload</dfn>()</td></tr>
<tr><th id="355">355</th><td>{</td></tr>
<tr><th id="356">356</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForReload: Updating History for reload in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader() ? m_frame.loader().documentLoader()-&gt;url().string().utf8().data() : &quot;&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForReload: Updating History for reload in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>() : <q>""</q>);</td></tr>
<tr><th id="357">357</th><td></td></tr>
<tr><th id="358">358</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>) {</td></tr>
<tr><th id="359">359</th><td>        <a class="type" href="../history/BackForwardCache.h.html#WebCore::BackForwardCache" title='WebCore::BackForwardCache' data-ref="WebCore::BackForwardCache" data-ref-filename="WebCore..BackForwardCache">BackForwardCache</a>::<a class="ref fn" href="../history/BackForwardCache.h.html#_ZN7WebCore16BackForwardCache9singletonEv" title='WebCore::BackForwardCache::singleton' data-ref="_ZN7WebCore16BackForwardCache9singletonEv" data-ref-filename="_ZN7WebCore16BackForwardCache9singletonEv">singleton</a>().<a class="ref fn" href="../history/BackForwardCache.h.html#_ZN7WebCore16BackForwardCache6removeERNS_11HistoryItemE" title='WebCore::BackForwardCache::remove' data-ref="_ZN7WebCore16BackForwardCache6removeERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore16BackForwardCache6removeERNS_11HistoryItemE">remove</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a></span>);</td></tr>
<tr><th id="360">360</th><td>    </td></tr>
<tr><th id="361">361</th><td>        <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.cpp.html#_ZNK7WebCore11FrameLoader8loadTypeEv" title='WebCore::FrameLoader::loadType' data-ref="_ZNK7WebCore11FrameLoader8loadTypeEv" data-ref-filename="_ZNK7WebCore11FrameLoader8loadTypeEv">loadType</a>() == <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Reload" title='WebCore::FrameLoadType::Reload' data-ref="WebCore::FrameLoadType::Reload" data-ref-filename="WebCore..FrameLoadType..Reload">Reload</a> || <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.cpp.html#_ZNK7WebCore11FrameLoader8loadTypeEv" title='WebCore::FrameLoader::loadType' data-ref="_ZNK7WebCore11FrameLoader8loadTypeEv" data-ref-filename="_ZNK7WebCore11FrameLoader8loadTypeEv">loadType</a>() == <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::ReloadFromOrigin" title='WebCore::FrameLoadType::ReloadFromOrigin' data-ref="WebCore::FrameLoadType::ReloadFromOrigin" data-ref-filename="WebCore..FrameLoadType..ReloadFromOrigin">ReloadFromOrigin</a>)</td></tr>
<tr><th id="362">362</th><td>            <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="363">363</th><td></td></tr>
<tr><th id="364">364</th><td>        <i>// Rebuild the history item tree when reloading as trying to re-associate everything is too error-prone.</i></td></tr>
<tr><th id="365">365</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem13clearChildrenEv" title='WebCore::HistoryItem::clearChildren' data-ref="_ZN7WebCore11HistoryItem13clearChildrenEv" data-ref-filename="_ZN7WebCore11HistoryItem13clearChildrenEv">clearChildren</a>();</td></tr>
<tr><th id="366">366</th><td>    }</td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td>    <i>// When reloading the page, we may end up redirecting to a different URL</i></td></tr>
<tr><th id="369">369</th><td><i>    // this time (e.g., due to cookies).  See <a href="http://webkit.org/b/4072">http://webkit.org/b/4072</a>.</i></td></tr>
<tr><th id="370">370</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" title='WebCore::FrameLoader::HistoryController::updateCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv">updateCurrentItem</a>();</td></tr>
<tr><th id="371">371</th><td>}</td></tr>
<tr><th id="372">372</th><td></td></tr>
<tr><th id="373">373</th><td><i>// There are 3 things you might think of as "history", all of which are handled by these functions.</i></td></tr>
<tr><th id="374">374</th><td><i>//</i></td></tr>
<tr><th id="375">375</th><td><i>//     1) Back/forward: The m_currentItem is part of this mechanism.</i></td></tr>
<tr><th id="376">376</th><td><i>//     2) Global history: Handled by the client.</i></td></tr>
<tr><th id="377">377</th><td><i>//     3) Visited links: Handled by the PageGroup.</i></td></tr>
<tr><th id="378">378</th><td></td></tr>
<tr><th id="379">379</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController21updateForStandardLoadENS1_17HistoryUpdateTypeE" title='WebCore::FrameLoader::HistoryController::updateForStandardLoad' data-ref="_ZN7WebCore11FrameLoader17HistoryController21updateForStandardLoadENS1_17HistoryUpdateTypeE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController21updateForStandardLoadENS1_17HistoryUpdateTypeE">updateForStandardLoad</dfn>(<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::HistoryUpdateType" title='WebCore::FrameLoader::HistoryController::HistoryUpdateType' data-ref="WebCore::FrameLoader::HistoryController::HistoryUpdateType" data-ref-filename="WebCore..FrameLoader..HistoryController..HistoryUpdateType">HistoryUpdateType</a> <dfn class="local col5 decl" id="695updateType" title='updateType' data-type='WebCore::FrameLoader::HistoryController::HistoryUpdateType' data-ref="695updateType" data-ref-filename="695updateType">updateType</dfn>)</td></tr>
<tr><th id="380">380</th><td>{</td></tr>
<tr><th id="381">381</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForStandardLoad: Updating History for standard load in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader()-&gt;url().string().ascii().data())" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForStandardLoad: Updating History for standard load in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String5asciiEv" title='WTF::String::ascii' data-ref="_ZNK3WTF6String5asciiEv" data-ref-filename="_ZNK3WTF6String5asciiEv">ascii</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>());</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td>    <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>&amp; <dfn class="local col6 decl" id="696frameLoader" title='frameLoader' data-type='WebCore::FrameLoader &amp;' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>();</td></tr>
<tr><th id="384">384</th><td></td></tr>
<tr><th id="385">385</th><td>    <em>bool</em> <dfn class="local col7 decl" id="697usesEphemeralSession" title='usesEphemeralSession' data-type='bool' data-ref="697usesEphemeralSession" data-ref-filename="697usesEphemeralSession">usesEphemeralSession</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>() : <b>true</b>;</td></tr>
<tr><th id="386">386</th><td>    <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a>&amp; <dfn class="local col8 decl" id="698historyURL" title='historyURL' data-type='const WTF::URL &amp;' data-ref="698historyURL" data-ref-filename="698historyURL">historyURL</dfn> = <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader13urlForHistoryEv" title='WebCore::DocumentLoader::urlForHistory' data-ref="_ZNK7WebCore14DocumentLoader13urlForHistoryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader13urlForHistoryEv">urlForHistory</a>();</td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td>    <b>if</b> (!<a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader16isClientRedirectEv" title='WebCore::DocumentLoader::isClientRedirect' data-ref="_ZNK7WebCore14DocumentLoader16isClientRedirectEv" data-ref-filename="_ZNK7WebCore14DocumentLoader16isClientRedirectEv">isClientRedirect</a>()) {</td></tr>
<tr><th id="389">389</th><td>        <b>if</b> (!<a class="local col8 ref" href="#698historyURL" title='historyURL' data-ref="698historyURL" data-ref-filename="698historyURL">historyURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="390">390</th><td>            <b>if</b> (<a class="local col5 ref" href="#695updateType" title='updateType' data-ref="695updateType" data-ref-filename="695updateType">updateType</a> != <a class="enum" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::UpdateAllExceptBackForwardList" title='WebCore::FrameLoader::HistoryController::UpdateAllExceptBackForwardList' data-ref="WebCore::FrameLoader::HistoryController::UpdateAllExceptBackForwardList" data-ref-filename="WebCore..FrameLoader..HistoryController..UpdateAllExceptBackForwardList">UpdateAllExceptBackForwardList</a>)</td></tr>
<tr><th id="391">391</th><td>                <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" title='WebCore::FrameLoader::HistoryController::updateBackForwardListClippedAtTarget' data-ref="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb">updateBackForwardListClippedAtTarget</a>(<b>true</b>);</td></tr>
<tr><th id="392">392</th><td>            <b>if</b> (!<a class="local col7 ref" href="#697usesEphemeralSession" title='usesEphemeralSession' data-ref="697usesEphemeralSession" data-ref-filename="697usesEphemeralSession">usesEphemeralSession</a>) {</td></tr>
<tr><th id="393">393</th><td>                <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" title='WebCore::FrameLoaderClient::updateGlobalHistory' data-ref="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv">updateGlobalHistory</a>();</td></tr>
<tr><th id="394">394</th><td>                <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb" title='WebCore::DocumentLoader::setDidCreateGlobalHistoryEntry' data-ref="_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb" data-ref-filename="_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb">setDidCreateGlobalHistoryEntry</a>(<b>true</b>);</td></tr>
<tr><th id="395">395</th><td>                <b>if</b> (<a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="396">396</th><td>                    <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" title='WebCore::FrameLoaderClient::updateGlobalHistoryRedirectLinks' data-ref="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv">updateGlobalHistoryRedirectLinks</a>();</td></tr>
<tr><th id="397">397</th><td>            }</td></tr>
<tr><th id="398">398</th><td>        }</td></tr>
<tr><th id="399">399</th><td>    } <b>else</b> {</td></tr>
<tr><th id="400">400</th><td>        <i>// The client redirect replaces the current history item.</i></td></tr>
<tr><th id="401">401</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" title='WebCore::FrameLoader::HistoryController::updateCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv">updateCurrentItem</a>();</td></tr>
<tr><th id="402">402</th><td>    }</td></tr>
<tr><th id="403">403</th><td></td></tr>
<tr><th id="404">404</th><td>    <b>if</b> (!<a class="local col8 ref" href="#698historyURL" title='historyURL' data-ref="698historyURL" data-ref-filename="698historyURL">historyURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>() &amp;&amp; !<a class="local col7 ref" href="#697usesEphemeralSession" title='usesEphemeralSession' data-ref="697usesEphemeralSession" data-ref-filename="697usesEphemeralSession">usesEphemeralSession</a>) {</td></tr>
<tr><th id="405">405</th><td>        <b>if</b> (<a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col9 decl" id="699page" title='page' data-type='WebCore::Page *' data-ref="699page" data-ref-filename="699page"><a class="local col9 ref" href="#699page" title='page' data-ref="699page" data-ref-filename="699page">page</a></dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>())</td></tr>
<tr><th id="406">406</th><td>            <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="local col9 ref" href="#699page" title='page' data-ref="699page" data-ref-filename="699page">page</a></span>, <a class="local col8 ref" href="#698historyURL" title='historyURL' data-ref="698historyURL" data-ref-filename="698historyURL">historyURL</a>);</td></tr>
<tr><th id="407">407</th><td></td></tr>
<tr><th id="408">408</th><td>        <b>if</b> (!<a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv" title='WebCore::DocumentLoader::didCreateGlobalHistoryEntry' data-ref="_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv">didCreateGlobalHistoryEntry</a>() &amp;&amp; <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>() &amp;&amp; !<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="virtual ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document3urlEv" title='WebCore::Document::url' data-ref="_ZNK7WebCore8Document3urlEv" data-ref-filename="_ZNK7WebCore8Document3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="409">409</th><td>            <a class="local col6 ref" href="#696frameLoader" title='frameLoader' data-ref="696frameLoader" data-ref-filename="696frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" title='WebCore::FrameLoaderClient::updateGlobalHistoryRedirectLinks' data-ref="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv">updateGlobalHistoryRedirectLinks</a>();</td></tr>
<tr><th id="410">410</th><td>    }</td></tr>
<tr><th id="411">411</th><td>}</td></tr>
<tr><th id="412">412</th><td></td></tr>
<tr><th id="413">413</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController42updateForRedirectWithLockedBackForwardListEv" title='WebCore::FrameLoader::HistoryController::updateForRedirectWithLockedBackForwardList' data-ref="_ZN7WebCore11FrameLoader17HistoryController42updateForRedirectWithLockedBackForwardListEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController42updateForRedirectWithLockedBackForwardListEv">updateForRedirectWithLockedBackForwardList</dfn>()</td></tr>
<tr><th id="414">414</th><td>{</td></tr>
<tr><th id="415">415</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForRedirectWithLockedBackForwardList: Updating History for redirect load in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader() ? m_frame.loader().documentLoader()-&gt;url().string().utf8().data() : &quot;&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForRedirectWithLockedBackForwardList: Updating History for redirect load in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>() : <q>""</q>);</td></tr>
<tr><th id="416">416</th><td>    </td></tr>
<tr><th id="417">417</th><td>    <em>bool</em> <dfn class="local col0 decl" id="700usesEphemeralSession" title='usesEphemeralSession' data-type='bool' data-ref="700usesEphemeralSession" data-ref-filename="700usesEphemeralSession">usesEphemeralSession</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>() : <b>true</b>;</td></tr>
<tr><th id="418">418</th><td>    <em>auto</em> <dfn class="local col1 decl" id="701historyURL" title='historyURL' data-type='WTF::URL' data-ref="701historyURL" data-ref-filename="701historyURL">historyURL</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader13urlForHistoryEv" title='WebCore::DocumentLoader::urlForHistory' data-ref="_ZNK7WebCore14DocumentLoader13urlForHistoryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader13urlForHistoryEv">urlForHistory</a>() : <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1Ev" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1Ev" data-ref-filename="_ZN3WTF3URLC1Ev">{</a> };</td></tr>
<tr><th id="419">419</th><td></td></tr>
<tr><th id="420">420</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader16isClientRedirectEv" title='WebCore::DocumentLoader::isClientRedirect' data-ref="_ZNK7WebCore14DocumentLoader16isClientRedirectEv" data-ref-filename="_ZNK7WebCore14DocumentLoader16isClientRedirectEv">isClientRedirect</a>()) {</td></tr>
<tr><th id="421">421</th><td>        <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> &amp;&amp; !<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree6parentEv" title='WebCore::FrameTree::parent' data-ref="_ZNK7WebCore9FrameTree6parentEv" data-ref-filename="_ZNK7WebCore9FrameTree6parentEv">parent</a>()) {</td></tr>
<tr><th id="422">422</th><td>            <b>if</b> (!<a class="local col1 ref" href="#701historyURL" title='historyURL' data-ref="701historyURL" data-ref-filename="701historyURL">historyURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="423">423</th><td>                <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" title='WebCore::FrameLoader::HistoryController::updateBackForwardListClippedAtTarget' data-ref="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb">updateBackForwardListClippedAtTarget</a>(<b>true</b>);</td></tr>
<tr><th id="424">424</th><td>                <b>if</b> (!<a class="local col0 ref" href="#700usesEphemeralSession" title='usesEphemeralSession' data-ref="700usesEphemeralSession" data-ref-filename="700usesEphemeralSession">usesEphemeralSession</a>) {</td></tr>
<tr><th id="425">425</th><td>                    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" title='WebCore::FrameLoaderClient::updateGlobalHistory' data-ref="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv">updateGlobalHistory</a>();</td></tr>
<tr><th id="426">426</th><td>                    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb" title='WebCore::DocumentLoader::setDidCreateGlobalHistoryEntry' data-ref="_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb" data-ref-filename="_ZN7WebCore14DocumentLoader30setDidCreateGlobalHistoryEntryEb">setDidCreateGlobalHistoryEntry</a>(<b>true</b>);</td></tr>
<tr><th id="427">427</th><td>                    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="428">428</th><td>                        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" title='WebCore::FrameLoaderClient::updateGlobalHistoryRedirectLinks' data-ref="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv">updateGlobalHistoryRedirectLinks</a>();</td></tr>
<tr><th id="429">429</th><td>                }</td></tr>
<tr><th id="430">430</th><td>            }</td></tr>
<tr><th id="431">431</th><td>        }</td></tr>
<tr><th id="432">432</th><td>        <i>// The client redirect replaces the current history item.</i></td></tr>
<tr><th id="433">433</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" title='WebCore::FrameLoader::HistoryController::updateCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv">updateCurrentItem</a>();</td></tr>
<tr><th id="434">434</th><td>    } <b>else</b> {</td></tr>
<tr><th id="435">435</th><td>        <a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col2 decl" id="702parentFrame" title='parentFrame' data-type='WebCore::Frame *' data-ref="702parentFrame" data-ref-filename="702parentFrame">parentFrame</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree6parentEv" title='WebCore::FrameTree::parent' data-ref="_ZNK7WebCore9FrameTree6parentEv" data-ref-filename="_ZNK7WebCore9FrameTree6parentEv">parent</a>();</td></tr>
<tr><th id="436">436</th><td>        <b>if</b> (<a class="local col2 ref" href="#702parentFrame" title='parentFrame' data-ref="702parentFrame" data-ref-filename="702parentFrame">parentFrame</a> &amp;&amp; <a class="local col2 ref" href="#702parentFrame" title='parentFrame' data-ref="702parentFrame" data-ref-filename="702parentFrame">parentFrame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="HistoryController.h.html#_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" title='WebCore::FrameLoader::HistoryController::currentItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv">currentItem</a>())</td></tr>
<tr><th id="437">437</th><td>            <a class="local col2 ref" href="#702parentFrame" title='parentFrame' data-ref="702parentFrame" data-ref-filename="702parentFrame">parentFrame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="HistoryController.h.html#_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" title='WebCore::FrameLoader::HistoryController::currentItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController11currentItemEv">currentItem</a>()-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem12setChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE" title='WebCore::HistoryItem::setChildItem' data-ref="_ZN7WebCore11HistoryItem12setChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE" data-ref-filename="_ZN7WebCore11HistoryItem12setChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE">setChildItem</a>(<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController10createItemEv" title='WebCore::FrameLoader::HistoryController::createItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController10createItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController10createItemEv">createItem</a>());</td></tr>
<tr><th id="438">438</th><td>    }</td></tr>
<tr><th id="439">439</th><td></td></tr>
<tr><th id="440">440</th><td>    <b>if</b> (!<a class="local col1 ref" href="#701historyURL" title='historyURL' data-ref="701historyURL" data-ref-filename="701historyURL">historyURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>() &amp;&amp; !<a class="local col0 ref" href="#700usesEphemeralSession" title='usesEphemeralSession' data-ref="700usesEphemeralSession" data-ref-filename="700usesEphemeralSession">usesEphemeralSession</a>) {</td></tr>
<tr><th id="441">441</th><td>        <b>if</b> (<a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col3 decl" id="703page" title='page' data-type='WebCore::Page *' data-ref="703page" data-ref-filename="703page"><a class="local col3 ref" href="#703page" title='page' data-ref="703page" data-ref-filename="703page">page</a></dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>())</td></tr>
<tr><th id="442">442</th><td>            <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="local col3 ref" href="#703page" title='page' data-ref="703page" data-ref-filename="703page">page</a></span>, <a class="local col1 ref" href="#701historyURL" title='historyURL' data-ref="701historyURL" data-ref-filename="701historyURL">historyURL</a>);</td></tr>
<tr><th id="443">443</th><td></td></tr>
<tr><th id="444">444</th><td>        <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv" title='WebCore::DocumentLoader::didCreateGlobalHistoryEntry' data-ref="_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader27didCreateGlobalHistoryEntryEv">didCreateGlobalHistoryEntry</a>() &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="445">445</th><td>            <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" title='WebCore::FrameLoaderClient::updateGlobalHistoryRedirectLinks' data-ref="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient32updateGlobalHistoryRedirectLinksEv">updateGlobalHistoryRedirectLinks</a>();</td></tr>
<tr><th id="446">446</th><td>    }</td></tr>
<tr><th id="447">447</th><td>}</td></tr>
<tr><th id="448">448</th><td></td></tr>
<tr><th id="449">449</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController23updateForClientRedirectEv" title='WebCore::FrameLoader::HistoryController::updateForClientRedirect' data-ref="_ZN7WebCore11FrameLoader17HistoryController23updateForClientRedirectEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController23updateForClientRedirectEv">updateForClientRedirect</dfn>()</td></tr>
<tr><th id="450">450</th><td>{</td></tr>
<tr><th id="451">451</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForClientRedirect: Updating History for client redirect in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader() ? m_frame.loader().documentLoader()-&gt;url().string().utf8().data() : &quot;&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForClientRedirect: Updating History for client redirect in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>() : <q>""</q>);</td></tr>
<tr><th id="452">452</th><td></td></tr>
<tr><th id="453">453</th><td>    <i>// Clear out form data so we don't try to restore it into the incoming page.  Must happen after</i></td></tr>
<tr><th id="454">454</th><td><i>    // webcore has closed the URL and saved away the form state.</i></td></tr>
<tr><th id="455">455</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>) {</td></tr>
<tr><th id="456">456</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem18clearDocumentStateEv" title='WebCore::HistoryItem::clearDocumentState' data-ref="_ZN7WebCore11HistoryItem18clearDocumentStateEv" data-ref-filename="_ZN7WebCore11HistoryItem18clearDocumentStateEv">clearDocumentState</a>();</td></tr>
<tr><th id="457">457</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem19clearScrollPositionEv" title='WebCore::HistoryItem::clearScrollPosition' data-ref="_ZN7WebCore11HistoryItem19clearScrollPositionEv" data-ref-filename="_ZN7WebCore11HistoryItem19clearScrollPositionEv">clearScrollPosition</a>();</td></tr>
<tr><th id="458">458</th><td>    }</td></tr>
<tr><th id="459">459</th><td></td></tr>
<tr><th id="460">460</th><td>    <em>bool</em> <dfn class="local col4 decl" id="704usesEphemeralSession" title='usesEphemeralSession' data-type='bool' data-ref="704usesEphemeralSession" data-ref-filename="704usesEphemeralSession">usesEphemeralSession</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>() : <b>true</b>;</td></tr>
<tr><th id="461">461</th><td>    <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a>&amp; <dfn class="local col5 decl" id="705historyURL" title='historyURL' data-type='const WTF::URL &amp;' data-ref="705historyURL" data-ref-filename="705historyURL">historyURL</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader13urlForHistoryEv" title='WebCore::DocumentLoader::urlForHistory' data-ref="_ZNK7WebCore14DocumentLoader13urlForHistoryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader13urlForHistoryEv">urlForHistory</a>();</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td>    <b>if</b> (!<a class="local col5 ref" href="#705historyURL" title='historyURL' data-ref="705historyURL" data-ref-filename="705historyURL">historyURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>() &amp;&amp; !<a class="local col4 ref" href="#704usesEphemeralSession" title='usesEphemeralSession' data-ref="704usesEphemeralSession" data-ref-filename="704usesEphemeralSession">usesEphemeralSession</a>) {</td></tr>
<tr><th id="464">464</th><td>        <b>if</b> (<a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col6 decl" id="706page" title='page' data-type='WebCore::Page *' data-ref="706page" data-ref-filename="706page"><a class="local col6 ref" href="#706page" title='page' data-ref="706page" data-ref-filename="706page">page</a></dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>())</td></tr>
<tr><th id="465">465</th><td>            <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="local col6 ref" href="#706page" title='page' data-ref="706page" data-ref-filename="706page">page</a></span>, <a class="local col5 ref" href="#705historyURL" title='historyURL' data-ref="705historyURL" data-ref-filename="705historyURL">historyURL</a>);</td></tr>
<tr><th id="466">466</th><td>    }</td></tr>
<tr><th id="467">467</th><td>}</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController15updateForCommitEv" title='WebCore::FrameLoader::HistoryController::updateForCommit' data-ref="_ZN7WebCore11FrameLoader17HistoryController15updateForCommitEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController15updateForCommitEv">updateForCommit</dfn>()</td></tr>
<tr><th id="470">470</th><td>{</td></tr>
<tr><th id="471">471</th><td>    <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>&amp; <dfn class="local col7 decl" id="707frameLoader" title='frameLoader' data-type='WebCore::FrameLoader &amp;' data-ref="707frameLoader" data-ref-filename="707frameLoader">frameLoader</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>();</td></tr>
<tr><th id="472">472</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateForCommit: Updating History for commit in frame %p (main frame %d) %s&quot;, this, &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader() ? m_frame.loader().documentLoader()-&gt;url().string().utf8().data() : &quot;&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateForCommit: Updating History for commit in frame %p (main frame %d) %s"</q>, <b>this</b>, &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>() ? <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>() : <q>""</q>);</td></tr>
<tr><th id="473">473</th><td></td></tr>
<tr><th id="474">474</th><td>    <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a> <dfn class="local col8 decl" id="708type" title='type' data-type='WebCore::FrameLoadType' data-ref="708type" data-ref-filename="708type">type</dfn> = <a class="local col7 ref" href="#707frameLoader" title='frameLoader' data-ref="707frameLoader" data-ref-filename="707frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.cpp.html#_ZNK7WebCore11FrameLoader8loadTypeEv" title='WebCore::FrameLoader::loadType' data-ref="_ZNK7WebCore11FrameLoader8loadTypeEv" data-ref-filename="_ZNK7WebCore11FrameLoader8loadTypeEv">loadType</a>();</td></tr>
<tr><th id="475">475</th><td>    <b>if</b> (<a class="ref fn" href="FrameLoader.cpp.html#_ZN7WebCore21isBackForwardLoadTypeENS_13FrameLoadTypeE" title='WebCore::isBackForwardLoadType' data-ref="_ZN7WebCore21isBackForwardLoadTypeENS_13FrameLoadTypeE" data-ref-filename="_ZN7WebCore21isBackForwardLoadTypeENS_13FrameLoadTypeE">isBackForwardLoadType</a>(<a class="local col8 ref" href="#708type" title='type' data-ref="708type" data-ref-filename="708type">type</a>)</td></tr>
<tr><th id="476">476</th><td>        || <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE" title='WebCore::FrameLoader::HistoryController::isReplaceLoadTypeWithProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE">isReplaceLoadTypeWithProvisionalItem</a>(<a class="local col8 ref" href="#708type" title='type' data-ref="708type" data-ref-filename="708type">type</a>)</td></tr>
<tr><th id="477">477</th><td>        || (<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE" title='WebCore::FrameLoader::HistoryController::isReloadTypeWithProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE">isReloadTypeWithProvisionalItem</a>(<a class="local col8 ref" href="#708type" title='type' data-ref="708type" data-ref-filename="708type">type</a>) &amp;&amp; !<a class="local col7 ref" href="#707frameLoader" title='frameLoader' data-ref="707frameLoader" data-ref-filename="707frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader25provisionalDocumentLoaderEv" title='WebCore::FrameLoader::provisionalDocumentLoader' data-ref="_ZNK7WebCore11FrameLoader25provisionalDocumentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader25provisionalDocumentLoaderEv">provisionalDocumentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())) {</td></tr>
<tr><th id="478">478</th><td>        <i>// Once committed, we want to use current item for saving DocState, and</i></td></tr>
<tr><th id="479">479</th><td><i>        // the provisional item for restoring state.</i></td></tr>
<tr><th id="480">480</th><td><i>        // Note previousItem must be set before we close the URL, which will</i></td></tr>
<tr><th id="481">481</th><td><i>        // happen when the data source is made non-provisional below</i></td></tr>
<tr><th id="482">482</th><td><i></i></td></tr>
<tr><th id="483">483</th><td><i>        // FIXME: <a href="https://bugs.webkit.org/show_bug.cgi?id=146842">https://bugs.webkit.org/show_bug.cgi?id=146842</a></i></td></tr>
<tr><th id="484">484</th><td><i>        // We should always have a provisional item when committing, but we sometimes don't.</i></td></tr>
<tr><th id="485">485</th><td><i>        // Not having one leads to us not having a m_currentItem later, which is also a terrible known issue.</i></td></tr>
<tr><th id="486">486</th><td><i>        // We should get to the bottom of this.</i></td></tr>
<tr><th id="487">487</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_provisionalItem)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 487, __PRETTY_FUNCTION__, &quot;m_provisionalItem&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(487, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3558); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>);</td></tr>
<tr><th id="488">488</th><td>        <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="489">489</th><td>            <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</a>(<span class='refarg'>*<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>()</span>);</td></tr>
<tr><th id="490">490</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="491">491</th><td></td></tr>
<tr><th id="492">492</th><td>        <i>// Tell all other frames in the tree to commit their provisional items and</i></td></tr>
<tr><th id="493">493</th><td><i>        // restore their scroll position.  We'll avoid this frame (which has already</i></td></tr>
<tr><th id="494">494</th><td><i>        // committed) and its children (which will be replaced).</i></td></tr>
<tr><th id="495">495</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame9mainFrameEv" title='WebCore::Frame::mainFrame' data-ref="_ZNK7WebCore5Frame9mainFrameEv" data-ref-filename="_ZNK7WebCore5Frame9mainFrameEv">mainFrame</a>().<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForCommit' data-ref="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv">recursiveUpdateForCommit</a>();</td></tr>
<tr><th id="496">496</th><td>    }</td></tr>
<tr><th id="497">497</th><td>}</td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE" title='WebCore::FrameLoader::HistoryController::isReplaceLoadTypeWithProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36isReplaceLoadTypeWithProvisionalItemENS_13FrameLoadTypeE">isReplaceLoadTypeWithProvisionalItem</dfn>(<a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a> <dfn class="local col9 decl" id="709type" title='type' data-type='WebCore::FrameLoadType' data-ref="709type" data-ref-filename="709type">type</dfn>)</td></tr>
<tr><th id="500">500</th><td>{</td></tr>
<tr><th id="501">501</th><td>    <i>// Going back to an error page in a subframe can trigger a FrameLoadType::Replace</i></td></tr>
<tr><th id="502">502</th><td><i>    // while m_provisionalItem is set, so we need to commit it.</i></td></tr>
<tr><th id="503">503</th><td>    <b>return</b> <a class="local col9 ref" href="#709type" title='type' data-ref="709type" data-ref-filename="709type">type</a> == <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Replace" title='WebCore::FrameLoadType::Replace' data-ref="WebCore::FrameLoadType::Replace" data-ref-filename="WebCore..FrameLoadType..Replace">Replace</a> &amp;&amp; <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>;</td></tr>
<tr><th id="504">504</th><td>}</td></tr>
<tr><th id="505">505</th><td></td></tr>
<tr><th id="506">506</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE" title='WebCore::FrameLoader::HistoryController::isReloadTypeWithProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController31isReloadTypeWithProvisionalItemENS_13FrameLoadTypeE">isReloadTypeWithProvisionalItem</dfn>(<a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a> <dfn class="local col0 decl" id="710type" title='type' data-type='WebCore::FrameLoadType' data-ref="710type" data-ref-filename="710type">type</dfn>)</td></tr>
<tr><th id="507">507</th><td>{</td></tr>
<tr><th id="508">508</th><td>    <b>return</b> (<a class="local col0 ref" href="#710type" title='type' data-ref="710type" data-ref-filename="710type">type</a> == <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::Reload" title='WebCore::FrameLoadType::Reload' data-ref="WebCore::FrameLoadType::Reload" data-ref-filename="WebCore..FrameLoadType..Reload">Reload</a> || <a class="local col0 ref" href="#710type" title='type' data-ref="710type" data-ref-filename="710type">type</a> == <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a>::<a class="enum" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType::ReloadFromOrigin" title='WebCore::FrameLoadType::ReloadFromOrigin' data-ref="WebCore::FrameLoadType::ReloadFromOrigin" data-ref-filename="WebCore..FrameLoadType..ReloadFromOrigin">ReloadFromOrigin</a>) &amp;&amp; <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>;</td></tr>
<tr><th id="509">509</th><td>}</td></tr>
<tr><th id="510">510</th><td></td></tr>
<tr><th id="511">511</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForCommit' data-ref="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv">recursiveUpdateForCommit</dfn>()</td></tr>
<tr><th id="512">512</th><td>{</td></tr>
<tr><th id="513">513</th><td>    <i>// The frame that navigated will now have a null provisional item.</i></td></tr>
<tr><th id="514">514</th><td><i>    // Ignore it and its children.</i></td></tr>
<tr><th id="515">515</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="516">516</th><td>        <b>return</b>;</td></tr>
<tr><th id="517">517</th><td></td></tr>
<tr><th id="518">518</th><td>    <i>// For each frame that already had the content the item requested (based on</i></td></tr>
<tr><th id="519">519</th><td><i>    // (a matching URL and frame tree snapshot), just restore the scroll position.</i></td></tr>
<tr><th id="520">520</th><td><i>    // Save form state (works from currentItem, since m_frameLoadComplete is true)</i></td></tr>
<tr><th id="521">521</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> &amp;&amp; <a class="member fn" href="#_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::itemsAreClones' data-ref="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_">itemsAreClones</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a></span>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>())) {</td></tr>
<tr><th id="522">522</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_frameLoadComplete)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 522, __PRETTY_FUNCTION__, &quot;m_frameLoadComplete&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(522, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3560); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a>);</td></tr>
<tr><th id="523">523</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" title='WebCore::FrameLoader::HistoryController::saveDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv">saveDocumentState</a>();</td></tr>
<tr><th id="524">524</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="525">525</th><td></td></tr>
<tr><th id="526">526</th><td>        <b>if</b> (<a class="type" href="../page/FrameView.h.html#WebCore::FrameView" title='WebCore::FrameView' data-ref="WebCore::FrameView" data-ref-filename="WebCore..FrameView">FrameView</a>* <dfn class="local col1 decl" id="711view" title='view' data-type='WebCore::FrameView *' data-ref="711view" data-ref-filename="711view"><a class="local col1 ref" href="#711view" title='view' data-ref="711view" data-ref-filename="711view">view</a></dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4viewEv" title='WebCore::Frame::view' data-ref="_ZNK7WebCore5Frame4viewEv" data-ref-filename="_ZNK7WebCore5Frame4viewEv">view</a>())</td></tr>
<tr><th id="527">527</th><td>            <a class="local col1 ref" href="#711view" title='view' data-ref="711view" data-ref-filename="711view">view</a>-&gt;<a class="ref fn" href="../page/FrameView.h.html#_ZN7WebCore9FrameView20setWasScrolledByUserEb" title='WebCore::FrameView::setWasScrolledByUser' data-ref="_ZN7WebCore9FrameView20setWasScrolledByUserEb" data-ref-filename="_ZN7WebCore9FrameView20setWasScrolledByUserEb">setWasScrolledByUser</a>(<b>false</b>);</td></tr>
<tr><th id="528">528</th><td></td></tr>
<tr><th id="529">529</th><td>        <i>// Now commit the provisional item</i></td></tr>
<tr><th id="530">530</th><td>        <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="531">531</th><td>            <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</a>(<span class='refarg'>*<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>()</span>);</td></tr>
<tr><th id="532">532</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="533">533</th><td></td></tr>
<tr><th id="534">534</th><td>        <i>// Restore form state (works from currentItem)</i></td></tr>
<tr><th id="535">535</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv" title='WebCore::FrameLoader::HistoryController::restoreDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController20restoreDocumentStateEv">restoreDocumentState</a>();</td></tr>
<tr><th id="536">536</th><td></td></tr>
<tr><th id="537">537</th><td>        <i>// Restore the scroll position (we choose to do this rather than going back to the anchor point)</i></td></tr>
<tr><th id="538">538</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv" title='WebCore::FrameLoader::HistoryController::restoreScrollPositionAndViewState' data-ref="_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController33restoreScrollPositionAndViewStateEv">restoreScrollPositionAndViewState</a>();</td></tr>
<tr><th id="539">539</th><td>    }</td></tr>
<tr><th id="540">540</th><td></td></tr>
<tr><th id="541">541</th><td>    <i>// Iterate over the rest of the tree</i></td></tr>
<tr><th id="542">542</th><td>    <b>for</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col2 decl" id="712child" title='child' data-type='WebCore::Frame *' data-ref="712child" data-ref-filename="712child">child</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10firstChildEv" title='WebCore::FrameTree::firstChild' data-ref="_ZNK7WebCore9FrameTree10firstChildEv" data-ref-filename="_ZNK7WebCore9FrameTree10firstChildEv">firstChild</a>(); <a class="local col2 ref" href="#712child" title='child' data-ref="712child" data-ref-filename="712child">child</a>; <a class="local col2 ref" href="#712child" title='child' data-ref="712child" data-ref-filename="712child">child</a> = <a class="local col2 ref" href="#712child" title='child' data-ref="712child" data-ref-filename="712child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree11nextSiblingEv" title='WebCore::FrameTree::nextSibling' data-ref="_ZNK7WebCore9FrameTree11nextSiblingEv" data-ref-filename="_ZNK7WebCore9FrameTree11nextSiblingEv">nextSibling</a>())</td></tr>
<tr><th id="543">543</th><td>        <a class="local col2 ref" href="#712child" title='child' data-ref="712child" data-ref-filename="712child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForCommit' data-ref="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController24recursiveUpdateForCommitEv">recursiveUpdateForCommit</a>();</td></tr>
<tr><th id="544">544</th><td>}</td></tr>
<tr><th id="545">545</th><td></td></tr>
<tr><th id="546">546</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController31updateForSameDocumentNavigationEv" title='WebCore::FrameLoader::HistoryController::updateForSameDocumentNavigation' data-ref="_ZN7WebCore11FrameLoader17HistoryController31updateForSameDocumentNavigationEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController31updateForSameDocumentNavigationEv">updateForSameDocumentNavigation</dfn>()</td></tr>
<tr><th id="547">547</th><td>{</td></tr>
<tr><th id="548">548</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="virtual ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document3urlEv" title='WebCore::Document::url' data-ref="_ZNK7WebCore8Document3urlEv" data-ref-filename="_ZNK7WebCore8Document3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="549">549</th><td>        <b>return</b>;</td></tr>
<tr><th id="550">550</th><td></td></tr>
<tr><th id="551">551</th><td>    <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col3 decl" id="713page" title='page' data-type='WebCore::Page *' data-ref="713page" data-ref-filename="713page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="552">552</th><td>    <b>if</b> (!<a class="local col3 ref" href="#713page" title='page' data-ref="713page" data-ref-filename="713page">page</a>)</td></tr>
<tr><th id="553">553</th><td>        <b>return</b>;</td></tr>
<tr><th id="554">554</th><td></td></tr>
<tr><th id="555">555</th><td>    <em>bool</em> <dfn class="local col4 decl" id="714usesEphemeralSession" title='usesEphemeralSession' data-type='bool' data-ref="714usesEphemeralSession" data-ref-filename="714usesEphemeralSession">usesEphemeralSession</dfn> = <a class="local col3 ref" href="#713page" title='page' data-ref="713page" data-ref-filename="713page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>();</td></tr>
<tr><th id="556">556</th><td>    <b>if</b> (!<a class="local col4 ref" href="#714usesEphemeralSession" title='usesEphemeralSession' data-ref="714usesEphemeralSession" data-ref-filename="714usesEphemeralSession">usesEphemeralSession</a>)</td></tr>
<tr><th id="557">557</th><td>        <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="local col3 ref" href="#713page" title='page' data-ref="713page" data-ref-filename="713page">page</a></span>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="virtual ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document3urlEv" title='WebCore::Document::url' data-ref="_ZNK7WebCore8Document3urlEv" data-ref-filename="_ZNK7WebCore8Document3urlEv">url</a>());</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame9mainFrameEv" title='WebCore::Frame::mainFrame' data-ref="_ZNK7WebCore5Frame9mainFrameEv" data-ref-filename="_ZNK7WebCore5Frame9mainFrameEv">mainFrame</a>().<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForSameDocumentNavigation' data-ref="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv">recursiveUpdateForSameDocumentNavigation</a>();</td></tr>
<tr><th id="560">560</th><td></td></tr>
<tr><th id="561">561</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>) {</td></tr>
<tr><th id="562">562</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE" title='WebCore::HistoryItem::setURL' data-ref="_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE" data-ref-filename="_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE">setURL</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>()-&gt;<a class="virtual ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document3urlEv" title='WebCore::Document::url' data-ref="_ZNK7WebCore8Document3urlEv" data-ref-filename="_ZNK7WebCore8Document3urlEv">url</a>());</td></tr>
<tr><th id="563">563</th><td>        <b>if</b> (!<a class="local col4 ref" href="#714usesEphemeralSession" title='usesEphemeralSession' data-ref="714usesEphemeralSession" data-ref-filename="714usesEphemeralSession">usesEphemeralSession</a>)</td></tr>
<tr><th id="564">564</th><td>            <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" title='WebCore::FrameLoaderClient::updateGlobalHistory' data-ref="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv">updateGlobalHistory</a>();</td></tr>
<tr><th id="565">565</th><td>    }</td></tr>
<tr><th id="566">566</th><td>}</td></tr>
<tr><th id="567">567</th><td></td></tr>
<tr><th id="568">568</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForSameDocumentNavigation' data-ref="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv">recursiveUpdateForSameDocumentNavigation</dfn>()</td></tr>
<tr><th id="569">569</th><td>{</td></tr>
<tr><th id="570">570</th><td>    <i>// The frame that navigated will now have a null provisional item.</i></td></tr>
<tr><th id="571">571</th><td><i>    // Ignore it and its children.</i></td></tr>
<tr><th id="572">572</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="573">573</th><td>        <b>return</b>;</td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td>    <i>// The provisional item may represent a different pending navigation.</i></td></tr>
<tr><th id="576">576</th><td><i>    // Don't commit it if it isn't a same document navigation.</i></td></tr>
<tr><th id="577">577</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> &amp;&amp; !<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_" title='WebCore::HistoryItem::shouldDoSameDocumentNavigationTo' data-ref="_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_" data-ref-filename="_ZNK7WebCore11HistoryItem32shouldDoSameDocumentNavigationToERS0_">shouldDoSameDocumentNavigationTo</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a></span>))</td></tr>
<tr><th id="578">578</th><td>        <b>return</b>;</td></tr>
<tr><th id="579">579</th><td></td></tr>
<tr><th id="580">580</th><td>    <i>// Commit the provisional item.</i></td></tr>
<tr><th id="581">581</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="582">582</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</a>(<span class='refarg'>*<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>()</span>);</td></tr>
<tr><th id="583">583</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="584">584</th><td></td></tr>
<tr><th id="585">585</th><td>    <i>// Iterate over the rest of the tree.</i></td></tr>
<tr><th id="586">586</th><td>    <b>for</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col5 decl" id="715child" title='child' data-type='WebCore::Frame *' data-ref="715child" data-ref-filename="715child">child</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10firstChildEv" title='WebCore::FrameTree::firstChild' data-ref="_ZNK7WebCore9FrameTree10firstChildEv" data-ref-filename="_ZNK7WebCore9FrameTree10firstChildEv">firstChild</a>(); <a class="local col5 ref" href="#715child" title='child' data-ref="715child" data-ref-filename="715child">child</a>; <a class="local col5 ref" href="#715child" title='child' data-ref="715child" data-ref-filename="715child">child</a> = <a class="local col5 ref" href="#715child" title='child' data-ref="715child" data-ref-filename="715child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree11nextSiblingEv" title='WebCore::FrameTree::nextSibling' data-ref="_ZNK7WebCore9FrameTree11nextSiblingEv" data-ref-filename="_ZNK7WebCore9FrameTree11nextSiblingEv">nextSibling</a>())</td></tr>
<tr><th id="587">587</th><td>        <a class="local col5 ref" href="#715child" title='child' data-ref="715child" data-ref-filename="715child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" title='WebCore::FrameLoader::HistoryController::recursiveUpdateForSameDocumentNavigation' data-ref="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController40recursiveUpdateForSameDocumentNavigationEv">recursiveUpdateForSameDocumentNavigation</a>();</td></tr>
<tr><th id="588">588</th><td>}</td></tr>
<tr><th id="589">589</th><td></td></tr>
<tr><th id="590">590</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController27updateForFrameLoadCompletedEv" title='WebCore::FrameLoader::HistoryController::updateForFrameLoadCompleted' data-ref="_ZN7WebCore11FrameLoader17HistoryController27updateForFrameLoadCompletedEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController27updateForFrameLoadCompletedEv">updateForFrameLoadCompleted</dfn>()</td></tr>
<tr><th id="591">591</th><td>{</td></tr>
<tr><th id="592">592</th><td>    <i>// Even if already complete, we might have set a previous item on a frame that</i></td></tr>
<tr><th id="593">593</th><td><i>    // didn't do any data loading on the past transaction. Make sure to track that</i></td></tr>
<tr><th id="594">594</th><td><i>    // the load is complete so that we use the current item instead.</i></td></tr>
<tr><th id="595">595</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a> = <b>true</b>;</td></tr>
<tr><th id="596">596</th><td>}</td></tr>
<tr><th id="597">597</th><td></td></tr>
<tr><th id="598">598</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col6 decl" id="716item" title='item' data-type='WebCore::HistoryItem &amp;' data-ref="716item" data-ref-filename="716item">item</dfn>)</td></tr>
<tr><th id="599">599</th><td>{</td></tr>
<tr><th id="600">600</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a> = <b>false</b>;</td></tr>
<tr><th id="601">601</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSERKNS_6RefPtrIT_T0_T1_EE" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSERKNS_6RefPtrIT_T0_T1_EE" data-ref-filename="_ZN3WTF6RefPtraSERKNS_6RefPtrIT_T0_T1_EE">=</a> <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>;</td></tr>
<tr><th id="602">602</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> &amp;<a class="local col6 ref" href="#716item" title='item' data-ref="716item" data-ref-filename="716item">item</a>;</td></tr>
<tr><th id="603">603</th><td>}</td></tr>
<tr><th id="604">604</th><td></td></tr>
<tr><th id="605">605</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController19setCurrentItemTitleERKNS_19StringWithDirectionE" title='WebCore::FrameLoader::HistoryController::setCurrentItemTitle' data-ref="_ZN7WebCore11FrameLoader17HistoryController19setCurrentItemTitleERKNS_19StringWithDirectionE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController19setCurrentItemTitleERKNS_19StringWithDirectionE">setCurrentItemTitle</dfn>(<em>const</em> <a class="type" href="../platform/text/StringWithDirection.h.html#WebCore::StringWithDirection" title='WebCore::StringWithDirection' data-ref="WebCore::StringWithDirection" data-ref-filename="WebCore..StringWithDirection">StringWithDirection</a>&amp; <dfn class="local col7 decl" id="717title" title='title' data-type='const WebCore::StringWithDirection &amp;' data-ref="717title" data-ref-filename="717title">title</dfn>)</td></tr>
<tr><th id="606">606</th><td>{</td></tr>
<tr><th id="607">607</th><td>    <i>// FIXME: This ignores the title's direction.</i></td></tr>
<tr><th id="608">608</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="609">609</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" title='WebCore::HistoryItem::setTitle' data-ref="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE">setTitle</a>(<a class="local col7 ref" href="#717title" title='title' data-ref="717title" data-ref-filename="717title">title</a>.<a class="ref field" href="../platform/text/StringWithDirection.h.html#WebCore::StringWithDirection::string" title='WebCore::StringWithDirection::string' data-ref="WebCore::StringWithDirection::string" data-ref-filename="WebCore..StringWithDirection..string">string</a>);</td></tr>
<tr><th id="610">610</th><td>}</td></tr>
<tr><th id="611">611</th><td></td></tr>
<tr><th id="612">612</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZNK7WebCore11FrameLoader17HistoryController27currentItemShouldBeReplacedEv" title='WebCore::FrameLoader::HistoryController::currentItemShouldBeReplaced' data-ref="_ZNK7WebCore11FrameLoader17HistoryController27currentItemShouldBeReplacedEv" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController27currentItemShouldBeReplacedEv">currentItemShouldBeReplaced</dfn>() <em>const</em></td></tr>
<tr><th id="613">613</th><td>{</td></tr>
<tr><th id="614">614</th><td>    <i>// From the HTML5 spec for location.assign():</i></td></tr>
<tr><th id="615">615</th><td><i>    //  "If the browsing context's session history contains only one Document,</i></td></tr>
<tr><th id="616">616</th><td><i>    //   and that was the about:blank Document created when the browsing context</i></td></tr>
<tr><th id="617">617</th><td><i>    //   was created, then the navigation must be done with replacement enabled."</i></td></tr>
<tr><th id="618">618</th><td>    <b>return</b> <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> &amp;&amp; <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a> &amp;&amp; <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF22equalIgnoringASCIICaseERKNS_6StringES2_" title='WTF::equalIgnoringASCIICase' data-ref="_ZN3WTF22equalIgnoringASCIICaseERKNS_6StringES2_" data-ref-filename="_ZN3WTF22equalIgnoringASCIICaseERKNS_6StringES2_">equalIgnoringASCIICase</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem9urlStringEv" title='WebCore::HistoryItem::urlString' data-ref="_ZNK7WebCore11HistoryItem9urlStringEv" data-ref-filename="_ZNK7WebCore11HistoryItem9urlStringEv">urlString</a>(), <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF13aboutBlankURLEv" title='WTF::aboutBlankURL' data-ref="_ZN3WTF13aboutBlankURLEv" data-ref-filename="_ZN3WTF13aboutBlankURLEv">aboutBlankURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>());</td></tr>
<tr><th id="619">619</th><td>}</td></tr>
<tr><th id="620">620</th><td></td></tr>
<tr><th id="621">621</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv" title='WebCore::FrameLoader::HistoryController::clearPreviousItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv">clearPreviousItem</dfn>()</td></tr>
<tr><th id="622">622</th><td>{</td></tr>
<tr><th id="623">623</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="624">624</th><td>    <b>for</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col8 decl" id="718child" title='child' data-type='WebCore::Frame *' data-ref="718child" data-ref-filename="718child">child</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10firstChildEv" title='WebCore::FrameTree::firstChild' data-ref="_ZNK7WebCore9FrameTree10firstChildEv" data-ref-filename="_ZNK7WebCore9FrameTree10firstChildEv">firstChild</a>(); <a class="local col8 ref" href="#718child" title='child' data-ref="718child" data-ref-filename="718child">child</a>; <a class="local col8 ref" href="#718child" title='child' data-ref="718child" data-ref-filename="718child">child</a> = <a class="local col8 ref" href="#718child" title='child' data-ref="718child" data-ref-filename="718child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree11nextSiblingEv" title='WebCore::FrameTree::nextSibling' data-ref="_ZNK7WebCore9FrameTree11nextSiblingEv" data-ref-filename="_ZNK7WebCore9FrameTree11nextSiblingEv">nextSibling</a>())</td></tr>
<tr><th id="625">625</th><td>        <a class="local col8 ref" href="#718child" title='child' data-ref="718child" data-ref-filename="718child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv" title='WebCore::FrameLoader::HistoryController::clearPreviousItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17clearPreviousItemEv">clearPreviousItem</a>();</td></tr>
<tr><th id="626">626</th><td>}</td></tr>
<tr><th id="627">627</th><td></td></tr>
<tr><th id="628">628</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController18setProvisionalItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController18setProvisionalItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController18setProvisionalItemEPNS_11HistoryItemE">setProvisionalItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col9 decl" id="719item" title='item' data-type='WebCore::HistoryItem *' data-ref="719item" data-ref-filename="719item">item</dfn>)</td></tr>
<tr><th id="629">629</th><td>{</td></tr>
<tr><th id="630">630</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> <a class="local col9 ref" href="#719item" title='item' data-ref="719item" data-ref-filename="719item">item</a>;</td></tr>
<tr><th id="631">631</th><td>}</td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::initializeItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE">initializeItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col0 decl" id="720item" title='item' data-type='WebCore::HistoryItem &amp;' data-ref="720item" data-ref-filename="720item">item</dfn>)</td></tr>
<tr><th id="634">634</th><td>{</td></tr>
<tr><th id="635">635</th><td>    <a class="type" href="DocumentLoader.h.html#WebCore::DocumentLoader" title='WebCore::DocumentLoader' data-ref="WebCore::DocumentLoader" data-ref-filename="WebCore..DocumentLoader">DocumentLoader</a>* <dfn class="local col1 decl" id="721documentLoader" title='documentLoader' data-type='WebCore::DocumentLoader *' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>();</td></tr>
<tr><th id="636">636</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(documentLoader)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 636, __PRETTY_FUNCTION__, &quot;documentLoader&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(636, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3562); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>);</td></tr>
<tr><th id="637">637</th><td></td></tr>
<tr><th id="638">638</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a> <dfn class="local col2 decl" id="722unreachableURL" title='unreachableURL' data-type='WTF::URL' data-ref="722unreachableURL" data-ref-filename="722unreachableURL">unreachableURL</dfn> = <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1ERKS0_" data-ref-filename="_ZN3WTF3URLC1ERKS0_"></a><a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>();</td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a> <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1Ev" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1Ev" data-ref-filename="_ZN3WTF3URLC1Ev"></a><dfn class="local col3 decl" id="723url" title='url' data-type='WTF::URL' data-ref="723url" data-ref-filename="723url">url</dfn>;</td></tr>
<tr><th id="641">641</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a> <a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1Ev" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1Ev" data-ref-filename="_ZN3WTF3URLC1Ev"></a><dfn class="local col4 decl" id="724originalURL" title='originalURL' data-type='WTF::URL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</dfn>;</td></tr>
<tr><th id="642">642</th><td></td></tr>
<tr><th id="643">643</th><td>    <b>if</b> (!<a class="local col2 ref" href="#722unreachableURL" title='unreachableURL' data-ref="722unreachableURL" data-ref-filename="722unreachableURL">unreachableURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="644">644</th><td>        <a class="local col3 ref" href="#723url" title='url' data-ref="723url" data-ref-filename="723url">url</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="local col2 ref" href="#722unreachableURL" title='unreachableURL' data-ref="722unreachableURL" data-ref-filename="722unreachableURL">unreachableURL</a>;</td></tr>
<tr><th id="645">645</th><td>        <a class="local col4 ref" href="#724originalURL" title='originalURL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="local col2 ref" href="#722unreachableURL" title='unreachableURL' data-ref="722unreachableURL" data-ref-filename="722unreachableURL">unreachableURL</a>;</td></tr>
<tr><th id="646">646</th><td>    } <b>else</b> {</td></tr>
<tr><th id="647">647</th><td>        <a class="local col3 ref" href="#723url" title='url' data-ref="723url" data-ref-filename="723url">url</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>();</td></tr>
<tr><th id="648">648</th><td>        <a class="local col4 ref" href="#724originalURL" title='originalURL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader11originalURLEv" title='WebCore::DocumentLoader::originalURL' data-ref="_ZNK7WebCore14DocumentLoader11originalURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader11originalURLEv">originalURL</a>();</td></tr>
<tr><th id="649">649</th><td>    }</td></tr>
<tr><th id="650">650</th><td></td></tr>
<tr><th id="651">651</th><td>    <i>// Frames that have never successfully loaded any content</i></td></tr>
<tr><th id="652">652</th><td><i>    // may have no URL at all. Currently our history code can't</i></td></tr>
<tr><th id="653">653</th><td><i>    // deal with such things, so we nip that in the bud here.</i></td></tr>
<tr><th id="654">654</th><td><i>    // Later we may want to learn to live with nil for URL.</i></td></tr>
<tr><th id="655">655</th><td><i>    // See bug 3368236 and related bugs for more information.</i></td></tr>
<tr><th id="656">656</th><td>    <b>if</b> (<a class="local col3 ref" href="#723url" title='url' data-ref="723url" data-ref-filename="723url">url</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>()) </td></tr>
<tr><th id="657">657</th><td>        <a class="local col3 ref" href="#723url" title='url' data-ref="723url" data-ref-filename="723url">url</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF13aboutBlankURLEv" title='WTF::aboutBlankURL' data-ref="_ZN3WTF13aboutBlankURLEv" data-ref-filename="_ZN3WTF13aboutBlankURLEv">aboutBlankURL</a>();</td></tr>
<tr><th id="658">658</th><td>    <b>if</b> (<a class="local col4 ref" href="#724originalURL" title='originalURL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="659">659</th><td>        <a class="local col4 ref" href="#724originalURL" title='originalURL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#56" title='WTF::URL::operator=' data-ref="_ZN3WTF3URLaSERKS0_" data-ref-filename="_ZN3WTF3URLaSERKS0_">=</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF13aboutBlankURLEv" title='WTF::aboutBlankURL' data-ref="_ZN3WTF13aboutBlankURLEv" data-ref-filename="_ZN3WTF13aboutBlankURLEv">aboutBlankURL</a>();</td></tr>
<tr><th id="660">660</th><td>    </td></tr>
<tr><th id="661">661</th><td>    <a class="type" href="../platform/text/StringWithDirection.h.html#WebCore::StringWithDirection" title='WebCore::StringWithDirection' data-ref="WebCore::StringWithDirection" data-ref-filename="WebCore..StringWithDirection">StringWithDirection</a> <dfn class="local col5 decl" id="725title" title='title' data-type='WebCore::StringWithDirection' data-ref="725title" data-ref-filename="725title">title</dfn> = <a class="ref fn fake" href="../platform/text/StringWithDirection.h.html#48" title='WebCore::StringWithDirection::StringWithDirection' data-ref="_ZN7WebCore19StringWithDirectionC1ERKS0_" data-ref-filename="_ZN7WebCore19StringWithDirectionC1ERKS0_"></a><a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader5titleEv" title='WebCore::DocumentLoader::title' data-ref="_ZNK7WebCore14DocumentLoader5titleEv" data-ref-filename="_ZNK7WebCore14DocumentLoader5titleEv">title</a>();</td></tr>
<tr><th id="662">662</th><td></td></tr>
<tr><th id="663">663</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE" title='WebCore::HistoryItem::setURL' data-ref="_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE" data-ref-filename="_ZN7WebCore11HistoryItem6setURLERKN3WTF3URLE">setURL</a>(<a class="local col3 ref" href="#723url" title='url' data-ref="723url" data-ref-filename="723url">url</a>);</td></tr>
<tr><th id="664">664</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem9setTargetERKN3WTF6StringE" title='WebCore::HistoryItem::setTarget' data-ref="_ZN7WebCore11HistoryItem9setTargetERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem9setTargetERKN3WTF6StringE">setTarget</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZNK3WTF10AtomStringcvRKNS_6StringEEv" title='WTF::AtomString::operator const WTF::String &amp;' data-ref="_ZNK3WTF10AtomStringcvRKNS_6StringEEv" data-ref-filename="_ZNK3WTF10AtomStringcvRKNS_6StringEEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10uniqueNameEv" title='WebCore::FrameTree::uniqueName' data-ref="_ZNK7WebCore9FrameTree10uniqueNameEv" data-ref-filename="_ZNK7WebCore9FrameTree10uniqueNameEv">uniqueName</a>());</td></tr>
<tr><th id="665">665</th><td>    <i>// FIXME: Should store the title direction as well.</i></td></tr>
<tr><th id="666">666</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" title='WebCore::HistoryItem::setTitle' data-ref="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE">setTitle</a>(<a class="local col5 ref" href="#725title" title='title' data-ref="725title" data-ref-filename="725title">title</a>.<a class="ref field" href="../platform/text/StringWithDirection.h.html#WebCore::StringWithDirection::string" title='WebCore::StringWithDirection::string' data-ref="WebCore::StringWithDirection::string" data-ref-filename="WebCore..StringWithDirection..string">string</a>);</td></tr>
<tr><th id="667">667</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem20setOriginalURLStringERKN3WTF6StringE" title='WebCore::HistoryItem::setOriginalURLString' data-ref="_ZN7WebCore11HistoryItem20setOriginalURLStringERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem20setOriginalURLStringERKN3WTF6StringE">setOriginalURLString</a>(<a class="local col4 ref" href="#724originalURL" title='originalURL' data-ref="724originalURL" data-ref-filename="724originalURL">originalURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>());</td></tr>
<tr><th id="668">668</th><td></td></tr>
<tr><th id="669">669</th><td>    <b>if</b> (!<a class="local col2 ref" href="#722unreachableURL" title='unreachableURL' data-ref="722unreachableURL" data-ref-filename="722unreachableURL">unreachableURL</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>() || <a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader8responseEv" title='WebCore::DocumentLoader::response' data-ref="_ZNK7WebCore14DocumentLoader8responseEv" data-ref-filename="_ZNK7WebCore14DocumentLoader8responseEv">response</a>().<a class="ref fn" href="../platform/network/ResourceResponseBase.h.html#_ZNK7WebCore20ResourceResponseBase14httpStatusCodeEv" title='WebCore::ResourceResponseBase::httpStatusCode' data-ref="_ZNK7WebCore20ResourceResponseBase14httpStatusCodeEv" data-ref-filename="_ZNK7WebCore20ResourceResponseBase14httpStatusCodeEv">httpStatusCode</a>() &gt;= <var>400</var>)</td></tr>
<tr><th id="670">670</th><td>        <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem22setLastVisitWasFailureEb" title='WebCore::HistoryItem::setLastVisitWasFailure' data-ref="_ZN7WebCore11HistoryItem22setLastVisitWasFailureEb" data-ref-filename="_ZN7WebCore11HistoryItem22setLastVisitWasFailureEb">setLastVisitWasFailure</a>(<b>true</b>);</td></tr>
<tr><th id="671">671</th><td></td></tr>
<tr><th id="672">672</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" title='WebCore::HistoryItem::setShouldOpenExternalURLsPolicy' data-ref="_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE" data-ref-filename="_ZN7WebCore11HistoryItem31setShouldOpenExternalURLsPolicyENS_28ShouldOpenExternalURLsPolicyE">setShouldOpenExternalURLsPolicy</a>(<a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv" title='WebCore::DocumentLoader::shouldOpenExternalURLsPolicyToPropagate' data-ref="_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv" data-ref-filename="_ZNK7WebCore14DocumentLoader39shouldOpenExternalURLsPolicyToPropagateEv">shouldOpenExternalURLsPolicyToPropagate</a>());</td></tr>
<tr><th id="673">673</th><td></td></tr>
<tr><th id="674">674</th><td>    <i>// Save form state if this is a POST</i></td></tr>
<tr><th id="675">675</th><td>    <a class="local col0 ref" href="#720item" title='item' data-ref="720item" data-ref-filename="720item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE" title='WebCore::HistoryItem::setFormInfoFromRequest' data-ref="_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE" data-ref-filename="_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE">setFormInfoFromRequest</a>(<a class="local col1 ref" href="#721documentLoader" title='documentLoader' data-ref="721documentLoader" data-ref-filename="721documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZN7WebCore14DocumentLoader7requestEv" title='WebCore::DocumentLoader::request' data-ref="_ZN7WebCore14DocumentLoader7requestEv" data-ref-filename="_ZN7WebCore14DocumentLoader7requestEv">request</a>());</td></tr>
<tr><th id="676">676</th><td>}</td></tr>
<tr><th id="677">677</th><td></td></tr>
<tr><th id="678">678</th><td><a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController10createItemEv" title='WebCore::FrameLoader::HistoryController::createItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController10createItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController10createItemEv">createItem</dfn>()</td></tr>
<tr><th id="679">679</th><td>{</td></tr>
<tr><th id="680">680</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <dfn class="local col6 decl" id="726item" title='item' data-type='Ref&lt;WebCore::HistoryItem&gt;' data-ref="726item" data-ref-filename="726item">item</dfn> = <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>::<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem6createEv" title='WebCore::HistoryItem::create' data-ref="_ZN7WebCore11HistoryItem6createEv" data-ref-filename="_ZN7WebCore11HistoryItem6createEv">create</a>();</td></tr>
<tr><th id="681">681</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::initializeItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE">initializeItem</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefcvRT_Ev" title='WTF::Ref::operator type-parameter-0-0 &amp;' data-ref="_ZNK3WTF3RefcvRT_Ev" data-ref-filename="_ZNK3WTF3RefcvRT_Ev"></a><span class='refarg'><a class="local col6 ref" href="#726item" title='item' data-ref="726item" data-ref-filename="726item">item</a></span>);</td></tr>
<tr><th id="682">682</th><td>    </td></tr>
<tr><th id="683">683</th><td>    <i>// Set the item for which we will save document state</i></td></tr>
<tr><th id="684">684</th><td>    <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::setCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14setCurrentItemERNS_11HistoryItemE">setCurrentItem</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefcvRT_Ev" title='WTF::Ref::operator type-parameter-0-0 &amp;' data-ref="_ZNK3WTF3RefcvRT_Ev" data-ref-filename="_ZNK3WTF3RefcvRT_Ev"></a><span class='refarg'><a class="local col6 ref" href="#726item" title='item' data-ref="726item" data-ref-filename="726item">item</a></span>);</td></tr>
<tr><th id="685">685</th><td>    </td></tr>
<tr><th id="686">686</th><td>    <b>return</b> <a class="local col6 ref" href="#726item" title='item' data-ref="726item" data-ref-filename="726item">item</a>;</td></tr>
<tr><th id="687">687</th><td>}</td></tr>
<tr><th id="688">688</th><td></td></tr>
<tr><th id="689">689</th><td><a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" title='WebCore::FrameLoader::HistoryController::createItemTree' data-ref="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb">createItemTree</dfn>(<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>&amp; <dfn class="local col7 decl" id="727targetFrame" title='targetFrame' data-type='WebCore::Frame &amp;' data-ref="727targetFrame" data-ref-filename="727targetFrame">targetFrame</dfn>, <em>bool</em> <dfn class="local col8 decl" id="728clipAtTarget" title='clipAtTarget' data-type='bool' data-ref="728clipAtTarget" data-ref-filename="728clipAtTarget">clipAtTarget</dfn>)</td></tr>
<tr><th id="690">690</th><td>{</td></tr>
<tr><th id="691">691</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <dfn class="local col9 decl" id="729bfItem" title='bfItem' data-type='Ref&lt;WebCore::HistoryItem&gt;' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</dfn> = <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController10createItemEv" title='WebCore::FrameLoader::HistoryController::createItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController10createItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController10createItemEv">createItem</a>();</td></tr>
<tr><th id="692">692</th><td>    <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frameLoadComplete" title='WebCore::FrameLoader::HistoryController::m_frameLoadComplete' data-ref="WebCore::FrameLoader::HistoryController::m_frameLoadComplete" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frameLoadComplete">m_frameLoadComplete</a>)</td></tr>
<tr><th id="693">693</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::saveScrollPositionAndViewStateToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36saveScrollPositionAndViewStateToItemEPNS_11HistoryItemE">saveScrollPositionAndViewStateToItem</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>());</td></tr>
<tr><th id="694">694</th><td></td></tr>
<tr><th id="695">695</th><td>    <b>if</b> (!<a class="local col8 ref" href="#728clipAtTarget" title='clipAtTarget' data-ref="728clipAtTarget" data-ref-filename="728clipAtTarget">clipAtTarget</a> || &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a> != &amp;<a class="local col7 ref" href="#727targetFrame" title='targetFrame' data-ref="727targetFrame" data-ref-filename="727targetFrame">targetFrame</a>) {</td></tr>
<tr><th id="696">696</th><td>        <i>// save frame state for items that aren't loading (khtml doesn't save those)</i></td></tr>
<tr><th id="697">697</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" title='WebCore::FrameLoader::HistoryController::saveDocumentState' data-ref="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17saveDocumentStateEv">saveDocumentState</a>();</td></tr>
<tr><th id="698">698</th><td></td></tr>
<tr><th id="699">699</th><td>        <i>// clipAtTarget is false for navigations within the same document, so</i></td></tr>
<tr><th id="700">700</th><td><i>        // we should copy the documentSequenceNumber over to the newly create</i></td></tr>
<tr><th id="701">701</th><td><i>        // item.  Non-target items are just clones, and they should therefore</i></td></tr>
<tr><th id="702">702</th><td><i>        // preserve the same itemSequenceNumber.</i></td></tr>
<tr><th id="703">703</th><td>        <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a>) {</td></tr>
<tr><th id="704">704</th><td>            <b>if</b> (&amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a> != &amp;<a class="local col7 ref" href="#727targetFrame" title='targetFrame' data-ref="727targetFrame" data-ref-filename="727targetFrame">targetFrame</a>)</td></tr>
<tr><th id="705">705</th><td>                <a class="local col9 ref" href="#729bfItem" title='bfItem' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem21setItemSequenceNumberEx" title='WebCore::HistoryItem::setItemSequenceNumber' data-ref="_ZN7WebCore11HistoryItem21setItemSequenceNumberEx" data-ref-filename="_ZN7WebCore11HistoryItem21setItemSequenceNumberEx">setItemSequenceNumber</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" title='WebCore::HistoryItem::itemSequenceNumber' data-ref="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" data-ref-filename="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv">itemSequenceNumber</a>());</td></tr>
<tr><th id="706">706</th><td>            <a class="local col9 ref" href="#729bfItem" title='bfItem' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem25setDocumentSequenceNumberEx" title='WebCore::HistoryItem::setDocumentSequenceNumber' data-ref="_ZN7WebCore11HistoryItem25setDocumentSequenceNumberEx" data-ref-filename="_ZN7WebCore11HistoryItem25setDocumentSequenceNumberEx">setDocumentSequenceNumber</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem22documentSequenceNumberEv" title='WebCore::HistoryItem::documentSequenceNumber' data-ref="_ZNK7WebCore11HistoryItem22documentSequenceNumberEv" data-ref-filename="_ZNK7WebCore11HistoryItem22documentSequenceNumberEv">documentSequenceNumber</a>());</td></tr>
<tr><th id="707">707</th><td>        }</td></tr>
<tr><th id="708">708</th><td></td></tr>
<tr><th id="709">709</th><td>        <b>for</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col0 decl" id="730child" title='child' data-type='WebCore::Frame *' data-ref="730child" data-ref-filename="730child">child</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10firstChildEv" title='WebCore::FrameTree::firstChild' data-ref="_ZNK7WebCore9FrameTree10firstChildEv" data-ref-filename="_ZNK7WebCore9FrameTree10firstChildEv">firstChild</a>(); <a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a>; <a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a> = <a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree11nextSiblingEv" title='WebCore::FrameTree::nextSibling' data-ref="_ZNK7WebCore9FrameTree11nextSiblingEv" data-ref-filename="_ZNK7WebCore9FrameTree11nextSiblingEv">nextSibling</a>()) {</td></tr>
<tr><th id="710">710</th><td>            <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>&amp; <dfn class="local col1 decl" id="731childLoader" title='childLoader' data-type='WebCore::FrameLoader &amp;' data-ref="731childLoader" data-ref-filename="731childLoader">childLoader</dfn> = <a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>();</td></tr>
<tr><th id="711">711</th><td>            <em>bool</em> <dfn class="local col2 decl" id="732hasChildLoaded" title='hasChildLoaded' data-type='bool' data-ref="732hasChildLoaded" data-ref-filename="732hasChildLoaded">hasChildLoaded</dfn> = <a class="local col1 ref" href="#731childLoader" title='childLoader' data-ref="731childLoader" data-ref-filename="731childLoader">childLoader</a>.<a class="ref fn" href="FrameLoader.cpp.html#_ZNK7WebCore11FrameLoader14frameHasLoadedEv" title='WebCore::FrameLoader::frameHasLoaded' data-ref="_ZNK7WebCore11FrameLoader14frameHasLoadedEv" data-ref-filename="_ZNK7WebCore11FrameLoader14frameHasLoadedEv">frameHasLoaded</a>();</td></tr>
<tr><th id="712">712</th><td></td></tr>
<tr><th id="713">713</th><td>            <i>// If the child is a frame corresponding to an &lt;object&gt; element that never loaded,</i></td></tr>
<tr><th id="714">714</th><td><i>            // we don't want to create a history item, because that causes fallback content</i></td></tr>
<tr><th id="715">715</th><td><i>            // to be ignored on reload.</i></td></tr>
<tr><th id="716">716</th><td>            </td></tr>
<tr><th id="717">717</th><td>            <b>if</b> (!(!<a class="local col2 ref" href="#732hasChildLoaded" title='hasChildLoaded' data-ref="732hasChildLoaded" data-ref-filename="732hasChildLoaded">hasChildLoaded</a> &amp;&amp; <a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame12ownerElementEv" title='WebCore::Frame::ownerElement' data-ref="_ZNK7WebCore5Frame12ownerElementEv" data-ref-filename="_ZNK7WebCore5Frame12ownerElementEv">ownerElement</a>() &amp;&amp; <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF2isEPT0_" title='WTF::is' data-ref="_ZN3WTF2isEPT0_" data-ref-filename="_ZN3WTF2isEPT0_">is</a>&lt;<a class="type" href="../html/HTMLObjectElement.h.html#WebCore::HTMLObjectElement" title='WebCore::HTMLObjectElement' data-ref="WebCore::HTMLObjectElement" data-ref-filename="WebCore..HTMLObjectElement">HTMLObjectElement</a>&gt;(<a class="local col0 ref" href="#730child" title='child' data-ref="730child" data-ref-filename="730child">child</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame12ownerElementEv" title='WebCore::Frame::ownerElement' data-ref="_ZNK7WebCore5Frame12ownerElementEv" data-ref-filename="_ZNK7WebCore5Frame12ownerElementEv">ownerElement</a>())))</td></tr>
<tr><th id="718">718</th><td>                <a class="local col9 ref" href="#729bfItem" title='bfItem' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem12addChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE" title='WebCore::HistoryItem::addChildItem' data-ref="_ZN7WebCore11HistoryItem12addChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE" data-ref-filename="_ZN7WebCore11HistoryItem12addChildItemEON3WTF3RefIS0_NS1_12RawPtrTraitsIS0_EEEE">addChildItem</a>(<a class="local col1 ref" href="#731childLoader" title='childLoader' data-ref="731childLoader" data-ref-filename="731childLoader">childLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" title='WebCore::FrameLoader::HistoryController::createItemTree' data-ref="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb">createItemTree</a>(<span class='refarg'><a class="local col7 ref" href="#727targetFrame" title='targetFrame' data-ref="727targetFrame" data-ref-filename="727targetFrame">targetFrame</a></span>, <a class="local col8 ref" href="#728clipAtTarget" title='clipAtTarget' data-ref="728clipAtTarget" data-ref-filename="728clipAtTarget">clipAtTarget</a>));</td></tr>
<tr><th id="719">719</th><td>        }</td></tr>
<tr><th id="720">720</th><td>    }</td></tr>
<tr><th id="721">721</th><td>    <i>// FIXME: Eliminate the isTargetItem flag in favor of itemSequenceNumber.</i></td></tr>
<tr><th id="722">722</th><td>    <b>if</b> (&amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a> == &amp;<a class="local col7 ref" href="#727targetFrame" title='targetFrame' data-ref="727targetFrame" data-ref-filename="727targetFrame">targetFrame</a>)</td></tr>
<tr><th id="723">723</th><td>        <a class="local col9 ref" href="#729bfItem" title='bfItem' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem15setIsTargetItemEb" title='WebCore::HistoryItem::setIsTargetItem' data-ref="_ZN7WebCore11HistoryItem15setIsTargetItemEb" data-ref-filename="_ZN7WebCore11HistoryItem15setIsTargetItemEb">setIsTargetItem</a>(<b>true</b>);</td></tr>
<tr><th id="724">724</th><td>    <b>return</b> <a class="local col9 ref" href="#729bfItem" title='bfItem' data-ref="729bfItem" data-ref-filename="729bfItem">bfItem</a>;</td></tr>
<tr><th id="725">725</th><td>}</td></tr>
<tr><th id="726">726</th><td></td></tr>
<tr><th id="727">727</th><td><i>// The general idea here is to traverse the frame tree and the item tree in parallel,</i></td></tr>
<tr><th id="728">728</th><td><i>// tracking whether each frame already has the content the item requests.  If there is</i></td></tr>
<tr><th id="729">729</th><td><i>// a match, we set the provisional item and recurse.  Otherwise we will reload that</i></td></tr>
<tr><th id="730">730</th><td><i>// frame and all its kids in recursiveGoToItem.</i></td></tr>
<tr><th id="731">731</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::recursiveSetProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_">recursiveSetProvisionalItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col3 decl" id="733item" title='item' data-type='WebCore::HistoryItem &amp;' data-ref="733item" data-ref-filename="733item">item</dfn>, <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col4 decl" id="734fromItem" title='fromItem' data-type='WebCore::HistoryItem *' data-ref="734fromItem" data-ref-filename="734fromItem">fromItem</dfn>)</td></tr>
<tr><th id="732">732</th><td>{</td></tr>
<tr><th id="733">733</th><td>    <b>if</b> (!<a class="member fn" href="#_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::itemsAreClones' data-ref="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_">itemsAreClones</a>(<span class='refarg'><a class="local col3 ref" href="#733item" title='item' data-ref="733item" data-ref-filename="733item">item</a></span>, <a class="local col4 ref" href="#734fromItem" title='fromItem' data-ref="734fromItem" data-ref-filename="734fromItem">fromItem</a>))</td></tr>
<tr><th id="734">734</th><td>        <b>return</b>;</td></tr>
<tr><th id="735">735</th><td></td></tr>
<tr><th id="736">736</th><td>    <i>// Set provisional item, which will be committed in recursiveUpdateForCommit.</i></td></tr>
<tr><th id="737">737</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> &amp;<a class="local col3 ref" href="#733item" title='item' data-ref="733item" data-ref-filename="733item">item</a>;</td></tr>
<tr><th id="738">738</th><td></td></tr>
<tr><th id="739">739</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col5 decl" id="735childItem" title='childItem' data-type='const WTF::Ref&lt;WebCore::HistoryItem, WTF::RawPtrTraits&lt;WebCore::HistoryItem&gt;&gt; &amp;' data-ref="735childItem" data-ref-filename="735childItem">childItem</dfn> : <a class="local col3 ref" href="#733item" title='item' data-ref="733item" data-ref-filename="733item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem8childrenEv" title='WebCore::HistoryItem::children' data-ref="_ZNK7WebCore11HistoryItem8childrenEv" data-ref-filename="_ZNK7WebCore11HistoryItem8childrenEv">children</a>()) {</td></tr>
<tr><th id="740">740</th><td>        <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col6 decl" id="736childFrameName" title='childFrameName' data-type='const WTF::String &amp;' data-ref="736childFrameName" data-ref-filename="736childFrameName">childFrameName</dfn> = <a class="local col5 ref" href="#735childItem" title='childItem' data-ref="735childItem" data-ref-filename="735childItem">childItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem6targetEv" title='WebCore::HistoryItem::target' data-ref="_ZNK7WebCore11HistoryItem6targetEv" data-ref-filename="_ZNK7WebCore11HistoryItem6targetEv">target</a>();</td></tr>
<tr><th id="741">741</th><td></td></tr>
<tr><th id="742">742</th><td>        <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col7 decl" id="737fromChildItem" title='fromChildItem' data-type='WebCore::HistoryItem *' data-ref="737fromChildItem" data-ref-filename="737fromChildItem">fromChildItem</dfn> = <a class="local col4 ref" href="#734fromItem" title='fromItem' data-ref="734fromItem" data-ref-filename="734fromItem">fromItem</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE" title='WebCore::HistoryItem::childItemWithTarget' data-ref="_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE">childItemWithTarget</a>(<a class="local col6 ref" href="#736childFrameName" title='childFrameName' data-ref="736childFrameName" data-ref-filename="736childFrameName">childFrameName</a>);</td></tr>
<tr><th id="743">743</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(fromChildItem)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 743, __PRETTY_FUNCTION__, &quot;fromChildItem&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(743, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3564); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col7 ref" href="#737fromChildItem" title='fromChildItem' data-ref="737fromChildItem" data-ref-filename="737fromChildItem">fromChildItem</a>);</td></tr>
<tr><th id="744">744</th><td>        <a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col8 decl" id="738childFrame" title='childFrame' data-type='WebCore::Frame *' data-ref="738childFrame" data-ref-filename="738childFrame">childFrame</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" title='WebCore::FrameTree::child' data-ref="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" data-ref-filename="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE">child</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZN3WTF10AtomStringC1ERKNS_6StringE" title='WTF::AtomString::AtomString' data-ref="_ZN3WTF10AtomStringC1ERKNS_6StringE" data-ref-filename="_ZN3WTF10AtomStringC1ERKNS_6StringE"></a><a class="local col6 ref" href="#736childFrameName" title='childFrameName' data-ref="736childFrameName" data-ref-filename="736childFrameName">childFrameName</a>);</td></tr>
<tr><th id="745">745</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(childFrame)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 745, __PRETTY_FUNCTION__, &quot;childFrame&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(745, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3566); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col8 ref" href="#738childFrame" title='childFrame' data-ref="738childFrame" data-ref-filename="738childFrame">childFrame</a>);</td></tr>
<tr><th id="746">746</th><td></td></tr>
<tr><th id="747">747</th><td>        <a class="local col8 ref" href="#738childFrame" title='childFrame' data-ref="738childFrame" data-ref-filename="738childFrame">childFrame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::recursiveSetProvisionalItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController27recursiveSetProvisionalItemERNS_11HistoryItemEPS2_">recursiveSetProvisionalItem</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefcvRT_Ev" title='WTF::Ref::operator type-parameter-0-0 &amp;' data-ref="_ZNK3WTF3RefcvRT_Ev" data-ref-filename="_ZNK3WTF3RefcvRT_Ev"></a><span class='refarg'><a class="local col5 ref" href="#735childItem" title='childItem' data-ref="735childItem" data-ref-filename="735childItem">childItem</a></span>, <a class="local col7 ref" href="#737fromChildItem" title='fromChildItem' data-ref="737fromChildItem" data-ref-filename="737fromChildItem">fromChildItem</a>);</td></tr>
<tr><th id="748">748</th><td>    }</td></tr>
<tr><th id="749">749</th><td>}</td></tr>
<tr><th id="750">750</th><td></td></tr>
<tr><th id="751">751</th><td><i>// We now traverse the frame tree and item tree a second time, loading frames that</i></td></tr>
<tr><th id="752">752</th><td><i>// do have the content the item requests.</i></td></tr>
<tr><th id="753">753</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::HistoryController::recursiveGoToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">recursiveGoToItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col9 decl" id="739item" title='item' data-type='WebCore::HistoryItem &amp;' data-ref="739item" data-ref-filename="739item">item</dfn>, <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col0 decl" id="740fromItem" title='fromItem' data-type='WebCore::HistoryItem *' data-ref="740fromItem" data-ref-filename="740fromItem">fromItem</dfn>, <a class="type" href="FrameLoaderTypes.h.html#WebCore::FrameLoadType" title='WebCore::FrameLoadType' data-ref="WebCore::FrameLoadType" data-ref-filename="WebCore..FrameLoadType">FrameLoadType</a> <dfn class="local col1 decl" id="741type" title='type' data-type='WebCore::FrameLoadType' data-ref="741type" data-ref-filename="741type">type</dfn>, <a class="type" href="FrameLoader.h.html#WebCore::ShouldTreatAsContinuingLoad" title='WebCore::ShouldTreatAsContinuingLoad' data-ref="WebCore::ShouldTreatAsContinuingLoad" data-ref-filename="WebCore..ShouldTreatAsContinuingLoad">ShouldTreatAsContinuingLoad</a> <dfn class="local col2 decl" id="742shouldTreatAsContinuingLoad" title='shouldTreatAsContinuingLoad' data-type='WebCore::ShouldTreatAsContinuingLoad' data-ref="742shouldTreatAsContinuingLoad" data-ref-filename="742shouldTreatAsContinuingLoad">shouldTreatAsContinuingLoad</dfn>)</td></tr>
<tr><th id="754">754</th><td>{</td></tr>
<tr><th id="755">755</th><td>    <b>if</b> (!<a class="member fn" href="#_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::itemsAreClones' data-ref="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_">itemsAreClones</a>(<span class='refarg'><a class="local col9 ref" href="#739item" title='item' data-ref="739item" data-ref-filename="739item">item</a></span>, <a class="local col0 ref" href="#740fromItem" title='fromItem' data-ref="740fromItem" data-ref-filename="740fromItem">fromItem</a>)) {</td></tr>
<tr><th id="756">756</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.cpp.html#_ZN7WebCore11FrameLoader8loadItemERNS_11HistoryItemEPS1_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::loadItem' data-ref="_ZN7WebCore11FrameLoader8loadItemERNS_11HistoryItemEPS1_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader8loadItemERNS_11HistoryItemEPS1_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">loadItem</a>(<span class='refarg'><a class="local col9 ref" href="#739item" title='item' data-ref="739item" data-ref-filename="739item">item</a></span>, <a class="local col0 ref" href="#740fromItem" title='fromItem' data-ref="740fromItem" data-ref-filename="740fromItem">fromItem</a>, <a class="local col1 ref" href="#741type" title='type' data-ref="741type" data-ref-filename="741type">type</a>, <a class="local col2 ref" href="#742shouldTreatAsContinuingLoad" title='shouldTreatAsContinuingLoad' data-ref="742shouldTreatAsContinuingLoad" data-ref-filename="742shouldTreatAsContinuingLoad">shouldTreatAsContinuingLoad</a>);</td></tr>
<tr><th id="757">757</th><td>        <b>return</b>;</td></tr>
<tr><th id="758">758</th><td>    }</td></tr>
<tr><th id="759">759</th><td></td></tr>
<tr><th id="760">760</th><td>    <i>// Just iterate over the rest, looking for frames to navigate.</i></td></tr>
<tr><th id="761">761</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col3 decl" id="743childItem" title='childItem' data-type='const WTF::Ref&lt;WebCore::HistoryItem, WTF::RawPtrTraits&lt;WebCore::HistoryItem&gt;&gt; &amp;' data-ref="743childItem" data-ref-filename="743childItem">childItem</dfn> : <a class="local col9 ref" href="#739item" title='item' data-ref="739item" data-ref-filename="739item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem8childrenEv" title='WebCore::HistoryItem::children' data-ref="_ZNK7WebCore11HistoryItem8childrenEv" data-ref-filename="_ZNK7WebCore11HistoryItem8childrenEv">children</a>()) {</td></tr>
<tr><th id="762">762</th><td>        <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col4 decl" id="744childFrameName" title='childFrameName' data-type='const WTF::String &amp;' data-ref="744childFrameName" data-ref-filename="744childFrameName">childFrameName</dfn> = <a class="local col3 ref" href="#743childItem" title='childItem' data-ref="743childItem" data-ref-filename="743childItem">childItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem6targetEv" title='WebCore::HistoryItem::target' data-ref="_ZNK7WebCore11HistoryItem6targetEv" data-ref-filename="_ZNK7WebCore11HistoryItem6targetEv">target</a>();</td></tr>
<tr><th id="763">763</th><td></td></tr>
<tr><th id="764">764</th><td>        <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col5 decl" id="745fromChildItem" title='fromChildItem' data-type='WebCore::HistoryItem *' data-ref="745fromChildItem" data-ref-filename="745fromChildItem">fromChildItem</dfn> = <a class="local col0 ref" href="#740fromItem" title='fromItem' data-ref="740fromItem" data-ref-filename="740fromItem">fromItem</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE" title='WebCore::HistoryItem::childItemWithTarget' data-ref="_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem19childItemWithTargetERKN3WTF6StringE">childItemWithTarget</a>(<a class="local col4 ref" href="#744childFrameName" title='childFrameName' data-ref="744childFrameName" data-ref-filename="744childFrameName">childFrameName</a>);</td></tr>
<tr><th id="765">765</th><td>        <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(fromChildItem)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 765, __PRETTY_FUNCTION__, &quot;fromChildItem&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(765, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3568); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col5 ref" href="#745fromChildItem" title='fromChildItem' data-ref="745fromChildItem" data-ref-filename="745fromChildItem">fromChildItem</a>);</td></tr>
<tr><th id="766">766</th><td>        <b>if</b> (<a class="type" href="../page/Frame.h.html#WebCore::Frame" title='WebCore::Frame' data-ref="WebCore::Frame" data-ref-filename="WebCore..Frame">Frame</a>* <dfn class="local col6 decl" id="746childFrame" title='childFrame' data-type='WebCore::Frame *' data-ref="746childFrame" data-ref-filename="746childFrame"><a class="local col6 ref" href="#746childFrame" title='childFrame' data-ref="746childFrame" data-ref-filename="746childFrame">childFrame</a></dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" title='WebCore::FrameTree::child' data-ref="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" data-ref-filename="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE">child</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZN3WTF10AtomStringC1ERKNS_6StringE" title='WTF::AtomString::AtomString' data-ref="_ZN3WTF10AtomStringC1ERKNS_6StringE" data-ref-filename="_ZN3WTF10AtomStringC1ERKNS_6StringE"></a><a class="local col4 ref" href="#744childFrameName" title='childFrameName' data-ref="744childFrameName" data-ref-filename="744childFrameName">childFrameName</a>))</td></tr>
<tr><th id="767">767</th><td>            <a class="local col6 ref" href="#746childFrame" title='childFrame' data-ref="746childFrame" data-ref-filename="746childFrame">childFrame</a>-&gt;<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" title='WebCore::FrameLoader::HistoryController::recursiveGoToItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17recursiveGoToItemERNS_11HistoryItemEPS2_NS_13FrameLoadTypeENS_27ShouldTreatAsContinuingLoadE">recursiveGoToItem</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefcvRT_Ev" title='WTF::Ref::operator type-parameter-0-0 &amp;' data-ref="_ZNK3WTF3RefcvRT_Ev" data-ref-filename="_ZNK3WTF3RefcvRT_Ev"></a><span class='refarg'><a class="local col3 ref" href="#743childItem" title='childItem' data-ref="743childItem" data-ref-filename="743childItem">childItem</a></span>, <a class="local col5 ref" href="#745fromChildItem" title='fromChildItem' data-ref="745fromChildItem" data-ref-filename="745fromChildItem">fromChildItem</a>, <a class="local col1 ref" href="#741type" title='type' data-ref="741type" data-ref-filename="741type">type</a>, <a class="local col2 ref" href="#742shouldTreatAsContinuingLoad" title='shouldTreatAsContinuingLoad' data-ref="742shouldTreatAsContinuingLoad" data-ref-filename="742shouldTreatAsContinuingLoad">shouldTreatAsContinuingLoad</a>);</td></tr>
<tr><th id="768">768</th><td>    }</td></tr>
<tr><th id="769">769</th><td>}</td></tr>
<tr><th id="770">770</th><td></td></tr>
<tr><th id="771">771</th><td><i>// The following logic must be kept in sync with WebKit::WebBackForwardListItem::itemIsClone().</i></td></tr>
<tr><th id="772">772</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" title='WebCore::FrameLoader::HistoryController::itemsAreClones' data-ref="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController14itemsAreClonesERNS_11HistoryItemEPS2_">itemsAreClones</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col7 decl" id="747item1" title='item1' data-type='WebCore::HistoryItem &amp;' data-ref="747item1" data-ref-filename="747item1">item1</dfn>, <a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col8 decl" id="748item2" title='item2' data-type='WebCore::HistoryItem *' data-ref="748item2" data-ref-filename="748item2">item2</dfn>) <em>const</em></td></tr>
<tr><th id="773">773</th><td>{</td></tr>
<tr><th id="774">774</th><td>    <i>// If the item we're going to is a clone of the item we're at, then we do</i></td></tr>
<tr><th id="775">775</th><td><i>    // not need to load it again.  The current frame tree and the frame tree</i></td></tr>
<tr><th id="776">776</th><td><i>    // snapshot in the item have to match.</i></td></tr>
<tr><th id="777">777</th><td><i>    // Note: Some clients treat a navigation to the current history item as</i></td></tr>
<tr><th id="778">778</th><td><i>    // a reload.  Thus, if item1 and item2 are the same, we need to create a</i></td></tr>
<tr><th id="779">779</th><td><i>    // new document and should not consider them clones.</i></td></tr>
<tr><th id="780">780</th><td><i>    // (See <a href="http://webkit.org/b/35532">http://webkit.org/b/35532</a> for details.)</i></td></tr>
<tr><th id="781">781</th><td>    <b>return</b> <a class="local col8 ref" href="#748item2" title='item2' data-ref="748item2" data-ref-filename="748item2">item2</a></td></tr>
<tr><th id="782">782</th><td>        &amp;&amp; &amp;<a class="local col7 ref" href="#747item1" title='item1' data-ref="747item1" data-ref-filename="747item1">item1</a> != <a class="local col8 ref" href="#748item2" title='item2' data-ref="748item2" data-ref-filename="748item2">item2</a></td></tr>
<tr><th id="783">783</th><td>        &amp;&amp; <a class="local col7 ref" href="#747item1" title='item1' data-ref="747item1" data-ref-filename="747item1">item1</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" title='WebCore::HistoryItem::itemSequenceNumber' data-ref="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" data-ref-filename="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv">itemSequenceNumber</a>() == <a class="local col8 ref" href="#748item2" title='item2' data-ref="748item2" data-ref-filename="748item2">item2</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" title='WebCore::HistoryItem::itemSequenceNumber' data-ref="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv" data-ref-filename="_ZNK7WebCore11HistoryItem18itemSequenceNumberEv">itemSequenceNumber</a>()</td></tr>
<tr><th id="784">784</th><td>        &amp;&amp; <a class="member fn" href="#_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::currentFramesMatchItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE">currentFramesMatchItem</a>(<span class='refarg'><a class="local col7 ref" href="#747item1" title='item1' data-ref="747item1" data-ref-filename="747item1">item1</a></span>)</td></tr>
<tr><th id="785">785</th><td>        &amp;&amp; <a class="local col8 ref" href="#748item2" title='item2' data-ref="748item2" data-ref-filename="748item2">item2</a>-&gt;<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem13hasSameFramesERS0_" title='WebCore::HistoryItem::hasSameFrames' data-ref="_ZNK7WebCore11HistoryItem13hasSameFramesERS0_" data-ref-filename="_ZNK7WebCore11HistoryItem13hasSameFramesERS0_">hasSameFrames</a>(<span class='refarg'><a class="local col7 ref" href="#747item1" title='item1' data-ref="747item1" data-ref-filename="747item1">item1</a></span>);</td></tr>
<tr><th id="786">786</th><td>}</td></tr>
<tr><th id="787">787</th><td></td></tr>
<tr><th id="788">788</th><td><i>// Helper method that determines whether the current frame tree matches given history item's.</i></td></tr>
<tr><th id="789">789</th><td><em>bool</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::currentFramesMatchItem' data-ref="_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE" data-ref-filename="_ZNK7WebCore11FrameLoader17HistoryController22currentFramesMatchItemERNS_11HistoryItemE">currentFramesMatchItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&amp; <dfn class="local col9 decl" id="749item" title='item' data-type='WebCore::HistoryItem &amp;' data-ref="749item" data-ref-filename="749item">item</dfn>) <em>const</em></td></tr>
<tr><th id="790">790</th><td>{</td></tr>
<tr><th id="791">791</th><td>    <b>if</b> ((!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10uniqueNameEv" title='WebCore::FrameTree::uniqueName' data-ref="_ZNK7WebCore9FrameTree10uniqueNameEv" data-ref-filename="_ZNK7WebCore9FrameTree10uniqueNameEv">uniqueName</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZNK3WTF10AtomString7isEmptyEv" title='WTF::AtomString::isEmpty' data-ref="_ZNK3WTF10AtomString7isEmptyEv" data-ref-filename="_ZNK3WTF10AtomString7isEmptyEv">isEmpty</a>() || !<a class="local col9 ref" href="#749item" title='item' data-ref="749item" data-ref-filename="749item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem6targetEv" title='WebCore::HistoryItem::target' data-ref="_ZNK7WebCore11HistoryItem6targetEv" data-ref-filename="_ZNK7WebCore11HistoryItem6targetEv">target</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>()) &amp;&amp; <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10uniqueNameEv" title='WebCore::FrameTree::uniqueName' data-ref="_ZNK7WebCore9FrameTree10uniqueNameEv" data-ref-filename="_ZNK7WebCore9FrameTree10uniqueNameEv">uniqueName</a>() <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZN3WTFneERKNS_10AtomStringERKNS_6StringE" title='WTF::operator!=' data-ref="_ZN3WTFneERKNS_10AtomStringERKNS_6StringE" data-ref-filename="_ZN3WTFneERKNS_10AtomStringERKNS_6StringE">!=</a> <a class="local col9 ref" href="#749item" title='item' data-ref="749item" data-ref-filename="749item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem6targetEv" title='WebCore::HistoryItem::target' data-ref="_ZNK7WebCore11HistoryItem6targetEv" data-ref-filename="_ZNK7WebCore11HistoryItem6targetEv">target</a>())</td></tr>
<tr><th id="792">792</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="793">793</th><td></td></tr>
<tr><th id="794">794</th><td>    <em>const</em> <em>auto</em>&amp; <dfn class="local col0 decl" id="750childItems" title='childItems' data-type='const WTF::Vector&lt;WTF::Ref&lt;WebCore::HistoryItem, WTF::RawPtrTraits&lt;WebCore::HistoryItem&gt;&gt;, 0, WTF::CrashOnOverflow, 16, WTF::FastMalloc&gt; &amp;' data-ref="750childItems" data-ref-filename="750childItems">childItems</dfn> = <a class="local col9 ref" href="#749item" title='item' data-ref="749item" data-ref-filename="749item">item</a>.<a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem8childrenEv" title='WebCore::HistoryItem::children' data-ref="_ZNK7WebCore11HistoryItem8childrenEv" data-ref-filename="_ZNK7WebCore11HistoryItem8childrenEv">children</a>();</td></tr>
<tr><th id="795">795</th><td>    <b>if</b> (<a class="local col0 ref" href="#750childItems" title='childItems' data-ref="750childItems" data-ref-filename="750childItems">childItems</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZNK3WTF6Vector4sizeEv" title='WTF::Vector::size' data-ref="_ZNK3WTF6Vector4sizeEv" data-ref-filename="_ZNK3WTF6Vector4sizeEv">size</a>() != <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree10childCountEv" title='WebCore::FrameTree::childCount' data-ref="_ZNK7WebCore9FrameTree10childCountEv" data-ref-filename="_ZNK7WebCore9FrameTree10childCountEv">childCount</a>())</td></tr>
<tr><th id="796">796</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="797">797</th><td>    </td></tr>
<tr><th id="798">798</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col1 decl" id="751item" title='item' data-type='const WTF::Ref&lt;WebCore::HistoryItem, WTF::RawPtrTraits&lt;WebCore::HistoryItem&gt;&gt; &amp;' data-ref="751item" data-ref-filename="751item">item</dfn> : <a class="local col0 ref" href="#750childItems" title='childItems' data-ref="750childItems" data-ref-filename="750childItems">childItems</a>) {</td></tr>
<tr><th id="799">799</th><td>        <b>if</b> (!<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4treeEv" title='WebCore::Frame::tree' data-ref="_ZNK7WebCore5Frame4treeEv" data-ref-filename="_ZNK7WebCore5Frame4treeEv">tree</a>().<a class="ref fn" href="../page/FrameTree.h.html#_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" title='WebCore::FrameTree::child' data-ref="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE" data-ref-filename="_ZNK7WebCore9FrameTree5childERKN3WTF10AtomStringE">child</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/AtomString.h.html#_ZN3WTF10AtomStringC1ERKNS_6StringE" title='WTF::AtomString::AtomString' data-ref="_ZN3WTF10AtomStringC1ERKNS_6StringE" data-ref-filename="_ZN3WTF10AtomStringC1ERKNS_6StringE"></a><a class="local col1 ref" href="#751item" title='item' data-ref="751item" data-ref-filename="751item">item</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem6targetEv" title='WebCore::HistoryItem::target' data-ref="_ZNK7WebCore11HistoryItem6targetEv" data-ref-filename="_ZNK7WebCore11HistoryItem6targetEv">target</a>()))</td></tr>
<tr><th id="800">800</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="801">801</th><td>    }</td></tr>
<tr><th id="802">802</th><td>    </td></tr>
<tr><th id="803">803</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="804">804</th><td>}</td></tr>
<tr><th id="805">805</th><td></td></tr>
<tr><th id="806">806</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" title='WebCore::FrameLoader::HistoryController::updateBackForwardListClippedAtTarget' data-ref="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController36updateBackForwardListClippedAtTargetEb">updateBackForwardListClippedAtTarget</dfn>(<em>bool</em> <dfn class="local col2 decl" id="752doClip" title='doClip' data-type='bool' data-ref="752doClip" data-ref-filename="752doClip">doClip</dfn>)</td></tr>
<tr><th id="807">807</th><td>{</td></tr>
<tr><th id="808">808</th><td>    <i>// In the case of saving state about a page with frames, we store a tree of items that mirrors the frame tree.  </i></td></tr>
<tr><th id="809">809</th><td><i>    // The item that was the target of the user's navigation is designated as the "targetItem".  </i></td></tr>
<tr><th id="810">810</th><td><i>    // When this function is called with doClip=true we're able to create the whole tree except for the target's children, </i></td></tr>
<tr><th id="811">811</th><td><i>    // which will be loaded in the future. That part of the tree will be filled out as the child loads are committed.</i></td></tr>
<tr><th id="812">812</th><td></td></tr>
<tr><th id="813">813</th><td>    <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col3 decl" id="753page" title='page' data-type='WebCore::Page *' data-ref="753page" data-ref-filename="753page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="814">814</th><td>    <b>if</b> (!<a class="local col3 ref" href="#753page" title='page' data-ref="753page" data-ref-filename="753page">page</a>)</td></tr>
<tr><th id="815">815</th><td>        <b>return</b>;</td></tr>
<tr><th id="816">816</th><td></td></tr>
<tr><th id="817">817</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader13urlForHistoryEv" title='WebCore::DocumentLoader::urlForHistory' data-ref="_ZNK7WebCore14DocumentLoader13urlForHistoryEv" data-ref-filename="_ZNK7WebCore14DocumentLoader13urlForHistoryEv">urlForHistory</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="818">818</th><td>        <b>return</b>;</td></tr>
<tr><th id="819">819</th><td></td></tr>
<tr><th id="820">820</th><td>    <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>&amp; <dfn class="local col4 decl" id="754frameLoader" title='frameLoader' data-type='WebCore::FrameLoader &amp;' data-ref="754frameLoader" data-ref-filename="754frameLoader">frameLoader</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame9mainFrameEv" title='WebCore::Frame::mainFrame' data-ref="_ZNK7WebCore5Frame9mainFrameEv" data-ref-filename="_ZNK7WebCore5Frame9mainFrameEv">mainFrame</a>().<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>();</td></tr>
<tr><th id="821">821</th><td></td></tr>
<tr><th id="822">822</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <dfn class="local col5 decl" id="755topItem" title='topItem' data-type='Ref&lt;WebCore::HistoryItem&gt;' data-ref="755topItem" data-ref-filename="755topItem">topItem</dfn> = <a class="local col4 ref" href="#754frameLoader" title='frameLoader' data-ref="754frameLoader" data-ref-filename="754frameLoader">frameLoader</a>.<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" title='WebCore::FrameLoader::HistoryController::createItemTree' data-ref="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb">createItemTree</a>(<span class='refarg'><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a></span>, <a class="local col2 ref" href="#752doClip" title='doClip' data-ref="752doClip" data-ref-filename="752doClip">doClip</a>);</td></tr>
<tr><th id="823">823</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p updateBackForwardListClippedAtTarget: Adding backforward item %p in frame %p (main frame %d) %s&quot;, this, topItem.ptr(), &amp;m_frame, m_frame.isMainFrame(), m_frame.loader().documentLoader()-&gt;url().string().utf8().data())" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p updateBackForwardListClippedAtTarget: Adding backforward item %p in frame %p (main frame %d) %s"</q>, <b>this</b>, <a class="local col5 ref" href="#755topItem" title='topItem' data-ref="755topItem" data-ref-filename="755topItem">topItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3Ref3ptrEv" title='WTF::Ref::ptr' data-ref="_ZNK3WTF3Ref3ptrEv" data-ref-filename="_ZNK3WTF3Ref3ptrEv">ptr</a>(), &amp;<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame11isMainFrameEv" title='WebCore::Frame::isMainFrame' data-ref="_ZNK7WebCore5Frame11isMainFrameEv" data-ref-filename="_ZNK7WebCore5Frame11isMainFrameEv">isMainFrame</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>()-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL6stringEv" title='WTF::URL::string' data-ref="_ZNK3WTF3URL6stringEv" data-ref-filename="_ZNK3WTF3URL6stringEv">string</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>());</td></tr>
<tr><th id="824">824</th><td></td></tr>
<tr><th id="825">825</th><td>    <a class="local col3 ref" href="#753page" title='page' data-ref="753page" data-ref-filename="753page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page11backForwardEv" title='WebCore::Page::backForward' data-ref="_ZNK7WebCore4Page11backForwardEv" data-ref-filename="_ZNK7WebCore4Page11backForwardEv">backForward</a>().<a class="ref fn" href="../history/BackForwardController.h.html#_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE" title='WebCore::BackForwardController::addItem' data-ref="_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE">addItem</a>(<a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(topItem)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col5 ref" href="#755topItem" title='topItem' data-ref="755topItem" data-ref-filename="755topItem">topItem</a></span>));</td></tr>
<tr><th id="826">826</th><td>}</td></tr>
<tr><th id="827">827</th><td></td></tr>
<tr><th id="828">828</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" title='WebCore::FrameLoader::HistoryController::updateCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController17updateCurrentItemEv">updateCurrentItem</dfn>()</td></tr>
<tr><th id="829">829</th><td>{</td></tr>
<tr><th id="830">830</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="831">831</th><td>        <b>return</b>;</td></tr>
<tr><th id="832">832</th><td></td></tr>
<tr><th id="833">833</th><td>    <a class="type" href="DocumentLoader.h.html#WebCore::DocumentLoader" title='WebCore::DocumentLoader' data-ref="WebCore::DocumentLoader" data-ref-filename="WebCore..DocumentLoader">DocumentLoader</a>* <dfn class="local col6 decl" id="756documentLoader" title='documentLoader' data-type='WebCore::DocumentLoader *' data-ref="756documentLoader" data-ref-filename="756documentLoader">documentLoader</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader14documentLoaderEv" title='WebCore::FrameLoader::documentLoader' data-ref="_ZNK7WebCore11FrameLoader14documentLoaderEv" data-ref-filename="_ZNK7WebCore11FrameLoader14documentLoaderEv">documentLoader</a>();</td></tr>
<tr><th id="834">834</th><td></td></tr>
<tr><th id="835">835</th><td>    <b>if</b> (!<a class="local col6 ref" href="#756documentLoader" title='documentLoader' data-ref="756documentLoader" data-ref-filename="756documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader14unreachableURLEv" title='WebCore::DocumentLoader::unreachableURL' data-ref="_ZNK7WebCore14DocumentLoader14unreachableURLEv" data-ref-filename="_ZNK7WebCore14DocumentLoader14unreachableURLEv">unreachableURL</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZNK3WTF3URL7isEmptyEv" title='WTF::URL::isEmpty' data-ref="_ZNK3WTF3URL7isEmptyEv" data-ref-filename="_ZNK3WTF3URL7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="836">836</th><td>        <b>return</b>;</td></tr>
<tr><th id="837">837</th><td></td></tr>
<tr><th id="838">838</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem3urlEv" title='WebCore::HistoryItem::url' data-ref="_ZNK7WebCore11HistoryItem3urlEv" data-ref-filename="_ZNK7WebCore11HistoryItem3urlEv">url</a>() <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTFneERKNS_3URLES2_" title='WTF::operator!=' data-ref="_ZN3WTFneERKNS_3URLES2_" data-ref-filename="_ZN3WTFneERKNS_3URLES2_">!=</a> <a class="local col6 ref" href="#756documentLoader" title='documentLoader' data-ref="756documentLoader" data-ref-filename="756documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZNK7WebCore14DocumentLoader3urlEv" title='WebCore::DocumentLoader::url' data-ref="_ZNK7WebCore14DocumentLoader3urlEv" data-ref-filename="_ZNK7WebCore14DocumentLoader3urlEv">url</a>()) {</td></tr>
<tr><th id="839">839</th><td>        <i>// We ended up on a completely different URL this time, so the HistoryItem</i></td></tr>
<tr><th id="840">840</th><td><i>        // needs to be re-initialized.  Preserve the isTargetItem flag as it is a</i></td></tr>
<tr><th id="841">841</th><td><i>        // property of how this HistoryItem was originally created and is not</i></td></tr>
<tr><th id="842">842</th><td><i>        // dependent on the document.</i></td></tr>
<tr><th id="843">843</th><td>        <em>bool</em> <dfn class="local col7 decl" id="757isTargetItem" title='isTargetItem' data-type='bool' data-ref="757isTargetItem" data-ref-filename="757isTargetItem">isTargetItem</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem12isTargetItemEv" title='WebCore::HistoryItem::isTargetItem' data-ref="_ZNK7WebCore11HistoryItem12isTargetItemEv" data-ref-filename="_ZNK7WebCore11HistoryItem12isTargetItemEv">isTargetItem</a>();</td></tr>
<tr><th id="844">844</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem5resetEv" title='WebCore::HistoryItem::reset' data-ref="_ZN7WebCore11HistoryItem5resetEv" data-ref-filename="_ZN7WebCore11HistoryItem5resetEv">reset</a>();</td></tr>
<tr><th id="845">845</th><td>        <a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::initializeItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14initializeItemERNS_11HistoryItemE">initializeItem</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a></span>);</td></tr>
<tr><th id="846">846</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem15setIsTargetItemEb" title='WebCore::HistoryItem::setIsTargetItem' data-ref="_ZN7WebCore11HistoryItem15setIsTargetItemEb" data-ref-filename="_ZN7WebCore11HistoryItem15setIsTargetItemEb">setIsTargetItem</a>(<a class="local col7 ref" href="#757isTargetItem" title='isTargetItem' data-ref="757isTargetItem" data-ref-filename="757isTargetItem">isTargetItem</a>);</td></tr>
<tr><th id="847">847</th><td>    } <b>else</b> {</td></tr>
<tr><th id="848">848</th><td>        <i>// Even if the final URL didn't change, the form data may have changed.</i></td></tr>
<tr><th id="849">849</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE" title='WebCore::HistoryItem::setFormInfoFromRequest' data-ref="_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE" data-ref-filename="_ZN7WebCore11HistoryItem22setFormInfoFromRequestERKNS_15ResourceRequestE">setFormInfoFromRequest</a>(<a class="local col6 ref" href="#756documentLoader" title='documentLoader' data-ref="756documentLoader" data-ref-filename="756documentLoader">documentLoader</a>-&gt;<a class="ref fn" href="DocumentLoader.h.html#_ZN7WebCore14DocumentLoader7requestEv" title='WebCore::DocumentLoader::request' data-ref="_ZN7WebCore14DocumentLoader7requestEv" data-ref-filename="_ZN7WebCore14DocumentLoader7requestEv">request</a>());</td></tr>
<tr><th id="850">850</th><td>    }</td></tr>
<tr><th id="851">851</th><td>}</td></tr>
<tr><th id="852">852</th><td></td></tr>
<tr><th id="853">853</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController9pushStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraitsIS4_331066" title='WebCore::FrameLoader::HistoryController::pushState' data-ref="_ZN7WebCore11FrameLoader17HistoryController9pushStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraitsIS4_331066" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController9pushStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraitsIS4_331066">pushState</dfn>(<a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RefPtr" title='WTF::RefPtr' data-ref="WTF::RefPtr" data-ref-filename="WTF..RefPtr">RefPtr</a>&lt;<a class="type" href="../bindings/js/SerializedScriptValue.h.html#WebCore::SerializedScriptValue" title='WebCore::SerializedScriptValue' data-ref="WebCore::SerializedScriptValue" data-ref-filename="WebCore..SerializedScriptValue">SerializedScriptValue</a>&gt;&amp;&amp; <dfn class="local col8 decl" id="758stateObject" title='stateObject' data-type='RefPtr&lt;WebCore::SerializedScriptValue&gt; &amp;&amp;' data-ref="758stateObject" data-ref-filename="758stateObject">stateObject</dfn>, <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col9 decl" id="759title" title='title' data-type='const WTF::String &amp;' data-ref="759title" data-ref-filename="759title">title</dfn>, <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col0 decl" id="760urlString" title='urlString' data-type='const WTF::String &amp;' data-ref="760urlString" data-ref-filename="760urlString">urlString</dfn>)</td></tr>
<tr><th id="854">854</th><td>{</td></tr>
<tr><th id="855">855</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="856">856</th><td>        <b>return</b>;</td></tr>
<tr><th id="857">857</th><td></td></tr>
<tr><th id="858">858</th><td>    <a class="type" href="../page/Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>* <dfn class="local col1 decl" id="761page" title='page' data-type='WebCore::Page *' data-ref="761page" data-ref-filename="761page">page</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>();</td></tr>
<tr><th id="859">859</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(page)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 859, __PRETTY_FUNCTION__, &quot;page&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(859, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3570); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#761page" title='page' data-ref="761page" data-ref-filename="761page">page</a>);</td></tr>
<tr><th id="860">860</th><td></td></tr>
<tr><th id="861">861</th><td>    <em>bool</em> <dfn class="local col2 decl" id="762shouldRestoreScrollPosition" title='shouldRestoreScrollPosition' data-type='bool' data-ref="762shouldRestoreScrollPosition" data-ref-filename="762shouldRestoreScrollPosition">shouldRestoreScrollPosition</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" title='WebCore::HistoryItem::shouldRestoreScrollPosition' data-ref="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" data-ref-filename="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv">shouldRestoreScrollPosition</a>();</td></tr>
<tr><th id="862">862</th><td>    </td></tr>
<tr><th id="863">863</th><td>    <i>// Get a HistoryItem tree for the current frame tree.</i></td></tr>
<tr><th id="864">864</th><td>    <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Ref" title='WTF::Ref' data-ref="WTF::Ref" data-ref-filename="WTF..Ref">Ref</a>&lt;<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>&gt; <dfn class="local col3 decl" id="763topItem" title='topItem' data-type='Ref&lt;WebCore::HistoryItem&gt;' data-ref="763topItem" data-ref-filename="763topItem">topItem</dfn> = <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame9mainFrameEv" title='WebCore::Frame::mainFrame' data-ref="_ZNK7WebCore5Frame9mainFrameEv" data-ref-filename="_ZNK7WebCore5Frame9mainFrameEv">mainFrame</a>().<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZNK7WebCore11FrameLoader7historyEv" title='WebCore::FrameLoader::history' data-ref="_ZNK7WebCore11FrameLoader7historyEv" data-ref-filename="_ZNK7WebCore11FrameLoader7historyEv">history</a>().<a class="member fn" href="#_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" title='WebCore::FrameLoader::HistoryController::createItemTree' data-ref="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController14createItemTreeERNS_5FrameEb">createItemTree</a>(<span class='refarg'><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a></span>, <b>false</b>);</td></tr>
<tr><th id="865">865</th><td>    </td></tr>
<tr><th id="866">866</th><td>    <i>// Override data in the current item (created by createItemTree) to reflect</i></td></tr>
<tr><th id="867">867</th><td><i>    // the pushState() arguments.</i></td></tr>
<tr><th id="868">868</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" title='WebCore::HistoryItem::setTitle' data-ref="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE">setTitle</a>(<a class="local col9 ref" href="#759title" title='title' data-ref="759title" data-ref-filename="759title">title</a>);</td></tr>
<tr><th id="869">869</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" title='WebCore::HistoryItem::setStateObject' data-ref="_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE">setStateObject</a>(<a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(stateObject)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col8 ref" href="#758stateObject" title='stateObject' data-ref="758stateObject" data-ref-filename="758stateObject">stateObject</a></span>));</td></tr>
<tr><th id="870">870</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE" title='WebCore::HistoryItem::setURLString' data-ref="_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE">setURLString</a>(<a class="local col0 ref" href="#760urlString" title='urlString' data-ref="760urlString" data-ref-filename="760urlString">urlString</a>);</td></tr>
<tr><th id="871">871</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem30setShouldRestoreScrollPositionEb" title='WebCore::HistoryItem::setShouldRestoreScrollPosition' data-ref="_ZN7WebCore11HistoryItem30setShouldRestoreScrollPositionEb" data-ref-filename="_ZN7WebCore11HistoryItem30setShouldRestoreScrollPositionEb">setShouldRestoreScrollPosition</a>(<a class="local col2 ref" href="#762shouldRestoreScrollPosition" title='shouldRestoreScrollPosition' data-ref="762shouldRestoreScrollPosition" data-ref-filename="762shouldRestoreScrollPosition">shouldRestoreScrollPosition</a>);</td></tr>
<tr><th id="872">872</th><td></td></tr>
<tr><th id="873">873</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p pushState: Adding top item %p, setting url of current item %p to %s, scrollRestoration is %s&quot;, this, topItem.ptr(), m_currentItem.get(), urlString.ascii().data(), topItem-&gt;shouldRestoreScrollPosition() ? &quot;auto&quot; : &quot;manual&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p pushState: Adding top item %p, setting url of current item %p to %s, scrollRestoration is %s"</q>, <b>this</b>, <a class="local col3 ref" href="#763topItem" title='topItem' data-ref="763topItem" data-ref-filename="763topItem">topItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3Ref3ptrEv" title='WTF::Ref::ptr' data-ref="_ZNK3WTF3Ref3ptrEv" data-ref-filename="_ZNK3WTF3Ref3ptrEv">ptr</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>(), <a class="local col0 ref" href="#760urlString" title='urlString' data-ref="760urlString" data-ref-filename="760urlString">urlString</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String5asciiEv" title='WTF::String::ascii' data-ref="_ZNK3WTF6String5asciiEv" data-ref-filename="_ZNK3WTF6String5asciiEv">ascii</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>(), <a class="local col3 ref" href="#763topItem" title='topItem' data-ref="763topItem" data-ref-filename="763topItem">topItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" title='WebCore::HistoryItem::shouldRestoreScrollPosition' data-ref="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" data-ref-filename="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv">shouldRestoreScrollPosition</a>() ? <q>"auto"</q> : <q>"manual"</q>);</td></tr>
<tr><th id="874">874</th><td></td></tr>
<tr><th id="875">875</th><td>    <a class="local col1 ref" href="#761page" title='page' data-ref="761page" data-ref-filename="761page">page</a>-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page11backForwardEv" title='WebCore::Page::backForward' data-ref="_ZNK7WebCore4Page11backForwardEv" data-ref-filename="_ZNK7WebCore4Page11backForwardEv">backForward</a>().<a class="ref fn" href="../history/BackForwardController.h.html#_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE" title='WebCore::BackForwardController::addItem' data-ref="_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore21BackForwardController7addItemEON3WTF3RefINS_11HistoryItemENS1_12RawPtrTraitsIS3_EEEE">addItem</a>(<a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(topItem)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col3 ref" href="#763topItem" title='topItem' data-ref="763topItem" data-ref-filename="763topItem">topItem</a></span>));</td></tr>
<tr><th id="876">876</th><td></td></tr>
<tr><th id="877">877</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>())</td></tr>
<tr><th id="878">878</th><td>        <b>return</b>;</td></tr>
<tr><th id="879">879</th><td></td></tr>
<tr><th id="880">880</th><td>    <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="local col1 ref" href="#761page" title='page' data-ref="761page" data-ref-filename="761page">page</a></span>, <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE" data-ref-filename="_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE">(</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1Ev" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1Ev" data-ref-filename="_ZN3WTF3URLC1Ev">{</a> }, <a class="local col0 ref" href="#760urlString" title='urlString' data-ref="760urlString" data-ref-filename="760urlString">urlString</a>));</td></tr>
<tr><th id="881">881</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" title='WebCore::FrameLoaderClient::updateGlobalHistory' data-ref="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv">updateGlobalHistory</a>();</td></tr>
<tr><th id="882">882</th><td>}</td></tr>
<tr><th id="883">883</th><td></td></tr>
<tr><th id="884">884</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController12replaceStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraits13870819" title='WebCore::FrameLoader::HistoryController::replaceState' data-ref="_ZN7WebCore11FrameLoader17HistoryController12replaceStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraits13870819" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController12replaceStateEON3WTF6RefPtrINS_21SerializedScriptValueENS2_12RawPtrTraitsIS4_EENS2_21DefaultRefDerefTraits13870819">replaceState</dfn>(<a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RefPtr" title='WTF::RefPtr' data-ref="WTF::RefPtr" data-ref-filename="WTF..RefPtr">RefPtr</a>&lt;<a class="type" href="../bindings/js/SerializedScriptValue.h.html#WebCore::SerializedScriptValue" title='WebCore::SerializedScriptValue' data-ref="WebCore::SerializedScriptValue" data-ref-filename="WebCore..SerializedScriptValue">SerializedScriptValue</a>&gt;&amp;&amp; <dfn class="local col4 decl" id="764stateObject" title='stateObject' data-type='RefPtr&lt;WebCore::SerializedScriptValue&gt; &amp;&amp;' data-ref="764stateObject" data-ref-filename="764stateObject">stateObject</dfn>, <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col5 decl" id="765title" title='title' data-type='const WTF::String &amp;' data-ref="765title" data-ref-filename="765title">title</dfn>, <em>const</em> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col6 decl" id="766urlString" title='urlString' data-type='const WTF::String &amp;' data-ref="766urlString" data-ref-filename="766urlString">urlString</dfn>)</td></tr>
<tr><th id="885">885</th><td>{</td></tr>
<tr><th id="886">886</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>)</td></tr>
<tr><th id="887">887</th><td>        <b>return</b>;</td></tr>
<tr><th id="888">888</th><td></td></tr>
<tr><th id="889">889</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogHistory, &quot;HistoryController %p replaceState: Setting url of current item %p to %s scrollRestoration %s&quot;, this, m_currentItem.get(), urlString.ascii().data(), m_currentItem-&gt;shouldRestoreScrollPosition() ? &quot;auto&quot; : &quot;manual&quot;)" data-ref="_M/LOG">LOG</a>(History, <q>"HistoryController %p replaceState: Setting url of current item %p to %s scrollRestoration %s"</q>, <b>this</b>, <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtr3getEv" title='WTF::RefPtr::get' data-ref="_ZNK3WTF6RefPtr3getEv" data-ref-filename="_ZNK3WTF6RefPtr3getEv">get</a>(), <a class="local col6 ref" href="#766urlString" title='urlString' data-ref="766urlString" data-ref-filename="766urlString">urlString</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String5asciiEv" title='WTF::String::ascii' data-ref="_ZNK3WTF6String5asciiEv" data-ref-filename="_ZNK3WTF6String5asciiEv">ascii</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>(), <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" title='WebCore::HistoryItem::shouldRestoreScrollPosition' data-ref="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv" data-ref-filename="_ZNK7WebCore11HistoryItem27shouldRestoreScrollPositionEv">shouldRestoreScrollPosition</a>() ? <q>"auto"</q> : <q>"manual"</q>);</td></tr>
<tr><th id="890">890</th><td></td></tr>
<tr><th id="891">891</th><td>    <b>if</b> (!<a class="local col6 ref" href="#766urlString" title='urlString' data-ref="766urlString" data-ref-filename="766urlString">urlString</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="892">892</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE" title='WebCore::HistoryItem::setURLString' data-ref="_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem12setURLStringERKN3WTF6StringE">setURLString</a>(<a class="local col6 ref" href="#766urlString" title='urlString' data-ref="766urlString" data-ref-filename="766urlString">urlString</a>);</td></tr>
<tr><th id="893">893</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" title='WebCore::HistoryItem::setTitle' data-ref="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem8setTitleERKN3WTF6StringE">setTitle</a>(<a class="local col5 ref" href="#765title" title='title' data-ref="765title" data-ref-filename="765title">title</a>);</td></tr>
<tr><th id="894">894</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" title='WebCore::HistoryItem::setStateObject' data-ref="_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore11HistoryItem14setStateObjectEON3WTF6RefPtrINS_21SerializedScriptValueENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE">setStateObject</a>(<a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(stateObject)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#764stateObject" title='stateObject' data-ref="764stateObject" data-ref-filename="764stateObject">stateObject</a></span>));</td></tr>
<tr><th id="895">895</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem11setFormDataEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" title='WebCore::HistoryItem::setFormData' data-ref="_ZN7WebCore11HistoryItem11setFormDataEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore11HistoryItem11setFormDataEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE">setFormData</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtrC1EPT_" title='WTF::RefPtr::RefPtr&lt;T, type-parameter-0-1, type-parameter-0-2&gt;' data-ref="_ZN3WTF6RefPtrC1EPT_" data-ref-filename="_ZN3WTF6RefPtrC1EPT_"></a><b>nullptr</b>);</td></tr>
<tr><th id="896">896</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../history/HistoryItem.h.html#_ZN7WebCore11HistoryItem18setFormContentTypeERKN3WTF6StringE" title='WebCore::HistoryItem::setFormContentType' data-ref="_ZN7WebCore11HistoryItem18setFormContentTypeERKN3WTF6StringE" data-ref-filename="_ZN7WebCore11HistoryItem18setFormContentTypeERKN3WTF6StringE">setFormContentType</a>(<a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1Ev" title='WTF::String::String' data-ref="_ZN3WTF6StringC1Ev" data-ref-filename="_ZN3WTF6StringC1Ev">(</a>));</td></tr>
<tr><th id="897">897</th><td></td></tr>
<tr><th id="898">898</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_frame.page())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, 898, __PRETTY_FUNCTION__, &quot;m_frame.page()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(898, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/loader/HistoryController.cpp&quot;, __PRETTY_FUNCTION__, 3572); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>());</td></tr>
<tr><th id="899">899</th><td>    <b>if</b> (<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()-&gt;<a class="ref fn" href="../page/Page.h.html#_ZNK7WebCore4Page20usesEphemeralSessionEv" title='WebCore::Page::usesEphemeralSession' data-ref="_ZNK7WebCore4Page20usesEphemeralSessionEv" data-ref-filename="_ZNK7WebCore4Page20usesEphemeralSessionEv">usesEphemeralSession</a>())</td></tr>
<tr><th id="900">900</th><td>        <b>return</b>;</td></tr>
<tr><th id="901">901</th><td></td></tr>
<tr><th id="902">902</th><td>    <a class="ref fn" href="#_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" title='WebCore::addVisitedLink' data-ref="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE" data-ref-filename="_ZN7WebCoreL14addVisitedLinkERNS_4PageERKN3WTF3URLE">addVisitedLink</a>(<span class='refarg'>*<a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZNK7WebCore5Frame4pageEv" title='WebCore::Frame::page' data-ref="_ZNK7WebCore5Frame4pageEv" data-ref-filename="_ZNK7WebCore5Frame4pageEv">page</a>()</span>, <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#WTF::URL" title='WTF::URL' data-ref="WTF::URL" data-ref-filename="WTF..URL">URL</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE" data-ref-filename="_ZN3WTF3URLC1ERKS0_RKNS_6StringEPKNS_15URLTextEncodingE">(</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1Ev" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1Ev" data-ref-filename="_ZN3WTF3URLC1Ev">{</a> }, <a class="local col6 ref" href="#766urlString" title='urlString' data-ref="766urlString" data-ref-filename="766urlString">urlString</a>));</td></tr>
<tr><th id="903">903</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_frame" title='WebCore::FrameLoader::HistoryController::m_frame' data-ref="WebCore::FrameLoader::HistoryController::m_frame" data-ref-filename="WebCore..FrameLoader..HistoryController..m_frame">m_frame</a>.<a class="ref fn" href="../page/Frame.h.html#_ZN7WebCore5Frame6loaderEv" title='WebCore::Frame::loader' data-ref="_ZN7WebCore5Frame6loaderEv" data-ref-filename="_ZN7WebCore5Frame6loaderEv">loader</a>().<a class="ref fn" href="FrameLoader.h.html#_ZN7WebCore11FrameLoader6clientEv" title='WebCore::FrameLoader::client' data-ref="_ZN7WebCore11FrameLoader6clientEv" data-ref-filename="_ZN7WebCore11FrameLoader6clientEv">client</a>().<a class="virtual ref fn" href="FrameLoaderClient.h.html#_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" title='WebCore::FrameLoaderClient::updateGlobalHistory' data-ref="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv" data-ref-filename="_ZN7WebCore17FrameLoaderClient19updateGlobalHistoryEv">updateGlobalHistory</a>();</td></tr>
<tr><th id="904">904</th><td>}</td></tr>
<tr><th id="905">905</th><td></td></tr>
<tr><th id="906">906</th><td><em>void</em> <a class="type" href="FrameLoader.h.html#WebCore::FrameLoader" title='WebCore::FrameLoader' data-ref="WebCore::FrameLoader" data-ref-filename="WebCore..FrameLoader">FrameLoader</a>::<a class="type" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController" title='WebCore::FrameLoader::HistoryController' data-ref="WebCore::FrameLoader::HistoryController" data-ref-filename="WebCore..FrameLoader..HistoryController">HistoryController</a>::<dfn class="decl def fn" id="_ZN7WebCore11FrameLoader17HistoryController18replaceCurrentItemEPNS_11HistoryItemE" title='WebCore::FrameLoader::HistoryController::replaceCurrentItem' data-ref="_ZN7WebCore11FrameLoader17HistoryController18replaceCurrentItemEPNS_11HistoryItemE" data-ref-filename="_ZN7WebCore11FrameLoader17HistoryController18replaceCurrentItemEPNS_11HistoryItemE">replaceCurrentItem</dfn>(<a class="type" href="../history/HistoryItem.h.html#WebCore::HistoryItem" title='WebCore::HistoryItem' data-ref="WebCore::HistoryItem" data-ref-filename="WebCore..HistoryItem">HistoryItem</a>* <dfn class="local col7 decl" id="767item" title='item' data-type='WebCore::HistoryItem *' data-ref="767item" data-ref-filename="767item">item</dfn>)</td></tr>
<tr><th id="907">907</th><td>{</td></tr>
<tr><th id="908">908</th><td>    <b>if</b> (!<a class="local col7 ref" href="#767item" title='item' data-ref="767item" data-ref-filename="767item">item</a>)</td></tr>
<tr><th id="909">909</th><td>        <b>return</b>;</td></tr>
<tr><th id="910">910</th><td></td></tr>
<tr><th id="911">911</th><td>    <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_previousItem" title='WebCore::FrameLoader::HistoryController::m_previousItem' data-ref="WebCore::FrameLoader::HistoryController::m_previousItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_previousItem">m_previousItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="912">912</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a><a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a>)</td></tr>
<tr><th id="913">913</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_provisionalItem" title='WebCore::FrameLoader::HistoryController::m_provisionalItem' data-ref="WebCore::FrameLoader::HistoryController::m_provisionalItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_provisionalItem">m_provisionalItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> <a class="local col7 ref" href="#767item" title='item' data-ref="767item" data-ref-filename="767item">item</a>;</td></tr>
<tr><th id="914">914</th><td>    <b>else</b></td></tr>
<tr><th id="915">915</th><td>        <a class="member field" href="HistoryController.h.html#WebCore::FrameLoader::HistoryController::m_currentItem" title='WebCore::FrameLoader::HistoryController::m_currentItem' data-ref="WebCore::FrameLoader::HistoryController::m_currentItem" data-ref-filename="WebCore..FrameLoader..HistoryController..m_currentItem">m_currentItem</a> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEPT_" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEPT_" data-ref-filename="_ZN3WTF6RefPtraSEPT_">=</a> <a class="local col7 ref" href="#767item" title='item' data-ref="767item" data-ref-filename="767item">item</a>;</td></tr>
<tr><th id="916">916</th><td>}</td></tr>
<tr><th id="917">917</th><td></td></tr>
<tr><th id="918">918</th><td>} <i>// namespace WebCore</i></td></tr>
<tr><th id="919">919</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource213.cpp.html'>webkit/WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource213.cpp</a><br/>Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
