<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PageColorSampler.cpp source code [webkit/Source/WebCore/page/PageColorSampler.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/WebCore/page/PageColorSampler.cpp'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>webkit</a>/<a href='../..'>Source</a>/<a href='..'>WebCore</a>/<a href='./'>page</a>/<a href='PageColorSampler.cpp.html'>PageColorSampler.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2021 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY</i></td></tr>
<tr><th id="14">14</th><td><i> * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</i></td></tr>
<tr><th id="15">15</th><td><i> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="16">16</th><td><i> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR</i></td></tr>
<tr><th id="17">17</th><td><i> * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</i></td></tr>
<tr><th id="18">18</th><td><i> * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</i></td></tr>
<tr><th id="19">19</th><td><i> * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</i></td></tr>
<tr><th id="20">20</th><td><i> * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY</i></td></tr>
<tr><th id="21">21</th><td><i> * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</i></td></tr>
<tr><th id="22">22</th><td><i> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</i></td></tr>
<tr><th id="23">23</th><td><i> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="24">24</th><td><i> */</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="PageColorSampler.h.html">"PageColorSampler.h"</a></u></td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../rendering/ContentfulPaintChecker.h.html">"ContentfulPaintChecker.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../dom/Document.h.html">"Document.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../dom/Element.h.html">"Element.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="Frame.h.html">"Frame.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="FrameSnapshotting.h.html">"FrameSnapshotting.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="FrameView.h.html">"FrameView.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../html/HTMLCanvasElement.h.html">"HTMLCanvasElement.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../html/HTMLIFrameElement.h.html">"HTMLIFrameElement.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../rendering/HitTestRequest.h.html">"HitTestRequest.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../rendering/HitTestResult.h.html">"HitTestResult.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../platform/graphics/ImageBuffer.h.html">"ImageBuffer.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../platform/graphics/IntPoint.h.html">"IntPoint.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../platform/graphics/IntRect.h.html">"IntRect.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../platform/graphics/IntSize.h.html">"IntSize.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../platform/Logging.h.html">"Logging.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../dom/Node.h.html">"Node.h"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="Page.h.html">"Page.h"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../platform/graphics/PixelBuffer.h.html">"PixelBuffer.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../platform/RegistrableDomain.h.html">"RegistrableDomain.h"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../rendering/RenderImage.h.html">"RenderImage.h"</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../rendering/RenderObject.h.html">"RenderObject.h"</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../rendering/style/RenderStyle.h.html">"RenderStyle.h"</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../WebKitBuild/Debug/DerivedSources/WebCore/Settings.h.html">"Settings.h"</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="../style/Styleable.h.html">"Styleable.h"</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../animation/WebAnimation.h.html">"WebAnimation.h"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/ListHashSet.h.html">&lt;wtf/ListHashSet.h&gt;</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/OptionSet.h.html">&lt;wtf/OptionSet.h&gt;</a></u></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html">&lt;wtf/Ref.h&gt;</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html">&lt;wtf/RefPtr.h&gt;</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html">&lt;wtf/URL.h&gt;</a></u></td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td><b>namespace</b> <span class="namespace">WebCore</span> {</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><em>static</em> <em>bool</em> <dfn class="decl def fn" id="_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE" title='WebCore::isValidSampleLocation' data-ref="_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE" data-ref-filename="_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE">isValidSampleLocation</dfn>(<a class="type" href="../dom/Document.h.html#WebCore::Document" title='WebCore::Document' data-ref="WebCore::Document" data-ref-filename="WebCore..Document">Document</a>&amp; <dfn class="local col7 decl" id="567document" title='document' data-type='WebCore::Document &amp;' data-ref="567document" data-ref-filename="567document">document</dfn>, <em>const</em> <a class="type" href="../platform/graphics/IntPoint.h.html#WebCore::IntPoint" title='WebCore::IntPoint' data-ref="WebCore::IntPoint" data-ref-filename="WebCore..IntPoint">IntPoint</a>&amp; <dfn class="local col8 decl" id="568location" title='location' data-type='const WebCore::IntPoint &amp;' data-ref="568location" data-ref-filename="568location">location</dfn>)</td></tr>
<tr><th id="63">63</th><td>{</td></tr>
<tr><th id="64">64</th><td>    <i>// FIXME: &lt;<a href="https://webkit.org/b/225167">https://webkit.org/b/225167</a>&gt; (Sampled Page Top Color: hook into painting logic instead of taking snapshots)</i></td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td>    <b>constexpr</b> <a class="type" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::OptionSet" title='WTF::OptionSet' data-ref="WTF::OptionSet" data-ref-filename="WTF..OptionSet">OptionSet</a>&lt;<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>&gt; <dfn class="local col9 decl" id="569hitTestRequestTypes" title='hitTestRequestTypes' data-type='const OptionSet&lt;HitTestRequest::Type&gt;' data-ref="569hitTestRequestTypes" data-ref-filename="569hitTestRequestTypes">hitTestRequestTypes</dfn> <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/OptionSet.h.html#_ZN3WTF9OptionSetC1ESt16initializer_listIT_E" title='WTF::OptionSet::OptionSet&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9OptionSetC1ESt16initializer_listIT_E" data-ref-filename="_ZN3WTF9OptionSetC1ESt16initializer_listIT_E">{</a> <a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>::<a class="enum" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type::ReadOnly" title='WebCore::HitTestRequest::Type::ReadOnly' data-ref="WebCore::HitTestRequest::Type::ReadOnly" data-ref-filename="WebCore..HitTestRequest..Type..ReadOnly">ReadOnly</a>, <a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>::<a class="enum" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type::IgnoreCSSPointerEventsProperty" title='WebCore::HitTestRequest::Type::IgnoreCSSPointerEventsProperty' data-ref="WebCore::HitTestRequest::Type::IgnoreCSSPointerEventsProperty" data-ref-filename="WebCore..HitTestRequest..Type..IgnoreCSSPointerEventsProperty">IgnoreCSSPointerEventsProperty</a>, <a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>::<a class="enum" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type::DisallowUserAgentShadowContent" title='WebCore::HitTestRequest::Type::DisallowUserAgentShadowContent' data-ref="WebCore::HitTestRequest::Type::DisallowUserAgentShadowContent" data-ref-filename="WebCore..HitTestRequest..Type..DisallowUserAgentShadowContent">DisallowUserAgentShadowContent</a>, <a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>::<a class="enum" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type::CollectMultipleElements" title='WebCore::HitTestRequest::Type::CollectMultipleElements' data-ref="WebCore::HitTestRequest::Type::CollectMultipleElements" data-ref-filename="WebCore..HitTestRequest..Type..CollectMultipleElements">CollectMultipleElements</a>, <a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest" title='WebCore::HitTestRequest' data-ref="WebCore::HitTestRequest" data-ref-filename="WebCore..HitTestRequest">HitTestRequest</a>::<a class="type" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type" title='WebCore::HitTestRequest::Type' data-ref="WebCore::HitTestRequest::Type" data-ref-filename="WebCore..HitTestRequest..Type">Type</a>::<a class="enum" href="../rendering/HitTestRequest.h.html#WebCore::HitTestRequest::Type::IncludeAllElementsUnderPoint" title='WebCore::HitTestRequest::Type::IncludeAllElementsUnderPoint' data-ref="WebCore::HitTestRequest::Type::IncludeAllElementsUnderPoint" data-ref-filename="WebCore..HitTestRequest..Type..IncludeAllElementsUnderPoint">IncludeAllElementsUnderPoint</a> };</td></tr>
<tr><th id="67">67</th><td>    <a class="type" href="../rendering/HitTestResult.h.html#WebCore::HitTestResult" title='WebCore::HitTestResult' data-ref="WebCore::HitTestResult" data-ref-filename="WebCore..HitTestResult">HitTestResult</a> <dfn class="local col0 decl" id="570hitTestResult" title='hitTestResult' data-type='WebCore::HitTestResult' data-ref="570hitTestResult" data-ref-filename="570hitTestResult">hitTestResult</dfn><a class="ref fn" href="../rendering/HitTestResult.h.html#_ZN7WebCore13HitTestResultC1ERKNS_11LayoutPointE" title='WebCore::HitTestResult::HitTestResult' data-ref="_ZN7WebCore13HitTestResultC1ERKNS_11LayoutPointE" data-ref-filename="_ZN7WebCore13HitTestResultC1ERKNS_11LayoutPointE">(</a><a class="ref fn fake" href="../platform/graphics/LayoutPoint.h.html#_ZN7WebCore11LayoutPointC1ERKNS_8IntPointE" title='WebCore::LayoutPoint::LayoutPoint' data-ref="_ZN7WebCore11LayoutPointC1ERKNS_8IntPointE" data-ref-filename="_ZN7WebCore11LayoutPointC1ERKNS_8IntPointE"></a><a class="local col8 ref" href="#568location" title='location' data-ref="568location" data-ref-filename="568location">location</a>);</td></tr>
<tr><th id="68">68</th><td>    <a class="local col7 ref" href="#567document" title='document' data-ref="567document" data-ref-filename="567document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZN7WebCore8Document7hitTestERKNS_14HitTestRequestERNS_13HitTestResultE" title='WebCore::Document::hitTest' data-ref="_ZN7WebCore8Document7hitTestERKNS_14HitTestRequestERNS_13HitTestResultE" data-ref-filename="_ZN7WebCore8Document7hitTestERKNS_14HitTestRequestERNS_13HitTestResultE">hitTest</a>(<a class="ref fn fake" href="../../../WebKitBuild/Debug/usr/local/include/wtf/OptionSet.h.html#103" title='WTF::OptionSet&lt;WebCore::HitTestRequest::Type&gt;::OptionSet' data-ref="_ZN3WTF9OptionSetIN7WebCore14HitTestRequest4TypeEEC1ERKS4_" data-ref-filename="_ZN3WTF9OptionSetIN7WebCore14HitTestRequest4TypeEEC1ERKS4_"></a><a class="ref fn fake" href="../rendering/HitTestRequest.h.html#_ZN7WebCore14HitTestRequestC1EN3WTF9OptionSetINS0_4TypeEEE" title='WebCore::HitTestRequest::HitTestRequest' data-ref="_ZN7WebCore14HitTestRequestC1EN3WTF9OptionSetINS0_4TypeEEE" data-ref-filename="_ZN7WebCore14HitTestRequestC1EN3WTF9OptionSetINS0_4TypeEEE"></a><a class="local col9 ref" href="#569hitTestRequestTypes" title='hitTestRequestTypes' data-ref="569hitTestRequestTypes" data-ref-filename="569hitTestRequestTypes">hitTestRequestTypes</a>, <span class='refarg'><a class="local col0 ref" href="#570hitTestResult" title='hitTestResult' data-ref="570hitTestResult" data-ref-filename="570hitTestResult">hitTestResult</a></span>);</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col1 decl" id="571hitTestNode" title='hitTestNode' data-type='const WTF::Ref&lt;WebCore::Node, WTF::RawPtrTraits&lt;WebCore::Node&gt;&gt; &amp;' data-ref="571hitTestNode" data-ref-filename="571hitTestNode">hitTestNode</dfn> : <a class="local col0 ref" href="#570hitTestResult" title='hitTestResult' data-ref="570hitTestResult" data-ref-filename="570hitTestResult">hitTestResult</a>.<a class="ref fn" href="../rendering/HitTestResult.h.html#_ZNK7WebCore13HitTestResult19listBasedTestResultEv" title='WebCore::HitTestResult::listBasedTestResult' data-ref="_ZNK7WebCore13HitTestResult19listBasedTestResultEv" data-ref-filename="_ZNK7WebCore13HitTestResult19listBasedTestResultEv">listBasedTestResult</a>()) {</td></tr>
<tr><th id="71">71</th><td>        <em>auto</em>&amp; <dfn class="local col2 decl" id="572node" title='node' data-type='WebCore::Node &amp;' data-ref="572node" data-ref-filename="572node">node</dfn> = <a class="local col1 ref" href="#571hitTestNode" title='hitTestNode' data-ref="571hitTestNode" data-ref-filename="571hitTestNode">hitTestNode</a>.<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3Ref3getEv" title='WTF::Ref::get' data-ref="_ZNK3WTF3Ref3getEv" data-ref-filename="_ZNK3WTF3Ref3getEv">get</a>();</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td>        <em>auto</em>* <dfn class="local col3 decl" id="573renderer" title='renderer' data-type='WebCore::RenderObject *' data-ref="573renderer" data-ref-filename="573renderer">renderer</dfn> = <a class="local col2 ref" href="#572node" title='node' data-ref="572node" data-ref-filename="572node">node</a>.<a class="ref fn" href="../dom/Node.h.html#_ZNK7WebCore4Node8rendererEv" title='WebCore::Node::renderer' data-ref="_ZNK7WebCore4Node8rendererEv" data-ref-filename="_ZNK7WebCore4Node8rendererEv">renderer</a>();</td></tr>
<tr><th id="74">74</th><td>        <b>if</b> (!<a class="local col3 ref" href="#573renderer" title='renderer' data-ref="573renderer" data-ref-filename="573renderer">renderer</a>)</td></tr>
<tr><th id="75">75</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td>        <i>// Skip images (both `&lt;img&gt;` and CSS `background-image`) as they're likely not a solid color.</i></td></tr>
<tr><th id="78">78</th><td>        <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF2isEPT0_" title='WTF::is' data-ref="_ZN3WTF2isEPT0_" data-ref-filename="_ZN3WTF2isEPT0_">is</a>&lt;<a class="type" href="../rendering/RenderImage.h.html#WebCore::RenderImage" title='WebCore::RenderImage' data-ref="WebCore::RenderImage" data-ref-filename="WebCore..RenderImage">RenderImage</a>&gt;(<a class="local col3 ref" href="#573renderer" title='renderer' data-ref="573renderer" data-ref-filename="573renderer">renderer</a>) || <a class="local col3 ref" href="#573renderer" title='renderer' data-ref="573renderer" data-ref-filename="573renderer">renderer</a>-&gt;<a class="ref fn" href="../rendering/RenderObject.h.html#_ZNK7WebCore12RenderObject5styleEv" title='WebCore::RenderObject::style' data-ref="_ZNK7WebCore12RenderObject5styleEv" data-ref-filename="_ZNK7WebCore12RenderObject5styleEv">style</a>().<a class="ref fn" href="../rendering/style/RenderStyle.h.html#_ZNK7WebCore11RenderStyle18hasBackgroundImageEv" title='WebCore::RenderStyle::hasBackgroundImage' data-ref="_ZNK7WebCore11RenderStyle18hasBackgroundImageEv" data-ref-filename="_ZNK7WebCore11RenderStyle18hasBackgroundImageEv">hasBackgroundImage</a>())</td></tr>
<tr><th id="79">79</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td>        <b>if</b> (!<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF2isERT0_" title='WTF::is' data-ref="_ZN3WTF2isERT0_" data-ref-filename="_ZN3WTF2isERT0_">is</a>&lt;<a class="type" href="../dom/Element.h.html#WebCore::Element" title='WebCore::Element' data-ref="WebCore::Element" data-ref-filename="WebCore..Element">Element</a>&gt;(<span class='refarg'><a class="local col2 ref" href="#572node" title='node' data-ref="572node" data-ref-filename="572node">node</a></span>))</td></tr>
<tr><th id="82">82</th><td>            <b>continue</b>;</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td>        <em>auto</em>&amp; <dfn class="local col4 decl" id="574element" title='element' data-type='WebCore::Element &amp;' data-ref="574element" data-ref-filename="574element">element</dfn> = <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF8downcastERT0_" title='WTF::downcast' data-ref="_ZN3WTF8downcastERT0_" data-ref-filename="_ZN3WTF8downcastERT0_">downcast</a>&lt;<a class="type" href="../dom/Element.h.html#WebCore::Element" title='WebCore::Element' data-ref="WebCore::Element" data-ref-filename="WebCore..Element">Element</a>&gt;(<span class='refarg'><a class="local col2 ref" href="#572node" title='node' data-ref="572node" data-ref-filename="572node">node</a></span>);</td></tr>
<tr><th id="85">85</th><td>        <em>auto</em> <dfn class="local col5 decl" id="575styleable" title='styleable' data-type='WebCore::Styleable' data-ref="575styleable" data-ref-filename="575styleable">styleable</dfn> = <a class="type" href="../style/Styleable.h.html#WebCore::Styleable" title='WebCore::Styleable' data-ref="WebCore::Styleable" data-ref-filename="WebCore..Styleable">Styleable</a>::<a class="ref fn" href="../style/Styleable.h.html#_ZN7WebCore9Styleable11fromElementERNS_7ElementE" title='WebCore::Styleable::fromElement' data-ref="_ZN7WebCore9Styleable11fromElementERNS_7ElementE" data-ref-filename="_ZN7WebCore9Styleable11fromElementERNS_7ElementE">fromElement</a>(<span class='refarg'><a class="local col4 ref" href="#574element" title='element' data-ref="574element" data-ref-filename="574element">element</a></span>);</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td>        <i>// Skip nodes with animations as the sample may get an odd color if the animation is in-progress.</i></td></tr>
<tr><th id="88">88</th><td>        <b>if</b> (<a class="local col5 ref" href="#575styleable" title='styleable' data-ref="575styleable" data-ref-filename="575styleable">styleable</a>.<a class="ref fn" href="../style/Styleable.h.html#_ZNK7WebCore9Styleable21hasRunningTransitionsEv" title='WebCore::Styleable::hasRunningTransitions' data-ref="_ZNK7WebCore9Styleable21hasRunningTransitionsEv" data-ref-filename="_ZNK7WebCore9Styleable21hasRunningTransitionsEv">hasRunningTransitions</a>())</td></tr>
<tr><th id="89">89</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="90">90</th><td>        <b>if</b> (<em>auto</em>* <dfn class="local col6 decl" id="576animations" title='animations' data-type='const WTF::ListHashSet&lt;WTF::RefPtr&lt;WebCore::WebAnimation, WTF::RawPtrTraits&lt;WebCore::WebAnimation&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::WebAnimation&gt;&gt;, WTF::DefaultHash&lt;WTF::RefPtr&lt;WebCore::WebAnimation, WTF::RawPtrTraits&lt;WebCore::WebAnimation&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::WebAnimation&gt;&gt;&gt;&gt; *' data-ref="576animations" data-ref-filename="576animations"><a class="local col6 ref" href="#576animations" title='animations' data-ref="576animations" data-ref-filename="576animations">animations</a></dfn> = <a class="local col5 ref" href="#575styleable" title='styleable' data-ref="575styleable" data-ref-filename="575styleable">styleable</a>.<a class="ref fn" href="../style/Styleable.h.html#_ZNK7WebCore9Styleable10animationsEv" title='WebCore::Styleable::animations' data-ref="_ZNK7WebCore9Styleable10animationsEv" data-ref-filename="_ZNK7WebCore9Styleable10animationsEv">animations</a>()) {</td></tr>
<tr><th id="91">91</th><td>            <b>for</b> (<em>auto</em>&amp; <dfn class="local col7 decl" id="577animation" title='animation' data-type='const WTF::RefPtr&lt;WebCore::WebAnimation, WTF::RawPtrTraits&lt;WebCore::WebAnimation&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::WebAnimation&gt;&gt; &amp;' data-ref="577animation" data-ref-filename="577animation">animation</dfn> : *<a class="local col6 ref" href="#576animations" title='animations' data-ref="576animations" data-ref-filename="576animations">animations</a>) {</td></tr>
<tr><th id="92">92</th><td>                <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="local col7 ref" href="#577animation" title='animation' data-ref="577animation" data-ref-filename="577animation">animation</a>)</td></tr>
<tr><th id="93">93</th><td>                    <b>continue</b>;</td></tr>
<tr><th id="94">94</th><td>                <b>if</b> (<a class="local col7 ref" href="#577animation" title='animation' data-ref="577animation" data-ref-filename="577animation">animation</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../animation/WebAnimation.h.html#_ZNK7WebCore12WebAnimation9playStateEv" title='WebCore::WebAnimation::playState' data-ref="_ZNK7WebCore12WebAnimation9playStateEv" data-ref-filename="_ZNK7WebCore12WebAnimation9playStateEv">playState</a>() == <a class="type" href="../animation/WebAnimation.h.html#WebCore::WebAnimation" title='WebCore::WebAnimation' data-ref="WebCore::WebAnimation" data-ref-filename="WebCore..WebAnimation">WebAnimation</a>::<a class="type" href="../animation/WebAnimation.h.html#WebCore::WebAnimation::PlayState" title='WebCore::WebAnimation::PlayState' data-ref="WebCore::WebAnimation::PlayState" data-ref-filename="WebCore..WebAnimation..PlayState">PlayState</a>::<a class="enum" href="../animation/WebAnimation.h.html#WebCore::WebAnimation::PlayState::Running" title='WebCore::WebAnimation::PlayState::Running' data-ref="WebCore::WebAnimation::PlayState::Running" data-ref-filename="WebCore..WebAnimation..PlayState..Running">Running</a>)</td></tr>
<tr><th id="95">95</th><td>                    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="96">96</th><td>            }</td></tr>
<tr><th id="97">97</th><td>        }</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td>        <i>// Skip `&lt;canvas&gt;` but only if they've been drawn into. Guess this by seeing if there's already</i></td></tr>
<tr><th id="100">100</th><td><i>        // a `CanvasRenderingContext`, which is only created by JavaScript.</i></td></tr>
<tr><th id="101">101</th><td>        <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF2isERT0_" title='WTF::is' data-ref="_ZN3WTF2isERT0_" data-ref-filename="_ZN3WTF2isERT0_">is</a>&lt;<a class="type" href="../html/HTMLCanvasElement.h.html#WebCore::HTMLCanvasElement" title='WebCore::HTMLCanvasElement' data-ref="WebCore::HTMLCanvasElement" data-ref-filename="WebCore..HTMLCanvasElement">HTMLCanvasElement</a>&gt;(<span class='refarg'><a class="local col4 ref" href="#574element" title='element' data-ref="574element" data-ref-filename="574element">element</a></span>) &amp;&amp; <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF8downcastERT0_" title='WTF::downcast' data-ref="_ZN3WTF8downcastERT0_" data-ref-filename="_ZN3WTF8downcastERT0_">downcast</a>&lt;<a class="type" href="../html/HTMLCanvasElement.h.html#WebCore::HTMLCanvasElement" title='WebCore::HTMLCanvasElement' data-ref="WebCore::HTMLCanvasElement" data-ref-filename="WebCore..HTMLCanvasElement">HTMLCanvasElement</a>&gt;(<span class='refarg'><a class="local col4 ref" href="#574element" title='element' data-ref="574element" data-ref-filename="574element">element</a></span>).<a class="virtual ref fn" href="../html/HTMLCanvasElement.h.html#_ZNK7WebCore17HTMLCanvasElement16renderingContextEv" title='WebCore::HTMLCanvasElement::renderingContext' data-ref="_ZNK7WebCore17HTMLCanvasElement16renderingContextEv" data-ref-filename="_ZNK7WebCore17HTMLCanvasElement16renderingContextEv">renderingContext</a>())</td></tr>
<tr><th id="102">102</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td>        <i>// Skip 3rd-party `&lt;iframe&gt;` as the content likely won't match the rest of the page.</i></td></tr>
<tr><th id="105">105</th><td>        <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF2isERT0_" title='WTF::is' data-ref="_ZN3WTF2isERT0_" data-ref-filename="_ZN3WTF2isERT0_">is</a>&lt;<a class="type" href="../html/HTMLIFrameElement.h.html#WebCore::HTMLIFrameElement" title='WebCore::HTMLIFrameElement' data-ref="WebCore::HTMLIFrameElement" data-ref-filename="WebCore..HTMLIFrameElement">HTMLIFrameElement</a>&gt;(<span class='refarg'><a class="local col4 ref" href="#574element" title='element' data-ref="574element" data-ref-filename="574element">element</a></span>) &amp;&amp; !<a class="ref fn" href="../platform/RegistrableDomain.h.html#_ZN7WebCore26areRegistrableDomainsEqualERKN3WTF3URLES3_" title='WebCore::areRegistrableDomainsEqual' data-ref="_ZN7WebCore26areRegistrableDomainsEqualERKN3WTF3URLES3_" data-ref-filename="_ZN7WebCore26areRegistrableDomainsEqualERKN3WTF3URLES3_">areRegistrableDomainsEqual</a>(<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/TypeCasts.h.html#_ZN3WTF8downcastERT0_" title='WTF::downcast' data-ref="_ZN3WTF8downcastERT0_" data-ref-filename="_ZN3WTF8downcastERT0_">downcast</a>&lt;<a class="type" href="../html/HTMLIFrameElement.h.html#WebCore::HTMLIFrameElement" title='WebCore::HTMLIFrameElement' data-ref="WebCore::HTMLIFrameElement" data-ref-filename="WebCore..HTMLIFrameElement">HTMLIFrameElement</a>&gt;(<span class='refarg'><a class="local col4 ref" href="#574element" title='element' data-ref="574element" data-ref-filename="574element">element</a></span>).<a class="ref fn" href="../html/HTMLFrameElementBase.h.html#_ZNK7WebCore20HTMLFrameElementBase8locationEv" title='WebCore::HTMLFrameElementBase::location' data-ref="_ZNK7WebCore20HTMLFrameElementBase8locationEv" data-ref-filename="_ZNK7WebCore20HTMLFrameElementBase8locationEv">location</a>(), <a class="local col7 ref" href="#567document" title='document' data-ref="567document" data-ref-filename="567document">document</a>.<a class="virtual ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document3urlEv" title='WebCore::Document::url' data-ref="_ZNK7WebCore8Document3urlEv" data-ref-filename="_ZNK7WebCore8Document3urlEv">url</a>()))</td></tr>
<tr><th id="106">106</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="107">107</th><td>    }</td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="110">110</th><td>}</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td><em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt;&gt; <dfn class="decl def fn" id="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" title='WebCore::sampleColor' data-ref="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" data-ref-filename="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE">sampleColor</dfn>(<a class="type" href="../dom/Document.h.html#WebCore::Document" title='WebCore::Document' data-ref="WebCore::Document" data-ref-filename="WebCore..Document">Document</a>&amp; <dfn class="local col8 decl" id="578document" title='document' data-type='WebCore::Document &amp;' data-ref="578document" data-ref-filename="578document">document</dfn>, <a class="type" href="../platform/graphics/IntPoint.h.html#WebCore::IntPoint" title='WebCore::IntPoint' data-ref="WebCore::IntPoint" data-ref-filename="WebCore..IntPoint">IntPoint</a>&amp;&amp; <dfn class="local col9 decl" id="579location" title='location' data-type='WebCore::IntPoint &amp;&amp;' data-ref="579location" data-ref-filename="579location">location</dfn>)</td></tr>
<tr><th id="113">113</th><td>{</td></tr>
<tr><th id="114">114</th><td>    <i>// FIXME: &lt;<a href="https://webkit.org/b/225167">https://webkit.org/b/225167</a>&gt; (Sampled Page Top Color: hook into painting logic instead of taking snapshots)</i></td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td>    <b>if</b> (!<a class="ref fn" href="#_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE" title='WebCore::isValidSampleLocation' data-ref="_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE" data-ref-filename="_ZN7WebCoreL21isValidSampleLocationERNS_8DocumentERKNS_8IntPointE">isValidSampleLocation</a>(<span class='refarg'><a class="local col8 ref" href="#578document" title='document' data-ref="578document" data-ref-filename="578document">document</a></span>, <a class="local col9 ref" href="#579location" title='location' data-ref="579location" data-ref-filename="579location">location</a>))</td></tr>
<tr><th id="117">117</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="118">118</th><td></td></tr>
<tr><th id="119">119</th><td>    <i>// FIXME: &lt;<a href="https://webkit.org/b/225942">https://webkit.org/b/225942</a>&gt; (Sampled Page Top Color: support sampling non-RGB values like P3)</i></td></tr>
<tr><th id="120">120</th><td>    <em>auto</em> <dfn class="local col0 decl" id="580colorSpace" title='colorSpace' data-type='WebCore::DestinationColorSpace' data-ref="580colorSpace" data-ref-filename="580colorSpace">colorSpace</dfn> = <a class="ref fn fake" href="../platform/graphics/DestinationColorSpace.h.html#34" title='WebCore::DestinationColorSpace::DestinationColorSpace' data-ref="_ZN7WebCore21DestinationColorSpaceC1ERKS0_" data-ref-filename="_ZN7WebCore21DestinationColorSpaceC1ERKS0_"></a><a class="type" href="../platform/graphics/DestinationColorSpace.h.html#WebCore::DestinationColorSpace" title='WebCore::DestinationColorSpace' data-ref="WebCore::DestinationColorSpace" data-ref-filename="WebCore..DestinationColorSpace">DestinationColorSpace</a>::<a class="ref fn" href="../platform/graphics/DestinationColorSpace.h.html#_ZN7WebCore21DestinationColorSpace4SRGBEv" title='WebCore::DestinationColorSpace::SRGB' data-ref="_ZN7WebCore21DestinationColorSpace4SRGBEv" data-ref-filename="_ZN7WebCore21DestinationColorSpace4SRGBEv">SRGB</a>();</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>    <a class="macro" href="../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(document.view())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/page/PageColorSampler.cpp&quot;, 122, __PRETTY_FUNCTION__, &quot;document.view()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(122, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/page/PageColorSampler.cpp&quot;, __PRETTY_FUNCTION__, 3506); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col8 ref" href="#578document" title='document' data-ref="578document" data-ref-filename="578document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document4viewEv" title='WebCore::Document::view' data-ref="_ZNK7WebCore8Document4viewEv" data-ref-filename="_ZNK7WebCore8Document4viewEv">view</a>());</td></tr>
<tr><th id="123">123</th><td>    <em>auto</em> <dfn class="local col1 decl" id="581snapshot" title='snapshot' data-type='WTF::RefPtr&lt;WebCore::ImageBuffer, WTF::RawPtrTraits&lt;WebCore::ImageBuffer&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::ImageBuffer&gt;&gt;' data-ref="581snapshot" data-ref-filename="581snapshot">snapshot</dfn> = <a class="ref fn" href="FrameSnapshotting.h.html#_ZN7WebCore17snapshotFrameRectERNS_5FrameERKNS_7IntRectEONS_15SnapshotOptionsE" title='WebCore::snapshotFrameRect' data-ref="_ZN7WebCore17snapshotFrameRectERNS_5FrameERKNS_7IntRectEONS_15SnapshotOptionsE" data-ref-filename="_ZN7WebCore17snapshotFrameRectERNS_5FrameERKNS_7IntRectEONS_15SnapshotOptionsE">snapshotFrameRect</a>(<span class='refarg'><a class="local col8 ref" href="#578document" title='document' data-ref="578document" data-ref-filename="578document">document</a>.<a class="ref fn" href="../dom/Document.h.html#_ZNK7WebCore8Document4viewEv" title='WebCore::Document::view' data-ref="_ZNK7WebCore8Document4viewEv" data-ref-filename="_ZNK7WebCore8Document4viewEv">view</a>()-&gt;<a class="ref fn" href="FrameView.h.html#_ZNK7WebCore9FrameView5frameEv" title='WebCore::FrameView::frame' data-ref="_ZNK7WebCore9FrameView5frameEv" data-ref-filename="_ZNK7WebCore9FrameView5frameEv">frame</a>()</span>, <a class="type" href="../platform/graphics/IntRect.h.html#WebCore::IntRect" title='WebCore::IntRect' data-ref="WebCore::IntRect" data-ref-filename="WebCore..IntRect">IntRect</a><a class="ref fn" href="../platform/graphics/IntRect.h.html#_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE" title='WebCore::IntRect::IntRect' data-ref="_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE" data-ref-filename="_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE">(</a><a class="local col9 ref" href="#579location" title='location' data-ref="579location" data-ref-filename="579location">location</a>, <a class="type" href="../platform/graphics/IntSize.h.html#WebCore::IntSize" title='WebCore::IntSize' data-ref="WebCore::IntSize" data-ref-filename="WebCore..IntSize">IntSize</a><a class="ref fn" href="../platform/graphics/IntSize.h.html#_ZN7WebCore7IntSizeC1Eii" title='WebCore::IntSize::IntSize' data-ref="_ZN7WebCore7IntSizeC1Eii" data-ref-filename="_ZN7WebCore7IntSizeC1Eii">(</a><var>1</var>, <var>1</var>)), { { <a class="type" href="FrameSnapshotting.h.html#WebCore::SnapshotFlags" title='WebCore::SnapshotFlags' data-ref="WebCore::SnapshotFlags" data-ref-filename="WebCore..SnapshotFlags">SnapshotFlags</a>::<a class="enum" href="FrameSnapshotting.h.html#WebCore::SnapshotFlags::ExcludeSelectionHighlighting" title='WebCore::SnapshotFlags::ExcludeSelectionHighlighting' data-ref="WebCore::SnapshotFlags::ExcludeSelectionHighlighting" data-ref-filename="WebCore..SnapshotFlags..ExcludeSelectionHighlighting">ExcludeSelectionHighlighting</a>, <a class="type" href="FrameSnapshotting.h.html#WebCore::SnapshotFlags" title='WebCore::SnapshotFlags' data-ref="WebCore::SnapshotFlags" data-ref-filename="WebCore..SnapshotFlags">SnapshotFlags</a>::<a class="enum" href="FrameSnapshotting.h.html#WebCore::SnapshotFlags::PaintEverythingExcludingSelection" title='WebCore::SnapshotFlags::PaintEverythingExcludingSelection' data-ref="WebCore::SnapshotFlags::PaintEverythingExcludingSelection" data-ref-filename="WebCore..SnapshotFlags..PaintEverythingExcludingSelection">PaintEverythingExcludingSelection</a> }, <a class="type" href="../platform/HostWindow.h.html#WebCore::PixelFormat" title='WebCore::PixelFormat' data-ref="WebCore::PixelFormat" data-ref-filename="WebCore..PixelFormat">PixelFormat</a>::<a class="enum" href="../platform/graphics/PixelFormat.h.html#WebCore::PixelFormat::BGRA8" title='WebCore::PixelFormat::BGRA8' data-ref="WebCore::PixelFormat::BGRA8" data-ref-filename="WebCore..PixelFormat..BGRA8">BGRA8</a>, <a class="local col0 ref" href="#580colorSpace" title='colorSpace' data-ref="580colorSpace" data-ref-filename="580colorSpace">colorSpace</a> });</td></tr>
<tr><th id="124">124</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="local col1 ref" href="#581snapshot" title='snapshot' data-ref="581snapshot" data-ref-filename="581snapshot">snapshot</a>)</td></tr>
<tr><th id="125">125</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td>    <em>auto</em> <dfn class="local col2 decl" id="582pixelBuffer" title='pixelBuffer' data-type='std::__1::optional&lt;WebCore::PixelBuffer&gt;' data-ref="582pixelBuffer" data-ref-filename="582pixelBuffer">pixelBuffer</dfn> = <a class="local col1 ref" href="#581snapshot" title='snapshot' data-ref="581snapshot" data-ref-filename="581snapshot">snapshot</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="virtual ref fn" href="../platform/graphics/ImageBuffer.h.html#_ZNK7WebCore11ImageBuffer14getPixelBufferERKNS_17PixelBufferFormatERKNS_7IntRectE" title='WebCore::ImageBuffer::getPixelBuffer' data-ref="_ZNK7WebCore11ImageBuffer14getPixelBufferERKNS_17PixelBufferFormatERKNS_7IntRectE" data-ref-filename="_ZNK7WebCore11ImageBuffer14getPixelBufferERKNS_17PixelBufferFormatERKNS_7IntRectE">getPixelBuffer</a>({ <a class="type" href="../platform/graphics/AlphaPremultiplication.h.html#WebCore::AlphaPremultiplication" title='WebCore::AlphaPremultiplication' data-ref="WebCore::AlphaPremultiplication" data-ref-filename="WebCore..AlphaPremultiplication">AlphaPremultiplication</a>::<a class="enum" href="../platform/graphics/AlphaPremultiplication.h.html#WebCore::AlphaPremultiplication::Unpremultiplied" title='WebCore::AlphaPremultiplication::Unpremultiplied' data-ref="WebCore::AlphaPremultiplication::Unpremultiplied" data-ref-filename="WebCore..AlphaPremultiplication..Unpremultiplied">Unpremultiplied</a>, <a class="type" href="../platform/HostWindow.h.html#WebCore::PixelFormat" title='WebCore::PixelFormat' data-ref="WebCore::PixelFormat" data-ref-filename="WebCore..PixelFormat">PixelFormat</a>::<a class="enum" href="../platform/graphics/PixelFormat.h.html#WebCore::PixelFormat::BGRA8" title='WebCore::PixelFormat::BGRA8' data-ref="WebCore::PixelFormat::BGRA8" data-ref-filename="WebCore..PixelFormat..BGRA8">BGRA8</a>, <a class="local col0 ref" href="#580colorSpace" title='colorSpace' data-ref="580colorSpace" data-ref-filename="580colorSpace">colorSpace</a> }, <a class="ref fn" href="../platform/graphics/IntRect.h.html#_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE" title='WebCore::IntRect::IntRect' data-ref="_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE" data-ref-filename="_ZN7WebCore7IntRectC1ERKNS_8IntPointERKNS_7IntSizeE">{</a> <a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZN7WebCore8IntPointC1Ev" title='WebCore::IntPoint::IntPoint' data-ref="_ZN7WebCore8IntPointC1Ev" data-ref-filename="_ZN7WebCore8IntPointC1Ev">{</a> }, <a class="local col1 ref" href="#581snapshot" title='snapshot' data-ref="581snapshot" data-ref-filename="581snapshot">snapshot</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="virtual ref fn" href="../platform/graphics/ImageBuffer.h.html#_ZNK7WebCore11ImageBuffer11logicalSizeEv" title='WebCore::ImageBuffer::logicalSize' data-ref="_ZNK7WebCore11ImageBuffer11logicalSizeEv" data-ref-filename="_ZNK7WebCore11ImageBuffer11logicalSizeEv">logicalSize</a>() });</td></tr>
<tr><th id="128">128</th><td>    <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col2 ref" href="#582pixelBuffer" title='pixelBuffer' data-ref="582pixelBuffer" data-ref-filename="582pixelBuffer">pixelBuffer</a>)</td></tr>
<tr><th id="129">129</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td>    <b>if</b> (<a class="local col2 ref" href="#582pixelBuffer" title='pixelBuffer' data-ref="582pixelBuffer" data-ref-filename="582pixelBuffer">pixelBuffer</a><span class='ref fn' title='std::__1::optional::operator-&gt;' data-ref="_ZNSt3__18optionalptEv" data-ref-filename="_ZNSt3__18optionalptEv">-&gt;</span><a class="ref fn" href="../platform/graphics/PixelBuffer.h.html#_ZNK7WebCore11PixelBuffer4dataEv" title='WebCore::PixelBuffer::data' data-ref="_ZNK7WebCore11PixelBuffer4dataEv" data-ref-filename="_ZNK7WebCore11PixelBuffer4dataEv">data</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/JavaScriptCore.framework/Versions/A/PrivateHeaders/GenericTypedArrayView.h.html#_ZNK3JSC21GenericTypedArrayView6lengthEv" title='JSC::GenericTypedArrayView::length' data-ref="_ZNK3JSC21GenericTypedArrayView6lengthEv" data-ref-filename="_ZNK3JSC21GenericTypedArrayView6lengthEv">length</a>() &lt; <var>4</var>)</td></tr>
<tr><th id="132">132</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="133">133</th><td></td></tr>
<tr><th id="134">134</th><td>    <em>auto</em> <dfn class="local col3 decl" id="583snapshotData" title='snapshotData' data-type='unsigned char *' data-ref="583snapshotData" data-ref-filename="583snapshotData">snapshotData</dfn> = <a class="local col2 ref" href="#582pixelBuffer" title='pixelBuffer' data-ref="582pixelBuffer" data-ref-filename="582pixelBuffer">pixelBuffer</a><span class='ref fn' title='std::__1::optional::operator-&gt;' data-ref="_ZNSt3__18optionalptEv" data-ref-filename="_ZNSt3__18optionalptEv">-&gt;</span><a class="ref fn" href="../platform/graphics/PixelBuffer.h.html#_ZNK7WebCore11PixelBuffer4dataEv" title='WebCore::PixelBuffer::data' data-ref="_ZNK7WebCore11PixelBuffer4dataEv" data-ref-filename="_ZNK7WebCore11PixelBuffer4dataEv">data</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/JavaScriptCore.framework/Versions/A/PrivateHeaders/GenericTypedArrayView.h.html#_ZNK3JSC21GenericTypedArrayView4dataEv" title='JSC::GenericTypedArrayView::data' data-ref="_ZNK3JSC21GenericTypedArrayView4dataEv" data-ref-filename="_ZNK3JSC21GenericTypedArrayView4dataEv">data</a>();</td></tr>
<tr><th id="135">135</th><td>    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="ref fn" href="../platform/graphics/ColorConversion.h.html#_ZN7WebCore12convertColorERKT0_" title='WebCore::convertColor' data-ref="_ZN7WebCore12convertColorERKT0_" data-ref-filename="_ZN7WebCore12convertColorERKT0_">convertColor</a>&lt;<a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt;&gt;(<a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::SRGBA" title='WebCore::SRGBA' data-ref="WebCore::SRGBA" data-ref-filename="WebCore..SRGBA">SRGBA</a>&lt;<span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span>&gt; <a class="ref fn" href="../platform/graphics/ColorTypes.h.html#228" title='WebCore::BoundedGammaEncoded&lt;unsigned char, WebCore::SRGBADescriptor&gt;::RGBAType' data-ref="_ZN7WebCore19BoundedGammaEncodedIhNS_15SRGBADescriptorEECI1NS_8RGBATypeIhS1_S2_NS_8RGBModelIhEENS_20SRGBTransferFunctionIhLNS_20TransferFunctionModeE0EEEEEEhhhh" data-ref-filename="_ZN7WebCore19BoundedGammaEncodedIhNS_15SRGBADescriptorEECI1NS_8RGBATypeIhS1_S2_NS_8RGBModelIhEENS_20SRGBTransferFunctionIhLNS_20TransferFunctionModeE0EEEEEEhhhh">{</a> <a class="local col3 ref" href="#583snapshotData" title='snapshotData' data-ref="583snapshotData" data-ref-filename="583snapshotData">snapshotData</a>[<var>2</var>], <a class="local col3 ref" href="#583snapshotData" title='snapshotData' data-ref="583snapshotData" data-ref-filename="583snapshotData">snapshotData</a>[<var>1</var>], <a class="local col3 ref" href="#583snapshotData" title='snapshotData' data-ref="583snapshotData" data-ref-filename="583snapshotData">snapshotData</a>[<var>0</var>], <a class="local col3 ref" href="#583snapshotData" title='snapshotData' data-ref="583snapshotData" data-ref-filename="583snapshotData">snapshotData</a>[<var>3</var>] });</td></tr>
<tr><th id="136">136</th><td>}</td></tr>
<tr><th id="137">137</th><td></td></tr>
<tr><th id="138">138</th><td><em>static</em> <em>double</em> <dfn class="decl def fn" id="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" title='WebCore::colorDifference' data-ref="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" data-ref-filename="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_">colorDifference</dfn>(<a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt;&amp; <dfn class="local col4 decl" id="584lhs" title='lhs' data-type='Lab&lt;float&gt; &amp;' data-ref="584lhs" data-ref-filename="584lhs">lhs</dfn>, <a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt;&amp; <dfn class="local col5 decl" id="585rhs" title='rhs' data-type='Lab&lt;float&gt; &amp;' data-ref="585rhs" data-ref-filename="585rhs">rhs</dfn>)</td></tr>
<tr><th id="139">139</th><td>{</td></tr>
<tr><th id="140">140</th><td>    <b>return</b> <span class='ref fn' title='sqrt' data-ref="sqrt" data-ref-filename="sqrt">sqrt</span>(<span class='ref fn' title='pow' data-ref="_ZL3powT_T0_" data-ref-filename="_ZL3powT_T0_">pow</span>(<a class="local col5 ref" href="#585rhs" title='rhs' data-ref="585rhs" data-ref-filename="585rhs">rhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::lightness" title='WebCore::Lab&lt;float&gt;::lightness' data-ref="WebCore::Lab::lightness" data-ref-filename="WebCore..Lab..lightness">lightness</a> - <a class="local col4 ref" href="#584lhs" title='lhs' data-ref="584lhs" data-ref-filename="584lhs">lhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::lightness" title='WebCore::Lab&lt;float&gt;::lightness' data-ref="WebCore::Lab::lightness" data-ref-filename="WebCore..Lab..lightness">lightness</a>, <var>2</var>) + <span class='ref fn' title='pow' data-ref="_ZL3powT_T0_" data-ref-filename="_ZL3powT_T0_">pow</span>(<a class="local col5 ref" href="#585rhs" title='rhs' data-ref="585rhs" data-ref-filename="585rhs">rhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::a" title='WebCore::Lab&lt;float&gt;::a' data-ref="WebCore::Lab::a" data-ref-filename="WebCore..Lab..a">a</a> - <a class="local col4 ref" href="#584lhs" title='lhs' data-ref="584lhs" data-ref-filename="584lhs">lhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::a" title='WebCore::Lab&lt;float&gt;::a' data-ref="WebCore::Lab::a" data-ref-filename="WebCore..Lab..a">a</a>, <var>2</var>) + <span class='ref fn' title='pow' data-ref="_ZL3powT_T0_" data-ref-filename="_ZL3powT_T0_">pow</span>(<a class="local col5 ref" href="#585rhs" title='rhs' data-ref="585rhs" data-ref-filename="585rhs">rhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::b" title='WebCore::Lab&lt;float&gt;::b' data-ref="WebCore::Lab::b" data-ref-filename="WebCore..Lab..b">b</a> - <a class="local col4 ref" href="#584lhs" title='lhs' data-ref="584lhs" data-ref-filename="584lhs">lhs</a>.<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::b" title='WebCore::Lab&lt;float&gt;::b' data-ref="WebCore::Lab::b" data-ref-filename="WebCore..Lab..b">b</a>, <var>2</var>));</td></tr>
<tr><th id="141">141</th><td>}</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td><em>static</em> <a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt; <dfn class="decl def fn" id="_ZN7WebCoreL12averageColorEPNS_3LabIfEEm" title='WebCore::averageColor' data-ref="_ZN7WebCoreL12averageColorEPNS_3LabIfEEm" data-ref-filename="_ZN7WebCoreL12averageColorEPNS_3LabIfEEm">averageColor</dfn>(<a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt; <dfn class="local col6 decl" id="586colors" title='colors' data-type='Lab&lt;float&gt; *' data-ref="586colors" data-ref-filename="586colors">colors</dfn>[], <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="587count" title='count' data-type='size_t' data-ref="587count" data-ref-filename="587count">count</dfn>)</td></tr>
<tr><th id="144">144</th><td>{</td></tr>
<tr><th id="145">145</th><td>    <em>float</em> <dfn class="local col8 decl" id="588totalLightness" title='totalLightness' data-type='float' data-ref="588totalLightness" data-ref-filename="588totalLightness">totalLightness</dfn> = <var>0</var>;</td></tr>
<tr><th id="146">146</th><td>    <em>float</em> <dfn class="local col9 decl" id="589totalA" title='totalA' data-type='float' data-ref="589totalA" data-ref-filename="589totalA">totalA</dfn> = <var>0</var>;</td></tr>
<tr><th id="147">147</th><td>    <em>float</em> <dfn class="local col0 decl" id="590totalB" title='totalB' data-type='float' data-ref="590totalB" data-ref-filename="590totalB">totalB</dfn> = <var>0</var>;</td></tr>
<tr><th id="148">148</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="591i" title='i' data-type='size_t' data-ref="591i" data-ref-filename="591i">i</dfn> = <var>0</var>; <a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> &lt; <a class="local col7 ref" href="#587count" title='count' data-ref="587count" data-ref-filename="587count">count</a>; ++<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>) {</td></tr>
<tr><th id="149">149</th><td>        <a class="local col8 ref" href="#588totalLightness" title='totalLightness' data-ref="588totalLightness" data-ref-filename="588totalLightness">totalLightness</a> += <a class="local col6 ref" href="#586colors" title='colors' data-ref="586colors" data-ref-filename="586colors">colors</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>].<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::lightness" title='WebCore::Lab&lt;float&gt;::lightness' data-ref="WebCore::Lab::lightness" data-ref-filename="WebCore..Lab..lightness">lightness</a>;</td></tr>
<tr><th id="150">150</th><td>        <a class="local col9 ref" href="#589totalA" title='totalA' data-ref="589totalA" data-ref-filename="589totalA">totalA</a> += <a class="local col6 ref" href="#586colors" title='colors' data-ref="586colors" data-ref-filename="586colors">colors</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>].<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::a" title='WebCore::Lab&lt;float&gt;::a' data-ref="WebCore::Lab::a" data-ref-filename="WebCore..Lab..a">a</a>;</td></tr>
<tr><th id="151">151</th><td>        <a class="local col0 ref" href="#590totalB" title='totalB' data-ref="590totalB" data-ref-filename="590totalB">totalB</a> += <a class="local col6 ref" href="#586colors" title='colors' data-ref="586colors" data-ref-filename="586colors">colors</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>].<a class="ref field" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab::b" title='WebCore::Lab&lt;float&gt;::b' data-ref="WebCore::Lab::b" data-ref-filename="WebCore..Lab..b">b</a>;</td></tr>
<tr><th id="152">152</th><td>    }</td></tr>
<tr><th id="153">153</th><td>    <b>return</b> <a class="ref fn" href="../platform/graphics/ColorTypes.h.html#_ZN7WebCore3LabC1ET_S1_S1_S1_" title='WebCore::Lab::Lab&lt;type-parameter-0-0&gt;' data-ref="_ZN7WebCore3LabC1ET_S1_S1_S1_" data-ref-filename="_ZN7WebCore3LabC1ET_S1_S1_S1_">{</a></td></tr>
<tr><th id="154">154</th><td>        <a class="local col8 ref" href="#588totalLightness" title='totalLightness' data-ref="588totalLightness" data-ref-filename="588totalLightness">totalLightness</a> / <a class="local col7 ref" href="#587count" title='count' data-ref="587count" data-ref-filename="587count">count</a>,</td></tr>
<tr><th id="155">155</th><td>        <a class="local col9 ref" href="#589totalA" title='totalA' data-ref="589totalA" data-ref-filename="589totalA">totalA</a> / <a class="local col7 ref" href="#587count" title='count' data-ref="587count" data-ref-filename="587count">count</a>,</td></tr>
<tr><th id="156">156</th><td>        <a class="local col0 ref" href="#590totalB" title='totalB' data-ref="590totalB" data-ref-filename="590totalB">totalB</a> / <a class="local col7 ref" href="#587count" title='count' data-ref="587count" data-ref-filename="587count">count</a>,</td></tr>
<tr><th id="157">157</th><td>        <var>1</var>,</td></tr>
<tr><th id="158">158</th><td>    };</td></tr>
<tr><th id="159">159</th><td>}</td></tr>
<tr><th id="160">160</th><td></td></tr>
<tr><th id="161">161</th><td><span class="namespace">std::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a>&gt; <a class="type" href="PageColorSampler.h.html#WebCore::PageColorSampler" title='WebCore::PageColorSampler' data-ref="WebCore::PageColorSampler" data-ref-filename="WebCore..PageColorSampler">PageColorSampler</a>::<dfn class="decl def fn" id="_ZN7WebCore16PageColorSampler9sampleTopERNS_4PageE" title='WebCore::PageColorSampler::sampleTop' data-ref="_ZN7WebCore16PageColorSampler9sampleTopERNS_4PageE" data-ref-filename="_ZN7WebCore16PageColorSampler9sampleTopERNS_4PageE">sampleTop</dfn>(<a class="type" href="Page.h.html#WebCore::Page" title='WebCore::Page' data-ref="WebCore::Page" data-ref-filename="WebCore..Page">Page</a>&amp; <dfn class="local col2 decl" id="592page" title='page' data-type='WebCore::Page &amp;' data-ref="592page" data-ref-filename="592page">page</dfn>)</td></tr>
<tr><th id="162">162</th><td>{</td></tr>
<tr><th id="163">163</th><td>    <i>// If `std::nullopt` is returned then that means that no samples were taken (i.e. the `Page` is not ready yet).</i></td></tr>
<tr><th id="164">164</th><td><i>    // If an invalid `Color` is returned then that means that samples Were taken but they were too different.</i></td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>    <em>auto</em> <dfn class="local col3 decl" id="593maxDifference" title='maxDifference' data-type='double' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</dfn> = <a class="local col2 ref" href="#592page" title='page' data-ref="592page" data-ref-filename="592page">page</a>.<a class="ref fn" href="Page.h.html#_ZNK7WebCore4Page8settingsEv" title='WebCore::Page::settings' data-ref="_ZNK7WebCore4Page8settingsEv" data-ref-filename="_ZNK7WebCore4Page8settingsEv">settings</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/DerivedSources/WebCore/Settings.h.html#_ZNK7WebCore8Settings32sampledPageTopColorMaxDifferenceEv" title='WebCore::Settings::sampledPageTopColorMaxDifference' data-ref="_ZNK7WebCore8Settings32sampledPageTopColorMaxDifferenceEv" data-ref-filename="_ZNK7WebCore8Settings32sampledPageTopColorMaxDifferenceEv">sampledPageTopColorMaxDifference</a>();</td></tr>
<tr><th id="167">167</th><td>    <b>if</b> (<a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a> &lt;= <var>0</var>) {</td></tr>
<tr><th id="168">168</th><td>        <i>// Pretend that the samples are too different so that this function is not called again.</i></td></tr>
<tr><th id="169">169</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="170">170</th><td>    }</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td>    <em>auto</em> <dfn class="local col4 decl" id="594mainDocument" title='mainDocument' data-type='WTF::RefPtr&lt;WebCore::Document, WTF::RawPtrTraits&lt;WebCore::Document&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::Document&gt;&gt;' data-ref="594mainDocument" data-ref-filename="594mainDocument">mainDocument</dfn> = <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF10makeRefPtrEPT_" title='WTF::makeRefPtr' data-ref="_ZN3WTF10makeRefPtrEPT_" data-ref-filename="_ZN3WTF10makeRefPtrEPT_">makeRefPtr</a>(<a class="local col2 ref" href="#592page" title='page' data-ref="592page" data-ref-filename="592page">page</a>.<a class="ref fn" href="Page.h.html#_ZN7WebCore4Page9mainFrameEv" title='WebCore::Page::mainFrame' data-ref="_ZN7WebCore4Page9mainFrameEv" data-ref-filename="_ZN7WebCore4Page9mainFrameEv">mainFrame</a>().<a class="ref fn" href="Frame.h.html#_ZNK7WebCore5Frame8documentEv" title='WebCore::Frame::document' data-ref="_ZNK7WebCore5Frame8documentEv" data-ref-filename="_ZNK7WebCore5Frame8documentEv">document</a>());</td></tr>
<tr><th id="173">173</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="local col4 ref" href="#594mainDocument" title='mainDocument' data-ref="594mainDocument" data-ref-filename="594mainDocument">mainDocument</a>)</td></tr>
<tr><th id="174">174</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td>    <em>auto</em> <dfn class="local col5 decl" id="595frameView" title='frameView' data-type='WTF::RefPtr&lt;WebCore::FrameView, WTF::RawPtrTraits&lt;WebCore::FrameView&gt;, WTF::DefaultRefDerefTraits&lt;WebCore::FrameView&gt;&gt;' data-ref="595frameView" data-ref-filename="595frameView">frameView</dfn> = <a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF10makeRefPtrEPT_" title='WTF::makeRefPtr' data-ref="_ZN3WTF10makeRefPtrEPT_" data-ref-filename="_ZN3WTF10makeRefPtrEPT_">makeRefPtr</a>(<a class="local col2 ref" href="#592page" title='page' data-ref="592page" data-ref-filename="592page">page</a>.<a class="ref fn" href="Page.h.html#_ZN7WebCore4Page9mainFrameEv" title='WebCore::Page::mainFrame' data-ref="_ZN7WebCore4Page9mainFrameEv" data-ref-filename="_ZN7WebCore4Page9mainFrameEv">mainFrame</a>().<a class="ref fn" href="Frame.h.html#_ZNK7WebCore5Frame4viewEv" title='WebCore::Frame::view' data-ref="_ZNK7WebCore5Frame4viewEv" data-ref-filename="_ZNK7WebCore5Frame4viewEv">view</a>());</td></tr>
<tr><th id="177">177</th><td>    <b>if</b> (<a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrntEv" title='WTF::RefPtr::operator!' data-ref="_ZNK3WTF6RefPtrntEv" data-ref-filename="_ZNK3WTF6RefPtrntEv">!</a><a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a>)</td></tr>
<tr><th id="178">178</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="179">179</th><td></td></tr>
<tr><th id="180">180</th><td>    <i>// Don't take samples if the layer tree is still frozen.</i></td></tr>
<tr><th id="181">181</th><td>    <b>if</b> (<a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="FrameView.h.html#_ZNK7WebCore9FrameView11needsLayoutEv" title='WebCore::FrameView::needsLayout' data-ref="_ZNK7WebCore9FrameView11needsLayoutEv" data-ref-filename="_ZNK7WebCore9FrameView11needsLayoutEv">needsLayout</a>())</td></tr>
<tr><th id="182">182</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td>    <i>// Don't attempt to hit test or sample if we don't have any content yet.</i></td></tr>
<tr><th id="185">185</th><td>    <b>if</b> (!<a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="FrameView.h.html#_ZNK7WebCore9FrameView18isVisuallyNonEmptyEv" title='WebCore::FrameView::isVisuallyNonEmpty' data-ref="_ZNK7WebCore9FrameView18isVisuallyNonEmptyEv" data-ref-filename="_ZNK7WebCore9FrameView18isVisuallyNonEmptyEv">isVisuallyNonEmpty</a>() || !<a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="FrameView.h.html#_ZNK7WebCore9FrameView24hasContentfulDescendantsEv" title='WebCore::FrameView::hasContentfulDescendants' data-ref="_ZNK7WebCore9FrameView24hasContentfulDescendantsEv" data-ref-filename="_ZNK7WebCore9FrameView24hasContentfulDescendantsEv">hasContentfulDescendants</a>() || !<a class="type" href="../rendering/ContentfulPaintChecker.h.html#WebCore::ContentfulPaintChecker" title='WebCore::ContentfulPaintChecker' data-ref="WebCore::ContentfulPaintChecker" data-ref-filename="WebCore..ContentfulPaintChecker">ContentfulPaintChecker</a>::<a class="ref fn" href="../rendering/ContentfulPaintChecker.h.html#_ZN7WebCore22ContentfulPaintChecker27qualifiesForContentfulPaintERNS_9FrameViewE" title='WebCore::ContentfulPaintChecker::qualifiesForContentfulPaint' data-ref="_ZN7WebCore22ContentfulPaintChecker27qualifiesForContentfulPaintERNS_9FrameViewE" data-ref-filename="_ZN7WebCore22ContentfulPaintChecker27qualifiesForContentfulPaintERNS_9FrameViewE">qualifiesForContentfulPaint</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a></span>))</td></tr>
<tr><th id="186">186</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::nullopt_t::nullopt_t' data-ref="_ZNSt3__19nullopt_tC1ERKS0_" data-ref-filename="_ZNSt3__19nullopt_tC1ERKS0_"></span><span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1ENS_9nullopt_tE" data-ref-filename="_ZNSt3__18optionalC1ENS_9nullopt_tE"></span><span class="namespace">std::</span><span class='ref' title='std::__1::nullopt' data-ref="std::__1::nullopt" data-ref-filename="std..__1..nullopt">nullopt</span>;</td></tr>
<tr><th id="187">187</th><td></td></tr>
<tr><th id="188">188</th><td>    <i>// Decrease the width by one pixel so that the last sample is within bounds and not off-by-one.</i></td></tr>
<tr><th id="189">189</th><td>    <em>auto</em> <dfn class="local col6 decl" id="596frameWidth" title='frameWidth' data-type='int' data-ref="596frameWidth" data-ref-filename="596frameWidth">frameWidth</dfn> = <a class="local col5 ref" href="#595frameView" title='frameView' data-ref="595frameView" data-ref-filename="595frameView">frameView</a><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../platform/ScrollView.h.html#_ZNK7WebCore10ScrollView13contentsWidthEv" title='WebCore::ScrollView::contentsWidth' data-ref="_ZNK7WebCore10ScrollView13contentsWidthEv" data-ref-filename="_ZNK7WebCore10ScrollView13contentsWidthEv">contentsWidth</a>() - <var>1</var>;</td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td>    <b>constexpr</b> <em>auto</em> <dfn class="local col7 decl" id="597numSamples" title='numSamples' data-type='const int' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</dfn> = <var>5</var>;</td></tr>
<tr><th id="192">192</th><td>    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="598nonMatchingColorIndex" title='nonMatchingColorIndex' data-type='size_t' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</dfn> = <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a>;</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td>    <a class="type" href="../platform/graphics/ColorTypes.h.html#WebCore::Lab" title='WebCore::Lab' data-ref="WebCore::Lab" data-ref-filename="WebCore..Lab">Lab</a>&lt;<em>float</em>&gt; <a class="ref fn fake" href="../platform/graphics/ColorTypes.h.html#_ZN7WebCore3LabC1Ev" title='WebCore::Lab::Lab&lt;type-parameter-0-0&gt;' data-ref="_ZN7WebCore3LabC1Ev" data-ref-filename="_ZN7WebCore3LabC1Ev"></a><dfn class="local col9 decl" id="599samples" title='samples' data-type='Lab&lt;float&gt; [5]' data-ref="599samples" data-ref-filename="599samples">samples</dfn>[<a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a>];</td></tr>
<tr><th id="195">195</th><td>    <em>double</em> <dfn class="local col0 decl" id="600differences" title='differences' data-type='double [4]' data-ref="600differences" data-ref-filename="600differences">differences</dfn>[<a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>];</td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td>    <em>auto</em> <dfn class="local col1 decl" id="601shouldStopAfterFindingNonMatchingColor" title='shouldStopAfterFindingNonMatchingColor' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/page/PageColorSampler.cpp:197:51)' data-ref="601shouldStopAfterFindingNonMatchingColor" data-ref-filename="601shouldStopAfterFindingNonMatchingColor">shouldStopAfterFindingNonMatchingColor</dfn> = [&amp;] (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="602i" title='i' data-type='size_t' data-ref="602i" data-ref-filename="602i">i</dfn>) -&gt; <em>bool</em> {</td></tr>
<tr><th id="198">198</th><td>        <i>// Bail if the non-matching color is not the first or last sample, or there already is an non-matching color.</i></td></tr>
<tr><th id="199">199</th><td>        <b>if</b> ((<a class="local col2 ref" href="#602i" title='i' data-ref="602i" data-ref-filename="602i">i</a> &amp;&amp; <a class="local col2 ref" href="#602i" title='i' data-ref="602i" data-ref-filename="602i">i</a> &lt; <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>) || <a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> != <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a>)</td></tr>
<tr><th id="200">200</th><td>            <b>return</b> <b>true</b>;</td></tr>
<tr><th id="201">201</th><td></td></tr>
<tr><th id="202">202</th><td>        <a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> = <a class="local col2 ref" href="#602i" title='i' data-ref="602i" data-ref-filename="602i">i</a>;</td></tr>
<tr><th id="203">203</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="204">204</th><td>    };</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="603i" title='i' data-type='size_t' data-ref="603i" data-ref-filename="603i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> &lt; <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a>; ++<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>) {</td></tr>
<tr><th id="207">207</th><td>        <em>auto</em> <dfn class="local col4 decl" id="604sample" title='sample' data-type='std::__1::optional&lt;WebCore::Lab&lt;float&gt;&gt;' data-ref="604sample" data-ref-filename="604sample">sample</dfn> = <a class="ref fn" href="#_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" title='WebCore::sampleColor' data-ref="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" data-ref-filename="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE">sampleColor</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="local col4 ref" href="#594mainDocument" title='mainDocument' data-ref="594mainDocument" data-ref-filename="594mainDocument">mainDocument</a></span>, <a class="type" href="../platform/graphics/IntPoint.h.html#WebCore::IntPoint" title='WebCore::IntPoint' data-ref="WebCore::IntPoint" data-ref-filename="WebCore..IntPoint">IntPoint</a><a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZN7WebCore8IntPointC1Eii" title='WebCore::IntPoint::IntPoint' data-ref="_ZN7WebCore8IntPointC1Eii" data-ref-filename="_ZN7WebCore8IntPointC1Eii">(</a><a class="local col6 ref" href="#596frameWidth" title='frameWidth' data-ref="596frameWidth" data-ref-filename="596frameWidth">frameWidth</a> * <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> / (<a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>), <var>0</var>));</td></tr>
<tr><th id="208">208</th><td>        <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col4 ref" href="#604sample" title='sample' data-ref="604sample" data-ref-filename="604sample">sample</a>) {</td></tr>
<tr><th id="209">209</th><td>            <b>if</b> (<a class="local col1 ref" href="#601shouldStopAfterFindingNonMatchingColor" title='shouldStopAfterFindingNonMatchingColor' data-ref="601shouldStopAfterFindingNonMatchingColor" data-ref-filename="601shouldStopAfterFindingNonMatchingColor">shouldStopAfterFindingNonMatchingColor</a><a class="ref fn" href="#_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" title='WebCore::PageColorSampler::sampleTop(WebCore::Page &amp;)::(anonymous class)::operator()' data-ref="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" data-ref-filename="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm">(<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>)</a>)</td></tr>
<tr><th id="210">210</th><td>                <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="211">211</th><td>            <b>continue</b>;</td></tr>
<tr><th id="212">212</th><td>        }</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>        <a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>] <a class="ref fn" href="../platform/graphics/ColorTypes.h.html#409" title='WebCore::Lab&lt;float&gt;::operator=' data-ref="_ZN7WebCore3LabIfEaSERKS1_" data-ref-filename="_ZN7WebCore3LabIfEaSERKS1_">=</a> <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span><a class="local col4 ref" href="#604sample" title='sample' data-ref="604sample" data-ref-filename="604sample">sample</a>;</td></tr>
<tr><th id="215">215</th><td></td></tr>
<tr><th id="216">216</th><td>        <b>if</b> (<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>) {</td></tr>
<tr><th id="217">217</th><td>            <i>// Each `difference` item compares `i` with `i - 1` so if the first comparison (`i == 1`)</i></td></tr>
<tr><th id="218">218</th><td><i>            // is too large of a difference, we should treat `i - 1` (i.e. `0`) as the problem since</i></td></tr>
<tr><th id="219">219</th><td><i>            // we only allow for non-matching colors being the first or last sampled color.</i></td></tr>
<tr><th id="220">220</th><td>            <em>auto</em> <dfn class="local col5 decl" id="605effectiveNonMatchingColorIndex" title='effectiveNonMatchingColorIndex' data-type='unsigned long' data-ref="605effectiveNonMatchingColorIndex" data-ref-filename="605effectiveNonMatchingColorIndex">effectiveNonMatchingColorIndex</dfn> = <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> == <var>1</var> ? <var>0</var> : <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>;</td></tr>
<tr><th id="221">221</th><td></td></tr>
<tr><th id="222">222</th><td>            <a class="local col0 ref" href="#600differences" title='differences' data-ref="600differences" data-ref-filename="600differences">differences</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> - <var>1</var>] = <a class="ref fn" href="#_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" title='WebCore::colorDifference' data-ref="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" data-ref-filename="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_">colorDifference</a>(<span class='refarg'><a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> - <var>1</var>]</span>, <span class='refarg'><a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>]</span>);</td></tr>
<tr><th id="223">223</th><td>            <b>if</b> (<a class="local col0 ref" href="#600differences" title='differences' data-ref="600differences" data-ref-filename="600differences">differences</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> - <var>1</var>] &gt; <a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a>) {</td></tr>
<tr><th id="224">224</th><td>                <b>if</b> (<a class="local col1 ref" href="#601shouldStopAfterFindingNonMatchingColor" title='shouldStopAfterFindingNonMatchingColor' data-ref="601shouldStopAfterFindingNonMatchingColor" data-ref-filename="601shouldStopAfterFindingNonMatchingColor">shouldStopAfterFindingNonMatchingColor</a><a class="ref fn" href="#_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" title='WebCore::PageColorSampler::sampleTop(WebCore::Page &amp;)::(anonymous class)::operator()' data-ref="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" data-ref-filename="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm">(<a class="local col5 ref" href="#605effectiveNonMatchingColorIndex" title='effectiveNonMatchingColorIndex' data-ref="605effectiveNonMatchingColorIndex" data-ref-filename="605effectiveNonMatchingColorIndex">effectiveNonMatchingColorIndex</a>)</a>)</td></tr>
<tr><th id="225">225</th><td>                    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="226">226</th><td>                <b>continue</b>;</td></tr>
<tr><th id="227">227</th><td>            }</td></tr>
<tr><th id="228">228</th><td></td></tr>
<tr><th id="229">229</th><td>            <em>double</em> <dfn class="local col6 decl" id="606cumuluativeDifference" title='cumuluativeDifference' data-type='double' data-ref="606cumuluativeDifference" data-ref-filename="606cumuluativeDifference">cumuluativeDifference</dfn> = <var>0</var>;</td></tr>
<tr><th id="230">230</th><td>            <b>for</b> (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="607j" title='j' data-type='size_t' data-ref="607j" data-ref-filename="607j">j</dfn> = <var>0</var>; <a class="local col7 ref" href="#607j" title='j' data-ref="607j" data-ref-filename="607j">j</a> &lt; <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a>; ++<a class="local col7 ref" href="#607j" title='j' data-ref="607j" data-ref-filename="607j">j</a>) {</td></tr>
<tr><th id="231">231</th><td>                <b>if</b> (<a class="local col7 ref" href="#607j" title='j' data-ref="607j" data-ref-filename="607j">j</a> == <a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a>)</td></tr>
<tr><th id="232">232</th><td>                    <b>continue</b>;</td></tr>
<tr><th id="233">233</th><td>                <a class="local col6 ref" href="#606cumuluativeDifference" title='cumuluativeDifference' data-ref="606cumuluativeDifference" data-ref-filename="606cumuluativeDifference">cumuluativeDifference</a> += <a class="local col0 ref" href="#600differences" title='differences' data-ref="600differences" data-ref-filename="600differences">differences</a>[<a class="local col7 ref" href="#607j" title='j' data-ref="607j" data-ref-filename="607j">j</a>];</td></tr>
<tr><th id="234">234</th><td>            }</td></tr>
<tr><th id="235">235</th><td>            <b>if</b> (<a class="local col6 ref" href="#606cumuluativeDifference" title='cumuluativeDifference' data-ref="606cumuluativeDifference" data-ref-filename="606cumuluativeDifference">cumuluativeDifference</a> &gt; <a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a>) {</td></tr>
<tr><th id="236">236</th><td>                <b>if</b> (<a class="local col1 ref" href="#601shouldStopAfterFindingNonMatchingColor" title='shouldStopAfterFindingNonMatchingColor' data-ref="601shouldStopAfterFindingNonMatchingColor" data-ref-filename="601shouldStopAfterFindingNonMatchingColor">shouldStopAfterFindingNonMatchingColor</a><a class="ref fn" href="#_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" title='WebCore::PageColorSampler::sampleTop(WebCore::Page &amp;)::(anonymous class)::operator()' data-ref="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm" data-ref-filename="_ZZN7WebCore16PageColorSampler9sampleTopERNS_4PageEENK3$_4clEm">(<a class="local col5 ref" href="#605effectiveNonMatchingColorIndex" title='effectiveNonMatchingColorIndex' data-ref="605effectiveNonMatchingColorIndex" data-ref-filename="605effectiveNonMatchingColorIndex">effectiveNonMatchingColorIndex</a>)</a>) {</td></tr>
<tr><th id="237">237</th><td>                    <i>// If we haven't already identified a non-matching sample and the difference between the first</i></td></tr>
<tr><th id="238">238</th><td><i>                    // and second samples or the second-to-last and last samples is less than the maximum, mark</i></td></tr>
<tr><th id="239">239</th><td><i>                    // the first/last sample as non-matching to give a chance for the rest of the samples to match.</i></td></tr>
<tr><th id="240">240</th><td>                    <b>if</b> (<a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> == <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> &amp;&amp; (!<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> || <a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> == <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>) &amp;&amp; <a class="local col6 ref" href="#606cumuluativeDifference" title='cumuluativeDifference' data-ref="606cumuluativeDifference" data-ref-filename="606cumuluativeDifference">cumuluativeDifference</a> - <a class="local col0 ref" href="#600differences" title='differences' data-ref="600differences" data-ref-filename="600differences">differences</a>[<a class="local col3 ref" href="#603i" title='i' data-ref="603i" data-ref-filename="603i">i</a> - <var>1</var>] &lt;= <a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a>) {</td></tr>
<tr><th id="241">241</th><td>                        <a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> = <a class="local col5 ref" href="#605effectiveNonMatchingColorIndex" title='effectiveNonMatchingColorIndex' data-ref="605effectiveNonMatchingColorIndex" data-ref-filename="605effectiveNonMatchingColorIndex">effectiveNonMatchingColorIndex</a>;</td></tr>
<tr><th id="242">242</th><td>                        <b>continue</b>;</td></tr>
<tr><th id="243">243</th><td>                    }</td></tr>
<tr><th id="244">244</th><td>                    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="245">245</th><td>                }</td></tr>
<tr><th id="246">246</th><td>                <b>continue</b>;</td></tr>
<tr><th id="247">247</th><td>            }</td></tr>
<tr><th id="248">248</th><td>        }</td></tr>
<tr><th id="249">249</th><td>    }</td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td>    <i>// Decrease the height by one pixel so that the last sample is within bounds and not off-by-one.</i></td></tr>
<tr><th id="252">252</th><td>    <em>auto</em> <dfn class="local col8 decl" id="608minHeight" title='minHeight' data-type='double' data-ref="608minHeight" data-ref-filename="608minHeight">minHeight</dfn> = <a class="local col2 ref" href="#592page" title='page' data-ref="592page" data-ref-filename="592page">page</a>.<a class="ref fn" href="Page.h.html#_ZNK7WebCore4Page8settingsEv" title='WebCore::Page::settings' data-ref="_ZNK7WebCore4Page8settingsEv" data-ref-filename="_ZNK7WebCore4Page8settingsEv">settings</a>().<a class="ref fn" href="../../../WebKitBuild/Debug/DerivedSources/WebCore/Settings.h.html#_ZNK7WebCore8Settings28sampledPageTopColorMinHeightEv" title='WebCore::Settings::sampledPageTopColorMinHeight' data-ref="_ZNK7WebCore8Settings28sampledPageTopColorMinHeightEv" data-ref-filename="_ZNK7WebCore8Settings28sampledPageTopColorMinHeightEv">sampledPageTopColorMinHeight</a>() - <var>1</var>;</td></tr>
<tr><th id="253">253</th><td>    <b>if</b> (<a class="local col8 ref" href="#608minHeight" title='minHeight' data-ref="608minHeight" data-ref-filename="608minHeight">minHeight</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="254">254</th><td>        <b>if</b> (<a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a>) {</td></tr>
<tr><th id="255">255</th><td>            <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col9 decl" id="609leftMiddleSample" title='leftMiddleSample' data-type='std::__1::optional&lt;WebCore::Lab&lt;float&gt;&gt;' data-ref="609leftMiddleSample" data-ref-filename="609leftMiddleSample"><a class="local col9 ref" href="#609leftMiddleSample" title='leftMiddleSample' data-ref="609leftMiddleSample" data-ref-filename="609leftMiddleSample">leftMiddleSample</a></dfn> = <a class="ref fn" href="#_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" title='WebCore::sampleColor' data-ref="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" data-ref-filename="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE">sampleColor</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="local col4 ref" href="#594mainDocument" title='mainDocument' data-ref="594mainDocument" data-ref-filename="594mainDocument">mainDocument</a></span>, <a class="type" href="../platform/graphics/IntPoint.h.html#WebCore::IntPoint" title='WebCore::IntPoint' data-ref="WebCore::IntPoint" data-ref-filename="WebCore..IntPoint">IntPoint</a><a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZN7WebCore8IntPointC1Eii" title='WebCore::IntPoint::IntPoint' data-ref="_ZN7WebCore8IntPointC1Eii" data-ref-filename="_ZN7WebCore8IntPointC1Eii">(</a><var>0</var>, <a class="local col8 ref" href="#608minHeight" title='minHeight' data-ref="608minHeight" data-ref-filename="608minHeight">minHeight</a>))) {</td></tr>
<tr><th id="256">256</th><td>                <b>if</b> (<a class="ref fn" href="#_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" title='WebCore::colorDifference' data-ref="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" data-ref-filename="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_">colorDifference</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span><a class="local col9 ref" href="#609leftMiddleSample" title='leftMiddleSample' data-ref="609leftMiddleSample" data-ref-filename="609leftMiddleSample">leftMiddleSample</a></span>, <span class='refarg'><a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>[<var>0</var>]</span>) &gt; <a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a>)</td></tr>
<tr><th id="257">257</th><td>                    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="258">258</th><td>            }</td></tr>
<tr><th id="259">259</th><td>        }</td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td>        <b>if</b> (<a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> != <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>) {</td></tr>
<tr><th id="262">262</th><td>            <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col0 decl" id="610rightMiddleSample" title='rightMiddleSample' data-type='std::__1::optional&lt;WebCore::Lab&lt;float&gt;&gt;' data-ref="610rightMiddleSample" data-ref-filename="610rightMiddleSample"><a class="local col0 ref" href="#610rightMiddleSample" title='rightMiddleSample' data-ref="610rightMiddleSample" data-ref-filename="610rightMiddleSample">rightMiddleSample</a></dfn> = <a class="ref fn" href="#_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" title='WebCore::sampleColor' data-ref="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE" data-ref-filename="_ZN7WebCoreL11sampleColorERNS_8DocumentEONS_8IntPointE">sampleColor</a>(<span class='refarg'><a class="ref fn" href="../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrdeEv" title='WTF::RefPtr::operator*' data-ref="_ZNK3WTF6RefPtrdeEv" data-ref-filename="_ZNK3WTF6RefPtrdeEv">*</a><a class="local col4 ref" href="#594mainDocument" title='mainDocument' data-ref="594mainDocument" data-ref-filename="594mainDocument">mainDocument</a></span>, <a class="type" href="../platform/graphics/IntPoint.h.html#WebCore::IntPoint" title='WebCore::IntPoint' data-ref="WebCore::IntPoint" data-ref-filename="WebCore..IntPoint">IntPoint</a><a class="ref fn" href="../platform/graphics/IntPoint.h.html#_ZN7WebCore8IntPointC1Eii" title='WebCore::IntPoint::IntPoint' data-ref="_ZN7WebCore8IntPointC1Eii" data-ref-filename="_ZN7WebCore8IntPointC1Eii">(</a><a class="local col6 ref" href="#596frameWidth" title='frameWidth' data-ref="596frameWidth" data-ref-filename="596frameWidth">frameWidth</a>, <a class="local col8 ref" href="#608minHeight" title='minHeight' data-ref="608minHeight" data-ref-filename="608minHeight">minHeight</a>))) {</td></tr>
<tr><th id="263">263</th><td>                <b>if</b> (<a class="ref fn" href="#_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" title='WebCore::colorDifference' data-ref="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_" data-ref-filename="_ZN7WebCoreL15colorDifferenceERNS_3LabIfEES2_">colorDifference</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span><a class="local col0 ref" href="#610rightMiddleSample" title='rightMiddleSample' data-ref="610rightMiddleSample" data-ref-filename="610rightMiddleSample">rightMiddleSample</a></span>, <span class='refarg'><a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>[<a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>]</span>) &gt; <a class="local col3 ref" href="#593maxDifference" title='maxDifference' data-ref="593maxDifference" data-ref-filename="593maxDifference">maxDifference</a>)</td></tr>
<tr><th id="264">264</th><td>                    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1Ev" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1Ev" data-ref-filename="_ZN7WebCore5ColorC1Ev">(</a>);</td></tr>
<tr><th id="265">265</th><td>            }</td></tr>
<tr><th id="266">266</th><td>        }</td></tr>
<tr><th id="267">267</th><td>    }</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>    <em>auto</em> <dfn class="local col1 decl" id="611samplesToAverage" title='samplesToAverage' data-type='WebCore::Lab&lt;float&gt; *' data-ref="611samplesToAverage" data-ref-filename="611samplesToAverage">samplesToAverage</dfn> = <a class="local col9 ref" href="#599samples" title='samples' data-ref="599samples" data-ref-filename="599samples">samples</a>;</td></tr>
<tr><th id="270">270</th><td>    <em>auto</em> <dfn class="local col2 decl" id="612validSampleCount" title='validSampleCount' data-type='int' data-ref="612validSampleCount" data-ref-filename="612validSampleCount">validSampleCount</dfn> = <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a>;</td></tr>
<tr><th id="271">271</th><td>    <b>if</b> (!<a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a>) {</td></tr>
<tr><th id="272">272</th><td>        <i>// Skip the first sample by moving the pointer that indicates where the sample array</i></td></tr>
<tr><th id="273">273</th><td><i>        // starts and decreasing the count of samples to average.</i></td></tr>
<tr><th id="274">274</th><td>        ++<a class="local col1 ref" href="#611samplesToAverage" title='samplesToAverage' data-ref="611samplesToAverage" data-ref-filename="611samplesToAverage">samplesToAverage</a>;</td></tr>
<tr><th id="275">275</th><td>        --<a class="local col2 ref" href="#612validSampleCount" title='validSampleCount' data-ref="612validSampleCount" data-ref-filename="612validSampleCount">validSampleCount</a>;</td></tr>
<tr><th id="276">276</th><td>    } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#598nonMatchingColorIndex" title='nonMatchingColorIndex' data-ref="598nonMatchingColorIndex" data-ref-filename="598nonMatchingColorIndex">nonMatchingColorIndex</a> == <a class="local col7 ref" href="#597numSamples" title='numSamples' data-ref="597numSamples" data-ref-filename="597numSamples">numSamples</a> - <var>1</var>) {</td></tr>
<tr><th id="277">277</th><td>        <i>// Skip the last sample by decreasing the count of samples to average.</i></td></tr>
<tr><th id="278">278</th><td>        --<a class="local col2 ref" href="#612validSampleCount" title='validSampleCount' data-ref="612validSampleCount" data-ref-filename="612validSampleCount">validSampleCount</a>;</td></tr>
<tr><th id="279">279</th><td>    }</td></tr>
<tr><th id="280">280</th><td>    <b>return</b> <span class='ref fn fake' title='std::__1::optional::optional&lt;_Tp&gt;' data-ref="_ZNSt3__18optionalC1EOTL0__" data-ref-filename="_ZNSt3__18optionalC1EOTL0__"></span><a class="type" href="../platform/graphics/Color.h.html#WebCore::Color" title='WebCore::Color' data-ref="WebCore::Color" data-ref-filename="WebCore..Color">Color</a><a class="ref fn" href="../platform/graphics/Color.h.html#_ZN7WebCore5ColorC1ERKT_N3WTF9OptionSetINS0_5FlagsEEE" title='WebCore::Color::Color' data-ref="_ZN7WebCore5ColorC1ERKT_N3WTF9OptionSetINS0_5FlagsEEE" data-ref-filename="_ZN7WebCore5ColorC1ERKT_N3WTF9OptionSetINS0_5FlagsEEE">(</a><a class="ref fn" href="#_ZN7WebCoreL12averageColorEPNS_3LabIfEEm" title='WebCore::averageColor' data-ref="_ZN7WebCoreL12averageColorEPNS_3LabIfEEm" data-ref-filename="_ZN7WebCoreL12averageColorEPNS_3LabIfEEm">averageColor</a>(<a class="local col1 ref" href="#611samplesToAverage" title='samplesToAverage' data-ref="611samplesToAverage" data-ref-filename="611samplesToAverage">samplesToAverage</a>, <a class="local col2 ref" href="#612validSampleCount" title='validSampleCount' data-ref="612validSampleCount" data-ref-filename="612validSampleCount">validSampleCount</a>));</td></tr>
<tr><th id="281">281</th><td>}</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>} <i>// namespace WebCore</i></td></tr>
<tr><th id="284">284</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource231.cpp.html'>webkit/WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource231.cpp</a><br/>Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
