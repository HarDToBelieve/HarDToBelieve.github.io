<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>WebCoreResourceHandleAsOperationQueueDelegate.mm source code [webkit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm'; var root_path = '../../../../../..'; var data_path = '../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>webkit</a>/<a href='../../../..'>Source</a>/<a href='../../..'>WebCore</a>/<a href='../..'>platform</a>/<a href='..'>network</a>/<a href='./'>mac</a>/<a href='WebCoreResourceHandleAsOperationQueueDelegate.mm.html'>WebCoreResourceHandleAsOperationQueueDelegate.mm</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2004-2018 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS''</i></td></tr>
<tr><th id="14">14</th><td><i> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,</i></td></tr>
<tr><th id="15">15</th><td><i> * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="16">16</th><td><i> * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS</i></td></tr>
<tr><th id="17">17</th><td><i> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</i></td></tr>
<tr><th id="18">18</th><td><i> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</i></td></tr>
<tr><th id="19">19</th><td><i> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</i></td></tr>
<tr><th id="20">20</th><td><i> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</i></td></tr>
<tr><th id="21">21</th><td><i> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</i></td></tr>
<tr><th id="22">22</th><td><i> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</i></td></tr>
<tr><th id="23">23</th><td><i> * THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="24">24</th><td><i> */</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#import <a href="../../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#import <a href="WebCoreResourceHandleAsOperationQueueDelegate.h.html">"WebCoreResourceHandleAsOperationQueueDelegate.h"</a></u></td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><u>#import <a href="../cf/AuthenticationChallenge.h.html">"AuthenticationChallenge.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#import <a href="AuthenticationMac.h.html">"AuthenticationMac.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#import <a href="../../Logging.h.html">"Logging.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#import <a href="../NetworkingContext.h.html">"NetworkingContext.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#import <a href="../ResourceHandle.h.html">"ResourceHandle.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#import <a href="../ResourceHandleClient.h.html">"ResourceHandleClient.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#import <a href="../cf/ResourceRequest.h.html">"ResourceRequest.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#import <a href="../cf/ResourceResponse.h.html">"ResourceResponse.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#import <a href="../../../page/SecurityOrigin.h.html">"SecurityOrigin.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#import <a href="../../SharedBuffer.h.html">"SharedBuffer.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#import <a href="../SynchronousLoaderClient.h.html">"SynchronousLoaderClient.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#import <a href="WebCoreURLResponse.h.html">"WebCoreURLResponse.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#import <a href="../../../PAL/pal/spi/cf/CFNetworkSPI.h.html">&lt;pal/spi/cf/CFNetworkSPI.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td><u>#import <a href="../../../PAL/pal/spi/cocoa/NSURLConnectionSPI.h.html">&lt;pal/spi/cocoa/NSURLConnectionSPI.h&gt;</a></u></td></tr>
<tr><th id="43">43</th><td><u>#import <a href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html">&lt;wtf/BlockPtr.h&gt;</a></u></td></tr>
<tr><th id="44">44</th><td><u>#import <a href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html">&lt;wtf/MainThread.h&gt;</a></u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><b>using</b> <b>namespace</b> <span class="namespace">WebCore</span>;</td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def fn" id="_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805" title='scheduledWithCustomRunLoopMode' data-type='bool scheduledWithCustomRunLoopMode(const std::optional&lt;SchedulePairHashSet&gt; &amp; pairs)' data-ref="_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805" data-ref-filename="_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805">scheduledWithCustomRunLoopMode</dfn>(<em>const</em> <span class="namespace">std::</span><span class='type' title='std::__1::optional' data-ref="std::__1::optional" data-ref-filename="std..__1..optional">optional</span>&lt;<a class="typedef" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/SchedulePair.h.html#WTF::SchedulePairHashSet" title='WTF::SchedulePairHashSet' data-type='HashSet&lt;RefPtr&lt;WTF::SchedulePair&gt;, WTF::SchedulePairHash&gt;' data-ref="WTF::SchedulePairHashSet" data-ref-filename="WTF..SchedulePairHashSet">SchedulePairHashSet</a>&gt;&amp; <dfn class="local col5 decl" id="45pairs" title='pairs' data-type='const std::optional&lt;SchedulePairHashSet&gt; &amp;' data-ref="45pairs" data-ref-filename="45pairs">pairs</dfn>)</td></tr>
<tr><th id="49">49</th><td>{</td></tr>
<tr><th id="50">50</th><td>    <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col5 ref" href="#45pairs" title='pairs' data-ref="45pairs" data-ref-filename="45pairs">pairs</a>)</td></tr>
<tr><th id="51">51</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="52">52</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col6 decl" id="46pair" title='pair' data-type='const WTF::RefPtr&lt;WTF::SchedulePair, WTF::RawPtrTraits&lt;WTF::SchedulePair&gt;, WTF::DefaultRefDerefTraits&lt;WTF::SchedulePair&gt;&gt; &amp;' data-ref="46pair" data-ref-filename="46pair">pair</dfn> : <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNKRSt3__18optionaldeEv" data-ref-filename="_ZNKRSt3__18optionaldeEv">*</span><a class="local col5 ref" href="#45pairs" title='pairs' data-ref="45pairs" data-ref-filename="45pairs">pairs</a>) {</td></tr>
<tr><th id="53">53</th><td>        <em>auto</em> <dfn class="local col7 decl" id="47mode" title='mode' data-type='const __CFString *' data-ref="47mode" data-ref-filename="47mode">mode</dfn> = <a class="local col6 ref" href="#46pair" title='pair' data-ref="46pair" data-ref-filename="46pair">pair</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/SchedulePair.h.html#_ZNK3WTF12SchedulePair4modeEv" title='WTF::SchedulePair::mode' data-ref="_ZNK3WTF12SchedulePair4modeEv" data-ref-filename="_ZNK3WTF12SchedulePair4modeEv">mode</a>();</td></tr>
<tr><th id="54">54</th><td>        <b>if</b> (<a class="local col7 ref" href="#47mode" title='mode' data-ref="47mode" data-ref-filename="47mode">mode</a> != <span class='ref' title='kCFRunLoopCommonModes' data-ref="kCFRunLoopCommonModes" data-ref-filename="kCFRunLoopCommonModes">kCFRunLoopCommonModes</span> &amp;&amp; <a class="local col7 ref" href="#47mode" title='mode' data-ref="47mode" data-ref-filename="47mode">mode</a> != <span class='ref' title='kCFRunLoopDefaultMode' data-ref="kCFRunLoopDefaultMode" data-ref-filename="kCFRunLoopDefaultMode">kCFRunLoopDefaultMode</span>)</td></tr>
<tr><th id="55">55</th><td>            <b>return</b> <b>true</b>;</td></tr>
<tr><th id="56">56</th><td>    }</td></tr>
<tr><th id="57">57</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="58">58</th><td>}</td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td>@implementation WebCoreResourceHandleAsOperationQueueDelegate</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td>- (<em>void</em>)callFunctionOnMainThread:(<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Function" title='WTF::Function' data-ref="WTF::Function" data-ref-filename="WTF..Function">Function</a>&lt;<em>void</em>()&gt;&amp;&amp;)<dfn class="local col8 decl" id="48function" title='function' data-type='Function&lt;void ()&gt; &amp;&amp;' data-ref="48function" data-ref-filename="48function">function</dfn></td></tr>
<tr><th id="63">63</th><td>{</td></tr>
<tr><th id="64">64</th><td>    <i>// Sync xhr uses the message queue.</i></td></tr>
<tr><th id="65">65</th><td>    <b>if</b> (<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a>m_messageQueue)</td></tr>
<tr><th id="66">66</th><td>        <b>return</b> m_messageQueue<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../SynchronousLoaderClient.h.html#_ZN7WebCore29SynchronousLoaderMessageQueue6appendEONSt3__110unique_ptrIN3WTF8FunctionIFvvEEENS1_14default_deleteIS6_EEEE" title='WebCore::SynchronousLoaderMessageQueue::append' data-ref="_ZN7WebCore29SynchronousLoaderMessageQueue6appendEONSt3__110unique_ptrIN3WTF8FunctionIFvvEEENS1_14default_deleteIS6_EEEE" data-ref-filename="_ZN7WebCore29SynchronousLoaderMessageQueue6appendEONSt3__110unique_ptrIN3WTF8FunctionIFvvEEENS1_14default_deleteIS6_EEEE">append</a>(<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#_ZN3WTF10makeUniqueEDpOT0_" title='WTF::makeUnique' data-ref="_ZN3WTF10makeUniqueEDpOT0_" data-ref-filename="_ZN3WTF10makeUniqueEDpOT0_">makeUnique</a>&lt;<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Function" title='WTF::Function' data-ref="WTF::Function" data-ref-filename="WTF..Function">Function</a>&lt;<em>void</em>()&gt;&gt;(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(function)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col8 ref" href="#48function" title='function' data-ref="48function" data-ref-filename="48function">function</a></span>)));</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>    <i>// This is the common case.</i></td></tr>
<tr><th id="69">69</th><td>    <b>if</b> (!<a class="tu ref fn" href="#_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805" title='scheduledWithCustomRunLoopMode' data-use='c' data-ref="_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805" data-ref-filename="_ZL30scheduledWithCustomRunLoopModeRKNSt3__18optionalIN3WTF7HashSetINS1_6RefPtrINS1_12SchedulePairENS1_12RawPtrTraitsIS4_EENS1_21DefaultRefDerefTraits2911805">scheduledWithCustomRunLoopMode</a>(m_scheduledPairs))</td></tr>
<tr><th id="70">70</th><td>        <b>return</b> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF16callOnMainThreadEONS_8FunctionIFvvEEE" title='WTF::callOnMainThread' data-ref="_ZN3WTF16callOnMainThreadEONS_8FunctionIFvvEEE" data-ref-filename="_ZN3WTF16callOnMainThreadEONS_8FunctionIFvvEEE">callOnMainThread</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(function)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col8 ref" href="#48function" title='function' data-ref="48function" data-ref-filename="48function">function</a></span>));</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td>    <i>// If we have been scheduled in a custom run loop mode, schedule a block in that mode.</i></td></tr>
<tr><th id="73">73</th><td>    <em>auto</em> <dfn class="local col9 decl" id="49block" title='block' data-type='WTF::BlockPtr&lt;void ()&gt;' data-ref="49block" data-ref-filename="49block">block</dfn> = <a class="tu ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZN3WTF12makeBlockPtrEOT_" title='WTF::makeBlockPtr' data-use='c' data-ref="_ZN3WTF12makeBlockPtrEOT_" data-ref-filename="_ZN3WTF12makeBlockPtrEOT_">makeBlockPtr</a>([<dfn class="local col0 decl" id="50alreadyCalled" title='alreadyCalled' data-type='bool' data-ref="50alreadyCalled" data-ref-filename="50alreadyCalled">alreadyCalled</dfn> = <b>false</b>, <dfn class="local col1 decl" id="51function" title='function' data-type='WTF::Function&lt;void ()&gt;' data-ref="51function" data-ref-filename="51function">function</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(function)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col8 ref" href="#48function" title='function' data-ref="48function" data-ref-filename="48function">function</a></span>)] () <em>mutable</em> {</td></tr>
<tr><th id="74">74</th><td>        <b>if</b> (<a class="local col0 ref" href="#50alreadyCalled" title='alreadyCalled' data-ref="50alreadyCalled" data-ref-filename="50alreadyCalled">alreadyCalled</a>)</td></tr>
<tr><th id="75">75</th><td>            <b>return</b>;</td></tr>
<tr><th id="76">76</th><td>        <a class="local col0 ref" href="#50alreadyCalled" title='alreadyCalled' data-ref="50alreadyCalled" data-ref-filename="50alreadyCalled">alreadyCalled</a> = <b>true</b>;</td></tr>
<tr><th id="77">77</th><td>        <a class="local col1 ref" href="#51function" title='function' data-ref="51function" data-ref-filename="51function">function</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZNK3WTF8FunctionIFT_DpT0_EEclES3_" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK3WTF8FunctionIFT_DpT0_EEclES3_" data-ref-filename="_ZNK3WTF8FunctionIFT_DpT0_EEclES3_">()</a>;</td></tr>
<tr><th id="78">78</th><td>        <a class="local col1 ref" href="#51function" title='function' data-ref="51function" data-ref-filename="51function">function</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEaSEDn" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator=' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEaSEDn" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEaSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="79">79</th><td>    });</td></tr>
<tr><th id="80">80</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col2 decl" id="52pair" title='pair' data-type='const WTF::RefPtr&lt;WTF::SchedulePair, WTF::RawPtrTraits&lt;WTF::SchedulePair&gt;, WTF::DefaultRefDerefTraits&lt;WTF::SchedulePair&gt;&gt; &amp;' data-ref="52pair" data-ref-filename="52pair">pair</dfn> : <span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span>m_scheduledPairs)</td></tr>
<tr><th id="81">81</th><td>        <span class='ref fn' title='CFRunLoopPerformBlock' data-ref="CFRunLoopPerformBlock" data-ref-filename="CFRunLoopPerformBlock">CFRunLoopPerformBlock</span>(<a class="local col2 ref" href="#52pair" title='pair' data-ref="52pair" data-ref-filename="52pair">pair</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/SchedulePair.h.html#_ZNK3WTF12SchedulePair7runLoopEv" title='WTF::SchedulePair::runLoop' data-ref="_ZNK3WTF12SchedulePair7runLoopEv" data-ref-filename="_ZNK3WTF12SchedulePair7runLoopEv">runLoop</a>(), <a class="local col2 ref" href="#52pair" title='pair' data-ref="52pair" data-ref-filename="52pair">pair</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/SchedulePair.h.html#_ZNK3WTF12SchedulePair4modeEv" title='WTF::SchedulePair::mode' data-ref="_ZNK3WTF12SchedulePair4modeEv" data-ref-filename="_ZNK3WTF12SchedulePair4modeEv">mode</a>(), <a class="local col9 ref" href="#49block" title='block' data-ref="49block" data-ref-filename="49block">block</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" title='WTF::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::get' data-ref="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" data-ref-filename="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv">get</a>());</td></tr>
<tr><th id="82">82</th><td>}</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td>- (<span class='typedef' title='id' data-type='id' data-ref="id" data-ref-filename="id">id</span>)initWithHandle:(<span class="namespace">WebCore::</span><a class="type" href="../ResourceHandle.h.html#WebCore::ResourceHandle" title='WebCore::ResourceHandle' data-ref="WebCore::ResourceHandle" data-ref-filename="WebCore..ResourceHandle">ResourceHandle</a>*)<dfn class="local col3 decl" id="53handle" title='handle' data-type='WebCore::ResourceHandle *' data-ref="53handle" data-ref-filename="53handle">handle</dfn> messageQueue:(<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RefPtr" title='WTF::RefPtr' data-ref="WTF::RefPtr" data-ref-filename="WTF..RefPtr">RefPtr</a>&lt;<span class="namespace">WebCore::</span><a class="type" href="../SynchronousLoaderClient.h.html#WebCore::SynchronousLoaderMessageQueue" title='WebCore::SynchronousLoaderMessageQueue' data-ref="WebCore::SynchronousLoaderMessageQueue" data-ref-filename="WebCore..SynchronousLoaderMessageQueue">SynchronousLoaderMessageQueue</a>&gt;&amp;&amp;)<dfn class="local col4 decl" id="54messageQueue" title='messageQueue' data-type='RefPtr&lt;WebCore::SynchronousLoaderMessageQueue&gt; &amp;&amp;' data-ref="54messageQueue" data-ref-filename="54messageQueue">messageQueue</dfn></td></tr>
<tr><th id="85">85</th><td>{</td></tr>
<tr><th id="86">86</th><td>    <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> init];</td></tr>
<tr><th id="87">87</th><td>    <b>if</b> (!<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>)</td></tr>
<tr><th id="88">88</th><td>        <b>return</b> <span class="macro" title="nullptr" data-ref="_M/nil">nil</span>;</td></tr>
<tr><th id="89">89</th><td></td></tr>
<tr><th id="90">90</th><td>    m_handle = <a class="local col3 ref" href="#53handle" title='handle' data-ref="53handle" data-ref-filename="53handle">handle</a>;</td></tr>
<tr><th id="91">91</th><td>    <b>if</b> (m_handle &amp;&amp; m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle7contextEv" title='WebCore::ResourceHandle::context' data-ref="_ZNK7WebCore14ResourceHandle7contextEv" data-ref-filename="_ZNK7WebCore14ResourceHandle7contextEv">context</a>()) {</td></tr>
<tr><th id="92">92</th><td>        <b>if</b> (<em>auto</em>* <dfn class="local col6 decl" id="56pairs" title='pairs' data-type='WTF::HashSet&lt;WTF::RefPtr&lt;WTF::SchedulePair, WTF::RawPtrTraits&lt;WTF::SchedulePair&gt;, WTF::DefaultRefDerefTraits&lt;WTF::SchedulePair&gt;&gt;, WTF::SchedulePairHash, WTF::HashTraits&lt;WTF::RefPtr&lt;WTF::SchedulePair, WTF::RawPtrTraits&lt;WTF::SchedulePair&gt;, WTF::DefaultRefDerefTraits&lt;WTF::SchedulePair&gt;&gt;&gt;, WTF::HashTableTraits&gt; *' data-ref="56pairs" data-ref-filename="56pairs"><a class="local col6 ref" href="#56pairs" title='pairs' data-ref="56pairs" data-ref-filename="56pairs">pairs</a></dfn> = m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle7contextEv" title='WebCore::ResourceHandle::context' data-ref="_ZNK7WebCore14ResourceHandle7contextEv" data-ref-filename="_ZNK7WebCore14ResourceHandle7contextEv">context</a>()-&gt;<a class="virtual ref fn" href="../NetworkingContext.h.html#_ZNK7WebCore17NetworkingContext21scheduledRunLoopPairsEv" title='WebCore::NetworkingContext::scheduledRunLoopPairs' data-ref="_ZNK7WebCore17NetworkingContext21scheduledRunLoopPairsEv" data-ref-filename="_ZNK7WebCore17NetworkingContext21scheduledRunLoopPairsEv">scheduledRunLoopPairs</a>())</td></tr>
<tr><th id="93">93</th><td>            m_scheduledPairs <span class='ref fn' title='std::__1::optional::operator=' data-ref="_ZNSt3__18optionalaSEOTL0__" data-ref-filename="_ZNSt3__18optionalaSEOTL0__">=</span> *<a class="local col6 ref" href="#56pairs" title='pairs' data-ref="56pairs" data-ref-filename="56pairs">pairs</a>;</td></tr>
<tr><th id="94">94</th><td>    }</td></tr>
<tr><th id="95">95</th><td>    m_messageQueue <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEONS_6RefPtrIT_T0_T1_EE" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEONS_6RefPtrIT_T0_T1_EE" data-ref-filename="_ZN3WTF6RefPtraSEONS_6RefPtrIT_T0_T1_EE">=</a> <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(messageQueue)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#54messageQueue" title='messageQueue' data-ref="54messageQueue" data-ref-filename="54messageQueue">messageQueue</a></span>);</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td>    <b>return</b> <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>;</td></tr>
<tr><th id="98">98</th><td>}</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>- (<em>void</em>)detachHandle</td></tr>
<tr><th id="101">101</th><td>{</td></tr>
<tr><th id="102">102</th><td>    Locker <dfn class="local col7 decl" id="57locker" title='locker' data-type='WTF::Locker&lt;WTF::Lock&gt;' data-ref="57locker" data-ref-filename="57locker">locker</dfn> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF6LockerINS_4LockEEC1ERS1_" title='WTF::Locker&lt;WTF::Lock&gt;::Locker' data-ref="_ZN3WTF6LockerINS_4LockEEC1ERS1_" data-ref-filename="_ZN3WTF6LockerINS_4LockEEC1ERS1_">{</a> m_lock };</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td>    m_handle = <b>nullptr</b>;</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td>    m_messageQueue <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="107">107</th><td>    m_requestResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="108">108</th><td>    m_cachedResponseResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="109">109</th><td>    m_boolResult = <span class="macro" title="__objc_no" data-ref="_M/NO">NO</span>;</td></tr>
<tr><th id="110">110</th><td>    m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>(); <i>// OK to signal even if we are not waiting.</i></td></tr>
<tr><th id="111">111</th><td>}</td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td>- (<em>void</em>)dealloc</td></tr>
<tr><th id="114">114</th><td>{</td></tr>
<tr><th id="115">115</th><td>    [super dealloc];</td></tr>
<tr><th id="116">116</th><td>}</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td>- (NSURLRequest *)connection:(NSURLConnection *)<dfn class="local col8 decl" id="58connection" title='connection' data-type='NSURLConnection *' data-ref="58connection" data-ref-filename="58connection">connection</dfn> willSendRequest:(NSURLRequest *)<dfn class="local col9 decl" id="59newRequest" title='newRequest' data-type='NSURLRequest *' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</dfn> redirectResponse:(NSURLResponse *)<dfn class="local col0 decl" id="60redirectResponse" title='redirectResponse' data-type='NSURLResponse *' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</dfn></td></tr>
<tr><th id="119">119</th><td>{</td></tr>
<tr><th id="120">120</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 120, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(120, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 486); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="121">121</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a>);</td></tr>
<tr><th id="122">122</th><td></td></tr>
<tr><th id="123">123</th><td>    <a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a> = <a class="ref fn" href="WebCoreURLResponse.h.html#_ZN7WebCore37synthesizeRedirectResponseIfNecessaryEP12NSURLRequestS1_P13NSURLResponse" title='WebCore::synthesizeRedirectResponseIfNecessary' data-ref="_ZN7WebCore37synthesizeRedirectResponseIfNecessaryEP12NSURLRequestS1_P13NSURLResponse" data-ref-filename="_ZN7WebCore37synthesizeRedirectResponseIfNecessaryEP12NSURLRequestS1_P13NSURLResponse">synthesizeRedirectResponseIfNecessary</a>([<a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a> currentRequest], <a class="local col9 ref" href="#59newRequest" title='newRequest' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</a>, <a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a>);</td></tr>
<tr><th id="124">124</th><td></td></tr>
<tr><th id="125">125</th><td>    <i>// See &lt;rdar://problem/5380697&gt;. This is a workaround for a behavior change in CFNetwork where willSendRequest gets called more often.</i></td></tr>
<tr><th id="126">126</th><td>    <b>if</b> (!<a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a>)</td></tr>
<tr><th id="127">127</th><td>        <b>return</b> <a class="local col9 ref" href="#59newRequest" title='newRequest' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</a>;</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td><u>#<span data-ppcond="129">if</span> !<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#95" title="!1" data-ref="_M/LOG_DISABLED">LOG_DISABLED</a></u></td></tr>
<tr><th id="130">130</th><td>    <b>if</b> ([<a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a> isKindOfClass:[NSHTTPURLResponse <b>class</b>]])</td></tr>
<tr><th id="131">131</th><td>        <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p willSendRequest:%@ redirectResponse:%d, Location:&lt;%@&gt;&quot;, m_handle, connection, [newRequest description], static_cast&lt;int&gt;([(id)redirectResponse statusCode]), [[(id)redirectResponse allHeaderFields] objectForKey:@&quot;Location&quot;])" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p willSendRequest:%@ redirectResponse:%d, Location:&lt;%@&gt;"</q>, m_handle, <a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a>, [<a class="local col9 ref" href="#59newRequest" title='newRequest' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</a> description], <b>static_cast</b>&lt;<em>int</em>&gt;([(<span class='typedef' title='id' data-type='id' data-ref="id" data-ref-filename="id">id</span>)<a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a> statusCode]), [[(<span class='typedef' title='id' data-type='id' data-ref="id" data-ref-filename="id">id</span>)<a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a> allHeaderFields] objectForKey:@<q>"Location"</q>]);</td></tr>
<tr><th id="132">132</th><td>    <b>else</b></td></tr>
<tr><th id="133">133</th><td>        <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p willSendRequest:%@ redirectResponse:non-HTTP&quot;, m_handle, connection, [newRequest description])" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p willSendRequest:%@ redirectResponse:non-HTTP"</q>, m_handle, <a class="local col8 ref" href="#58connection" title='connection' data-ref="58connection" data-ref-filename="58connection">connection</a>, [<a class="local col9 ref" href="#59newRequest" title='newRequest' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</a> description]); </td></tr>
<tr><th id="134">134</th><td><u>#<span data-ppcond="129">endif</span></u></td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td>    <em>auto</em> <dfn class="local col1 decl" id="61protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="61protectedSelf" data-ref-filename="61protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>);</td></tr>
<tr><th id="137">137</th><td>    <em>auto</em> <dfn class="local col2 decl" id="62work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:137:17)' data-ref="62work" data-ref-filename="62work">work</dfn> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"><a class="local col1 ref" href="#61protectedSelf" title='protectedSelf' data-ref="61protectedSelf" data-ref-filename="61protectedSelf">protectedSelf</a></a>, <dfn class="local col3 decl" id="63newRequest" title='newRequest' data-type='WTF::RetainPtr&lt;NSURLRequest&gt;' data-ref="63newRequest" data-ref-filename="63newRequest">newRequest</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col9 ref" href="#59newRequest" title='newRequest' data-ref="59newRequest" data-ref-filename="59newRequest">newRequest</a>), <dfn class="local col4 decl" id="64redirectResponse" title='redirectResponse' data-type='WTF::RetainPtr&lt;NSURLResponse&gt;' data-ref="64redirectResponse" data-ref-filename="64redirectResponse">redirectResponse</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col0 ref" href="#60redirectResponse" title='redirectResponse' data-ref="60redirectResponse" data-ref-filename="60redirectResponse">redirectResponse</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="138">138</th><td>        <b>if</b> (!m_handle) {</td></tr>
<tr><th id="139">139</th><td>            m_requestResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="140">140</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="141">141</th><td>            <b>return</b>;</td></tr>
<tr><th id="142">142</th><td>        }</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td>        <a class="type" href="../cf/ResourceResponse.h.html#WebCore::ResourceResponse" title='WebCore::ResourceResponse' data-ref="WebCore::ResourceResponse" data-ref-filename="WebCore..ResourceResponse">ResourceResponse</a> <dfn class="local col5 decl" id="65response" title='response' data-type='WebCore::ResourceResponse' data-ref="65response" data-ref-filename="65response">response</dfn><a class="ref fn" href="../cf/ResourceResponse.h.html#_ZN7WebCore16ResourceResponseC1EP13NSURLResponse" title='WebCore::ResourceResponse::ResourceResponse' data-ref="_ZN7WebCore16ResourceResponseC1EP13NSURLResponse" data-ref-filename="_ZN7WebCore16ResourceResponseC1EP13NSURLResponse">(</a><a class="local col4 ref" href="#64redirectResponse" title='redirectResponse' data-ref="64redirectResponse" data-ref-filename="64redirectResponse">redirectResponse</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>());</td></tr>
<tr><th id="145">145</th><td>        <a class="type" href="../cf/ResourceRequest.h.html#WebCore::ResourceRequest" title='WebCore::ResourceRequest' data-ref="WebCore::ResourceRequest" data-ref-filename="WebCore..ResourceRequest">ResourceRequest</a> <dfn class="local col6 decl" id="66redirectRequest" title='redirectRequest' data-type='WebCore::ResourceRequest' data-ref="66redirectRequest" data-ref-filename="66redirectRequest">redirectRequest</dfn> = <a class="ref fn fake" href="../cf/ResourceRequest.h.html#_ZN7WebCore15ResourceRequestC1EP12NSURLRequest" title='WebCore::ResourceRequest::ResourceRequest' data-ref="_ZN7WebCore15ResourceRequestC1EP12NSURLRequest" data-ref-filename="_ZN7WebCore15ResourceRequestC1EP12NSURLRequest"></a><a class="local col3 ref" href="#63newRequest" title='newRequest' data-ref="63newRequest" data-ref-filename="63newRequest">newRequest</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>();</td></tr>
<tr><th id="146">146</th><td>        <b>if</b> ([<a class="local col3 ref" href="#63newRequest" title='newRequest' data-ref="63newRequest" data-ref-filename="63newRequest">newRequest</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>() HTTPBodyStream]) {</td></tr>
<tr><th id="147">147</th><td>            <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_handle-&gt;firstRequest().httpBody())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 147, __PRETTY_FUNCTION__, &quot;m_handle-&gt;firstRequest().httpBody()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(147, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 488); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle12firstRequestEv" title='WebCore::ResourceHandle::firstRequest' data-ref="_ZN7WebCore14ResourceHandle12firstRequestEv" data-ref-filename="_ZN7WebCore14ResourceHandle12firstRequestEv">firstRequest</a>().<a class="ref fn" href="../ResourceRequestBase.h.html#_ZNK7WebCore19ResourceRequestBase8httpBodyEv" title='WebCore::ResourceRequestBase::httpBody' data-ref="_ZNK7WebCore19ResourceRequestBase8httpBodyEv" data-ref-filename="_ZNK7WebCore19ResourceRequestBase8httpBodyEv">httpBody</a>());</td></tr>
<tr><th id="148">148</th><td>            <a class="local col6 ref" href="#66redirectRequest" title='redirectRequest' data-ref="66redirectRequest" data-ref-filename="66redirectRequest">redirectRequest</a>.<a class="ref fn" href="../ResourceRequestBase.h.html#_ZN7WebCore19ResourceRequestBase11setHTTPBodyEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" title='WebCore::ResourceRequestBase::setHTTPBody' data-ref="_ZN7WebCore19ResourceRequestBase11setHTTPBodyEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE" data-ref-filename="_ZN7WebCore19ResourceRequestBase11setHTTPBodyEON3WTF6RefPtrINS_8FormDataENS1_12RawPtrTraitsIS3_EENS1_21DefaultRefDerefTraitsIS3_EEEE">setHTTPBody</a>(<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtrC1EPT_" title='WTF::RefPtr::RefPtr&lt;T, type-parameter-0-1, type-parameter-0-2&gt;' data-ref="_ZN3WTF6RefPtrC1EPT_" data-ref-filename="_ZN3WTF6RefPtrC1EPT_"></a>m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle12firstRequestEv" title='WebCore::ResourceHandle::firstRequest' data-ref="_ZN7WebCore14ResourceHandle12firstRequestEv" data-ref-filename="_ZN7WebCore14ResourceHandle12firstRequestEv">firstRequest</a>().<a class="ref fn" href="../ResourceRequestBase.h.html#_ZNK7WebCore19ResourceRequestBase8httpBodyEv" title='WebCore::ResourceRequestBase::httpBody' data-ref="_ZNK7WebCore19ResourceRequestBase8httpBodyEv" data-ref-filename="_ZNK7WebCore19ResourceRequestBase8httpBodyEv">httpBody</a>());</td></tr>
<tr><th id="149">149</th><td>        }</td></tr>
<tr><th id="150">150</th><td>        <b>if</b> (m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle12firstRequestEv" title='WebCore::ResourceHandle::firstRequest' data-ref="_ZN7WebCore14ResourceHandle12firstRequestEv" data-ref-filename="_ZN7WebCore14ResourceHandle12firstRequestEv">firstRequest</a>().<a class="ref fn" href="../ResourceRequestBase.h.html#_ZNK7WebCore19ResourceRequestBase15httpContentTypeEv" title='WebCore::ResourceRequestBase::httpContentType' data-ref="_ZNK7WebCore19ResourceRequestBase15httpContentTypeEv" data-ref-filename="_ZNK7WebCore19ResourceRequestBase15httpContentTypeEv">httpContentType</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="151">151</th><td>            <a class="local col6 ref" href="#66redirectRequest" title='redirectRequest' data-ref="66redirectRequest" data-ref-filename="66redirectRequest">redirectRequest</a>.<a class="ref fn" href="../ResourceRequestBase.h.html#_ZN7WebCore19ResourceRequestBase20clearHTTPContentTypeEv" title='WebCore::ResourceRequestBase::clearHTTPContentType' data-ref="_ZN7WebCore19ResourceRequestBase20clearHTTPContentTypeEv" data-ref-filename="_ZN7WebCore19ResourceRequestBase20clearHTTPContentTypeEv">clearHTTPContentType</a>();</td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td>        <i>// Check if the redirected url is allowed to access the redirecting url's timing information.</i></td></tr>
<tr><th id="154">154</th><td>        <b>if</b> (!m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle22hasCrossOriginRedirectEv" title='WebCore::ResourceHandle::hasCrossOriginRedirect' data-ref="_ZNK7WebCore14ResourceHandle22hasCrossOriginRedirectEv" data-ref-filename="_ZNK7WebCore14ResourceHandle22hasCrossOriginRedirectEv">hasCrossOriginRedirect</a>() &amp;&amp; !<span class="namespace">WebCore::</span><a class="type" href="../../../page/SecurityOrigin.h.html#WebCore::SecurityOrigin" title='WebCore::SecurityOrigin' data-ref="WebCore::SecurityOrigin" data-ref-filename="WebCore..SecurityOrigin">SecurityOrigin</a>::<a class="ref fn" href="../../../page/SecurityOrigin.h.html#_ZN7WebCore14SecurityOrigin6createERKN3WTF3URLE" title='WebCore::SecurityOrigin::create' data-ref="_ZN7WebCore14SecurityOrigin6createERKN3WTF3URLE" data-ref-filename="_ZN7WebCore14SecurityOrigin6createERKN3WTF3URLE">create</a>(<a class="local col6 ref" href="#66redirectRequest" title='redirectRequest' data-ref="66redirectRequest" data-ref-filename="66redirectRequest">redirectRequest</a>.<a class="ref fn" href="../ResourceRequestBase.h.html#_ZNK7WebCore19ResourceRequestBase3urlEv" title='WebCore::ResourceRequestBase::url' data-ref="_ZNK7WebCore19ResourceRequestBase3urlEv" data-ref-filename="_ZNK7WebCore19ResourceRequestBase3urlEv">url</a>())<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Ref.h.html#_ZNK3WTF3RefptEv" title='WTF::Ref::operator-&gt;' data-ref="_ZNK3WTF3RefptEv" data-ref-filename="_ZNK3WTF3RefptEv">-&gt;</a><a class="ref fn" href="../../../page/SecurityOrigin.h.html#_ZNK7WebCore14SecurityOrigin10canRequestERKN3WTF3URLE" title='WebCore::SecurityOrigin::canRequest' data-ref="_ZNK7WebCore14SecurityOrigin10canRequestERKN3WTF3URLE" data-ref-filename="_ZNK7WebCore14SecurityOrigin10canRequestERKN3WTF3URLE">canRequest</a>(<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/URL.h.html#_ZN3WTF3URLC1EP5NSURL" title='WTF::URL::URL' data-ref="_ZN3WTF3URLC1EP5NSURL" data-ref-filename="_ZN3WTF3URLC1EP5NSURL"></a><a class="local col4 ref" href="#64redirectResponse" title='redirectResponse' data-ref="64redirectResponse" data-ref-filename="64redirectResponse">redirectResponse</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>().URL))</td></tr>
<tr><th id="155">155</th><td>            m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle31markAsHavingCrossOriginRedirectEv" title='WebCore::ResourceHandle::markAsHavingCrossOriginRedirect' data-ref="_ZN7WebCore14ResourceHandle31markAsHavingCrossOriginRedirectEv" data-ref-filename="_ZN7WebCore14ResourceHandle31markAsHavingCrossOriginRedirectEv">markAsHavingCrossOriginRedirect</a>();</td></tr>
<tr><th id="156">156</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE" title='WebCore::ResourceHandle::checkTAO' data-ref="_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE" data-ref-filename="_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE">checkTAO</a>(<a class="local col5 ref" href="#65response" title='response' data-ref="65response" data-ref-filename="65response">response</a>);</td></tr>
<tr><th id="157">157</th><td></td></tr>
<tr><th id="158">158</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle22incrementRedirectCountEv" title='WebCore::ResourceHandle::incrementRedirectCount' data-ref="_ZN7WebCore14ResourceHandle22incrementRedirectCountEv" data-ref-filename="_ZN7WebCore14ResourceHandle22incrementRedirectCountEv">incrementRedirectCount</a>();</td></tr>
<tr><th id="159">159</th><td></td></tr>
<tr><th id="160">160</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle15willSendRequestEONS_15ResourceRequestEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvS2_EEE" title='WebCore::ResourceHandle::willSendRequest' data-ref="_ZN7WebCore14ResourceHandle15willSendRequestEONS_15ResourceRequestEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvS2_EEE" data-ref-filename="_ZN7WebCore14ResourceHandle15willSendRequestEONS_15ResourceRequestEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvS2_EEE">willSendRequest</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(redirectRequest)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col6 ref" href="#66redirectRequest" title='redirectRequest' data-ref="66redirectRequest" data-ref-filename="66redirectRequest">redirectRequest</a></span>), <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(response)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col5 ref" href="#65response" title='response' data-ref="65response" data-ref-filename="65response">response</a></span>), <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE"></a>[<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col7 decl" id="67protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="67protectedSelf" data-ref-filename="67protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col1 ref" href="#61protectedSelf" title='protectedSelf' data-ref="61protectedSelf" data-ref-filename="61protectedSelf">protectedSelf</a></span>)](<a class="type" href="../cf/ResourceRequest.h.html#WebCore::ResourceRequest" title='WebCore::ResourceRequest' data-ref="WebCore::ResourceRequest" data-ref-filename="WebCore..ResourceRequest">ResourceRequest</a>&amp;&amp; <dfn class="local col8 decl" id="68request" title='request' data-type='WebCore::ResourceRequest &amp;&amp;' data-ref="68request" data-ref-filename="68request">request</dfn>) {</td></tr>
<tr><th id="161">161</th><td>            m_requestResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <a class="local col8 ref" href="#68request" title='request' data-ref="68request" data-ref-filename="68request">request</a>.<a class="ref fn" href="../cf/ResourceRequest.h.html#_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE" title='WebCore::ResourceRequest::nsURLRequest' data-ref="_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE" data-ref-filename="_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE">nsURLRequest</a>(<a class="type" href="../ResourceRequestBase.h.html#WebCore::HTTPBodyUpdatePolicy" title='WebCore::HTTPBodyUpdatePolicy' data-ref="WebCore::HTTPBodyUpdatePolicy" data-ref-filename="WebCore..HTTPBodyUpdatePolicy">HTTPBodyUpdatePolicy</a>::<a class="enum" href="../ResourceRequestBase.h.html#WebCore::UpdateHTTPBody" title='WebCore::UpdateHTTPBody' data-ref="WebCore::UpdateHTTPBody" data-ref-filename="WebCore..UpdateHTTPBody">UpdateHTTPBody</a>);</td></tr>
<tr><th id="162">162</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="163">163</th><td>        });</td></tr>
<tr><th id="164">164</th><td>    };</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col2 ref" href="#62work" title='work' data-ref="62work" data-ref-filename="62work">work</a></span>)];</td></tr>
<tr><th id="167">167</th><td>    m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore4waitEv" title='WTF::BinarySemaphore::wait' data-ref="_ZN3WTF15BinarySemaphore4waitEv" data-ref-filename="_ZN3WTF15BinarySemaphore4waitEv">wait</a>();</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>    Locker <dfn class="local col9 decl" id="69locker" title='locker' data-type='WTF::Locker&lt;WTF::Lock&gt;' data-ref="69locker" data-ref-filename="69locker">locker</dfn> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF6LockerINS_4LockEEC1ERS1_" title='WTF::Locker&lt;WTF::Lock&gt;::Locker' data-ref="_ZN3WTF6LockerINS_4LockEEC1ERS1_" data-ref-filename="_ZN3WTF6LockerINS_4LockEEC1ERS1_">{</a> m_lock };</td></tr>
<tr><th id="170">170</th><td>    <b>if</b> (!m_handle)</td></tr>
<tr><th id="171">171</th><td>        <b>return</b> <span class="macro" title="nullptr" data-ref="_M/nil">nil</span>;</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RetainPtr" title='WTF::RetainPtr' data-ref="WTF::RetainPtr" data-ref-filename="WTF..RetainPtr">RetainPtr</a>&lt;NSURLRequest&gt; <dfn class="local col0 decl" id="70requestResult" title='requestResult' data-type='RetainPtr&lt;NSURLRequest&gt;' data-ref="70requestResult" data-ref-filename="70requestResult">requestResult</dfn> = <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"></a>m_requestResult;</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>    <i>// Make sure protectedSelf gets destroyed on the main thread in case this is the last strong reference to self</i></td></tr>
<tr><th id="176">176</th><td><i>    // as we do not want to get destroyed on a non-main thread.</i></td></tr>
<tr><th id="177">177</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col1 decl" id="71protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="71protectedSelf" data-ref-filename="71protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col1 ref" href="#61protectedSelf" title='protectedSelf' data-ref="61protectedSelf" data-ref-filename="61protectedSelf">protectedSelf</a></span>)] { }];</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>    <b>return</b> <a class="local col0 ref" href="#70requestResult" title='requestResult' data-ref="70requestResult" data-ref-filename="70requestResult">requestResult</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtr11autoreleaseEv" title='WTF::RetainPtr::autorelease' data-ref="_ZN3WTF9RetainPtr11autoreleaseEv" data-ref-filename="_ZN3WTF9RetainPtr11autoreleaseEv">autorelease</a>();</td></tr>
<tr><th id="180">180</th><td>}</td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td><a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#498" title="" data-ref="_M/ALLOW_DEPRECATED_IMPLEMENTATIONS_BEGIN">ALLOW_DEPRECATED_IMPLEMENTATIONS_BEGIN</a></td></tr>
<tr><th id="183">183</th><td>- (<em>void</em>)connection:(NSURLConnection *)<dfn class="local col2 decl" id="72connection" title='connection' data-type='NSURLConnection * _Nonnull' data-ref="72connection" data-ref-filename="72connection">connection</dfn> didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)<dfn class="local col3 decl" id="73challenge" title='challenge' data-type='NSURLAuthenticationChallenge * _Nonnull' data-ref="73challenge" data-ref-filename="73challenge">challenge</dfn></td></tr>
<tr><th id="184">184</th><td><a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#499" title="" data-ref="_M/ALLOW_DEPRECATED_IMPLEMENTATIONS_END">ALLOW_DEPRECATED_IMPLEMENTATIONS_END</a></td></tr>
<tr><th id="185">185</th><td>{</td></tr>
<tr><th id="186">186</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 186, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(186, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 490); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="187">187</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col2 ref" href="#72connection" title='connection' data-ref="72connection" data-ref-filename="72connection">connection</a>);</td></tr>
<tr><th id="188">188</th><td></td></tr>
<tr><th id="189">189</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p didReceiveAuthenticationChallenge:%p&quot;, m_handle, connection, challenge)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p didReceiveAuthenticationChallenge:%p"</q>, m_handle, <a class="local col2 ref" href="#72connection" title='connection' data-ref="72connection" data-ref-filename="72connection">connection</a>, <a class="local col3 ref" href="#73challenge" title='challenge' data-ref="73challenge" data-ref-filename="73challenge">challenge</a>);</td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td>    <em>auto</em> <dfn class="local col4 decl" id="74work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:191:17)' data-ref="74work" data-ref-filename="74work">work</dfn> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col5 decl" id="75protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="75protectedSelf" data-ref-filename="75protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>), <dfn class="local col6 decl" id="76challenge" title='challenge' data-type='WTF::RetainPtr&lt;NSURLAuthenticationChallenge&gt;' data-ref="76challenge" data-ref-filename="76challenge">challenge</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col3 ref" href="#73challenge" title='challenge' data-ref="73challenge" data-ref-filename="73challenge">challenge</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="192">192</th><td>        <b>if</b> (!m_handle) {</td></tr>
<tr><th id="193">193</th><td>            [[<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col6 ref" href="#76challenge" title='challenge' data-ref="76challenge" data-ref-filename="76challenge">challenge</a> sender] cancelAuthenticationChallenge:<a class="local col6 ref" href="#76challenge" title='challenge' data-ref="76challenge" data-ref-filename="76challenge">challenge</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>()];</td></tr>
<tr><th id="194">194</th><td>            <b>return</b>;</td></tr>
<tr><th id="195">195</th><td>        }</td></tr>
<tr><th id="196">196</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle33didReceiveAuthenticationChallengeERKNS_23AuthenticationChallengeE" title='WebCore::ResourceHandle::didReceiveAuthenticationChallenge' data-ref="_ZN7WebCore14ResourceHandle33didReceiveAuthenticationChallengeERKNS_23AuthenticationChallengeE" data-ref-filename="_ZN7WebCore14ResourceHandle33didReceiveAuthenticationChallengeERKNS_23AuthenticationChallengeE">didReceiveAuthenticationChallenge</a>(<a class="ref fn" href="AuthenticationMac.h.html#_ZN7WebCore4coreEP28NSURLAuthenticationChallenge" title='WebCore::core' data-ref="_ZN7WebCore4coreEP28NSURLAuthenticationChallenge" data-ref-filename="_ZN7WebCore4coreEP28NSURLAuthenticationChallenge">core</a>(<a class="local col6 ref" href="#76challenge" title='challenge' data-ref="76challenge" data-ref-filename="76challenge">challenge</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>()));</td></tr>
<tr><th id="197">197</th><td>    };</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#74work" title='work' data-ref="74work" data-ref-filename="74work">work</a></span>)];</td></tr>
<tr><th id="200">200</th><td>}</td></tr>
<tr><th id="201">201</th><td></td></tr>
<tr><th id="202">202</th><td><a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#498" title="" data-ref="_M/ALLOW_DEPRECATED_IMPLEMENTATIONS_BEGIN">ALLOW_DEPRECATED_IMPLEMENTATIONS_BEGIN</a></td></tr>
<tr><th id="203">203</th><td>- (<span class='typedef' title='BOOL' data-type='bool' data-ref="BOOL" data-ref-filename="BOOL">BOOL</span>)connection:(NSURLConnection *)<dfn class="local col7 decl" id="77connection" title='connection' data-type='NSURLConnection * _Nonnull' data-ref="77connection" data-ref-filename="77connection">connection</dfn> canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)<dfn class="local col8 decl" id="78protectionSpace" title='protectionSpace' data-type='NSURLProtectionSpace * _Nonnull' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</dfn></td></tr>
<tr><th id="204">204</th><td><a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#499" title="" data-ref="_M/ALLOW_DEPRECATED_IMPLEMENTATIONS_END">ALLOW_DEPRECATED_IMPLEMENTATIONS_END</a></td></tr>
<tr><th id="205">205</th><td>{</td></tr>
<tr><th id="206">206</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 206, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(206, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 492); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="207">207</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col7 ref" href="#77connection" title='connection' data-ref="77connection" data-ref-filename="77connection">connection</a>);</td></tr>
<tr><th id="208">208</th><td></td></tr>
<tr><th id="209">209</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p canAuthenticateAgainstProtectionSpace:%@://%@:%u realm:%@ method:%@ %@%@&quot;, m_handle, connection, [protectionSpace protocol], [protectionSpace host], [protectionSpace port], [protectionSpace realm], [protectionSpace authenticationMethod], [protectionSpace isProxy] ? @&quot;proxy:&quot; : @&quot;&quot;, [protectionSpace isProxy] ? [protectionSpace proxyType] : @&quot;&quot;)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p canAuthenticateAgainstProtectionSpace:%@://%@:%u realm:%@ method:%@ %@%@"</q>, m_handle, <a class="local col7 ref" href="#77connection" title='connection' data-ref="77connection" data-ref-filename="77connection">connection</a>, [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> protocol], [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> host], [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> port], [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> realm], [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> authenticationMethod], [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> isProxy] ? @<q>"proxy:"</q> : @<q>""</q>, [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> isProxy] ? [<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a> proxyType] : @<q>""</q>);</td></tr>
<tr><th id="210">210</th><td></td></tr>
<tr><th id="211">211</th><td>    <em>auto</em> <dfn class="local col9 decl" id="79protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="79protectedSelf" data-ref-filename="79protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>);</td></tr>
<tr><th id="212">212</th><td>    <em>auto</em> <dfn class="local col0 decl" id="80work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:212:17)' data-ref="80work" data-ref-filename="80work">work</dfn> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"><a class="local col9 ref" href="#79protectedSelf" title='protectedSelf' data-ref="79protectedSelf" data-ref-filename="79protectedSelf">protectedSelf</a></a>, <dfn class="local col1 decl" id="81protectionSpace" title='protectionSpace' data-type='WTF::RetainPtr&lt;NSURLProtectionSpace&gt;' data-ref="81protectionSpace" data-ref-filename="81protectionSpace">protectionSpace</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col8 ref" href="#78protectionSpace" title='protectionSpace' data-ref="78protectionSpace" data-ref-filename="78protectionSpace">protectionSpace</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="213">213</th><td>        <b>if</b> (!m_handle) {</td></tr>
<tr><th id="214">214</th><td>            m_boolResult = <span class="macro" title="__objc_no" data-ref="_M/NO">NO</span>;</td></tr>
<tr><th id="215">215</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="216">216</th><td>            <b>return</b>;</td></tr>
<tr><th id="217">217</th><td>        }</td></tr>
<tr><th id="218">218</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle37canAuthenticateAgainstProtectionSpaceERKNS_15ProtectionSpaceEON3WTF17CompletionHandlerIFvbEEE" title='WebCore::ResourceHandle::canAuthenticateAgainstProtectionSpace' data-ref="_ZN7WebCore14ResourceHandle37canAuthenticateAgainstProtectionSpaceERKNS_15ProtectionSpaceEON3WTF17CompletionHandlerIFvbEEE" data-ref-filename="_ZN7WebCore14ResourceHandle37canAuthenticateAgainstProtectionSpaceERKNS_15ProtectionSpaceEON3WTF17CompletionHandlerIFvbEEE">canAuthenticateAgainstProtectionSpace</a>(<a class="type" href="../cocoa/ProtectionSpaceCocoa.h.html#WebCore::ProtectionSpace" title='WebCore::ProtectionSpace' data-ref="WebCore::ProtectionSpace" data-ref-filename="WebCore..ProtectionSpace">ProtectionSpace</a><a class="ref fn" href="../cocoa/ProtectionSpaceCocoa.h.html#_ZN7WebCore15ProtectionSpaceC1EP20NSURLProtectionSpace" title='WebCore::ProtectionSpace::ProtectionSpace' data-ref="_ZN7WebCore15ProtectionSpaceC1EP20NSURLProtectionSpace" data-ref-filename="_ZN7WebCore15ProtectionSpaceC1EP20NSURLProtectionSpace">(</a><a class="local col1 ref" href="#81protectionSpace" title='protectionSpace' data-ref="81protectionSpace" data-ref-filename="81protectionSpace">protectionSpace</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>()), <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE"></a>[<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col2 decl" id="82protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="82protectedSelf" data-ref-filename="82protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col9 ref" href="#79protectedSelf" title='protectedSelf' data-ref="79protectedSelf" data-ref-filename="79protectedSelf">protectedSelf</a></span>)] (<em>bool</em> <dfn class="local col3 decl" id="83result" title='result' data-type='bool' data-ref="83result" data-ref-filename="83result">result</dfn>) <em>mutable</em> {</td></tr>
<tr><th id="219">219</th><td>            m_boolResult = <a class="local col3 ref" href="#83result" title='result' data-ref="83result" data-ref-filename="83result">result</a>;</td></tr>
<tr><th id="220">220</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="221">221</th><td>        });</td></tr>
<tr><th id="222">222</th><td>    };</td></tr>
<tr><th id="223">223</th><td></td></tr>
<tr><th id="224">224</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col0 ref" href="#80work" title='work' data-ref="80work" data-ref-filename="80work">work</a></span>)];</td></tr>
<tr><th id="225">225</th><td>    m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore4waitEv" title='WTF::BinarySemaphore::wait' data-ref="_ZN3WTF15BinarySemaphore4waitEv" data-ref-filename="_ZN3WTF15BinarySemaphore4waitEv">wait</a>();</td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td>    Locker <dfn class="local col4 decl" id="84locker" title='locker' data-type='WTF::Locker&lt;WTF::Lock&gt;' data-ref="84locker" data-ref-filename="84locker">locker</dfn> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF6LockerINS_4LockEEC1ERS1_" title='WTF::Locker&lt;WTF::Lock&gt;::Locker' data-ref="_ZN3WTF6LockerINS_4LockEEC1ERS1_" data-ref-filename="_ZN3WTF6LockerINS_4LockEEC1ERS1_">{</a> m_lock };</td></tr>
<tr><th id="228">228</th><td>    <b>if</b> (!m_handle)</td></tr>
<tr><th id="229">229</th><td>        <b>return</b> <span class="macro" title="__objc_no" data-ref="_M/NO">NO</span>;</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>    <em>auto</em> <dfn class="local col5 decl" id="85boolResult" title='boolResult' data-type='bool' data-ref="85boolResult" data-ref-filename="85boolResult">boolResult</dfn> = m_boolResult;</td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td>    <i>// Make sure protectedSelf gets destroyed on the main thread in case this is the last strong reference to self</i></td></tr>
<tr><th id="234">234</th><td><i>    // as we do not want to get destroyed on a non-main thread.</i></td></tr>
<tr><th id="235">235</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col6 decl" id="86protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="86protectedSelf" data-ref-filename="86protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col9 ref" href="#79protectedSelf" title='protectedSelf' data-ref="79protectedSelf" data-ref-filename="79protectedSelf">protectedSelf</a></span>)] { }];</td></tr>
<tr><th id="236">236</th><td></td></tr>
<tr><th id="237">237</th><td>    <b>return</b> <a class="local col5 ref" href="#85boolResult" title='boolResult' data-ref="85boolResult" data-ref-filename="85boolResult">boolResult</a>;</td></tr>
<tr><th id="238">238</th><td>}</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td>- (<em>void</em>)connection:(NSURLConnection *)<dfn class="local col7 decl" id="87connection" title='connection' data-type='NSURLConnection *' data-ref="87connection" data-ref-filename="87connection">connection</dfn> didReceiveResponse:(NSURLResponse *)<dfn class="local col8 decl" id="88r" title='r' data-type='NSURLResponse *' data-ref="88r" data-ref-filename="88r">r</dfn></td></tr>
<tr><th id="241">241</th><td>{</td></tr>
<tr><th id="242">242</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 242, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(242, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 494); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="243">243</th><td></td></tr>
<tr><th id="244">244</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p didReceiveResponse:%p (HTTP status %d, reported MIMEType &apos;%s&apos;)&quot;, m_handle, connection, r, [r respondsToSelector:@selector(statusCode)] ? [(id)r statusCode] : 0, [[r MIMEType] UTF8String])" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p didReceiveResponse:%p (HTTP status %d, reported MIMEType '%s')"</q>, m_handle, <a class="local col7 ref" href="#87connection" title='connection' data-ref="87connection" data-ref-filename="87connection">connection</a>, <a class="local col8 ref" href="#88r" title='r' data-ref="88r" data-ref-filename="88r">r</a>, [<a class="local col8 ref" href="#88r" title='r' data-ref="88r" data-ref-filename="88r">r</a> respondsToSelector:@selector(statusCode)] ? [(<span class='typedef' title='id' data-type='id' data-ref="id" data-ref-filename="id">id</span>)<a class="local col8 ref" href="#88r" title='r' data-ref="88r" data-ref-filename="88r">r</a> statusCode] : <var>0</var>, [[<a class="local col8 ref" href="#88r" title='r' data-ref="88r" data-ref-filename="88r">r</a> MIMEType] UTF8String]);</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>    <em>auto</em> <dfn class="local col9 decl" id="89protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="89protectedSelf" data-ref-filename="89protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>);</td></tr>
<tr><th id="247">247</th><td>    <em>auto</em> <dfn class="local col0 decl" id="90work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:247:17)' data-ref="90work" data-ref-filename="90work">work</dfn> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"><a class="local col9 ref" href="#89protectedSelf" title='protectedSelf' data-ref="89protectedSelf" data-ref-filename="89protectedSelf">protectedSelf</a></a>, <dfn class="local col1 decl" id="91r" title='r' data-type='WTF::RetainPtr&lt;NSURLResponse&gt;' data-ref="91r" data-ref-filename="91r">r</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col8 ref" href="#88r" title='r' data-ref="88r" data-ref-filename="88r">r</a>), <dfn class="local col2 decl" id="92connection" title='connection' data-type='WTF::RetainPtr&lt;NSURLConnection&gt;' data-ref="92connection" data-ref-filename="92connection">connection</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col7 ref" href="#87connection" title='connection' data-ref="87connection" data-ref-filename="87connection">connection</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="248">248</th><td>        <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RefPtr" title='WTF::RefPtr' data-ref="WTF::RefPtr" data-ref-filename="WTF..RefPtr">RefPtr</a>&lt;<a class="type" href="../ResourceHandle.h.html#WebCore::ResourceHandle" title='WebCore::ResourceHandle' data-ref="WebCore::ResourceHandle" data-ref-filename="WebCore..ResourceHandle">ResourceHandle</a>&gt; <dfn class="local col3 decl" id="93protectedHandle" title='protectedHandle' data-type='RefPtr&lt;WebCore::ResourceHandle&gt;' data-ref="93protectedHandle" data-ref-filename="93protectedHandle">protectedHandle</dfn><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtrC1EPT_" title='WTF::RefPtr::RefPtr&lt;T, type-parameter-0-1, type-parameter-0-2&gt;' data-ref="_ZN3WTF6RefPtrC1EPT_" data-ref-filename="_ZN3WTF6RefPtrC1EPT_">(</a>m_handle);</td></tr>
<tr><th id="249">249</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()) {</td></tr>
<tr><th id="250">250</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="251">251</th><td>            <b>return</b>;</td></tr>
<tr><th id="252">252</th><td>        }</td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td>        <i>// Avoid MIME type sniffing if the response comes back as 304 Not Modified.</i></td></tr>
<tr><th id="255">255</th><td>        <em>int</em> <dfn class="local col4 decl" id="94statusCode" title='statusCode' data-type='int' data-ref="94statusCode" data-ref-filename="94statusCode">statusCode</dfn> = [<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#91r" title='r' data-ref="91r" data-ref-filename="91r">r</a> respondsToSelector:@selector(statusCode)] ? [(<span class='typedef' title='id' data-type='id' data-ref="id" data-ref-filename="id">id</span>)<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#91r" title='r' data-ref="91r" data-ref-filename="91r">r</a> statusCode] : <var>0</var>;</td></tr>
<tr><th id="256">256</th><td>        <b>if</b> (<a class="local col4 ref" href="#94statusCode" title='statusCode' data-ref="94statusCode" data-ref-filename="94statusCode">statusCode</a> != <var>304</var>) {</td></tr>
<tr><th id="257">257</th><td>            <em>bool</em> <dfn class="local col5 decl" id="95isMainResourceLoad" title='isMainResourceLoad' data-type='bool' data-ref="95isMainResourceLoad" data-ref-filename="95isMainResourceLoad">isMainResourceLoad</dfn> = m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle12firstRequestEv" title='WebCore::ResourceHandle::firstRequest' data-ref="_ZN7WebCore14ResourceHandle12firstRequestEv" data-ref-filename="_ZN7WebCore14ResourceHandle12firstRequestEv">firstRequest</a>().<a class="ref fn" href="../ResourceRequestBase.h.html#_ZNK7WebCore19ResourceRequestBase9requesterEv" title='WebCore::ResourceRequestBase::requester' data-ref="_ZNK7WebCore19ResourceRequestBase9requesterEv" data-ref-filename="_ZNK7WebCore19ResourceRequestBase9requesterEv">requester</a>() == <a class="type" href="../cf/ResourceRequest.h.html#WebCore::ResourceRequest" title='WebCore::ResourceRequest' data-ref="WebCore::ResourceRequest" data-ref-filename="WebCore..ResourceRequest">ResourceRequest</a>::<a class="type" href="../ResourceRequestBase.h.html#WebCore::ResourceRequestBase::Requester" title='WebCore::ResourceRequestBase::Requester' data-ref="WebCore::ResourceRequestBase::Requester" data-ref-filename="WebCore..ResourceRequestBase..Requester">Requester</a>::<a class="enum" href="../ResourceRequestBase.h.html#WebCore::ResourceRequestBase::Requester::Main" title='WebCore::ResourceRequestBase::Requester::Main' data-ref="WebCore::ResourceRequestBase::Requester::Main" data-ref-filename="WebCore..ResourceRequestBase..Requester..Main">Main</a>;</td></tr>
<tr><th id="258">258</th><td>            <a class="ref fn" href="WebCoreURLResponse.h.html#_ZN7WebCore25adjustMIMETypeIfNecessaryEP14_CFURLResponseb" title='WebCore::adjustMIMETypeIfNecessary' data-ref="_ZN7WebCore25adjustMIMETypeIfNecessaryEP14_CFURLResponseb" data-ref-filename="_ZN7WebCore25adjustMIMETypeIfNecessaryEP14_CFURLResponseb">adjustMIMETypeIfNecessary</a>([<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#91r" title='r' data-ref="91r" data-ref-filename="91r">r</a> _CFURLResponse], <a class="local col5 ref" href="#95isMainResourceLoad" title='isMainResourceLoad' data-ref="95isMainResourceLoad" data-ref-filename="95isMainResourceLoad">isMainResourceLoad</a>);</td></tr>
<tr><th id="259">259</th><td>        }</td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td>        <b>if</b> ([m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle12firstRequestEv" title='WebCore::ResourceHandle::firstRequest' data-ref="_ZN7WebCore14ResourceHandle12firstRequestEv" data-ref-filename="_ZN7WebCore14ResourceHandle12firstRequestEv">firstRequest</a>().<a class="ref fn" href="../cf/ResourceRequest.h.html#_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE" title='WebCore::ResourceRequest::nsURLRequest' data-ref="_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE" data-ref-filename="_ZNK7WebCore15ResourceRequest12nsURLRequestENS_20HTTPBodyUpdatePolicyE">nsURLRequest</a>(<a class="type" href="../ResourceRequestBase.h.html#WebCore::HTTPBodyUpdatePolicy" title='WebCore::HTTPBodyUpdatePolicy' data-ref="WebCore::HTTPBodyUpdatePolicy" data-ref-filename="WebCore..HTTPBodyUpdatePolicy">HTTPBodyUpdatePolicy</a>::<a class="enum" href="../ResourceRequestBase.h.html#WebCore::DoNotUpdateHTTPBody" title='WebCore::DoNotUpdateHTTPBody' data-ref="WebCore::DoNotUpdateHTTPBody" data-ref-filename="WebCore..DoNotUpdateHTTPBody">DoNotUpdateHTTPBody</a>) _propertyForKey:@<q>"ForceHTMLMIMEType"</q>])</td></tr>
<tr><th id="262">262</th><td>            [<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#91r" title='r' data-ref="91r" data-ref-filename="91r">r</a> _setMIMEType:@<q>"text/html"</q>];</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td>        <a class="type" href="../cf/ResourceResponse.h.html#WebCore::ResourceResponse" title='WebCore::ResourceResponse' data-ref="WebCore::ResourceResponse" data-ref-filename="WebCore..ResourceResponse">ResourceResponse</a> <dfn class="local col6 decl" id="96resourceResponse" title='resourceResponse' data-type='WebCore::ResourceResponse' data-ref="96resourceResponse" data-ref-filename="96resourceResponse">resourceResponse</dfn><a class="ref fn" href="../cf/ResourceResponse.h.html#_ZN7WebCore16ResourceResponseC1EP13NSURLResponse" title='WebCore::ResourceResponse::ResourceResponse' data-ref="_ZN7WebCore16ResourceResponseC1EP13NSURLResponse" data-ref-filename="_ZN7WebCore16ResourceResponseC1EP13NSURLResponse">(</a><a class="local col1 ref" href="#91r" title='r' data-ref="91r" data-ref-filename="91r">r</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>());</td></tr>
<tr><th id="265">265</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE" title='WebCore::ResourceHandle::checkTAO' data-ref="_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE" data-ref-filename="_ZN7WebCore14ResourceHandle8checkTAOERKNS_16ResourceResponseE">checkTAO</a>(<a class="local col6 ref" href="#96resourceResponse" title='resourceResponse' data-ref="96resourceResponse" data-ref-filename="96resourceResponse">resourceResponse</a>);</td></tr>
<tr><th id="266">266</th><td></td></tr>
<tr><th id="267">267</th><td>        <em>auto</em> <dfn class="local col7 decl" id="97metrics" title='metrics' data-type='WTF::Box&lt;WebCore::NetworkLoadMetrics&gt;' data-ref="97metrics" data-ref-filename="97metrics">metrics</dfn> = <a class="ref fn" href="../NetworkLoadMetrics.h.html#_ZN7WebCore14copyTimingDataEP15NSURLConnectionRKNS_14ResourceHandleE" title='WebCore::copyTimingData' data-ref="_ZN7WebCore14copyTimingDataEP15NSURLConnectionRKNS_14ResourceHandleE" data-ref-filename="_ZN7WebCore14copyTimingDataEP15NSURLConnectionRKNS_14ResourceHandleE">copyTimingData</a>(<a class="local col2 ref" href="#92connection" title='connection' data-ref="92connection" data-ref-filename="92connection">connection</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>(), *m_handle);</td></tr>
<tr><th id="268">268</th><td>        <a class="local col6 ref" href="#96resourceResponse" title='resourceResponse' data-ref="96resourceResponse" data-ref-filename="96resourceResponse">resourceResponse</a>.<a class="ref fn" href="../ResourceResponseBase.h.html#_ZN7WebCore20ResourceResponseBase9setSourceENS0_6SourceE" title='WebCore::ResourceResponseBase::setSource' data-ref="_ZN7WebCore20ResourceResponseBase9setSourceENS0_6SourceE" data-ref-filename="_ZN7WebCore20ResourceResponseBase9setSourceENS0_6SourceE">setSource</a>(<a class="type" href="../cf/ResourceResponse.h.html#WebCore::ResourceResponse" title='WebCore::ResourceResponse' data-ref="WebCore::ResourceResponse" data-ref-filename="WebCore..ResourceResponse">ResourceResponse</a>::<a class="type" href="../ResourceResponseBase.h.html#WebCore::ResourceResponseBase::Source" title='WebCore::ResourceResponseBase::Source' data-ref="WebCore::ResourceResponseBase::Source" data-ref-filename="WebCore..ResourceResponseBase..Source">Source</a>::<a class="enum" href="../ResourceResponseBase.h.html#WebCore::ResourceResponseBase::Source::Network" title='WebCore::ResourceResponseBase::Source::Network' data-ref="WebCore::ResourceResponseBase::Source::Network" data-ref-filename="WebCore..ResourceResponseBase..Source..Network">Network</a>);</td></tr>
<tr><th id="269">269</th><td>        <a class="local col6 ref" href="#96resourceResponse" title='resourceResponse' data-ref="96resourceResponse" data-ref-filename="96resourceResponse">resourceResponse</a>.<a class="ref fn" href="../ResourceResponseBase.h.html#_ZN7WebCore20ResourceResponseBase31setDeprecatedNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE" title='WebCore::ResourceResponseBase::setDeprecatedNetworkLoadMetrics' data-ref="_ZN7WebCore20ResourceResponseBase31setDeprecatedNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE" data-ref-filename="_ZN7WebCore20ResourceResponseBase31setDeprecatedNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE">setDeprecatedNetworkLoadMetrics</a>(<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Box.h.html#WTF::Box" title='WTF::Box' data-ref="WTF::Box" data-ref-filename="WTF..Box">Box</a>&lt;<a class="type" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetrics" title='WebCore::NetworkLoadMetrics' data-ref="WebCore::NetworkLoadMetrics" data-ref-filename="WebCore..NetworkLoadMetrics">NetworkLoadMetrics</a>&gt; <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Box.h.html#_ZN3WTF3BoxC1ERKNS_3BoxIT_EE" title='WTF::Box::Box&lt;T&gt;' data-ref="_ZN3WTF3BoxC1ERKNS_3BoxIT_EE" data-ref-filename="_ZN3WTF3BoxC1ERKNS_3BoxIT_EE">{</a> <a class="local col7 ref" href="#97metrics" title='metrics' data-ref="97metrics" data-ref-filename="97metrics">metrics</a> });</td></tr>
<tr><th id="270">270</th><td></td></tr>
<tr><th id="271">271</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle21setNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE" title='WebCore::ResourceHandle::setNetworkLoadMetrics' data-ref="_ZN7WebCore14ResourceHandle21setNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE" data-ref-filename="_ZN7WebCore14ResourceHandle21setNetworkLoadMetricsEON3WTF3BoxINS_18NetworkLoadMetricsEEE">setNetworkLoadMetrics</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(metrics)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col7 ref" href="#97metrics" title='metrics' data-ref="97metrics" data-ref-filename="97metrics">metrics</a></span>));</td></tr>
<tr><th id="272">272</th><td></td></tr>
<tr><th id="273">273</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle18didReceiveResponseEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvvEEE" title='WebCore::ResourceHandle::didReceiveResponse' data-ref="_ZN7WebCore14ResourceHandle18didReceiveResponseEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvvEEE" data-ref-filename="_ZN7WebCore14ResourceHandle18didReceiveResponseEONS_16ResourceResponseEON3WTF17CompletionHandlerIFvvEEE">didReceiveResponse</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(resourceResponse)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col6 ref" href="#96resourceResponse" title='resourceResponse' data-ref="96resourceResponse" data-ref-filename="96resourceResponse">resourceResponse</a></span>), <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE"></a>[<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col8 decl" id="98protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="98protectedSelf" data-ref-filename="98protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col9 ref" href="#89protectedSelf" title='protectedSelf' data-ref="89protectedSelf" data-ref-filename="89protectedSelf">protectedSelf</a></span>)] {</td></tr>
<tr><th id="274">274</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="275">275</th><td>        });</td></tr>
<tr><th id="276">276</th><td>    };</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col0 ref" href="#90work" title='work' data-ref="90work" data-ref-filename="90work">work</a></span>)];</td></tr>
<tr><th id="279">279</th><td>    m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore4waitEv" title='WTF::BinarySemaphore::wait' data-ref="_ZN3WTF15BinarySemaphore4waitEv" data-ref-filename="_ZN3WTF15BinarySemaphore4waitEv">wait</a>();</td></tr>
<tr><th id="280">280</th><td></td></tr>
<tr><th id="281">281</th><td>    <i>// Make sure we get destroyed on the main thread.</i></td></tr>
<tr><th id="282">282</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col9 decl" id="99protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="99protectedSelf" data-ref-filename="99protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col9 ref" href="#89protectedSelf" title='protectedSelf' data-ref="89protectedSelf" data-ref-filename="89protectedSelf">protectedSelf</a></span>)] { }];</td></tr>
<tr><th id="283">283</th><td>}</td></tr>
<tr><th id="284">284</th><td></td></tr>
<tr><th id="285">285</th><td>- (<em>void</em>)connection:(NSURLConnection *)<dfn class="local col0 decl" id="100connection" title='connection' data-type='NSURLConnection *' data-ref="100connection" data-ref-filename="100connection">connection</dfn> didReceiveData:(NSData *)<dfn class="local col1 decl" id="101data" title='data' data-type='NSData *' data-ref="101data" data-ref-filename="101data">data</dfn> lengthReceived:(<em>long</em> <em>long</em>)<dfn class="local col2 decl" id="102lengthReceived" title='lengthReceived' data-type='long long' data-ref="102lengthReceived" data-ref-filename="102lengthReceived">lengthReceived</dfn></td></tr>
<tr><th id="286">286</th><td>{</td></tr>
<tr><th id="287">287</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 287, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(287, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 496); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="288">288</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col0 ref" href="#100connection" title='connection' data-ref="100connection" data-ref-filename="100connection">connection</a>);</td></tr>
<tr><th id="289">289</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)lengthReceived" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col2 ref" href="#102lengthReceived" title='lengthReceived' data-ref="102lengthReceived" data-ref-filename="102lengthReceived">lengthReceived</a>);</td></tr>
<tr><th id="290">290</th><td></td></tr>
<tr><th id="291">291</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p didReceiveData:%p lengthReceived:%lld&quot;, m_handle, connection, data, lengthReceived)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p didReceiveData:%p lengthReceived:%lld"</q>, m_handle, <a class="local col0 ref" href="#100connection" title='connection' data-ref="100connection" data-ref-filename="100connection">connection</a>, <a class="local col1 ref" href="#101data" title='data' data-ref="101data" data-ref-filename="101data">data</a>, <a class="local col2 ref" href="#102lengthReceived" title='lengthReceived' data-ref="102lengthReceived" data-ref-filename="102lengthReceived">lengthReceived</a>);</td></tr>
<tr><th id="292">292</th><td></td></tr>
<tr><th id="293">293</th><td>    <em>auto</em> <dfn class="local col3 decl" id="103work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:293:17)' data-ref="103work" data-ref-filename="103work">work</dfn> = [<dfn class="local col4 decl" id="104self" title='self' data-type='WebCoreResourceHandleAsOperationQueueDelegate *' data-ref="104self" data-ref-filename="104self">self</dfn> = <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col5 decl" id="105protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="105protectedSelf" data-ref-filename="105protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>), <dfn class="local col6 decl" id="106data" title='data' data-type='WTF::RetainPtr&lt;NSData&gt;' data-ref="106data" data-ref-filename="106data">data</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col1 ref" href="#101data" title='data' data-ref="101data" data-ref-filename="101data">data</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="294">294</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>())</td></tr>
<tr><th id="295">295</th><td>            <b>return</b>;</td></tr>
<tr><th id="296">296</th><td>        <i>// FIXME: If we get more than 2B bytes in a single chunk, this code won't do the right thing.</i></td></tr>
<tr><th id="297">297</th><td><i>        // However, with today's computers and networking speeds, this won't happen in practice.</i></td></tr>
<tr><th id="298">298</th><td><i>        // Could be an issue with a giant local file.</i></td></tr>
<tr><th id="299">299</th><td><i></i></td></tr>
<tr><th id="300">300</th><td><i>        // FIXME: <a href="https://bugs.webkit.org/show_bug.cgi?id=19793">https://bugs.webkit.org/show_bug.cgi?id=19793</a></i></td></tr>
<tr><th id="301">301</th><td><i>        // -1 means we do not provide any data about transfer size to inspector so it would use</i></td></tr>
<tr><th id="302">302</th><td><i>        // Content-Length headers or content size to show transfer size.</i></td></tr>
<tr><th id="303">303</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient16didReceiveBufferEPNS_14ResourceHandleEON3WTF3RefINS_12SharedBufferENS3_12RawPtrTraitsIS5_EEEEi" title='WebCore::ResourceHandleClient::didReceiveBuffer' data-ref="_ZN7WebCore20ResourceHandleClient16didReceiveBufferEPNS_14ResourceHandleEON3WTF3RefINS_12SharedBufferENS3_12RawPtrTraitsIS5_EEEEi" data-ref-filename="_ZN7WebCore20ResourceHandleClient16didReceiveBufferEPNS_14ResourceHandleEON3WTF3RefINS_12SharedBufferENS3_12RawPtrTraitsIS5_EEEEi">didReceiveBuffer</a>(m_handle, <a class="type" href="../../SharedBuffer.h.html#WebCore::SharedBuffer" title='WebCore::SharedBuffer' data-ref="WebCore::SharedBuffer" data-ref-filename="WebCore..SharedBuffer">SharedBuffer</a>::<a class="ref fn" href="../../SharedBuffer.h.html#_ZN7WebCore12SharedBuffer6createEP6NSData" title='WebCore::SharedBuffer::create' data-ref="_ZN7WebCore12SharedBuffer6createEP6NSData" data-ref-filename="_ZN7WebCore12SharedBuffer6createEP6NSData">create</a>(<a class="local col6 ref" href="#106data" title='data' data-ref="106data" data-ref-filename="106data">data</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>()), -<var>1</var>);</td></tr>
<tr><th id="304">304</th><td>    };</td></tr>
<tr><th id="305">305</th><td></td></tr>
<tr><th id="306">306</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col3 ref" href="#103work" title='work' data-ref="103work" data-ref-filename="103work">work</a></span>)];</td></tr>
<tr><th id="307">307</th><td>}</td></tr>
<tr><th id="308">308</th><td></td></tr>
<tr><th id="309">309</th><td>- (<em>void</em>)connection:(NSURLConnection *)<dfn class="local col7 decl" id="107connection" title='connection' data-type='NSURLConnection *' data-ref="107connection" data-ref-filename="107connection">connection</dfn> didSendBodyData:(<span class='typedef' title='NSInteger' data-type='long' data-ref="NSInteger" data-ref-filename="NSInteger">NSInteger</span>)<dfn class="local col8 decl" id="108bytesWritten" title='bytesWritten' data-type='NSInteger' data-ref="108bytesWritten" data-ref-filename="108bytesWritten">bytesWritten</dfn> totalBytesWritten:(<span class='typedef' title='NSInteger' data-type='long' data-ref="NSInteger" data-ref-filename="NSInteger">NSInteger</span>)<dfn class="local col9 decl" id="109totalBytesWritten" title='totalBytesWritten' data-type='NSInteger' data-ref="109totalBytesWritten" data-ref-filename="109totalBytesWritten">totalBytesWritten</dfn> totalBytesExpectedToWrite:(<span class='typedef' title='NSInteger' data-type='long' data-ref="NSInteger" data-ref-filename="NSInteger">NSInteger</span>)<dfn class="local col0 decl" id="110totalBytesExpectedToWrite" title='totalBytesExpectedToWrite' data-type='NSInteger' data-ref="110totalBytesExpectedToWrite" data-ref-filename="110totalBytesExpectedToWrite">totalBytesExpectedToWrite</dfn></td></tr>
<tr><th id="310">310</th><td>{</td></tr>
<tr><th id="311">311</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 311, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(311, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 498); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="312">312</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col7 ref" href="#107connection" title='connection' data-ref="107connection" data-ref-filename="107connection">connection</a>);</td></tr>
<tr><th id="313">313</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)bytesWritten" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col8 ref" href="#108bytesWritten" title='bytesWritten' data-ref="108bytesWritten" data-ref-filename="108bytesWritten">bytesWritten</a>);</td></tr>
<tr><th id="314">314</th><td></td></tr>
<tr><th id="315">315</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p didSendBodyData:%d totalBytesWritten:%d totalBytesExpectedToWrite:%d&quot;, m_handle, connection, bytesWritten, totalBytesWritten, totalBytesExpectedToWrite)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p didSendBodyData:%d totalBytesWritten:%d totalBytesExpectedToWrite:%d"</q>, m_handle, <a class="local col7 ref" href="#107connection" title='connection' data-ref="107connection" data-ref-filename="107connection">connection</a>, <a class="local col8 ref" href="#108bytesWritten" title='bytesWritten' data-ref="108bytesWritten" data-ref-filename="108bytesWritten">bytesWritten</a>, <a class="local col9 ref" href="#109totalBytesWritten" title='totalBytesWritten' data-ref="109totalBytesWritten" data-ref-filename="109totalBytesWritten">totalBytesWritten</a>, <a class="local col0 ref" href="#110totalBytesExpectedToWrite" title='totalBytesExpectedToWrite' data-ref="110totalBytesExpectedToWrite" data-ref-filename="110totalBytesExpectedToWrite">totalBytesExpectedToWrite</a>);</td></tr>
<tr><th id="316">316</th><td></td></tr>
<tr><th id="317">317</th><td>    <em>auto</em> <dfn class="local col1 decl" id="111work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:317:17)' data-ref="111work" data-ref-filename="111work">work</dfn> = [<dfn class="local col2 decl" id="112self" title='self' data-type='WebCoreResourceHandleAsOperationQueueDelegate *' data-ref="112self" data-ref-filename="112self">self</dfn> = <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col3 decl" id="113protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="113protectedSelf" data-ref-filename="113protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>), <dfn class="local col4 decl" id="114totalBytesWritten" title='totalBytesWritten' data-type='long' data-ref="114totalBytesWritten" data-ref-filename="114totalBytesWritten">totalBytesWritten</dfn> = <a class="local col9 ref" href="#109totalBytesWritten" title='totalBytesWritten' data-ref="109totalBytesWritten" data-ref-filename="109totalBytesWritten">totalBytesWritten</a>, <dfn class="local col5 decl" id="115totalBytesExpectedToWrite" title='totalBytesExpectedToWrite' data-type='long' data-ref="115totalBytesExpectedToWrite" data-ref-filename="115totalBytesExpectedToWrite">totalBytesExpectedToWrite</dfn> = <a class="local col0 ref" href="#110totalBytesExpectedToWrite" title='totalBytesExpectedToWrite' data-ref="110totalBytesExpectedToWrite" data-ref-filename="110totalBytesExpectedToWrite">totalBytesExpectedToWrite</a>] () <em>mutable</em> {</td></tr>
<tr><th id="318">318</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>())</td></tr>
<tr><th id="319">319</th><td>            <b>return</b>;</td></tr>
<tr><th id="320">320</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient11didSendDataEPNS_14ResourceHandleEyy" title='WebCore::ResourceHandleClient::didSendData' data-ref="_ZN7WebCore20ResourceHandleClient11didSendDataEPNS_14ResourceHandleEyy" data-ref-filename="_ZN7WebCore20ResourceHandleClient11didSendDataEPNS_14ResourceHandleEyy">didSendData</a>(m_handle, <a class="local col4 ref" href="#114totalBytesWritten" title='totalBytesWritten' data-ref="114totalBytesWritten" data-ref-filename="114totalBytesWritten">totalBytesWritten</a>, <a class="local col5 ref" href="#115totalBytesExpectedToWrite" title='totalBytesExpectedToWrite' data-ref="115totalBytesExpectedToWrite" data-ref-filename="115totalBytesExpectedToWrite">totalBytesExpectedToWrite</a>);</td></tr>
<tr><th id="321">321</th><td>    };</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col1 ref" href="#111work" title='work' data-ref="111work" data-ref-filename="111work">work</a></span>)];</td></tr>
<tr><th id="324">324</th><td>}</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td>- (<em>void</em>)connectionDidFinishLoading:(NSURLConnection *)<dfn class="local col6 decl" id="116connection" title='connection' data-type='NSURLConnection *' data-ref="116connection" data-ref-filename="116connection">connection</dfn></td></tr>
<tr><th id="327">327</th><td>{</td></tr>
<tr><th id="328">328</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 328, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(328, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 500); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="329">329</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col6 ref" href="#116connection" title='connection' data-ref="116connection" data-ref-filename="116connection">connection</a>);</td></tr>
<tr><th id="330">330</th><td></td></tr>
<tr><th id="331">331</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connectionDidFinishLoading:%p&quot;, m_handle, connection)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connectionDidFinishLoading:%p"</q>, m_handle, <a class="local col6 ref" href="#116connection" title='connection' data-ref="116connection" data-ref-filename="116connection">connection</a>);</td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td>    <em>auto</em> <dfn class="local col7 decl" id="117work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:333:17)' data-ref="117work" data-ref-filename="117work">work</dfn> = [<dfn class="local col8 decl" id="118self" title='self' data-type='WebCoreResourceHandleAsOperationQueueDelegate *' data-ref="118self" data-ref-filename="118self">self</dfn> = <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col9 decl" id="119protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="119protectedSelf" data-ref-filename="119protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>), <dfn class="local col0 decl" id="120connection" title='connection' data-type='WTF::RetainPtr&lt;NSURLConnection&gt;' data-ref="120connection" data-ref-filename="120connection">connection</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col6 ref" href="#116connection" title='connection' data-ref="116connection" data-ref-filename="116connection">connection</a>), <dfn class="local col1 decl" id="121timingData" title='timingData' data-type='WTF::RetainPtr&lt;NSDictionary&gt;' data-ref="121timingData" data-ref-filename="121timingData">timingData</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>([<a class="local col6 ref" href="#116connection" title='connection' data-ref="116connection" data-ref-filename="116connection">connection</a> _timingData])] () <em>mutable</em> {</td></tr>
<tr><th id="334">334</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>())</td></tr>
<tr><th id="335">335</th><td>            <b>return</b>;</td></tr>
<tr><th id="336">336</th><td></td></tr>
<tr><th id="337">337</th><td>        <b>if</b> (<em>auto</em> <dfn class="local col2 decl" id="122metrics" title='metrics' data-type='WebCore::NetworkLoadMetrics *' data-ref="122metrics" data-ref-filename="122metrics"><a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a></dfn> = m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZN7WebCore14ResourceHandle18networkLoadMetricsEv" title='WebCore::ResourceHandle::networkLoadMetrics' data-ref="_ZN7WebCore14ResourceHandle18networkLoadMetricsEv" data-ref-filename="_ZN7WebCore14ResourceHandle18networkLoadMetricsEv">networkLoadMetrics</a>()) {</td></tr>
<tr><th id="338">338</th><td>            <b>if</b> (<em>double</em> <dfn class="local col3 decl" id="123responseEndTime" title='responseEndTime' data-type='double' data-ref="123responseEndTime" data-ref-filename="123responseEndTime"><a class="local col3 ref" href="#123responseEndTime" title='responseEndTime' data-ref="123responseEndTime" data-ref-filename="123responseEndTime">responseEndTime</a></dfn> = [[<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#121timingData" title='timingData' data-ref="121timingData" data-ref-filename="121timingData">timingData</a> objectForKey:@<q>"_kCFNTimingDataResponseEnd"</q>] doubleValue])</td></tr>
<tr><th id="339">339</th><td>                <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd' data-ref="WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd" data-ref-filename="WebCore..NetworkLoadMetricsWithoutNonTimingData..responseEnd">responseEnd</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MonotonicTime.h.html#40" title='WTF::MonotonicTime::operator=' data-ref="_ZN3WTF13MonotonicTimeaSEOS0_" data-ref-filename="_ZN3WTF13MonotonicTimeaSEOS0_">=</a> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a>::<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZN3WTF8WallTime14fromRawSecondsEd" title='WTF::WallTime::fromRawSeconds' data-ref="_ZN3WTF8WallTime14fromRawSecondsEd" data-ref-filename="_ZN3WTF8WallTime14fromRawSecondsEd">fromRawSeconds</a>(<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF7adoptNSET_" title='WTF::adoptNS' data-ref="_ZN3WTF7adoptNSET_" data-ref-filename="_ZN3WTF7adoptNSET_">adoptNS</a>([[NSDate alloc] initWithTimeIntervalSinceReferenceDate:<a class="local col3 ref" href="#123responseEndTime" title='responseEndTime' data-ref="123responseEndTime" data-ref-filename="123responseEndTime">responseEndTime</a>]).<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>().timeIntervalSince1970).<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTime24approximateMonotonicTimeEv" title='WTF::WallTime::approximateMonotonicTime' data-ref="_ZNK3WTF8WallTime24approximateMonotonicTimeEv" data-ref-filename="_ZNK3WTF8WallTime24approximateMonotonicTimeEv">approximateMonotonicTime</a>();</td></tr>
<tr><th id="340">340</th><td>            <b>else</b></td></tr>
<tr><th id="341">341</th><td>                <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd' data-ref="WebCore::NetworkLoadMetricsWithoutNonTimingData::responseEnd" data-ref-filename="WebCore..NetworkLoadMetricsWithoutNonTimingData..responseEnd">responseEnd</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MonotonicTime.h.html#40" title='WTF::MonotonicTime::operator=' data-ref="_ZN3WTF13MonotonicTimeaSERKS0_" data-ref-filename="_ZN3WTF13MonotonicTimeaSERKS0_">=</a> <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetricsWithoutNonTimingData::responseStart" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::responseStart' data-ref="WebCore::NetworkLoadMetricsWithoutNonTimingData::responseStart" data-ref-filename="WebCore..NetworkLoadMetricsWithoutNonTimingData..responseStart">responseStart</a>;</td></tr>
<tr><th id="342">342</th><td>            <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetricsWithoutNonTimingData::protocol" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::protocol' data-ref="WebCore::NetworkLoadMetricsWithoutNonTimingData::protocol" data-ref-filename="WebCore..NetworkLoadMetricsWithoutNonTimingData..protocol">protocol</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringaSEOS0_" title='WTF::String::operator=' data-ref="_ZN3WTF6StringaSEOS0_" data-ref-filename="_ZN3WTF6StringaSEOS0_">=</a> <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EP8NSString" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EP8NSString" data-ref-filename="_ZN3WTF6StringC1EP8NSString"></a>(NSString *)[<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#121timingData" title='timingData' data-ref="121timingData" data-ref-filename="121timingData">timingData</a> objectForKey:@<q>"_kCFNTimingDataNetworkProtocolName"</q>];</td></tr>
<tr><th id="343">343</th><td>            <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetrics::responseBodyBytesReceived" title='WebCore::NetworkLoadMetrics::responseBodyBytesReceived' data-ref="WebCore::NetworkLoadMetrics::responseBodyBytesReceived" data-ref-filename="WebCore..NetworkLoadMetrics..responseBodyBytesReceived">responseBodyBytesReceived</a> = [[<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#121timingData" title='timingData' data-ref="121timingData" data-ref-filename="121timingData">timingData</a> objectForKey:@<q>"_kCFNTimingDataResponseBodyBytesReceived"</q>] unsignedLongLongValue];</td></tr>
<tr><th id="344">344</th><td>            <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref field" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetrics::responseBodyDecodedSize" title='WebCore::NetworkLoadMetrics::responseBodyDecodedSize' data-ref="WebCore::NetworkLoadMetrics::responseBodyDecodedSize" data-ref-filename="WebCore..NetworkLoadMetrics..responseBodyDecodedSize">responseBodyDecodedSize</a> = [[<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col1 ref" href="#121timingData" title='timingData' data-ref="121timingData" data-ref-filename="121timingData">timingData</a> objectForKey:@<q>"_kCFNTimingDataResponseBodyBytesDecoded"</q>] unsignedLongLongValue];</td></tr>
<tr><th id="345">345</th><td>            <a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>-&gt;<a class="ref fn" href="../NetworkLoadMetrics.h.html#_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::markComplete' data-ref="_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv" data-ref-filename="_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv">markComplete</a>();</td></tr>
<tr><th id="346">346</th><td>            m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE" title='WebCore::ResourceHandleClient::didFinishLoading' data-ref="_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE" data-ref-filename="_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE">didFinishLoading</a>(m_handle, *<a class="local col2 ref" href="#122metrics" title='metrics' data-ref="122metrics" data-ref-filename="122metrics">metrics</a>);</td></tr>
<tr><th id="347">347</th><td>        } <b>else</b> {</td></tr>
<tr><th id="348">348</th><td>            <a class="type" href="../NetworkLoadMetrics.h.html#WebCore::NetworkLoadMetrics" title='WebCore::NetworkLoadMetrics' data-ref="WebCore::NetworkLoadMetrics" data-ref-filename="WebCore..NetworkLoadMetrics">NetworkLoadMetrics</a> <a class="ref fn fake" href="../NetworkLoadMetrics.h.html#_ZN7WebCore18NetworkLoadMetricsC1Ev" title='WebCore::NetworkLoadMetrics::NetworkLoadMetrics' data-ref="_ZN7WebCore18NetworkLoadMetricsC1Ev" data-ref-filename="_ZN7WebCore18NetworkLoadMetricsC1Ev"></a><dfn class="local col4 decl" id="124emptyMetrics" title='emptyMetrics' data-type='WebCore::NetworkLoadMetrics' data-ref="124emptyMetrics" data-ref-filename="124emptyMetrics">emptyMetrics</dfn>;</td></tr>
<tr><th id="349">349</th><td>            <a class="local col4 ref" href="#124emptyMetrics" title='emptyMetrics' data-ref="124emptyMetrics" data-ref-filename="124emptyMetrics">emptyMetrics</a>.<a class="ref fn" href="../NetworkLoadMetrics.h.html#_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv" title='WebCore::NetworkLoadMetricsWithoutNonTimingData::markComplete' data-ref="_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv" data-ref-filename="_ZN7WebCore38NetworkLoadMetricsWithoutNonTimingData12markCompleteEv">markComplete</a>();</td></tr>
<tr><th id="350">350</th><td>            m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE" title='WebCore::ResourceHandleClient::didFinishLoading' data-ref="_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE" data-ref-filename="_ZN7WebCore20ResourceHandleClient16didFinishLoadingEPNS_14ResourceHandleERKNS_18NetworkLoadMetricsE">didFinishLoading</a>(m_handle, <a class="local col4 ref" href="#124emptyMetrics" title='emptyMetrics' data-ref="124emptyMetrics" data-ref-filename="124emptyMetrics">emptyMetrics</a>);</td></tr>
<tr><th id="351">351</th><td>        }</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>        <b>if</b> (<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a>m_messageQueue) {</td></tr>
<tr><th id="354">354</th><td>            m_messageQueue<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../SynchronousLoaderClient.h.html#_ZN7WebCore29SynchronousLoaderMessageQueue4killEv" title='WebCore::SynchronousLoaderMessageQueue::kill' data-ref="_ZN7WebCore29SynchronousLoaderMessageQueue4killEv" data-ref-filename="_ZN7WebCore29SynchronousLoaderMessageQueue4killEv">kill</a>();</td></tr>
<tr><th id="355">355</th><td>            m_messageQueue <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="356">356</th><td>        }</td></tr>
<tr><th id="357">357</th><td>    };</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col7 ref" href="#117work" title='work' data-ref="117work" data-ref-filename="117work">work</a></span>)];</td></tr>
<tr><th id="360">360</th><td>}</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>- (<em>void</em>)connection:(NSURLConnection *)<dfn class="local col5 decl" id="125connection" title='connection' data-type='NSURLConnection * _Nonnull' data-ref="125connection" data-ref-filename="125connection">connection</dfn> didFailWithError:(NSError *)<dfn class="local col6 decl" id="126error" title='error' data-type='NSError * _Nonnull' data-ref="126error" data-ref-filename="126error">error</dfn></td></tr>
<tr><th id="363">363</th><td>{</td></tr>
<tr><th id="364">364</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 364, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(364, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 502); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="365">365</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col5 ref" href="#125connection" title='connection' data-ref="125connection" data-ref-filename="125connection">connection</a>);</td></tr>
<tr><th id="366">366</th><td></td></tr>
<tr><th id="367">367</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p didFailWithError:%@&quot;, m_handle, connection, error)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p didFailWithError:%@"</q>, m_handle, <a class="local col5 ref" href="#125connection" title='connection' data-ref="125connection" data-ref-filename="125connection">connection</a>, <a class="local col6 ref" href="#126error" title='error' data-ref="126error" data-ref-filename="126error">error</a>);</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td>    <em>auto</em> <dfn class="local col7 decl" id="127work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:369:17)' data-ref="127work" data-ref-filename="127work">work</dfn> = [<dfn class="local col8 decl" id="128self" title='self' data-type='WebCoreResourceHandleAsOperationQueueDelegate *' data-ref="128self" data-ref-filename="128self">self</dfn> = <span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col9 decl" id="129protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="129protectedSelf" data-ref-filename="129protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>), <dfn class="local col0 decl" id="130error" title='error' data-type='WTF::RetainPtr&lt;NSError&gt;' data-ref="130error" data-ref-filename="130error">error</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col6 ref" href="#126error" title='error' data-ref="126error" data-ref-filename="126error">error</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="370">370</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>())</td></tr>
<tr><th id="371">371</th><td>            <b>return</b>;</td></tr>
<tr><th id="372">372</th><td></td></tr>
<tr><th id="373">373</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient7didFailEPNS_14ResourceHandleERKNS_13ResourceErrorE" title='WebCore::ResourceHandleClient::didFail' data-ref="_ZN7WebCore20ResourceHandleClient7didFailEPNS_14ResourceHandleERKNS_13ResourceErrorE" data-ref-filename="_ZN7WebCore20ResourceHandleClient7didFailEPNS_14ResourceHandleERKNS_13ResourceErrorE">didFail</a>(m_handle, <a class="ref fn fake" href="../cf/ResourceError.h.html#_ZN7WebCore13ResourceErrorC1EP7NSError" title='WebCore::ResourceError::ResourceError' data-ref="_ZN7WebCore13ResourceErrorC1EP7NSError" data-ref-filename="_ZN7WebCore13ResourceErrorC1EP7NSError"></a><a class="local col0 ref" href="#130error" title='error' data-ref="130error" data-ref-filename="130error">error</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>());</td></tr>
<tr><th id="374">374</th><td>        <b>if</b> (<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrcvbEv" title='WTF::RefPtr::operator bool' data-ref="_ZNK3WTF6RefPtrcvbEv" data-ref-filename="_ZNK3WTF6RefPtrcvbEv"></a>m_messageQueue) {</td></tr>
<tr><th id="375">375</th><td>            m_messageQueue<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZNK3WTF6RefPtrptEv" title='WTF::RefPtr::operator-&gt;' data-ref="_ZNK3WTF6RefPtrptEv" data-ref-filename="_ZNK3WTF6RefPtrptEv">-&gt;</a><a class="ref fn" href="../SynchronousLoaderClient.h.html#_ZN7WebCore29SynchronousLoaderMessageQueue4killEv" title='WebCore::SynchronousLoaderMessageQueue::kill' data-ref="_ZN7WebCore29SynchronousLoaderMessageQueue4killEv" data-ref-filename="_ZN7WebCore29SynchronousLoaderMessageQueue4killEv">kill</a>();</td></tr>
<tr><th id="376">376</th><td>            m_messageQueue <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RefPtr.h.html#_ZN3WTF6RefPtraSEDn" title='WTF::RefPtr::operator=' data-ref="_ZN3WTF6RefPtraSEDn" data-ref-filename="_ZN3WTF6RefPtraSEDn">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="377">377</th><td>        }</td></tr>
<tr><th id="378">378</th><td>    };</td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col7 ref" href="#127work" title='work' data-ref="127work" data-ref-filename="127work">work</a></span>)];</td></tr>
<tr><th id="381">381</th><td>}</td></tr>
<tr><th id="382">382</th><td></td></tr>
<tr><th id="383">383</th><td></td></tr>
<tr><th id="384">384</th><td>- (NSCachedURLResponse *)connection:(NSURLConnection *)<dfn class="local col1 decl" id="131connection" title='connection' data-type='NSURLConnection *' data-ref="131connection" data-ref-filename="131connection">connection</dfn> willCacheResponse:(NSCachedURLResponse *)<dfn class="local col2 decl" id="132cachedResponse" title='cachedResponse' data-type='NSCachedURLResponse *' data-ref="132cachedResponse" data-ref-filename="132cachedResponse">cachedResponse</dfn></td></tr>
<tr><th id="385">385</th><td>{</td></tr>
<tr><th id="386">386</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 386, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(386, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 504); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="387">387</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col1 ref" href="#131connection" title='connection' data-ref="131connection" data-ref-filename="131connection">connection</a>);</td></tr>
<tr><th id="388">388</th><td></td></tr>
<tr><th id="389">389</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogNetwork, &quot;Handle %p delegate connection:%p willCacheResponse:%p&quot;, m_handle, connection, cachedResponse)" data-ref="_M/LOG">LOG</a>(Network, <q>"Handle %p delegate connection:%p willCacheResponse:%p"</q>, m_handle, <a class="local col1 ref" href="#131connection" title='connection' data-ref="131connection" data-ref-filename="131connection">connection</a>, <a class="local col2 ref" href="#132cachedResponse" title='cachedResponse' data-ref="132cachedResponse" data-ref-filename="132cachedResponse">cachedResponse</a>);</td></tr>
<tr><th id="390">390</th><td></td></tr>
<tr><th id="391">391</th><td>    <em>auto</em> <dfn class="local col3 decl" id="133protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="133protectedSelf" data-ref-filename="133protectedSelf">protectedSelf</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>);</td></tr>
<tr><th id="392">392</th><td>    <em>auto</em> <dfn class="local col4 decl" id="134work" title='work' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm:392:17)' data-ref="134work" data-ref-filename="134work">work</dfn> = [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"><a class="local col3 ref" href="#133protectedSelf" title='protectedSelf' data-ref="133protectedSelf" data-ref-filename="133protectedSelf">protectedSelf</a></a>, <dfn class="local col5 decl" id="135cachedResponse" title='cachedResponse' data-type='WTF::RetainPtr&lt;NSCachedURLResponse&gt;' data-ref="135cachedResponse" data-ref-filename="135cachedResponse">cachedResponse</dfn> = <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9retainPtrET_" title='WTF::retainPtr' data-ref="_ZN3WTF9retainPtrET_" data-ref-filename="_ZN3WTF9retainPtrET_">retainPtr</a>(<a class="local col2 ref" href="#132cachedResponse" title='cachedResponse' data-ref="132cachedResponse" data-ref-filename="132cachedResponse">cachedResponse</a>)] () <em>mutable</em> {</td></tr>
<tr><th id="393">393</th><td>        <b>if</b> (!m_handle || !m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()) {</td></tr>
<tr><th id="394">394</th><td>            m_cachedResponseResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <b>nullptr</b>;</td></tr>
<tr><th id="395">395</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="396">396</th><td>            <b>return</b>;</td></tr>
<tr><th id="397">397</th><td>        }</td></tr>
<tr><th id="398">398</th><td></td></tr>
<tr><th id="399">399</th><td>        m_handle-&gt;<a class="ref fn" href="../ResourceHandle.h.html#_ZNK7WebCore14ResourceHandle6clientEv" title='WebCore::ResourceHandle::client' data-ref="_ZNK7WebCore14ResourceHandle6clientEv" data-ref-filename="_ZNK7WebCore14ResourceHandle6clientEv">client</a>()-&gt;<a class="virtual ref fn" href="../ResourceHandleClient.h.html#_ZN7WebCore20ResourceHandleClient22willCacheResponseAsyncEPNS_14ResourceHandleEP19NSCachedURLResponseON3WTF17CompletionHandlerIFvS4_EEE" title='WebCore::ResourceHandleClient::willCacheResponseAsync' data-ref="_ZN7WebCore20ResourceHandleClient22willCacheResponseAsyncEPNS_14ResourceHandleEP19NSCachedURLResponseON3WTF17CompletionHandlerIFvS4_EEE" data-ref-filename="_ZN7WebCore20ResourceHandleClient22willCacheResponseAsyncEPNS_14ResourceHandleEP19NSCachedURLResponseON3WTF17CompletionHandlerIFvS4_EEE">willCacheResponseAsync</a>(m_handle, <a class="local col5 ref" href="#135cachedResponse" title='cachedResponse' data-ref="135cachedResponse" data-ref-filename="135cachedResponse">cachedResponse</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtr3getEv" title='WTF::RetainPtr::get' data-ref="_ZNK3WTF9RetainPtr3getEv" data-ref-filename="_ZNK3WTF9RetainPtr3getEv">get</a>(), <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEC1EOTL0__NS_27CompletionHandlerCallThreadE"></a>[<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span>, <dfn class="local col6 decl" id="136protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="136protectedSelf" data-ref-filename="136protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col3 ref" href="#133protectedSelf" title='protectedSelf' data-ref="133protectedSelf" data-ref-filename="133protectedSelf">protectedSelf</a></span>)] (NSCachedURLResponse * <dfn class="local col7 decl" id="137response" title='response' data-type='NSCachedURLResponse *' data-ref="137response" data-ref-filename="137response">response</dfn>) <em>mutable</em> {</td></tr>
<tr><th id="400">400</th><td>            m_cachedResponseResult <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" title='WTF::RetainPtr::operator=' data-ref="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE" data-ref-filename="_ZN3WTF9RetainPtraSEPNSt3__114remove_pointerIT_E4typeE">=</a> <a class="local col7 ref" href="#137response" title='response' data-ref="137response" data-ref-filename="137response">response</a>;</td></tr>
<tr><th id="401">401</th><td>            m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore6signalEv" title='WTF::BinarySemaphore::signal' data-ref="_ZN3WTF15BinarySemaphore6signalEv" data-ref-filename="_ZN3WTF15BinarySemaphore6signalEv">signal</a>();</td></tr>
<tr><th id="402">402</th><td>        });</td></tr>
<tr><th id="403">403</th><td>    };</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(work)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#134work" title='work' data-ref="134work" data-ref-filename="134work">work</a></span>)];</td></tr>
<tr><th id="406">406</th><td>    m_semaphore.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/threads/BinarySemaphore.h.html#_ZN3WTF15BinarySemaphore4waitEv" title='WTF::BinarySemaphore::wait' data-ref="_ZN3WTF15BinarySemaphore4waitEv" data-ref-filename="_ZN3WTF15BinarySemaphore4waitEv">wait</a>();</td></tr>
<tr><th id="407">407</th><td></td></tr>
<tr><th id="408">408</th><td>    Locker <dfn class="local col8 decl" id="138locker" title='locker' data-type='WTF::Locker&lt;WTF::Lock&gt;' data-ref="138locker" data-ref-filename="138locker">locker</dfn> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF6LockerINS_4LockEEC1ERS1_" title='WTF::Locker&lt;WTF::Lock&gt;::Locker' data-ref="_ZN3WTF6LockerINS_4LockEEC1ERS1_" data-ref-filename="_ZN3WTF6LockerINS_4LockEEC1ERS1_">{</a> m_lock };</td></tr>
<tr><th id="409">409</th><td>    <b>if</b> (!m_handle)</td></tr>
<tr><th id="410">410</th><td>        <b>return</b> <span class="macro" title="nullptr" data-ref="_M/nil">nil</span>;</td></tr>
<tr><th id="411">411</th><td></td></tr>
<tr><th id="412">412</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::RetainPtr" title='WTF::RetainPtr' data-ref="WTF::RetainPtr" data-ref-filename="WTF..RetainPtr">RetainPtr</a>&lt;NSCachedURLResponse&gt; <dfn class="local col9 decl" id="139cachedResponseResult" title='cachedResponseResult' data-type='RetainPtr&lt;NSCachedURLResponse&gt;' data-ref="139cachedResponseResult" data-ref-filename="139cachedResponseResult">cachedResponseResult</dfn> = <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" title='WTF::RetainPtr::RetainPtr&lt;type-parameter-0-0&gt;' data-ref="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE" data-ref-filename="_ZN3WTF9RetainPtrC1ERKNS_9RetainPtrIT_EE"></a>m_cachedResponseResult;</td></tr>
<tr><th id="413">413</th><td></td></tr>
<tr><th id="414">414</th><td>    <i>// Make sure protectedSelf gets destroyed on the main thread in case this is the last strong reference to self</i></td></tr>
<tr><th id="415">415</th><td><i>    // as we do not want to get destroyed on a non-main thread.</i></td></tr>
<tr><th id="416">416</th><td>    [<span class='local col5 ref' title='self' data-ref="55self" data-ref-filename="55self">self</span> callFunctionOnMainThread:<a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col0 decl" id="140protectedSelf" title='protectedSelf' data-type='WTF::RetainPtr&lt;WebCoreResourceHandleAsOperationQueueDelegate&gt;' data-ref="140protectedSelf" data-ref-filename="140protectedSelf">protectedSelf</dfn> = <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(protectedSelf)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col3 ref" href="#133protectedSelf" title='protectedSelf' data-ref="133protectedSelf" data-ref-filename="133protectedSelf">protectedSelf</a></span>)] { }];</td></tr>
<tr><th id="417">417</th><td></td></tr>
<tr><th id="418">418</th><td>    <b>return</b> <a class="local col9 ref" href="#139cachedResponseResult" title='cachedResponseResult' data-ref="139cachedResponseResult" data-ref-filename="139cachedResponseResult">cachedResponseResult</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF9RetainPtr11autoreleaseEv" title='WTF::RetainPtr::autorelease' data-ref="_ZN3WTF9RetainPtr11autoreleaseEv" data-ref-filename="_ZN3WTF9RetainPtr11autoreleaseEv">autorelease</a>();</td></tr>
<tr><th id="419">419</th><td>}</td></tr>
<tr><th id="420">420</th><td></td></tr>
<tr><th id="421">421</th><td>@end</td></tr>
<tr><th id="422">422</th><td></td></tr>
<tr><th id="423">423</th><td>@implementation WebCoreResourceHandleWithCredentialStorageAsOperationQueueDelegate</td></tr>
<tr><th id="424">424</th><td></td></tr>
<tr><th id="425">425</th><td>- (<span class='typedef' title='BOOL' data-type='bool' data-ref="BOOL" data-ref-filename="BOOL">BOOL</span>)connectionShouldUseCredentialStorage:(NSURLConnection *)<dfn class="local col1 decl" id="141connection" title='connection' data-type='NSURLConnection * _Nonnull' data-ref="141connection" data-ref-filename="141connection">connection</dfn></td></tr>
<tr><th id="426">426</th><td>{</td></tr>
<tr><th id="427">427</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, 427, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(427, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/platform/network/mac/WebCoreResourceHandleAsOperationQueueDelegate.mm&quot;, __PRETTY_FUNCTION__, 506); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="428">428</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Compiler.h.html#401" title="(void)connection" data-ref="_M/UNUSED_PARAM">UNUSED_PARAM</a>(<a class="local col1 ref" href="#141connection" title='connection' data-ref="141connection" data-ref-filename="141connection">connection</a>);</td></tr>
<tr><th id="429">429</th><td>    <b>return</b> <span class="macro" title="__objc_no" data-ref="_M/NO">NO</span>;</td></tr>
<tr><th id="430">430</th><td>}</td></tr>
<tr><th id="431">431</th><td></td></tr>
<tr><th id="432">432</th><td>@end</td></tr>
<tr><th id="433">433</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
