<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Heap.cpp source code [webkit/Source/bmalloc/bmalloc/Heap.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/bmalloc/bmalloc/Heap.cpp'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>webkit</a>/<a href='../..'>Source</a>/<a href='..'>bmalloc</a>/<a href='./'>bmalloc</a>/<a href='Heap.cpp.html'>Heap.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2014-2019 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY</i></td></tr>
<tr><th id="14">14</th><td><i> * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</i></td></tr>
<tr><th id="15">15</th><td><i> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="16">16</th><td><i> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR</i></td></tr>
<tr><th id="17">17</th><td><i> * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</i></td></tr>
<tr><th id="18">18</th><td><i> * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</i></td></tr>
<tr><th id="19">19</th><td><i> * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</i></td></tr>
<tr><th id="20">20</th><td><i> * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY</i></td></tr>
<tr><th id="21">21</th><td><i> * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</i></td></tr>
<tr><th id="22">22</th><td><i> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</i></td></tr>
<tr><th id="23">23</th><td><i> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </i></td></tr>
<tr><th id="24">24</th><td><i> */</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="Heap.h.html">"Heap.h"</a></u></td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="AvailableMemory.h.html">"AvailableMemory.h"</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="BulkDecommit.h.html">"BulkDecommit.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="BumpAllocator.h.html">"BumpAllocator.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="Chunk.h.html">"Chunk.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="CryptoRandom.h.html">"CryptoRandom.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="DebugHeap.h.html">"DebugHeap.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="Environment.h.html">"Environment.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="Gigacage.h.html">"Gigacage.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="HeapConstants.h.html">"HeapConstants.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="PerProcess.h.html">"PerProcess.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="Scavenger.h.html">"Scavenger.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="SmallLine.h.html">"SmallLine.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="SmallPage.h.html">"SmallPage.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="bmalloc.h.html">"bmalloc.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include &lt;thread&gt;</u></td></tr>
<tr><th id="43">43</th><td><u>#include &lt;vector&gt;</u></td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><u>#<span data-ppcond="45">if</span> <a class="macro" href="BPlatform.h.html#37" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BOS">BOS</a>(DARWIN)</u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="Zone.h.html">"Zone.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#<span data-ppcond="45">endif</span></u></td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td><b>namespace</b> <span class="namespace">bmalloc</span> {</td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td><a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4HeapC1ENS_8HeapKindERNSt3__111scoped_lockIJNS_5MutexEEEE" title='bmalloc::Heap::Heap' data-ref="_ZN7bmalloc4HeapC1ENS_8HeapKindERNSt3__111scoped_lockIJNS_5MutexEEEE" data-ref-filename="_ZN7bmalloc4HeapC1ENS_8HeapKindERNSt3__111scoped_lockIJNS_5MutexEEEE">Heap</dfn>(<a class="type" href="HeapKind.h.html#bmalloc::HeapKind" title='bmalloc::HeapKind' data-ref="bmalloc::HeapKind" data-ref-filename="bmalloc..HeapKind">HeapKind</a> <dfn class="local col5 decl" id="25kind" title='kind' data-type='bmalloc::HeapKind' data-ref="25kind" data-ref-filename="25kind">kind</dfn>, <a class="typedef" href="Mutex.h.html#bmalloc::LockHolder" title='bmalloc::LockHolder' data-type='std::scoped_lock&lt;Mutex&gt;' data-ref="bmalloc::LockHolder" data-ref-filename="bmalloc..LockHolder">LockHolder</a>&amp;)</td></tr>
<tr><th id="52">52</th><td>    : <a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a> { <a class="local col5 ref" href="#25kind" title='kind' data-ref="25kind" data-ref-filename="25kind">kind</a> }, <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a> { *<a class="type" href="HeapConstants.h.html#bmalloc::HeapConstants" title='bmalloc::HeapConstants' data-ref="bmalloc::HeapConstants" data-ref-filename="bmalloc..HeapConstants">HeapConstants</a>::<a class="ref fn" href="StaticPerProcess.h.html#_ZN7bmalloc16StaticPerProcess3getEv" title='bmalloc::StaticPerProcess::get' data-ref="_ZN7bmalloc16StaticPerProcess3getEv" data-ref-filename="_ZN7bmalloc16StaticPerProcess3getEv">get</a>() }</td></tr>
<tr><th id="53">53</th><td>{</td></tr>
<tr><th id="54">54</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(!Environment::get()-&gt;isDebugHeapEnabled())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(!<a class="type" href="Environment.h.html#bmalloc::Environment" title='bmalloc::Environment' data-ref="bmalloc::Environment" data-ref-filename="bmalloc..Environment">Environment</a>::<a class="ref fn" href="StaticPerProcess.h.html#_ZN7bmalloc16StaticPerProcess3getEv" title='bmalloc::StaticPerProcess::get' data-ref="_ZN7bmalloc16StaticPerProcess3getEv" data-ref-filename="_ZN7bmalloc16StaticPerProcess3getEv">get</a>()-&gt;<a class="ref fn" href="Environment.h.html#_ZN7bmalloc11Environment18isDebugHeapEnabledEv" title='bmalloc::Environment::isDebugHeapEnabled' data-ref="_ZN7bmalloc11Environment18isDebugHeapEnabledEv" data-ref-filename="_ZN7bmalloc11Environment18isDebugHeapEnabledEv">isDebugHeapEnabled</a>());</td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td>    <span class="namespace">Gigacage::</span><a class="ref fn" href="Gigacage.h.html#_ZN8Gigacage14ensureGigacageEv" title='Gigacage::ensureGigacage' data-ref="_ZN8Gigacage14ensureGigacageEv" data-ref-filename="_ZN8Gigacage14ensureGigacageEv">ensureGigacage</a>();</td></tr>
<tr><th id="57">57</th><td><u>#<span data-ppcond="57">if</span> <a class="macro" href="Gigacage.h.html#45" title="1" data-ref="_M/GIGACAGE_ENABLED">GIGACAGE_ENABLED</a></u></td></tr>
<tr><th id="58">58</th><td>    <b>if</b> (<a class="member fn" href="#_ZN7bmalloc4Heap13usingGigacageEv" title='bmalloc::Heap::usingGigacage' data-ref="_ZN7bmalloc4Heap13usingGigacageEv" data-ref-filename="_ZN7bmalloc4Heap13usingGigacageEv">usingGigacage</a>()) {</td></tr>
<tr><th id="59">59</th><td>        <em>void</em>* <dfn class="local col6 decl" id="26gigacageBasePtr" title='gigacageBasePtr' data-type='void *' data-ref="26gigacageBasePtr" data-ref-filename="26gigacageBasePtr">gigacageBasePtr</dfn> = <b>this</b>-&gt;<a class="member fn" href="#_ZN7bmalloc4Heap15gigacageBasePtrEv" title='bmalloc::Heap::gigacageBasePtr' data-ref="_ZN7bmalloc4Heap15gigacageBasePtrEv" data-ref-filename="_ZN7bmalloc4Heap15gigacageBasePtrEv">gigacageBasePtr</a>();</td></tr>
<tr><th id="60">60</th><td>        <a class="macro" href="BAssert.h.html#83" title="do { if (!(gigacageBasePtr)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="local col6 ref" href="#26gigacageBasePtr" title='gigacageBasePtr' data-ref="26gigacageBasePtr" data-ref-filename="26gigacageBasePtr">gigacageBasePtr</a>);</td></tr>
<tr><th id="61">61</th><td>        <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col7 decl" id="27random" title='random' data-type='uint64_t [2]' data-ref="27random" data-ref-filename="27random">random</dfn>[<var>2</var>];</td></tr>
<tr><th id="62">62</th><td>        <a class="ref fn" href="CryptoRandom.h.html#_ZN7bmalloc12cryptoRandomEPvm" title='bmalloc::cryptoRandom' data-ref="_ZN7bmalloc12cryptoRandomEPvm" data-ref-filename="_ZN7bmalloc12cryptoRandomEPvm">cryptoRandom</a>(<b>reinterpret_cast</b>&lt;<em>unsigned</em> <em>char</em>*&gt;(<a class="local col7 ref" href="#27random" title='random' data-ref="27random" data-ref-filename="27random">random</a>), <b>sizeof</b>(<a class="local col7 ref" href="#27random" title='random' data-ref="27random" data-ref-filename="27random">random</a>));</td></tr>
<tr><th id="63">63</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="28gigacageSize" title='gigacageSize' data-type='size_t' data-ref="28gigacageSize" data-ref-filename="28gigacageSize">gigacageSize</dfn> = <span class="namespace">Gigacage::</span><a class="ref fn" href="Gigacage.h.html#_ZN8Gigacage7maxSizeENS_4KindE" title='Gigacage::maxSize' data-ref="_ZN8Gigacage7maxSizeENS_4KindE" data-ref-filename="_ZN8Gigacage7maxSizeENS_4KindE">maxSize</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc12gigacageKindENS_8HeapKindE" title='bmalloc::gigacageKind' data-ref="_ZN7bmalloc12gigacageKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc12gigacageKindENS_8HeapKindE">gigacageKind</a>(<a class="local col5 ref" href="#25kind" title='kind' data-ref="25kind" data-ref-filename="25kind">kind</a>));</td></tr>
<tr><th id="64">64</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="29size" title='size' data-type='size_t' data-ref="29size" data-ref-filename="29size">size</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc21roundDownToMultipleOfEmT_" title='bmalloc::roundDownToMultipleOf' data-ref="_ZN7bmalloc21roundDownToMultipleOfEmT_" data-ref-filename="_ZN7bmalloc21roundDownToMultipleOfEmT_">roundDownToMultipleOf</a>(<a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc10vmPageSizeEv" title='bmalloc::vmPageSize' data-ref="_ZN7bmalloc10vmPageSizeEv" data-ref-filename="_ZN7bmalloc10vmPageSizeEv">vmPageSize</a>(), <a class="local col8 ref" href="#28gigacageSize" title='gigacageSize' data-ref="28gigacageSize" data-ref-filename="28gigacageSize">gigacageSize</a> - (<a class="local col7 ref" href="#27random" title='random' data-ref="27random" data-ref-filename="27random">random</a>[<var>0</var>] % <span class="namespace">Gigacage::</span><a class="ref" href="Gigacage.h.html#Gigacage::maximumCageSizeReductionForSlide" title='Gigacage::maximumCageSizeReductionForSlide' data-ref="Gigacage::maximumCageSizeReductionForSlide" data-ref-filename="Gigacage..maximumCageSizeReductionForSlide">maximumCageSizeReductionForSlide</a>));</td></tr>
<tr><th id="65">65</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_gigacageSize" title='bmalloc::Heap::m_gigacageSize' data-ref="bmalloc::Heap::m_gigacageSize" data-ref-filename="bmalloc..Heap..m_gigacageSize">m_gigacageSize</a> = <a class="local col9 ref" href="#29size" title='size' data-ref="29size" data-ref-filename="29size">size</a>;</td></tr>
<tr><th id="66">66</th><td>        <span class='typedef' title='ptrdiff_t' data-type='long' data-ref="ptrdiff_t" data-ref-filename="ptrdiff_t">ptrdiff_t</span> <dfn class="local col0 decl" id="30offset" title='offset' data-type='ptrdiff_t' data-ref="30offset" data-ref-filename="30offset">offset</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc21roundDownToMultipleOfEmT_" title='bmalloc::roundDownToMultipleOf' data-ref="_ZN7bmalloc21roundDownToMultipleOfEmT_" data-ref-filename="_ZN7bmalloc21roundDownToMultipleOfEmT_">roundDownToMultipleOf</a>(<a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc10vmPageSizeEv" title='bmalloc::vmPageSize' data-ref="_ZN7bmalloc10vmPageSizeEv" data-ref-filename="_ZN7bmalloc10vmPageSizeEv">vmPageSize</a>(), <a class="local col7 ref" href="#27random" title='random' data-ref="27random" data-ref-filename="27random">random</a>[<var>1</var>] % (<a class="local col8 ref" href="#28gigacageSize" title='gigacageSize' data-ref="28gigacageSize" data-ref-filename="28gigacageSize">gigacageSize</a> - <a class="local col9 ref" href="#29size" title='size' data-ref="29size" data-ref-filename="29size">size</a>));</td></tr>
<tr><th id="67">67</th><td>        <em>void</em>* <dfn class="local col1 decl" id="31base" title='base' data-type='void *' data-ref="31base" data-ref-filename="31base">base</dfn> = <b>reinterpret_cast</b>&lt;<em>unsigned</em> <em>char</em>*&gt;(<a class="local col6 ref" href="#26gigacageBasePtr" title='gigacageBasePtr' data-ref="26gigacageBasePtr" data-ref-filename="26gigacageBasePtr">gigacageBasePtr</a>) + <a class="local col0 ref" href="#30offset" title='offset' data-ref="30offset" data-ref-filename="30offset">offset</a>;</td></tr>
<tr><th id="68">68</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1EPvmmm" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1EPvmmm" data-ref-filename="_ZN7bmalloc10LargeRangeC1EPvmmm">(</a><a class="local col1 ref" href="#31base" title='base' data-ref="31base" data-ref-filename="31base">base</a>, <a class="local col9 ref" href="#29size" title='size' data-ref="29size" data-ref-filename="29size">size</a>, <var>0</var>, <var>0</var>));</td></tr>
<tr><th id="69">69</th><td>    }</td></tr>
<tr><th id="70">70</th><td><u>#<span data-ppcond="57">endif</span></u></td></tr>
<tr><th id="71">71</th><td>    </td></tr>
<tr><th id="72">72</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a> = <a class="type" href="Scavenger.h.html#bmalloc::Scavenger" title='bmalloc::Scavenger' data-ref="bmalloc::Scavenger" data-ref-filename="bmalloc..Scavenger">Scavenger</a>::<a class="ref fn" href="StaticPerProcess.h.html#_ZN7bmalloc16StaticPerProcess3getEv" title='bmalloc::StaticPerProcess::get' data-ref="_ZN7bmalloc16StaticPerProcess3getEv" data-ref-filename="_ZN7bmalloc16StaticPerProcess3getEv">get</a>();</td></tr>
<tr><th id="73">73</th><td>}</td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td><em>bool</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap13usingGigacageEv" title='bmalloc::Heap::usingGigacage' data-ref="_ZN7bmalloc4Heap13usingGigacageEv" data-ref-filename="_ZN7bmalloc4Heap13usingGigacageEv">usingGigacage</dfn>()</td></tr>
<tr><th id="76">76</th><td>{</td></tr>
<tr><th id="77">77</th><td>    <b>return</b> <a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc10isGigacageENS_8HeapKindE" title='bmalloc::isGigacage' data-ref="_ZN7bmalloc10isGigacageENS_8HeapKindE" data-ref-filename="_ZN7bmalloc10isGigacageENS_8HeapKindE">isGigacage</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>) &amp;&amp; <span class="namespace">Gigacage::</span><a class="ref fn" href="Gigacage.h.html#_ZN8Gigacage9isEnabledENS_4KindE" title='Gigacage::isEnabled' data-ref="_ZN8Gigacage9isEnabledENS_4KindE" data-ref-filename="_ZN8Gigacage9isEnabledENS_4KindE">isEnabled</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc12gigacageKindENS_8HeapKindE" title='bmalloc::gigacageKind' data-ref="_ZN7bmalloc12gigacageKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc12gigacageKindENS_8HeapKindE">gigacageKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="78">78</th><td>}</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td><em>void</em>* <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap15gigacageBasePtrEv" title='bmalloc::Heap::gigacageBasePtr' data-ref="_ZN7bmalloc4Heap15gigacageBasePtrEv" data-ref-filename="_ZN7bmalloc4Heap15gigacageBasePtrEv">gigacageBasePtr</dfn>()</td></tr>
<tr><th id="81">81</th><td>{</td></tr>
<tr><th id="82">82</th><td>    <b>return</b> <span class="namespace">Gigacage::</span><a class="ref fn" href="Gigacage.h.html#_ZN8Gigacage7basePtrENS_4KindE" title='Gigacage::basePtr' data-ref="_ZN8Gigacage7basePtrENS_4KindE" data-ref-filename="_ZN8Gigacage7basePtrENS_4KindE">basePtr</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc12gigacageKindENS_8HeapKindE" title='bmalloc::gigacageKind' data-ref="_ZN7bmalloc12gigacageKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc12gigacageKindENS_8HeapKindE">gigacageKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="83">83</th><td>}</td></tr>
<tr><th id="84">84</th><td></td></tr>
<tr><th id="85">85</th><td><span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap12gigacageSizeEv" title='bmalloc::Heap::gigacageSize' data-ref="_ZN7bmalloc4Heap12gigacageSizeEv" data-ref-filename="_ZN7bmalloc4Heap12gigacageSizeEv">gigacageSize</dfn>()</td></tr>
<tr><th id="86">86</th><td>{</td></tr>
<tr><th id="87">87</th><td>    <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_gigacageSize" title='bmalloc::Heap::m_gigacageSize' data-ref="bmalloc::Heap::m_gigacageSize" data-ref-filename="bmalloc..Heap..m_gigacageSize">m_gigacageSize</a>;</td></tr>
<tr><th id="88">88</th><td>}</td></tr>
<tr><th id="89">89</th><td></td></tr>
<tr><th id="90">90</th><td><span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap14freeableMemoryERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::Heap::freeableMemory' data-ref="_ZN7bmalloc4Heap14freeableMemoryERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc4Heap14freeableMemoryERNSt3__111unique_lockINS_5MutexEEE">freeableMemory</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;)</td></tr>
<tr><th id="91">91</th><td>{</td></tr>
<tr><th id="92">92</th><td>    <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a>;</td></tr>
<tr><th id="93">93</th><td>}</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td><span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap9footprintEv" title='bmalloc::Heap::footprint' data-ref="_ZN7bmalloc4Heap9footprintEv" data-ref-filename="_ZN7bmalloc4Heap9footprintEv">footprint</dfn>()</td></tr>
<tr><th id="96">96</th><td>{</td></tr>
<tr><th id="97">97</th><td>    <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a>;</td></tr>
<tr><th id="98">98</th><td>}</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap23markAllLargeAsEligibileERKNSt3__111scoped_lockIJNS_5MutexEEEE" title='bmalloc::Heap::markAllLargeAsEligibile' data-ref="_ZN7bmalloc4Heap23markAllLargeAsEligibileERKNSt3__111scoped_lockIJNS_5MutexEEEE" data-ref-filename="_ZN7bmalloc4Heap23markAllLargeAsEligibileERKNSt3__111scoped_lockIJNS_5MutexEEEE">markAllLargeAsEligibile</dfn>(<em>const</em> <a class="typedef" href="Mutex.h.html#bmalloc::LockHolder" title='bmalloc::LockHolder' data-type='std::scoped_lock&lt;Mutex&gt;' data-ref="bmalloc::LockHolder" data-ref-filename="bmalloc..LockHolder">LockHolder</a>&amp;)</td></tr>
<tr><th id="101">101</th><td>{</td></tr>
<tr><th id="102">102</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap18markAllAsEligibileEv" title='bmalloc::LargeMap::markAllAsEligibile' data-ref="_ZN7bmalloc8LargeMap18markAllAsEligibileEv" data-ref-filename="_ZN7bmalloc8LargeMap18markAllAsEligibileEv">markAllAsEligibile</a>();</td></tr>
<tr><th id="103">103</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_hasPendingDecommits" title='bmalloc::Heap::m_hasPendingDecommits' data-ref="bmalloc::Heap::m_hasPendingDecommits" data-ref-filename="bmalloc..Heap..m_hasPendingDecommits">m_hasPendingDecommits</a> = <b>false</b>;</td></tr>
<tr><th id="104">104</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_condition" title='bmalloc::Heap::m_condition' data-ref="bmalloc::Heap::m_condition" data-ref-filename="bmalloc..Heap..m_condition">m_condition</a>.<span class='ref fn' title='std::__1::condition_variable_any::notify_all' data-ref="_ZNSt3__122condition_variable_any10notify_allEv" data-ref-filename="_ZNSt3__122condition_variable_any10notify_allEv">notify_all</span>();</td></tr>
<tr><th id="105">105</th><td>}</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" title='bmalloc::Heap::decommitLargeRange' data-ref="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" data-ref-filename="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE">decommitLargeRange</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&amp; <dfn class="local col2 decl" id="32range" title='range' data-type='bmalloc::LargeRange &amp;' data-ref="32range" data-ref-filename="32range">range</dfn>, <a class="type" href="BulkDecommit.h.html#bmalloc::BulkDecommit" title='bmalloc::BulkDecommit' data-ref="bmalloc::BulkDecommit" data-ref-filename="bmalloc..BulkDecommit">BulkDecommit</a>&amp; <dfn class="local col3 decl" id="33decommitter" title='decommitter' data-type='bmalloc::BulkDecommit &amp;' data-ref="33decommitter" data-ref-filename="33decommitter">decommitter</dfn>)</td></tr>
<tr><th id="108">108</th><td>{</td></tr>
<tr><th id="109">109</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> -= <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="110">110</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> -= <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="111">111</th><td>    <a class="local col3 ref" href="#33decommitter" title='decommitter' data-ref="33decommitter" data-ref-filename="33decommitter">decommitter</a>.<a class="ref fn" href="BulkDecommit.h.html#_ZN7bmalloc12BulkDecommit7addLazyEPvm" title='bmalloc::BulkDecommit::addLazy' data-ref="_ZN7bmalloc12BulkDecommit7addLazyEPvm" data-ref-filename="_ZN7bmalloc12BulkDecommit7addLazyEPvm">addLazy</a>(<a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>(), <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>());</td></tr>
<tr><th id="112">112</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_hasPendingDecommits" title='bmalloc::Heap::m_hasPendingDecommits' data-ref="bmalloc::Heap::m_hasPendingDecommits" data-ref-filename="bmalloc..Heap..m_hasPendingDecommits">m_hasPendingDecommits</a> = <b>true</b>;</td></tr>
<tr><th id="113">113</th><td>    <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm" title='bmalloc::LargeRange::setStartPhysicalSize' data-ref="_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm" data-ref-filename="_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm">setStartPhysicalSize</a>(<var>0</var>);</td></tr>
<tr><th id="114">114</th><td>    <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm" title='bmalloc::LargeRange::setTotalPhysicalSize' data-ref="_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm" data-ref-filename="_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm">setTotalPhysicalSize</a>(<var>0</var>);</td></tr>
<tr><th id="115">115</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(range.isEligibile())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange11isEligibileEv" title='bmalloc::LargeRange::isEligibile' data-ref="_ZNK7bmalloc10LargeRange11isEligibileEv" data-ref-filename="_ZNK7bmalloc10LargeRange11isEligibileEv">isEligibile</a>());</td></tr>
<tr><th id="116">116</th><td>    <a class="local col2 ref" href="#32range" title='range' data-ref="32range" data-ref-filename="32range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRange11setEligibleEb" title='bmalloc::LargeRange::setEligible' data-ref="_ZN7bmalloc10LargeRange11setEligibleEb" data-ref-filename="_ZN7bmalloc10LargeRange11setEligibleEb">setEligible</a>(<b>false</b>);</td></tr>
<tr><th id="117">117</th><td><u>#<span data-ppcond="117">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u> </td></tr>
<tr><th id="118">118</th><td>    m_physicalPageMap.decommit(range.begin(), range.size());</td></tr>
<tr><th id="119">119</th><td><u>#<span data-ppcond="117">endif</span></u></td></tr>
<tr><th id="120">120</th><td>}</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td><u>#<span data-ppcond="122">if</span> <a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="123">123</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap8scavengeERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE" title='bmalloc::Heap::scavenge' data-ref="_ZN7bmalloc4Heap8scavengeERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE" data-ref-filename="_ZN7bmalloc4Heap8scavengeERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE">scavenge</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col4 decl" id="34lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="34lock" data-ref-filename="34lock">lock</dfn>, <a class="type" href="BulkDecommit.h.html#bmalloc::BulkDecommit" title='bmalloc::BulkDecommit' data-ref="bmalloc::BulkDecommit" data-ref-filename="bmalloc..BulkDecommit">BulkDecommit</a>&amp; <dfn class="local col5 decl" id="35decommitter" title='decommitter' data-type='bmalloc::BulkDecommit &amp;' data-ref="35decommitter" data-ref-filename="35decommitter">decommitter</dfn>)</td></tr>
<tr><th id="124">124</th><td><u>#<span data-ppcond="122">else</span></u></td></tr>
<tr><th id="125">125</th><td><em>void</em> Heap::scavenge(UniqueLockHolder&amp; lock, BulkDecommit&amp; decommitter, size_t&amp; deferredDecommits)</td></tr>
<tr><th id="126">126</th><td><u>#<span data-ppcond="122">endif</span></u></td></tr>
<tr><th id="127">127</th><td>{</td></tr>
<tr><th id="128">128</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col6 decl" id="36list" title='list' data-type='bmalloc::List&lt;bmalloc::Chunk&gt; &amp;' data-ref="36list" data-ref-filename="36list">list</dfn> : <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a>) {</td></tr>
<tr><th id="129">129</th><td>        <b>for</b> (<em>auto</em>* <dfn class="local col7 decl" id="37chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="37chunk" data-ref-filename="37chunk">chunk</dfn> : <a class="local col6 ref" href="#36list" title='list' data-ref="36list" data-ref-filename="36list">list</a>) {</td></tr>
<tr><th id="130">130</th><td>            <b>for</b> (<em>auto</em>* <dfn class="local col8 decl" id="38page" title='page' data-type='bmalloc::SmallPage *' data-ref="38page" data-ref-filename="38page">page</dfn> : <a class="local col7 ref" href="#37chunk" title='chunk' data-ref="37chunk" data-ref-filename="37chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>()) {</td></tr>
<tr><th id="131">131</th><td>                <b>if</b> (!<a class="local col8 ref" href="#38page" title='page' data-ref="38page" data-ref-filename="38page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" title='bmalloc::SmallPage::hasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" data-ref-filename="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv">hasPhysicalPages</a>())</td></tr>
<tr><th id="132">132</th><td>                    <b>continue</b>;</td></tr>
<tr><th id="133">133</th><td><u>#<span data-ppcond="133">if</span> !<a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="134">134</th><td>                <b>if</b> (page-&gt;usedSinceLastScavenge()) {</td></tr>
<tr><th id="135">135</th><td>                    page-&gt;clearUsedSinceLastScavenge();</td></tr>
<tr><th id="136">136</th><td>                    deferredDecommits++;</td></tr>
<tr><th id="137">137</th><td>                    <b>continue</b>;</td></tr>
<tr><th id="138">138</th><td>                }</td></tr>
<tr><th id="139">139</th><td><u>#<span data-ppcond="133">endif</span></u></td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td>                <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="39pageSize" title='pageSize' data-type='size_t' data-ref="39pageSize" data-ref-filename="39pageSize">pageSize</dfn> = <span class="namespace">bmalloc::</span><a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(&amp;<a class="local col6 ref" href="#36list" title='list' data-ref="36list" data-ref-filename="36list">list</a> - &amp;<a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<var>0</var>]</span>);</td></tr>
<tr><th id="142">142</th><td>                <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="40decommitSize" title='decommitSize' data-type='size_t' data-ref="40decommitSize" data-ref-filename="40decommitSize">decommitSize</dfn> = <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc22physicalPageSizeSloppyEPvm" title='bmalloc::physicalPageSizeSloppy' data-ref="_ZN7bmalloc22physicalPageSizeSloppyEPvm" data-ref-filename="_ZN7bmalloc22physicalPageSizeSloppyEPvm">physicalPageSizeSloppy</a>(<a class="local col8 ref" href="#38page" title='page' data-ref="38page" data-ref-filename="38page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="local col9 ref" href="#39pageSize" title='pageSize' data-ref="39pageSize" data-ref-filename="39pageSize">pageSize</a>);</td></tr>
<tr><th id="143">143</th><td>                <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> -= <a class="local col0 ref" href="#40decommitSize" title='decommitSize' data-ref="40decommitSize" data-ref-filename="40decommitSize">decommitSize</a>;</td></tr>
<tr><th id="144">144</th><td>                <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> -= <a class="local col0 ref" href="#40decommitSize" title='decommitSize' data-ref="40decommitSize" data-ref-filename="40decommitSize">decommitSize</a>;</td></tr>
<tr><th id="145">145</th><td>                <a class="local col5 ref" href="#35decommitter" title='decommitter' data-ref="35decommitter" data-ref-filename="35decommitter">decommitter</a>.<a class="ref fn" href="BulkDecommit.h.html#_ZN7bmalloc12BulkDecommit8addEagerEPvm" title='bmalloc::BulkDecommit::addEager' data-ref="_ZN7bmalloc12BulkDecommit8addEagerEPvm" data-ref-filename="_ZN7bmalloc12BulkDecommit8addEagerEPvm">addEager</a>(<a class="local col8 ref" href="#38page" title='page' data-ref="38page" data-ref-filename="38page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="local col9 ref" href="#39pageSize" title='pageSize' data-ref="39pageSize" data-ref-filename="39pageSize">pageSize</a>);</td></tr>
<tr><th id="146">146</th><td>                <a class="local col8 ref" href="#38page" title='page' data-ref="38page" data-ref-filename="38page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" title='bmalloc::SmallPage::setHasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" data-ref-filename="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb">setHasPhysicalPages</a>(<b>false</b>);</td></tr>
<tr><th id="147">147</th><td><u>#<span data-ppcond="147">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u></td></tr>
<tr><th id="148">148</th><td>                m_physicalPageMap.decommit(page-&gt;begin()-&gt;begin(), pageSize);</td></tr>
<tr><th id="149">149</th><td><u>#<span data-ppcond="147">endif</span></u></td></tr>
<tr><th id="150">150</th><td>            }</td></tr>
<tr><th id="151">151</th><td>        }</td></tr>
<tr><th id="152">152</th><td>    }</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col1 decl" id="41list" title='list' data-type='bmalloc::List&lt;bmalloc::Chunk&gt; &amp;' data-ref="41list" data-ref-filename="41list">list</dfn> : <a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a>) {</td></tr>
<tr><th id="155">155</th><td>        <b>while</b> (!<a class="local col1 ref" href="#41list" title='list' data-ref="41list" data-ref-filename="41list">list</a>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="156">156</th><td>            <a class="member fn" href="#_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" title='bmalloc::Heap::deallocateSmallChunk' data-ref="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" data-ref-filename="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm">deallocateSmallChunk</a>(<span class='refarg'><a class="local col4 ref" href="#34lock" title='lock' data-ref="34lock" data-ref-filename="34lock">lock</a></span>, <a class="local col1 ref" href="#41list" title='list' data-ref="41list" data-ref-filename="41list">list</a>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List3popEv" title='bmalloc::List::pop' data-ref="_ZN7bmalloc4List3popEv" data-ref-filename="_ZN7bmalloc4List3popEv">pop</a>(), &amp;<a class="local col1 ref" href="#41list" title='list' data-ref="41list" data-ref-filename="41list">list</a> - &amp;<a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<var>0</var>]</span>);</td></tr>
<tr><th id="157">157</th><td>    }</td></tr>
<tr><th id="158">158</th><td></td></tr>
<tr><th id="159">159</th><td>    <b>for</b> (<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&amp; <dfn class="local col2 decl" id="42range" title='range' data-type='bmalloc::LargeRange &amp;' data-ref="42range" data-ref-filename="42range">range</dfn> : <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>) {</td></tr>
<tr><th id="160">160</th><td><u>#<span data-ppcond="160">if</span> <a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="161">161</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a>, <b>static_cast</b>&lt;<em>void</em>*&gt;(<a class="local col2 ref" href="#42range" title='range' data-ref="42range" data-ref-filename="42range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>()));</td></tr>
<tr><th id="162">162</th><td><u>#<span data-ppcond="160">else</span></u></td></tr>
<tr><th id="163">163</th><td>        <b>if</b> (range.usedSinceLastScavenge()) {</td></tr>
<tr><th id="164">164</th><td>            range.clearUsedSinceLastScavenge();</td></tr>
<tr><th id="165">165</th><td>            deferredDecommits++;</td></tr>
<tr><th id="166">166</th><td>            <b>continue</b>;</td></tr>
<tr><th id="167">167</th><td>        }</td></tr>
<tr><th id="168">168</th><td><u>#<span data-ppcond="160">endif</span></u></td></tr>
<tr><th id="169">169</th><td>        <a class="member fn" href="#_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" title='bmalloc::Heap::decommitLargeRange' data-ref="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" data-ref-filename="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE">decommitLargeRange</a>(<span class='refarg'><a class="local col4 ref" href="#34lock" title='lock' data-ref="34lock" data-ref-filename="34lock">lock</a></span>, <span class='refarg'><a class="local col2 ref" href="#42range" title='range' data-ref="42range" data-ref-filename="42range">range</a></span>, <span class='refarg'><a class="local col5 ref" href="#35decommitter" title='decommitter' data-ref="35decommitter" data-ref-filename="35decommitter">decommitter</a></span>);</td></tr>
<tr><th id="170">170</th><td>    }</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td><u>#<span data-ppcond="172">if</span> <a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="173">173</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> = <var>0</var>;</td></tr>
<tr><th id="174">174</th><td><u>#<span data-ppcond="172">endif</span></u></td></tr>
<tr><th id="175">175</th><td>}</td></tr>
<tr><th id="176">176</th><td></td></tr>
<tr><th id="177">177</th><td><u>#<span data-ppcond="177">if</span> <a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="178">178</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap23scavengeToHighWatermarkERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE" title='bmalloc::Heap::scavengeToHighWatermark' data-ref="_ZN7bmalloc4Heap23scavengeToHighWatermarkERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE" data-ref-filename="_ZN7bmalloc4Heap23scavengeToHighWatermarkERNSt3__111unique_lockINS_5MutexEEERNS_12BulkDecommitE">scavengeToHighWatermark</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col3 decl" id="43lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="43lock" data-ref-filename="43lock">lock</dfn>, <a class="type" href="BulkDecommit.h.html#bmalloc::BulkDecommit" title='bmalloc::BulkDecommit' data-ref="bmalloc::BulkDecommit" data-ref-filename="bmalloc..BulkDecommit">BulkDecommit</a>&amp; <dfn class="local col4 decl" id="44decommitter" title='decommitter' data-type='bmalloc::BulkDecommit &amp;' data-ref="44decommitter" data-ref-filename="44decommitter">decommitter</dfn>)</td></tr>
<tr><th id="179">179</th><td>{</td></tr>
<tr><th id="180">180</th><td>    <em>void</em>* <dfn class="local col5 decl" id="45newHighWaterMark" title='newHighWaterMark' data-type='void *' data-ref="45newHighWaterMark" data-ref-filename="45newHighWaterMark">newHighWaterMark</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="181">181</th><td>    <b>for</b> (<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&amp; <dfn class="local col6 decl" id="46range" title='range' data-type='bmalloc::LargeRange &amp;' data-ref="46range" data-ref-filename="46range">range</dfn> : <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>) {</td></tr>
<tr><th id="182">182</th><td>        <b>if</b> (<a class="local col6 ref" href="#46range" title='range' data-ref="46range" data-ref-filename="46range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>() &lt;= <a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a>)</td></tr>
<tr><th id="183">183</th><td>            <a class="local col5 ref" href="#45newHighWaterMark" title='newHighWaterMark' data-ref="45newHighWaterMark" data-ref-filename="45newHighWaterMark">newHighWaterMark</a> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>(<a class="local col5 ref" href="#45newHighWaterMark" title='newHighWaterMark' data-ref="45newHighWaterMark" data-ref-filename="45newHighWaterMark">newHighWaterMark</a>, <b>static_cast</b>&lt;<em>void</em>*&gt;(<a class="local col6 ref" href="#46range" title='range' data-ref="46range" data-ref-filename="46range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>()));</td></tr>
<tr><th id="184">184</th><td>        <b>else</b></td></tr>
<tr><th id="185">185</th><td>            <a class="member fn" href="#_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" title='bmalloc::Heap::decommitLargeRange' data-ref="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE" data-ref-filename="_ZN7bmalloc4Heap18decommitLargeRangeERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeERNS_12BulkDecommitE">decommitLargeRange</a>(<span class='refarg'><a class="local col3 ref" href="#43lock" title='lock' data-ref="43lock" data-ref-filename="43lock">lock</a></span>, <span class='refarg'><a class="local col6 ref" href="#46range" title='range' data-ref="46range" data-ref-filename="46range">range</a></span>, <span class='refarg'><a class="local col4 ref" href="#44decommitter" title='decommitter' data-ref="44decommitter" data-ref-filename="44decommitter">decommitter</a></span>);</td></tr>
<tr><th id="186">186</th><td>    }</td></tr>
<tr><th id="187">187</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a> = <a class="local col5 ref" href="#45newHighWaterMark" title='newHighWaterMark' data-ref="45newHighWaterMark" data-ref-filename="45newHighWaterMark">newHighWaterMark</a>;</td></tr>
<tr><th id="188">188</th><td>}</td></tr>
<tr><th id="189">189</th><td><u>#<span data-ppcond="177">endif</span></u></td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap19deallocateLineCacheERNSt3__111unique_lockINS_5MutexEEERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE" title='bmalloc::Heap::deallocateLineCache' data-ref="_ZN7bmalloc4Heap19deallocateLineCacheERNSt3__111unique_lockINS_5MutexEEERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE" data-ref-filename="_ZN7bmalloc4Heap19deallocateLineCacheERNSt3__111unique_lockINS_5MutexEEERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE">deallocateLineCache</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <a class="typedef" href="SmallPage.h.html#bmalloc::LineCache" title='bmalloc::LineCache' data-type='std::array&lt;List&lt;SmallPage&gt;, sizeClassCount&gt;' data-ref="bmalloc::LineCache" data-ref-filename="bmalloc..LineCache">LineCache</a>&amp; <dfn class="local col7 decl" id="47lineCache" title='lineCache' data-type='bmalloc::LineCache &amp;' data-ref="47lineCache" data-ref-filename="47lineCache">lineCache</dfn>)</td></tr>
<tr><th id="192">192</th><td>{</td></tr>
<tr><th id="193">193</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col8 decl" id="48list" title='list' data-type='bmalloc::List&lt;bmalloc::SmallPage&gt; &amp;' data-ref="48list" data-ref-filename="48list">list</dfn> : <a class="local col7 ref" href="#47lineCache" title='lineCache' data-ref="47lineCache" data-ref-filename="47lineCache">lineCache</a>) {</td></tr>
<tr><th id="194">194</th><td>        <b>while</b> (!<a class="local col8 ref" href="#48list" title='list' data-ref="48list" data-ref-filename="48list">list</a>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="195">195</th><td>            <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="49sizeClass" title='sizeClass' data-type='size_t' data-ref="49sizeClass" data-ref-filename="49sizeClass">sizeClass</dfn> = &amp;<a class="local col8 ref" href="#48list" title='list' data-ref="48list" data-ref-filename="48list">list</a> - &amp;<a class="local col7 ref" href="#47lineCache" title='lineCache' data-ref="47lineCache" data-ref-filename="47lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<var>0</var>]</span>;</td></tr>
<tr><th id="196">196</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_lineCache" title='bmalloc::Heap::m_lineCache' data-ref="bmalloc::Heap::m_lineCache" data-ref-filename="bmalloc..Heap..m_lineCache">m_lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col9 ref" href="#49sizeClass" title='sizeClass' data-ref="49sizeClass" data-ref-filename="49sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col8 ref" href="#48list" title='list' data-ref="48list" data-ref-filename="48list">list</a>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List8popFrontEv" title='bmalloc::List::popFront' data-ref="_ZN7bmalloc4List8popFrontEv" data-ref-filename="_ZN7bmalloc4List8popFrontEv">popFront</a>());</td></tr>
<tr><th id="197">197</th><td>        }</td></tr>
<tr><th id="198">198</th><td>    }</td></tr>
<tr><th id="199">199</th><td>}</td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE" title='bmalloc::Heap::allocateSmallChunk' data-ref="_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE">allocateSmallChunk</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col0 decl" id="50lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="50lock" data-ref-filename="50lock">lock</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="51pageClass" title='pageClass' data-type='size_t' data-ref="51pageClass" data-ref-filename="51pageClass">pageClass</dfn>, <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a> <dfn class="local col2 decl" id="52action" title='action' data-type='bmalloc::FailureAction' data-ref="52action" data-ref-filename="52action">action</dfn>)</td></tr>
<tr><th id="202">202</th><td>{</td></tr>
<tr><th id="203">203</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="204">204</th><td>    </td></tr>
<tr><th id="205">205</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="53pageSize" title='pageSize' data-type='size_t' data-ref="53pageSize" data-ref-filename="53pageSize">pageSize</dfn> = <span class="namespace">bmalloc::</span><a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col1 ref" href="#51pageClass" title='pageClass' data-ref="51pageClass" data-ref-filename="51pageClass">pageClass</a>);</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>    <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* <dfn class="local col4 decl" id="54chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="54chunk" data-ref-filename="54chunk">chunk</dfn> = [&amp;]() -&gt; <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* {</td></tr>
<tr><th id="208">208</th><td>        <b>if</b> (!<a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col1 ref" href="#51pageClass" title='pageClass' data-ref="51pageClass" data-ref-filename="51pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="209">209</th><td>            <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col1 ref" href="#51pageClass" title='pageClass' data-ref="51pageClass" data-ref-filename="51pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List3popEv" title='bmalloc::List::pop' data-ref="_ZN7bmalloc4List3popEv" data-ref-filename="_ZN7bmalloc4List3popEv">pop</a>();</td></tr>
<tr><th id="210">210</th><td></td></tr>
<tr><th id="211">211</th><td>        <em>void</em>* <dfn class="local col5 decl" id="55memory" title='memory' data-type='void *' data-ref="55memory" data-ref-filename="55memory">memory</dfn> = <a class="member fn" href="#_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" title='bmalloc::Heap::allocateLarge' data-ref="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE">allocateLarge</a>(<span class='refarg'><a class="local col0 ref" href="#50lock" title='lock' data-ref="50lock" data-ref-filename="50lock">lock</a></span>, <a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a>, <a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a>, <a class="local col2 ref" href="#52action" title='action' data-ref="52action" data-ref-filename="52action">action</a>);</td></tr>
<tr><th id="212">212</th><td>        <b>if</b> (!<a class="local col5 ref" href="#55memory" title='memory' data-ref="55memory" data-ref-filename="55memory">memory</a>) {</td></tr>
<tr><th id="213">213</th><td>            <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col2 ref" href="#52action" title='action' data-ref="52action" data-ref-filename="52action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a>);</td></tr>
<tr><th id="214">214</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="215">215</th><td>        }</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td>        <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* <dfn class="local col6 decl" id="56chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="56chunk" data-ref-filename="56chunk">chunk</dfn> = <b>new</b> (<a class="local col5 ref" href="#55memory" title='memory' data-ref="55memory" data-ref-filename="55memory">memory</a>) <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a><a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5ChunkC1Em" title='bmalloc::Chunk::Chunk' data-ref="_ZN7bmalloc5ChunkC1Em" data-ref-filename="_ZN7bmalloc5ChunkC1Em">(</a><a class="local col3 ref" href="#53pageSize" title='pageSize' data-ref="53pageSize" data-ref-filename="53pageSize">pageSize</a>);</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_objectTypes" title='bmalloc::Heap::m_objectTypes' data-ref="bmalloc::Heap::m_objectTypes" data-ref-filename="bmalloc..Heap..m_objectTypes">m_objectTypes</a>.<a class="ref fn" href="ObjectTypeTable.h.html#_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" title='bmalloc::ObjectTypeTable::set' data-ref="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" data-ref-filename="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE">set</a>(<span class='refarg'><a class="local col0 ref" href="#50lock" title='lock' data-ref="50lock" data-ref-filename="50lock">lock</a></span>, <a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>, <a class="type" href="ObjectType.h.html#bmalloc::ObjectType" title='bmalloc::ObjectType' data-ref="bmalloc::ObjectType" data-ref-filename="bmalloc..ObjectType">ObjectType</a>::<a class="enum" href="ObjectType.h.html#bmalloc::ObjectType::Small" title='bmalloc::ObjectType::Small' data-ref="bmalloc::ObjectType::Small" data-ref-filename="bmalloc..ObjectType..Small">Small</a>);</td></tr>
<tr><th id="220">220</th><td></td></tr>
<tr><th id="221">221</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="57accountedInFreeable" title='accountedInFreeable' data-type='size_t' data-ref="57accountedInFreeable" data-ref-filename="57accountedInFreeable">accountedInFreeable</dfn> = <var>0</var>;</td></tr>
<tr><th id="222">222</th><td>        <a class="tu ref fn" href="Chunk.h.html#_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_" title='bmalloc::forEachPage' data-use='c' data-ref="_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_" data-ref-filename="_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_">forEachPage</a>(<a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>, <a class="local col3 ref" href="#53pageSize" title='pageSize' data-ref="53pageSize" data-ref-filename="53pageSize">pageSize</a>, [&amp;](<a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col8 decl" id="58page" title='page' data-type='bmalloc::SmallPage *' data-ref="58page" data-ref-filename="58page">page</dfn>) {</td></tr>
<tr><th id="223">223</th><td>            <a class="local col8 ref" href="#58page" title='page' data-ref="58page" data-ref-filename="58page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" title='bmalloc::SmallPage::setHasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" data-ref-filename="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb">setHasPhysicalPages</a>(<b>true</b>);</td></tr>
<tr><th id="224">224</th><td><u>#<span data-ppcond="224">if</span> !<a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="225">225</th><td>            page-&gt;setUsedSinceLastScavenge();</td></tr>
<tr><th id="226">226</th><td><u>#<span data-ppcond="224">endif</span></u></td></tr>
<tr><th id="227">227</th><td>            <a class="local col8 ref" href="#58page" title='page' data-ref="58page" data-ref-filename="58page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" title='bmalloc::SmallPage::setHasFreeLines' data-ref="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" data-ref-filename="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb">setHasFreeLines</a>(<span class='refarg'><a class="local col0 ref" href="#50lock" title='lock' data-ref="50lock" data-ref-filename="50lock">lock</a></span>, <b>true</b>);</td></tr>
<tr><th id="228">228</th><td>            <a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>().<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col8 ref" href="#58page" title='page' data-ref="58page" data-ref-filename="58page">page</a>);</td></tr>
<tr><th id="229">229</th><td>            <a class="local col7 ref" href="#57accountedInFreeable" title='accountedInFreeable' data-ref="57accountedInFreeable" data-ref-filename="57accountedInFreeable">accountedInFreeable</a> += <a class="local col3 ref" href="#53pageSize" title='pageSize' data-ref="53pageSize" data-ref-filename="53pageSize">pageSize</a>;</td></tr>
<tr><th id="230">230</th><td>        });</td></tr>
<tr><th id="231">231</th><td></td></tr>
<tr><th id="232">232</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="local col7 ref" href="#57accountedInFreeable" title='accountedInFreeable' data-ref="57accountedInFreeable" data-ref-filename="57accountedInFreeable">accountedInFreeable</a>;</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>        <em>auto</em> <dfn class="local col9 decl" id="59metadataSize" title='metadataSize' data-type='unsigned long' data-ref="59metadataSize" data-ref-filename="59metadataSize">metadataSize</dfn> = <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>::<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk12metadataSizeEm" title='bmalloc::Chunk::metadataSize' data-ref="_ZN7bmalloc5Chunk12metadataSizeEm" data-ref-filename="_ZN7bmalloc5Chunk12metadataSizeEm">metadataSize</a>(<a class="local col3 ref" href="#53pageSize" title='pageSize' data-ref="53pageSize" data-ref-filename="53pageSize">pageSize</a>);</td></tr>
<tr><th id="235">235</th><td>        <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm" title='bmalloc::vmDeallocatePhysicalPagesSloppy' data-ref="_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm" data-ref-filename="_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm">vmDeallocatePhysicalPagesSloppy</a>(<a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk7addressEm" title='bmalloc::Chunk::address' data-ref="_ZN7bmalloc5Chunk7addressEm" data-ref-filename="_ZN7bmalloc5Chunk7addressEm">address</a>(<b>sizeof</b>(<a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>)), <a class="local col9 ref" href="#59metadataSize" title='metadataSize' data-ref="59metadataSize" data-ref-filename="59metadataSize">metadataSize</a> - <b>sizeof</b>(<a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>));</td></tr>
<tr><th id="236">236</th><td></td></tr>
<tr><th id="237">237</th><td>        <em>auto</em> <dfn class="local col0 decl" id="60decommitSize" title='decommitSize' data-type='unsigned long' data-ref="60decommitSize" data-ref-filename="60decommitSize">decommitSize</dfn> = <a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a> - <a class="local col9 ref" href="#59metadataSize" title='metadataSize' data-ref="59metadataSize" data-ref-filename="59metadataSize">metadataSize</a> - <a class="local col7 ref" href="#57accountedInFreeable" title='accountedInFreeable' data-ref="57accountedInFreeable" data-ref-filename="57accountedInFreeable">accountedInFreeable</a>;</td></tr>
<tr><th id="238">238</th><td>        <b>if</b> (<a class="local col0 ref" href="#60decommitSize" title='decommitSize' data-ref="60decommitSize" data-ref-filename="60decommitSize">decommitSize</a> &gt; <var>0</var>)</td></tr>
<tr><th id="239">239</th><td>            <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm" title='bmalloc::vmDeallocatePhysicalPagesSloppy' data-ref="_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm" data-ref-filename="_ZN7bmalloc31vmDeallocatePhysicalPagesSloppyEPvm">vmDeallocatePhysicalPagesSloppy</a>(<a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk7addressEm" title='bmalloc::Chunk::address' data-ref="_ZN7bmalloc5Chunk7addressEm" data-ref-filename="_ZN7bmalloc5Chunk7addressEm">address</a>(<a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a> - <a class="local col0 ref" href="#60decommitSize" title='decommitSize' data-ref="60decommitSize" data-ref-filename="60decommitSize">decommitSize</a>), <a class="local col0 ref" href="#60decommitSize" title='decommitSize' data-ref="60decommitSize" data-ref-filename="60decommitSize">decommitSize</a>);</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger8scheduleEm" title='bmalloc::Scavenger::schedule' data-ref="_ZN7bmalloc9Scavenger8scheduleEm" data-ref-filename="_ZN7bmalloc9Scavenger8scheduleEm">schedule</a>(<var>0</var>);</td></tr>
<tr><th id="242">242</th><td></td></tr>
<tr><th id="243">243</th><td>        <b>return</b> <a class="local col6 ref" href="#56chunk" title='chunk' data-ref="56chunk" data-ref-filename="56chunk">chunk</a>;</td></tr>
<tr><th id="244">244</th><td>    }<a class="tu ref fn" href="#_ZZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionEENK3$_0clEv" title='bmalloc::Heap::allocateSmallChunk(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionEENK3$_0clEv" data-ref-filename="_ZZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionEENK3$_0clEv">()</a>;</td></tr>
<tr><th id="245">245</th><td>    </td></tr>
<tr><th id="246">246</th><td>    <b>if</b> (<a class="local col4 ref" href="#54chunk" title='chunk' data-ref="54chunk" data-ref-filename="54chunk">chunk</a>)</td></tr>
<tr><th id="247">247</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col1 ref" href="#51pageClass" title='pageClass' data-ref="51pageClass" data-ref-filename="51pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col4 ref" href="#54chunk" title='chunk' data-ref="54chunk" data-ref-filename="54chunk">chunk</a>);</td></tr>
<tr><th id="248">248</th><td>}</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" title='bmalloc::Heap::deallocateSmallChunk' data-ref="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" data-ref-filename="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm">deallocateSmallChunk</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col1 decl" id="61lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="61lock" data-ref-filename="61lock">lock</dfn>, <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* <dfn class="local col2 decl" id="62chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="62chunk" data-ref-filename="62chunk">chunk</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="63pageClass" title='pageClass' data-type='size_t' data-ref="63pageClass" data-ref-filename="63pageClass">pageClass</dfn>)</td></tr>
<tr><th id="251">251</th><td>{</td></tr>
<tr><th id="252">252</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_objectTypes" title='bmalloc::Heap::m_objectTypes' data-ref="bmalloc::Heap::m_objectTypes" data-ref-filename="bmalloc..Heap..m_objectTypes">m_objectTypes</a>.<a class="ref fn" href="ObjectTypeTable.h.html#_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" title='bmalloc::ObjectTypeTable::set' data-ref="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" data-ref-filename="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE">set</a>(<span class='refarg'><a class="local col1 ref" href="#61lock" title='lock' data-ref="61lock" data-ref-filename="61lock">lock</a></span>, <a class="local col2 ref" href="#62chunk" title='chunk' data-ref="62chunk" data-ref-filename="62chunk">chunk</a>, <a class="type" href="ObjectType.h.html#bmalloc::ObjectType" title='bmalloc::ObjectType' data-ref="bmalloc::ObjectType" data-ref-filename="bmalloc..ObjectType">ObjectType</a>::<a class="enum" href="ObjectType.h.html#bmalloc::ObjectType::Large" title='bmalloc::ObjectType::Large' data-ref="bmalloc::ObjectType::Large" data-ref-filename="bmalloc..ObjectType..Large">Large</a>);</td></tr>
<tr><th id="253">253</th><td>    </td></tr>
<tr><th id="254">254</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="64size" title='size' data-type='size_t' data-ref="64size" data-ref-filename="64size">size</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeAllocated" title='bmalloc::Heap::m_largeAllocated' data-ref="bmalloc::Heap::m_largeAllocated" data-ref-filename="bmalloc..Heap..m_largeAllocated">m_largeAllocated</a>.<a class="ref fn" href="Map.h.html#_ZN7bmalloc3Map6removeERKT_" title='bmalloc::Map::remove' data-ref="_ZN7bmalloc3Map6removeERKT_" data-ref-filename="_ZN7bmalloc3Map6removeERKT_">remove</a>(<a class="local col2 ref" href="#62chunk" title='chunk' data-ref="62chunk" data-ref-filename="62chunk">chunk</a>);</td></tr>
<tr><th id="255">255</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="65totalPhysicalSize" title='totalPhysicalSize' data-type='size_t' data-ref="65totalPhysicalSize" data-ref-filename="65totalPhysicalSize">totalPhysicalSize</dfn> = <a class="local col4 ref" href="#64size" title='size' data-ref="64size" data-ref-filename="64size">size</a>;</td></tr>
<tr><th id="256">256</th><td></td></tr>
<tr><th id="257">257</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="66accountedInFreeable" title='accountedInFreeable' data-type='size_t' data-ref="66accountedInFreeable" data-ref-filename="66accountedInFreeable">accountedInFreeable</dfn> = <var>0</var>;</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>    <em>bool</em> <dfn class="local col7 decl" id="67hasPhysicalPages" title='hasPhysicalPages' data-type='bool' data-ref="67hasPhysicalPages" data-ref-filename="67hasPhysicalPages">hasPhysicalPages</dfn> = <b>true</b>;</td></tr>
<tr><th id="260">260</th><td>    <a class="tu ref fn" href="Chunk.h.html#_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_" title='bmalloc::forEachPage' data-use='c' data-ref="_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_" data-ref-filename="_ZN7bmalloc11forEachPageEPNS_5ChunkEmT_">forEachPage</a>(<a class="local col2 ref" href="#62chunk" title='chunk' data-ref="62chunk" data-ref-filename="62chunk">chunk</a>, <a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col3 ref" href="#63pageClass" title='pageClass' data-ref="63pageClass" data-ref-filename="63pageClass">pageClass</a>), [&amp;](<a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col8 decl" id="68page" title='page' data-type='bmalloc::SmallPage *' data-ref="68page" data-ref-filename="68page">page</dfn>) {</td></tr>
<tr><th id="261">261</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="69physicalSize" title='physicalSize' data-type='size_t' data-ref="69physicalSize" data-ref-filename="69physicalSize">physicalSize</dfn> = <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc22physicalPageSizeSloppyEPvm" title='bmalloc::physicalPageSizeSloppy' data-ref="_ZN7bmalloc22physicalPageSizeSloppyEPvm" data-ref-filename="_ZN7bmalloc22physicalPageSizeSloppyEPvm">physicalPageSizeSloppy</a>(<a class="local col8 ref" href="#68page" title='page' data-ref="68page" data-ref-filename="68page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col3 ref" href="#63pageClass" title='pageClass' data-ref="63pageClass" data-ref-filename="63pageClass">pageClass</a>));</td></tr>
<tr><th id="262">262</th><td>        <b>if</b> (!<a class="local col8 ref" href="#68page" title='page' data-ref="68page" data-ref-filename="68page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" title='bmalloc::SmallPage::hasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" data-ref-filename="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv">hasPhysicalPages</a>()) {</td></tr>
<tr><th id="263">263</th><td>            <a class="local col5 ref" href="#65totalPhysicalSize" title='totalPhysicalSize' data-ref="65totalPhysicalSize" data-ref-filename="65totalPhysicalSize">totalPhysicalSize</a> -= <a class="local col9 ref" href="#69physicalSize" title='physicalSize' data-ref="69physicalSize" data-ref-filename="69physicalSize">physicalSize</a>;</td></tr>
<tr><th id="264">264</th><td>            <a class="local col7 ref" href="#67hasPhysicalPages" title='hasPhysicalPages' data-ref="67hasPhysicalPages" data-ref-filename="67hasPhysicalPages">hasPhysicalPages</a> = <b>false</b>;</td></tr>
<tr><th id="265">265</th><td>        } <b>else</b></td></tr>
<tr><th id="266">266</th><td>            <a class="local col6 ref" href="#66accountedInFreeable" title='accountedInFreeable' data-ref="66accountedInFreeable" data-ref-filename="66accountedInFreeable">accountedInFreeable</a> += <a class="local col9 ref" href="#69physicalSize" title='physicalSize' data-ref="69physicalSize" data-ref-filename="69physicalSize">physicalSize</a>;</td></tr>
<tr><th id="267">267</th><td>    });</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> -= <a class="local col6 ref" href="#66accountedInFreeable" title='accountedInFreeable' data-ref="66accountedInFreeable" data-ref-filename="66accountedInFreeable">accountedInFreeable</a>;</td></tr>
<tr><th id="270">270</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="local col5 ref" href="#65totalPhysicalSize" title='totalPhysicalSize' data-ref="65totalPhysicalSize" data-ref-filename="65totalPhysicalSize">totalPhysicalSize</a>;</td></tr>
<tr><th id="271">271</th><td></td></tr>
<tr><th id="272">272</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="70startPhysicalSize" title='startPhysicalSize' data-type='size_t' data-ref="70startPhysicalSize" data-ref-filename="70startPhysicalSize">startPhysicalSize</dfn> = <a class="local col7 ref" href="#67hasPhysicalPages" title='hasPhysicalPages' data-ref="67hasPhysicalPages" data-ref-filename="67hasPhysicalPages">hasPhysicalPages</a> ? <a class="local col4 ref" href="#64size" title='size' data-ref="64size" data-ref-filename="64size">size</a> : <var>0</var>;</td></tr>
<tr><th id="273">273</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1EPvmmm" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1EPvmmm" data-ref-filename="_ZN7bmalloc10LargeRangeC1EPvmmm">(</a><a class="local col2 ref" href="#62chunk" title='chunk' data-ref="62chunk" data-ref-filename="62chunk">chunk</a>, <a class="local col4 ref" href="#64size" title='size' data-ref="64size" data-ref-filename="64size">size</a>, <a class="local col0 ref" href="#70startPhysicalSize" title='startPhysicalSize' data-ref="70startPhysicalSize" data-ref-filename="70startPhysicalSize">startPhysicalSize</a>, <a class="local col5 ref" href="#65totalPhysicalSize" title='totalPhysicalSize' data-ref="65totalPhysicalSize" data-ref-filename="65totalPhysicalSize">totalPhysicalSize</a>));</td></tr>
<tr><th id="274">274</th><td>}</td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td><a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" title='bmalloc::Heap::allocateSmallPage' data-ref="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE">allocateSmallPage</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col1 decl" id="71lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="71lock" data-ref-filename="71lock">lock</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="72sizeClass" title='sizeClass' data-type='size_t' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</dfn>, <a class="typedef" href="SmallPage.h.html#bmalloc::LineCache" title='bmalloc::LineCache' data-type='std::array&lt;List&lt;SmallPage&gt;, sizeClassCount&gt;' data-ref="bmalloc::LineCache" data-ref-filename="bmalloc..LineCache">LineCache</a>&amp; <dfn class="local col3 decl" id="73lineCache" title='lineCache' data-type='bmalloc::LineCache &amp;' data-ref="73lineCache" data-ref-filename="73lineCache">lineCache</dfn>, <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a> <dfn class="local col4 decl" id="74action" title='action' data-type='bmalloc::FailureAction' data-ref="74action" data-ref-filename="74action">action</dfn>)</td></tr>
<tr><th id="277">277</th><td>{</td></tr>
<tr><th id="278">278</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="279">279</th><td></td></tr>
<tr><th id="280">280</th><td>    <b>if</b> (!<a class="local col3 ref" href="#73lineCache" title='lineCache' data-ref="73lineCache" data-ref-filename="73lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="281">281</th><td>        <b>return</b> <a class="local col3 ref" href="#73lineCache" title='lineCache' data-ref="73lineCache" data-ref-filename="73lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List8popFrontEv" title='bmalloc::List::popFront' data-ref="_ZN7bmalloc4List8popFrontEv" data-ref-filename="_ZN7bmalloc4List8popFrontEv">popFront</a>();</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>    <b>if</b> (!<a class="member field" href="Heap.h.html#bmalloc::Heap::m_lineCache" title='bmalloc::Heap::m_lineCache' data-ref="bmalloc::Heap::m_lineCache" data-ref-filename="bmalloc..Heap..m_lineCache">m_lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="284">284</th><td>        <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_lineCache" title='bmalloc::Heap::m_lineCache' data-ref="bmalloc::Heap::m_lineCache" data-ref-filename="bmalloc..Heap..m_lineCache">m_lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List8popFrontEv" title='bmalloc::List::popFront' data-ref="_ZN7bmalloc4List8popFrontEv" data-ref-filename="_ZN7bmalloc4List8popFrontEv">popFront</a>();</td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger15didStartGrowingEv" title='bmalloc::Scavenger::didStartGrowing' data-ref="_ZN7bmalloc9Scavenger15didStartGrowingEv" data-ref-filename="_ZN7bmalloc9Scavenger15didStartGrowingEv">didStartGrowing</a>();</td></tr>
<tr><th id="287">287</th><td>    </td></tr>
<tr><th id="288">288</th><td>    <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col5 decl" id="75page" title='page' data-type='bmalloc::SmallPage *' data-ref="75page" data-ref-filename="75page">page</dfn> = [&amp;]() -&gt; <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* {</td></tr>
<tr><th id="289">289</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="76pageClass" title='pageClass' data-type='size_t' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants9pageClassEm" title='bmalloc::HeapConstants::pageClass' data-ref="_ZNK7bmalloc13HeapConstants9pageClassEm" data-ref-filename="_ZNK7bmalloc13HeapConstants9pageClassEm">pageClass</a>(<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>);</td></tr>
<tr><th id="290">290</th><td>        </td></tr>
<tr><th id="291">291</th><td>        <b>if</b> (<a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="292">292</th><td>            <a class="member fn" href="#_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE" title='bmalloc::Heap::allocateSmallChunk' data-ref="_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap18allocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEmNS_13FailureActionE">allocateSmallChunk</a>(<span class='refarg'><a class="local col1 ref" href="#71lock" title='lock' data-ref="71lock" data-ref-filename="71lock">lock</a></span>, <a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>, <a class="local col4 ref" href="#74action" title='action' data-ref="74action" data-ref-filename="74action">action</a>);</td></tr>
<tr><th id="293">293</th><td>        <b>if</b> (<a class="local col4 ref" href="#74action" title='action' data-ref="74action" data-ref-filename="74action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a> &amp;&amp; <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="294">294</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>        <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* <dfn class="local col7 decl" id="77chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="77chunk" data-ref-filename="77chunk">chunk</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4tailEv" title='bmalloc::List::tail' data-ref="_ZN7bmalloc4List4tailEv" data-ref-filename="_ZN7bmalloc4List4tailEv">tail</a>();</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td>        <a class="local col7 ref" href="#77chunk" title='chunk' data-ref="77chunk" data-ref-filename="77chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk3refEv" title='bmalloc::Chunk::ref' data-ref="_ZN7bmalloc5Chunk3refEv" data-ref-filename="_ZN7bmalloc5Chunk3refEv">ref</a>();</td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td>        <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col8 decl" id="78page" title='page' data-type='bmalloc::SmallPage *' data-ref="78page" data-ref-filename="78page">page</dfn> = <a class="local col7 ref" href="#77chunk" title='chunk' data-ref="77chunk" data-ref-filename="77chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>().<a class="ref fn" href="List.h.html#_ZN7bmalloc4List3popEv" title='bmalloc::List::pop' data-ref="_ZN7bmalloc4List3popEv" data-ref-filename="_ZN7bmalloc4List3popEv">pop</a>();</td></tr>
<tr><th id="301">301</th><td>        <b>if</b> (<a class="local col7 ref" href="#77chunk" title='chunk' data-ref="77chunk" data-ref-filename="77chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>().<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="302">302</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" title='bmalloc::List::remove' data-ref="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" data-ref-filename="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE">remove</a>(<a class="local col7 ref" href="#77chunk" title='chunk' data-ref="77chunk" data-ref-filename="77chunk">chunk</a>);</td></tr>
<tr><th id="303">303</th><td></td></tr>
<tr><th id="304">304</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="79pageSize" title='pageSize' data-type='size_t' data-ref="79pageSize" data-ref-filename="79pageSize">pageSize</dfn> = <span class="namespace">bmalloc::</span><a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col6 ref" href="#76pageClass" title='pageClass' data-ref="76pageClass" data-ref-filename="76pageClass">pageClass</a>);</td></tr>
<tr><th id="305">305</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="80physicalSize" title='physicalSize' data-type='size_t' data-ref="80physicalSize" data-ref-filename="80physicalSize">physicalSize</dfn> = <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc22physicalPageSizeSloppyEPvm" title='bmalloc::physicalPageSizeSloppy' data-ref="_ZN7bmalloc22physicalPageSizeSloppyEPvm" data-ref-filename="_ZN7bmalloc22physicalPageSizeSloppyEPvm">physicalPageSizeSloppy</a>(<a class="local col8 ref" href="#78page" title='page' data-ref="78page" data-ref-filename="78page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="local col9 ref" href="#79pageSize" title='pageSize' data-ref="79pageSize" data-ref-filename="79pageSize">pageSize</a>);</td></tr>
<tr><th id="306">306</th><td>        <b>if</b> (<a class="local col8 ref" href="#78page" title='page' data-ref="78page" data-ref-filename="78page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" title='bmalloc::SmallPage::hasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv" data-ref-filename="_ZN7bmalloc9SmallPage16hasPhysicalPagesEv">hasPhysicalPages</a>())</td></tr>
<tr><th id="307">307</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> -= <a class="local col0 ref" href="#80physicalSize" title='physicalSize' data-ref="80physicalSize" data-ref-filename="80physicalSize">physicalSize</a>;</td></tr>
<tr><th id="308">308</th><td>        <b>else</b> {</td></tr>
<tr><th id="309">309</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm" title='bmalloc::Scavenger::scheduleIfUnderMemoryPressure' data-ref="_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm" data-ref-filename="_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm">scheduleIfUnderMemoryPressure</a>(<a class="local col9 ref" href="#79pageSize" title='pageSize' data-ref="79pageSize" data-ref-filename="79pageSize">pageSize</a>);</td></tr>
<tr><th id="310">310</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> += <a class="local col0 ref" href="#80physicalSize" title='physicalSize' data-ref="80physicalSize" data-ref-filename="80physicalSize">physicalSize</a>;</td></tr>
<tr><th id="311">311</th><td>            <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm" title='bmalloc::vmAllocatePhysicalPagesSloppy' data-ref="_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm" data-ref-filename="_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm">vmAllocatePhysicalPagesSloppy</a>(<a class="local col8 ref" href="#78page" title='page' data-ref="78page" data-ref-filename="78page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="local col9 ref" href="#79pageSize" title='pageSize' data-ref="79pageSize" data-ref-filename="79pageSize">pageSize</a>);</td></tr>
<tr><th id="312">312</th><td>            <a class="local col8 ref" href="#78page" title='page' data-ref="78page" data-ref-filename="78page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" title='bmalloc::SmallPage::setHasPhysicalPages' data-ref="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb" data-ref-filename="_ZN7bmalloc9SmallPage19setHasPhysicalPagesEb">setHasPhysicalPages</a>(<b>true</b>);</td></tr>
<tr><th id="313">313</th><td><u>#<span data-ppcond="313">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u></td></tr>
<tr><th id="314">314</th><td>            m_physicalPageMap.commit(page-&gt;begin()-&gt;begin(), pageSize);</td></tr>
<tr><th id="315">315</th><td><u>#<span data-ppcond="313">endif</span></u></td></tr>
<tr><th id="316">316</th><td>        }</td></tr>
<tr><th id="317">317</th><td><u>#<span data-ppcond="317">if</span> !<a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="318">318</th><td>        page-&gt;setUsedSinceLastScavenge();</td></tr>
<tr><th id="319">319</th><td><u>#<span data-ppcond="317">endif</span></u></td></tr>
<tr><th id="320">320</th><td></td></tr>
<tr><th id="321">321</th><td>        <b>return</b> <a class="local col8 ref" href="#78page" title='page' data-ref="78page" data-ref-filename="78page">page</a>;</td></tr>
<tr><th id="322">322</th><td>    }<a class="tu ref fn" href="#_ZZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionEENK3$_1clEv" title='bmalloc::Heap::allocateSmallPage(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::LineCache &amp;, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionEENK3$_1clEv" data-ref-filename="_ZZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionEENK3$_1clEv">()</a>;</td></tr>
<tr><th id="323">323</th><td>    <b>if</b> (!<a class="local col5 ref" href="#75page" title='page' data-ref="75page" data-ref-filename="75page">page</a>) {</td></tr>
<tr><th id="324">324</th><td>        <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col4 ref" href="#74action" title='action' data-ref="74action" data-ref-filename="74action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a>);</td></tr>
<tr><th id="325">325</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="326">326</th><td>    }</td></tr>
<tr><th id="327">327</th><td></td></tr>
<tr><th id="328">328</th><td>    <a class="local col5 ref" href="#75page" title='page' data-ref="75page" data-ref-filename="75page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage12setSizeClassEm" title='bmalloc::SmallPage::setSizeClass' data-ref="_ZN7bmalloc9SmallPage12setSizeClassEm" data-ref-filename="_ZN7bmalloc9SmallPage12setSizeClassEm">setSizeClass</a>(<a class="local col2 ref" href="#72sizeClass" title='sizeClass' data-ref="72sizeClass" data-ref-filename="72sizeClass">sizeClass</a>);</td></tr>
<tr><th id="329">329</th><td>    <b>return</b> <a class="local col5 ref" href="#75page" title='page' data-ref="75page" data-ref-filename="75page">page</a>;</td></tr>
<tr><th id="330">330</th><td>}</td></tr>
<tr><th id="331">331</th><td></td></tr>
<tr><th id="332">332</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap19deallocateSmallLineERNSt3__111unique_lockINS_5MutexEEENS_6ObjectERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE" title='bmalloc::Heap::deallocateSmallLine' data-ref="_ZN7bmalloc4Heap19deallocateSmallLineERNSt3__111unique_lockINS_5MutexEEENS_6ObjectERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE" data-ref-filename="_ZN7bmalloc4Heap19deallocateSmallLineERNSt3__111unique_lockINS_5MutexEEENS_6ObjectERNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEE">deallocateSmallLine</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col1 decl" id="81lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="81lock" data-ref-filename="81lock">lock</dfn>, <a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a> <dfn class="local col2 decl" id="82object" title='object' data-type='bmalloc::Object' data-ref="82object" data-ref-filename="82object">object</dfn>, <a class="typedef" href="SmallPage.h.html#bmalloc::LineCache" title='bmalloc::LineCache' data-type='std::array&lt;List&lt;SmallPage&gt;, sizeClassCount&gt;' data-ref="bmalloc::LineCache" data-ref-filename="bmalloc..LineCache">LineCache</a>&amp; <dfn class="local col3 decl" id="83lineCache" title='lineCache' data-type='bmalloc::LineCache &amp;' data-ref="83lineCache" data-ref-filename="83lineCache">lineCache</dfn>)</td></tr>
<tr><th id="333">333</th><td>{</td></tr>
<tr><th id="334">334</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(!object.line()-&gt;refCount(lock))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(!<a class="local col2 ref" href="#82object" title='object' data-ref="82object" data-ref-filename="82object">object</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4lineEv" title='bmalloc::Object::line' data-ref="_ZN7bmalloc6Object4lineEv" data-ref-filename="_ZN7bmalloc6Object4lineEv">line</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallLine::refCount' data-ref="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>));</td></tr>
<tr><th id="335">335</th><td>    <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col4 decl" id="84page" title='page' data-type='bmalloc::SmallPage *' data-ref="84page" data-ref-filename="84page">page</dfn> = <a class="local col2 ref" href="#82object" title='object' data-ref="82object" data-ref-filename="82object">object</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4pageEv" title='bmalloc::Object::page' data-ref="_ZN7bmalloc6Object4pageEv" data-ref-filename="_ZN7bmalloc6Object4pageEv">page</a>();</td></tr>
<tr><th id="336">336</th><td>    <a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5derefERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::deref' data-ref="_ZN7bmalloc9SmallPage5derefERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallPage5derefERNSt3__111unique_lockINS_5MutexEEE">deref</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>);</td></tr>
<tr><th id="337">337</th><td></td></tr>
<tr><th id="338">338</th><td>    <b>if</b> (!<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::hasFreeLines' data-ref="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE">hasFreeLines</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>)) {</td></tr>
<tr><th id="339">339</th><td>        <a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" title='bmalloc::SmallPage::setHasFreeLines' data-ref="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" data-ref-filename="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb">setHasFreeLines</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>, <b>true</b>);</td></tr>
<tr><th id="340">340</th><td>        <a class="local col3 ref" href="#83lineCache" title='lineCache' data-ref="83lineCache" data-ref-filename="83lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage9sizeClassEv" title='bmalloc::SmallPage::sizeClass' data-ref="_ZN7bmalloc9SmallPage9sizeClassEv" data-ref-filename="_ZN7bmalloc9SmallPage9sizeClassEv">sizeClass</a>()]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>);</td></tr>
<tr><th id="341">341</th><td>    }</td></tr>
<tr><th id="342">342</th><td></td></tr>
<tr><th id="343">343</th><td>    <b>if</b> (<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::refCount' data-ref="_ZN7bmalloc9SmallPage8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallPage8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>))</td></tr>
<tr><th id="344">344</th><td>        <b>return</b>;</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="85pageClass" title='pageClass' data-type='size_t' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants9pageClassEm" title='bmalloc::HeapConstants::pageClass' data-ref="_ZNK7bmalloc13HeapConstants9pageClassEm" data-ref-filename="_ZNK7bmalloc13HeapConstants9pageClassEm">pageClass</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage9sizeClassEv" title='bmalloc::SmallPage::sizeClass' data-ref="_ZN7bmalloc9SmallPage9sizeClassEv" data-ref-filename="_ZN7bmalloc9SmallPage9sizeClassEv">sizeClass</a>());</td></tr>
<tr><th id="347">347</th><td></td></tr>
<tr><th id="348">348</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc22physicalPageSizeSloppyEPvm" title='bmalloc::physicalPageSizeSloppy' data-ref="_ZN7bmalloc22physicalPageSizeSloppyEPvm" data-ref-filename="_ZN7bmalloc22physicalPageSizeSloppyEPvm">physicalPageSizeSloppy</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>(), <a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>));</td></tr>
<tr><th id="349">349</th><td></td></tr>
<tr><th id="350">350</th><td>    <a class="type" href="List.h.html#bmalloc::List" title='bmalloc::List' data-ref="bmalloc::List" data-ref-filename="bmalloc..List">List</a>&lt;<a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>&gt;::<a class="ref fn" href="List.h.html#_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" title='bmalloc::List::remove' data-ref="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" data-ref-filename="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE">remove</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>); <i>// 'page' may be in any thread's line cache.</i></td></tr>
<tr><th id="351">351</th><td>    </td></tr>
<tr><th id="352">352</th><td>    <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>* <dfn class="local col6 decl" id="86chunk" title='chunk' data-type='bmalloc::Chunk *' data-ref="86chunk" data-ref-filename="86chunk">chunk</dfn> = <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>::<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk3getEPv" title='bmalloc::Chunk::get' data-ref="_ZN7bmalloc5Chunk3getEPv" data-ref-filename="_ZN7bmalloc5Chunk3getEPv">get</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>);</td></tr>
<tr><th id="353">353</th><td>    <b>if</b> (<a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>().<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="354">354</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>);</td></tr>
<tr><th id="355">355</th><td>    <a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk9freePagesEv" title='bmalloc::Chunk::freePages' data-ref="_ZN7bmalloc5Chunk9freePagesEv" data-ref-filename="_ZN7bmalloc5Chunk9freePagesEv">freePages</a>().<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col4 ref" href="#84page" title='page' data-ref="84page" data-ref-filename="84page">page</a>);</td></tr>
<tr><th id="356">356</th><td></td></tr>
<tr><th id="357">357</th><td>    <a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk5derefEv" title='bmalloc::Chunk::deref' data-ref="_ZN7bmalloc5Chunk5derefEv" data-ref-filename="_ZN7bmalloc5Chunk5derefEv">deref</a>();</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>    <b>if</b> (!<a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>-&gt;<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk8refCountEv" title='bmalloc::Chunk::refCount' data-ref="_ZN7bmalloc5Chunk8refCountEv" data-ref-filename="_ZN7bmalloc5Chunk8refCountEv">refCount</a>()) {</td></tr>
<tr><th id="360">360</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freePages" title='bmalloc::Heap::m_freePages' data-ref="bmalloc::Heap::m_freePages" data-ref-filename="bmalloc..Heap..m_freePages">m_freePages</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" title='bmalloc::List::remove' data-ref="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE" data-ref-filename="_ZN7bmalloc4List6removeEPNS_8ListNodeIT_EE">remove</a>(<a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>);</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>        <b>if</b> (!<a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List7isEmptyEv" title='bmalloc::List::isEmpty' data-ref="_ZN7bmalloc4List7isEmptyEv" data-ref-filename="_ZN7bmalloc4List7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="363">363</th><td>            <a class="member fn" href="#_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" title='bmalloc::Heap::deallocateSmallChunk' data-ref="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm" data-ref-filename="_ZN7bmalloc4Heap20deallocateSmallChunkERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkEm">deallocateSmallChunk</a>(<span class='refarg'><a class="local col1 ref" href="#81lock" title='lock' data-ref="81lock" data-ref-filename="81lock">lock</a></span>, <a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List3popEv" title='bmalloc::List::pop' data-ref="_ZN7bmalloc4List3popEv" data-ref-filename="_ZN7bmalloc4List3popEv">pop</a>(), <a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>);</td></tr>
<tr><th id="364">364</th><td></td></tr>
<tr><th id="365">365</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_chunkCache" title='bmalloc::Heap::m_chunkCache' data-ref="bmalloc::Heap::m_chunkCache" data-ref-filename="bmalloc..Heap..m_chunkCache">m_chunkCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col6 ref" href="#86chunk" title='chunk' data-ref="86chunk" data-ref-filename="86chunk">chunk</a>);</td></tr>
<tr><th id="366">366</th><td>    }</td></tr>
<tr><th id="367">367</th><td>    </td></tr>
<tr><th id="368">368</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger8scheduleEm" title='bmalloc::Scavenger::schedule' data-ref="_ZN7bmalloc9Scavenger8scheduleEm" data-ref-filename="_ZN7bmalloc9Scavenger8scheduleEm">schedule</a>(<a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="local col5 ref" href="#85pageClass" title='pageClass' data-ref="85pageClass" data-ref-filename="85pageClass">pageClass</a>));</td></tr>
<tr><th id="369">369</th><td>}</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_14569590" title='bmalloc::Heap::allocateSmallBumpRangesByMetadata' data-ref="_ZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_14569590" data-ref-filename="_ZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_14569590">allocateSmallBumpRangesByMetadata</dfn>(</td></tr>
<tr><th id="372">372</th><td>    <a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col7 decl" id="87lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="87lock" data-ref-filename="87lock">lock</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="88sizeClass" title='sizeClass' data-type='size_t' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</dfn>,</td></tr>
<tr><th id="373">373</th><td>    <a class="type" href="BumpAllocator.h.html#bmalloc::BumpAllocator" title='bmalloc::BumpAllocator' data-ref="bmalloc::BumpAllocator" data-ref-filename="bmalloc..BumpAllocator">BumpAllocator</a>&amp; <dfn class="local col9 decl" id="89allocator" title='allocator' data-type='bmalloc::BumpAllocator &amp;' data-ref="89allocator" data-ref-filename="89allocator">allocator</dfn>, <a class="typedef" href="BumpRange.h.html#bmalloc::BumpRangeCache" title='bmalloc::BumpRangeCache' data-type='FixedVector&lt;bmalloc::BumpRange, bumpRangeCacheCapacity&gt;' data-ref="bmalloc::BumpRangeCache" data-ref-filename="bmalloc..BumpRangeCache">BumpRangeCache</a>&amp; <dfn class="local col0 decl" id="90rangeCache" title='rangeCache' data-type='bmalloc::BumpRangeCache &amp;' data-ref="90rangeCache" data-ref-filename="90rangeCache">rangeCache</dfn>,</td></tr>
<tr><th id="374">374</th><td>    <a class="typedef" href="SmallPage.h.html#bmalloc::LineCache" title='bmalloc::LineCache' data-type='std::array&lt;List&lt;SmallPage&gt;, sizeClassCount&gt;' data-ref="bmalloc::LineCache" data-ref-filename="bmalloc..LineCache">LineCache</a>&amp; <dfn class="local col1 decl" id="91lineCache" title='lineCache' data-type='bmalloc::LineCache &amp;' data-ref="91lineCache" data-ref-filename="91lineCache">lineCache</dfn>, <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a> <dfn class="local col2 decl" id="92action" title='action' data-type='bmalloc::FailureAction' data-ref="92action" data-ref-filename="92action">action</dfn>)</td></tr>
<tr><th id="375">375</th><td>{</td></tr>
<tr><th id="376">376</th><td>    <a class="macro" href="BAssert.h.html#104" title="((void)action)" data-ref="_M/BUNUSED">BUNUSED</a>(<a class="local col2 ref" href="#92action" title='action' data-ref="92action" data-ref-filename="92action">action</a>);</td></tr>
<tr><th id="377">377</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="378">378</th><td></td></tr>
<tr><th id="379">379</th><td>    <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col3 decl" id="93page" title='page' data-type='bmalloc::SmallPage *' data-ref="93page" data-ref-filename="93page">page</dfn> = <a class="member fn" href="#_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" title='bmalloc::Heap::allocateSmallPage' data-ref="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE">allocateSmallPage</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>, <a class="local col8 ref" href="#88sizeClass" title='sizeClass' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</a>, <span class='refarg'><a class="local col1 ref" href="#91lineCache" title='lineCache' data-ref="91lineCache" data-ref-filename="91lineCache">lineCache</a></span>, <a class="local col2 ref" href="#92action" title='action' data-ref="92action" data-ref-filename="92action">action</a>);</td></tr>
<tr><th id="380">380</th><td>    <b>if</b> (!<a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>) {</td></tr>
<tr><th id="381">381</th><td>        <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col2 ref" href="#92action" title='action' data-ref="92action" data-ref-filename="92action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a>);</td></tr>
<tr><th id="382">382</th><td>        <b>return</b>;</td></tr>
<tr><th id="383">383</th><td>    }</td></tr>
<tr><th id="384">384</th><td>    <a class="type" href="SmallLine.h.html#bmalloc::SmallLine" title='bmalloc::SmallLine' data-ref="bmalloc::SmallLine" data-ref-filename="bmalloc..SmallLine">SmallLine</a>* <dfn class="local col4 decl" id="94lines" title='lines' data-type='bmalloc::SmallLine *' data-ref="94lines" data-ref-filename="94lines">lines</dfn> = <a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>();</td></tr>
<tr><th id="385">385</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(page-&gt;hasFreeLines(lock))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::hasFreeLines' data-ref="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE">hasFreeLines</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>));</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td>    <em>auto</em> <dfn class="local col5 decl" id="95findSmallBumpRange" title='findSmallBumpRange' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/bmalloc/bmalloc/Heap.cpp:387:31)' data-ref="95findSmallBumpRange" data-ref-filename="95findSmallBumpRange">findSmallBumpRange</dfn> = [&amp;](<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>&amp; <dfn class="local col6 decl" id="96lineNumber" title='lineNumber' data-type='size_t &amp;' data-ref="96lineNumber" data-ref-filename="96lineNumber">lineNumber</dfn>) {</td></tr>
<tr><th id="388">388</th><td>        <b>for</b> ( ; <a class="local col6 ref" href="#96lineNumber" title='lineNumber' data-ref="96lineNumber" data-ref-filename="96lineNumber">lineNumber</a> &lt; <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants14smallLineCountEv" title='bmalloc::HeapConstants::smallLineCount' data-ref="_ZNK7bmalloc13HeapConstants14smallLineCountEv" data-ref-filename="_ZNK7bmalloc13HeapConstants14smallLineCountEv">smallLineCount</a>(); ++<a class="local col6 ref" href="#96lineNumber" title='lineNumber' data-ref="96lineNumber" data-ref-filename="96lineNumber">lineNumber</a>) {</td></tr>
<tr><th id="389">389</th><td>            <b>if</b> (!<a class="local col4 ref" href="#94lines" title='lines' data-ref="94lines" data-ref-filename="94lines">lines</a>[<a class="local col6 ref" href="#96lineNumber" title='lineNumber' data-ref="96lineNumber" data-ref-filename="96lineNumber">lineNumber</a>].<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallLine::refCount' data-ref="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>)) {</td></tr>
<tr><th id="390">390</th><td>                <b>if</b> (<a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants11objectCountEmm" title='bmalloc::HeapConstants::objectCount' data-ref="_ZNK7bmalloc13HeapConstants11objectCountEmm" data-ref-filename="_ZNK7bmalloc13HeapConstants11objectCountEmm">objectCount</a>(<a class="local col8 ref" href="#88sizeClass" title='sizeClass' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</a>, <a class="local col6 ref" href="#96lineNumber" title='lineNumber' data-ref="96lineNumber" data-ref-filename="96lineNumber">lineNumber</a>))</td></tr>
<tr><th id="391">391</th><td>                    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="392">392</th><td>            }</td></tr>
<tr><th id="393">393</th><td>        }</td></tr>
<tr><th id="394">394</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="395">395</th><td>    };</td></tr>
<tr><th id="396">396</th><td></td></tr>
<tr><th id="397">397</th><td>    <em>auto</em> <dfn class="local col7 decl" id="97allocateSmallBumpRange" title='allocateSmallBumpRange' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/bmalloc/bmalloc/Heap.cpp:397:35)' data-ref="97allocateSmallBumpRange" data-ref-filename="97allocateSmallBumpRange">allocateSmallBumpRange</dfn> = [&amp;](<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>&amp; <dfn class="local col8 decl" id="98lineNumber" title='lineNumber' data-type='size_t &amp;' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</dfn>) -&gt; <a class="type" href="BumpRange.h.html#bmalloc::BumpRange" title='bmalloc::BumpRange' data-ref="bmalloc::BumpRange" data-ref-filename="bmalloc..BumpRange">BumpRange</a> {</td></tr>
<tr><th id="398">398</th><td>        <em>char</em>* <dfn class="local col9 decl" id="99begin" title='begin' data-type='char *' data-ref="99begin" data-ref-filename="99begin">begin</dfn> = <a class="local col4 ref" href="#94lines" title='lines' data-ref="94lines" data-ref-filename="94lines">lines</a>[<a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>].<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>() + <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants11startOffsetEmm" title='bmalloc::HeapConstants::startOffset' data-ref="_ZNK7bmalloc13HeapConstants11startOffsetEmm" data-ref-filename="_ZNK7bmalloc13HeapConstants11startOffsetEmm">startOffset</a>(<a class="local col8 ref" href="#88sizeClass" title='sizeClass' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</a>, <a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>);</td></tr>
<tr><th id="399">399</th><td>        <em>unsigned</em> <em>short</em> <dfn class="local col0 decl" id="100objectCount" title='objectCount' data-type='unsigned short' data-ref="100objectCount" data-ref-filename="100objectCount">objectCount</dfn> = <var>0</var>;</td></tr>
<tr><th id="400">400</th><td>        </td></tr>
<tr><th id="401">401</th><td>        <b>for</b> ( ; <a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a> &lt; <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants14smallLineCountEv" title='bmalloc::HeapConstants::smallLineCount' data-ref="_ZNK7bmalloc13HeapConstants14smallLineCountEv" data-ref-filename="_ZNK7bmalloc13HeapConstants14smallLineCountEv">smallLineCount</a>(); ++<a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>) {</td></tr>
<tr><th id="402">402</th><td>            <b>if</b> (<a class="local col4 ref" href="#94lines" title='lines' data-ref="94lines" data-ref-filename="94lines">lines</a>[<a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>].<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallLine::refCount' data-ref="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>))</td></tr>
<tr><th id="403">403</th><td>                <b>break</b>;</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td>            <em>auto</em> <dfn class="local col1 decl" id="101lineObjectCount" title='lineObjectCount' data-type='unsigned char' data-ref="101lineObjectCount" data-ref-filename="101lineObjectCount">lineObjectCount</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants11objectCountEmm" title='bmalloc::HeapConstants::objectCount' data-ref="_ZNK7bmalloc13HeapConstants11objectCountEmm" data-ref-filename="_ZNK7bmalloc13HeapConstants11objectCountEmm">objectCount</a>(<a class="local col8 ref" href="#88sizeClass" title='sizeClass' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</a>, <a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>);</td></tr>
<tr><th id="406">406</th><td>            <b>if</b> (!<a class="local col1 ref" href="#101lineObjectCount" title='lineObjectCount' data-ref="101lineObjectCount" data-ref-filename="101lineObjectCount">lineObjectCount</a>)</td></tr>
<tr><th id="407">407</th><td>                <b>continue</b>;</td></tr>
<tr><th id="408">408</th><td></td></tr>
<tr><th id="409">409</th><td>            <a class="local col0 ref" href="#100objectCount" title='objectCount' data-ref="100objectCount" data-ref-filename="100objectCount">objectCount</a> += <a class="local col1 ref" href="#101lineObjectCount" title='lineObjectCount' data-ref="101lineObjectCount" data-ref-filename="101lineObjectCount">lineObjectCount</a>;</td></tr>
<tr><th id="410">410</th><td>            <a class="local col4 ref" href="#94lines" title='lines' data-ref="94lines" data-ref-filename="94lines">lines</a>[<a class="local col8 ref" href="#98lineNumber" title='lineNumber' data-ref="98lineNumber" data-ref-filename="98lineNumber">lineNumber</a>].<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh" title='bmalloc::SmallLine::ref' data-ref="_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh" data-ref-filename="_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh">ref</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>, <a class="local col1 ref" href="#101lineObjectCount" title='lineObjectCount' data-ref="101lineObjectCount" data-ref-filename="101lineObjectCount">lineObjectCount</a>);</td></tr>
<tr><th id="411">411</th><td>            <a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::ref' data-ref="_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE">ref</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>);</td></tr>
<tr><th id="412">412</th><td>        }</td></tr>
<tr><th id="413">413</th><td>        <b>return</b> { <a class="local col9 ref" href="#99begin" title='begin' data-ref="99begin" data-ref-filename="99begin">begin</a>, <a class="local col0 ref" href="#100objectCount" title='objectCount' data-ref="100objectCount" data-ref-filename="100objectCount">objectCount</a> };</td></tr>
<tr><th id="414">414</th><td>    };</td></tr>
<tr><th id="415">415</th><td></td></tr>
<tr><th id="416">416</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="102lineNumber" title='lineNumber' data-type='size_t' data-ref="102lineNumber" data-ref-filename="102lineNumber">lineNumber</dfn> = <var>0</var>;</td></tr>
<tr><th id="417">417</th><td>    <b>for</b> (;;) {</td></tr>
<tr><th id="418">418</th><td>        <b>if</b> (!<a class="local col5 ref" href="#95findSmallBumpRange" title='findSmallBumpRange' data-ref="95findSmallBumpRange" data-ref-filename="95findSmallBumpRange">findSmallBumpRange</a><a class="tu ref fn" href="#_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS11934628" title='bmalloc::Heap::allocateSmallBumpRangesByMetadata(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::BumpAllocator &amp;, bmalloc::BumpRangeCache &amp;, bmalloc::LineCache &amp;, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS11934628" data-ref-filename="_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS11934628">(<a class="local col2 ref" href="#102lineNumber" title='lineNumber' data-ref="102lineNumber" data-ref-filename="102lineNumber">lineNumber</a>)</a>) {</td></tr>
<tr><th id="419">419</th><td>            <a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" title='bmalloc::SmallPage::setHasFreeLines' data-ref="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" data-ref-filename="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb">setHasFreeLines</a>(<span class='refarg'><a class="local col7 ref" href="#87lock" title='lock' data-ref="87lock" data-ref-filename="87lock">lock</a></span>, <b>false</b>);</td></tr>
<tr><th id="420">420</th><td>            <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull || allocator.canAllocate())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col2 ref" href="#92action" title='action' data-ref="92action" data-ref-filename="92action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a> || <a class="local col9 ref" href="#89allocator" title='allocator' data-ref="89allocator" data-ref-filename="89allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>());</td></tr>
<tr><th id="421">421</th><td>            <b>return</b>;</td></tr>
<tr><th id="422">422</th><td>        }</td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>        <i>// In a fragmented page, some free ranges might not fit in the cache.</i></td></tr>
<tr><th id="425">425</th><td>        <b>if</b> (<a class="local col0 ref" href="#90rangeCache" title='rangeCache' data-ref="90rangeCache" data-ref-filename="90rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZNK7bmalloc11FixedVector4sizeEv" title='bmalloc::FixedVector::size' data-ref="_ZNK7bmalloc11FixedVector4sizeEv" data-ref-filename="_ZNK7bmalloc11FixedVector4sizeEv">size</a>() == <a class="local col0 ref" href="#90rangeCache" title='rangeCache' data-ref="90rangeCache" data-ref-filename="90rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZNK7bmalloc11FixedVector8capacityEv" title='bmalloc::FixedVector::capacity' data-ref="_ZNK7bmalloc11FixedVector8capacityEv" data-ref-filename="_ZNK7bmalloc11FixedVector8capacityEv">capacity</a>()) {</td></tr>
<tr><th id="426">426</th><td>            <a class="local col1 ref" href="#91lineCache" title='lineCache' data-ref="91lineCache" data-ref-filename="91lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col8 ref" href="#88sizeClass" title='sizeClass' data-ref="88sizeClass" data-ref-filename="88sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col3 ref" href="#93page" title='page' data-ref="93page" data-ref-filename="93page">page</a>);</td></tr>
<tr><th id="427">427</th><td>            <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull || allocator.canAllocate())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col2 ref" href="#92action" title='action' data-ref="92action" data-ref-filename="92action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a> || <a class="local col9 ref" href="#89allocator" title='allocator' data-ref="89allocator" data-ref-filename="89allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>());</td></tr>
<tr><th id="428">428</th><td>            <b>return</b>;</td></tr>
<tr><th id="429">429</th><td>        }</td></tr>
<tr><th id="430">430</th><td></td></tr>
<tr><th id="431">431</th><td>        <a class="type" href="BumpRange.h.html#bmalloc::BumpRange" title='bmalloc::BumpRange' data-ref="bmalloc::BumpRange" data-ref-filename="bmalloc..BumpRange">BumpRange</a> <dfn class="local col3 decl" id="103bumpRange" title='bumpRange' data-type='bmalloc::BumpRange' data-ref="103bumpRange" data-ref-filename="103bumpRange">bumpRange</dfn> = <a class="local col7 ref" href="#97allocateSmallBumpRange" title='allocateSmallBumpRange' data-ref="97allocateSmallBumpRange" data-ref-filename="97allocateSmallBumpRange">allocateSmallBumpRange</a><a class="tu ref fn" href="#_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS19555985" title='bmalloc::Heap::allocateSmallBumpRangesByMetadata(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::BumpAllocator &amp;, bmalloc::BumpRangeCache &amp;, bmalloc::LineCache &amp;, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS19555985" data-ref-filename="_ZZN7bmalloc4Heap33allocateSmallBumpRangesByMetadataERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS19555985">(<a class="local col2 ref" href="#102lineNumber" title='lineNumber' data-ref="102lineNumber" data-ref-filename="102lineNumber">lineNumber</a>)</a>;</td></tr>
<tr><th id="432">432</th><td>        <b>if</b> (<a class="local col9 ref" href="#89allocator" title='allocator' data-ref="89allocator" data-ref-filename="89allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>())</td></tr>
<tr><th id="433">433</th><td>            <a class="local col0 ref" href="#90rangeCache" title='rangeCache' data-ref="90rangeCache" data-ref-filename="90rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZN7bmalloc11FixedVector4pushERKT_" title='bmalloc::FixedVector::push' data-ref="_ZN7bmalloc11FixedVector4pushERKT_" data-ref-filename="_ZN7bmalloc11FixedVector4pushERKT_">push</a>(<a class="local col3 ref" href="#103bumpRange" title='bumpRange' data-ref="103bumpRange" data-ref-filename="103bumpRange">bumpRange</a>);</td></tr>
<tr><th id="434">434</th><td>        <b>else</b></td></tr>
<tr><th id="435">435</th><td>            <a class="local col9 ref" href="#89allocator" title='allocator' data-ref="89allocator" data-ref-filename="89allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE" title='bmalloc::BumpAllocator::refill' data-ref="_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE" data-ref-filename="_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE">refill</a>(<a class="local col3 ref" href="#103bumpRange" title='bumpRange' data-ref="103bumpRange" data-ref-filename="103bumpRange">bumpRange</a>);</td></tr>
<tr><th id="436">436</th><td>    }</td></tr>
<tr><th id="437">437</th><td>}</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_5a6933537" title='bmalloc::Heap::allocateSmallBumpRangesByObject' data-ref="_ZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_5a6933537" data-ref-filename="_ZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_5a6933537">allocateSmallBumpRangesByObject</dfn>(</td></tr>
<tr><th id="440">440</th><td>    <a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col4 decl" id="104lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="104lock" data-ref-filename="104lock">lock</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="105sizeClass" title='sizeClass' data-type='size_t' data-ref="105sizeClass" data-ref-filename="105sizeClass">sizeClass</dfn>,</td></tr>
<tr><th id="441">441</th><td>    <a class="type" href="BumpAllocator.h.html#bmalloc::BumpAllocator" title='bmalloc::BumpAllocator' data-ref="bmalloc::BumpAllocator" data-ref-filename="bmalloc..BumpAllocator">BumpAllocator</a>&amp; <dfn class="local col6 decl" id="106allocator" title='allocator' data-type='bmalloc::BumpAllocator &amp;' data-ref="106allocator" data-ref-filename="106allocator">allocator</dfn>, <a class="typedef" href="BumpRange.h.html#bmalloc::BumpRangeCache" title='bmalloc::BumpRangeCache' data-type='FixedVector&lt;bmalloc::BumpRange, bumpRangeCacheCapacity&gt;' data-ref="bmalloc::BumpRangeCache" data-ref-filename="bmalloc..BumpRangeCache">BumpRangeCache</a>&amp; <dfn class="local col7 decl" id="107rangeCache" title='rangeCache' data-type='bmalloc::BumpRangeCache &amp;' data-ref="107rangeCache" data-ref-filename="107rangeCache">rangeCache</dfn>,</td></tr>
<tr><th id="442">442</th><td>    <a class="typedef" href="SmallPage.h.html#bmalloc::LineCache" title='bmalloc::LineCache' data-type='std::array&lt;List&lt;SmallPage&gt;, sizeClassCount&gt;' data-ref="bmalloc::LineCache" data-ref-filename="bmalloc..LineCache">LineCache</a>&amp; <dfn class="local col8 decl" id="108lineCache" title='lineCache' data-type='bmalloc::LineCache &amp;' data-ref="108lineCache" data-ref-filename="108lineCache">lineCache</dfn>, <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a> <dfn class="local col9 decl" id="109action" title='action' data-type='bmalloc::FailureAction' data-ref="109action" data-ref-filename="109action">action</dfn>)</td></tr>
<tr><th id="443">443</th><td>{</td></tr>
<tr><th id="444">444</th><td>    <a class="macro" href="BAssert.h.html#104" title="((void)action)" data-ref="_M/BUNUSED">BUNUSED</a>(<a class="local col9 ref" href="#109action" title='action' data-ref="109action" data-ref-filename="109action">action</a>);</td></tr>
<tr><th id="445">445</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="446">446</th><td></td></tr>
<tr><th id="447">447</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="110size" title='size' data-type='size_t' data-ref="110size" data-ref-filename="110size">size</dfn> = <a class="local col6 ref" href="#106allocator" title='allocator' data-ref="106allocator" data-ref-filename="106allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator4sizeEv" title='bmalloc::BumpAllocator::size' data-ref="_ZN7bmalloc13BumpAllocator4sizeEv" data-ref-filename="_ZN7bmalloc13BumpAllocator4sizeEv">size</a>();</td></tr>
<tr><th id="448">448</th><td>    <a class="type" href="SmallPage.h.html#bmalloc::SmallPage" title='bmalloc::SmallPage' data-ref="bmalloc::SmallPage" data-ref-filename="bmalloc..SmallPage">SmallPage</a>* <dfn class="local col1 decl" id="111page" title='page' data-type='bmalloc::SmallPage *' data-ref="111page" data-ref-filename="111page">page</dfn> = <a class="member fn" href="#_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" title='bmalloc::Heap::allocateSmallPage' data-ref="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap17allocateSmallPageERNSt3__111unique_lockINS_5MutexEEEmRNS1_5arrayINS_4ListINS_9SmallPageEEELm112EEENS_13FailureActionE">allocateSmallPage</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>, <a class="local col5 ref" href="#105sizeClass" title='sizeClass' data-ref="105sizeClass" data-ref-filename="105sizeClass">sizeClass</a>, <span class='refarg'><a class="local col8 ref" href="#108lineCache" title='lineCache' data-ref="108lineCache" data-ref-filename="108lineCache">lineCache</a></span>, <a class="local col9 ref" href="#109action" title='action' data-ref="109action" data-ref-filename="109action">action</a>);</td></tr>
<tr><th id="449">449</th><td>    <b>if</b> (!<a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>) {</td></tr>
<tr><th id="450">450</th><td>        <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col9 ref" href="#109action" title='action' data-ref="109action" data-ref-filename="109action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a>);</td></tr>
<tr><th id="451">451</th><td>        <b>return</b>;</td></tr>
<tr><th id="452">452</th><td>    }</td></tr>
<tr><th id="453">453</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(page-&gt;hasFreeLines(lock))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::hasFreeLines' data-ref="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZNK7bmalloc9SmallPage12hasFreeLinesERNSt3__111unique_lockINS_5MutexEEE">hasFreeLines</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>));</td></tr>
<tr><th id="454">454</th><td></td></tr>
<tr><th id="455">455</th><td>    <em>auto</em> <dfn class="local col2 decl" id="112findSmallBumpRange" title='findSmallBumpRange' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/bmalloc/bmalloc/Heap.cpp:455:31)' data-ref="112findSmallBumpRange" data-ref-filename="112findSmallBumpRange">findSmallBumpRange</dfn> = [&amp;](<a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a>&amp; <dfn class="local col3 decl" id="113it" title='it' data-type='bmalloc::Object &amp;' data-ref="113it" data-ref-filename="113it">it</dfn>, <a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a>&amp; <dfn class="local col4 decl" id="114end" title='end' data-type='bmalloc::Object &amp;' data-ref="114end" data-ref-filename="114end">end</dfn>) {</td></tr>
<tr><th id="456">456</th><td>        <b>for</b> ( ; <a class="local col3 ref" href="#113it" title='it' data-ref="113it" data-ref-filename="113it">it</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectplEm" title='bmalloc::Object::operator+' data-ref="_ZN7bmalloc6ObjectplEm" data-ref-filename="_ZN7bmalloc6ObjectplEm">+</a> <a class="local col0 ref" href="#110size" title='size' data-ref="110size" data-ref-filename="110size">size</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectleERKS0_" title='bmalloc::Object::operator&lt;=' data-ref="_ZN7bmalloc6ObjectleERKS0_" data-ref-filename="_ZN7bmalloc6ObjectleERKS0_">&lt;=</a> <a class="local col4 ref" href="#114end" title='end' data-ref="114end" data-ref-filename="114end">end</a>; <a class="local col3 ref" href="#113it" title='it' data-ref="113it" data-ref-filename="113it">it</a> <a class="ref fn" href="Object.h.html#37" title='bmalloc::Object::operator=' data-ref="_ZN7bmalloc6ObjectaSEOS0_" data-ref-filename="_ZN7bmalloc6ObjectaSEOS0_">=</a> <a class="local col3 ref" href="#113it" title='it' data-ref="113it" data-ref-filename="113it">it</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectplEm" title='bmalloc::Object::operator+' data-ref="_ZN7bmalloc6ObjectplEm" data-ref-filename="_ZN7bmalloc6ObjectplEm">+</a> <a class="local col0 ref" href="#110size" title='size' data-ref="110size" data-ref-filename="110size">size</a>) {</td></tr>
<tr><th id="457">457</th><td>            <b>if</b> (!<a class="local col3 ref" href="#113it" title='it' data-ref="113it" data-ref-filename="113it">it</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4lineEv" title='bmalloc::Object::line' data-ref="_ZN7bmalloc6Object4lineEv" data-ref-filename="_ZN7bmalloc6Object4lineEv">line</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallLine::refCount' data-ref="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>))</td></tr>
<tr><th id="458">458</th><td>                <b>return</b> <b>true</b>;</td></tr>
<tr><th id="459">459</th><td>        }</td></tr>
<tr><th id="460">460</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="461">461</th><td>    };</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td>    <em>auto</em> <dfn class="local col5 decl" id="115allocateSmallBumpRange" title='allocateSmallBumpRange' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/bmalloc/bmalloc/Heap.cpp:463:35)' data-ref="115allocateSmallBumpRange" data-ref-filename="115allocateSmallBumpRange">allocateSmallBumpRange</dfn> = [&amp;](<a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a>&amp; <dfn class="local col6 decl" id="116it" title='it' data-type='bmalloc::Object &amp;' data-ref="116it" data-ref-filename="116it">it</dfn>, <a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a>&amp; <dfn class="local col7 decl" id="117end" title='end' data-type='bmalloc::Object &amp;' data-ref="117end" data-ref-filename="117end">end</dfn>) -&gt; <a class="type" href="BumpRange.h.html#bmalloc::BumpRange" title='bmalloc::BumpRange' data-ref="bmalloc::BumpRange" data-ref-filename="bmalloc..BumpRange">BumpRange</a> {</td></tr>
<tr><th id="464">464</th><td>        <em>char</em>* <dfn class="local col8 decl" id="118begin" title='begin' data-type='char *' data-ref="118begin" data-ref-filename="118begin">begin</dfn> = <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object7addressEv" title='bmalloc::Object::address' data-ref="_ZN7bmalloc6Object7addressEv" data-ref-filename="_ZN7bmalloc6Object7addressEv">address</a>();</td></tr>
<tr><th id="465">465</th><td>        <em>unsigned</em> <em>short</em> <dfn class="local col9 decl" id="119objectCount" title='objectCount' data-type='unsigned short' data-ref="119objectCount" data-ref-filename="119objectCount">objectCount</dfn> = <var>0</var>;</td></tr>
<tr><th id="466">466</th><td>        <b>for</b> ( ; <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectplEm" title='bmalloc::Object::operator+' data-ref="_ZN7bmalloc6ObjectplEm" data-ref-filename="_ZN7bmalloc6ObjectplEm">+</a> <a class="local col0 ref" href="#110size" title='size' data-ref="110size" data-ref-filename="110size">size</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectleERKS0_" title='bmalloc::Object::operator&lt;=' data-ref="_ZN7bmalloc6ObjectleERKS0_" data-ref-filename="_ZN7bmalloc6ObjectleERKS0_">&lt;=</a> <a class="local col7 ref" href="#117end" title='end' data-ref="117end" data-ref-filename="117end">end</a>; <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a> <a class="ref fn" href="Object.h.html#37" title='bmalloc::Object::operator=' data-ref="_ZN7bmalloc6ObjectaSEOS0_" data-ref-filename="_ZN7bmalloc6ObjectaSEOS0_">=</a> <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectplEm" title='bmalloc::Object::operator+' data-ref="_ZN7bmalloc6ObjectplEm" data-ref-filename="_ZN7bmalloc6ObjectplEm">+</a> <a class="local col0 ref" href="#110size" title='size' data-ref="110size" data-ref-filename="110size">size</a>) {</td></tr>
<tr><th id="467">467</th><td>            <b>if</b> (<a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4lineEv" title='bmalloc::Object::line' data-ref="_ZN7bmalloc6Object4lineEv" data-ref-filename="_ZN7bmalloc6Object4lineEv">line</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallLine::refCount' data-ref="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallLine8refCountERNSt3__111unique_lockINS_5MutexEEE">refCount</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>))</td></tr>
<tr><th id="468">468</th><td>                <b>break</b>;</td></tr>
<tr><th id="469">469</th><td></td></tr>
<tr><th id="470">470</th><td>            ++<a class="local col9 ref" href="#119objectCount" title='objectCount' data-ref="119objectCount" data-ref-filename="119objectCount">objectCount</a>;</td></tr>
<tr><th id="471">471</th><td>            <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4lineEv" title='bmalloc::Object::line' data-ref="_ZN7bmalloc6Object4lineEv" data-ref-filename="_ZN7bmalloc6Object4lineEv">line</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh" title='bmalloc::SmallLine::ref' data-ref="_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh" data-ref-filename="_ZN7bmalloc9SmallLine3refERNSt3__111unique_lockINS_5MutexEEEh">ref</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>);</td></tr>
<tr><th id="472">472</th><td>            <a class="local col6 ref" href="#116it" title='it' data-ref="116it" data-ref-filename="116it">it</a>.<a class="ref fn" href="Object.h.html#_ZN7bmalloc6Object4pageEv" title='bmalloc::Object::page' data-ref="_ZN7bmalloc6Object4pageEv" data-ref-filename="_ZN7bmalloc6Object4pageEv">page</a>()-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE" title='bmalloc::SmallPage::ref' data-ref="_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE" data-ref-filename="_ZN7bmalloc9SmallPage3refERNSt3__111unique_lockINS_5MutexEEE">ref</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>);</td></tr>
<tr><th id="473">473</th><td>        }</td></tr>
<tr><th id="474">474</th><td>        <b>return</b> { <a class="local col8 ref" href="#118begin" title='begin' data-ref="118begin" data-ref-filename="118begin">begin</a>, <a class="local col9 ref" href="#119objectCount" title='objectCount' data-ref="119objectCount" data-ref-filename="119objectCount">objectCount</a> };</td></tr>
<tr><th id="475">475</th><td>    };</td></tr>
<tr><th id="476">476</th><td></td></tr>
<tr><th id="477">477</th><td>    <a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a> <dfn class="local col0 decl" id="120it" title='it' data-type='bmalloc::Object' data-ref="120it" data-ref-filename="120it">it</dfn><a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectC1EPv" title='bmalloc::Object::Object' data-ref="_ZN7bmalloc6ObjectC1EPv" data-ref-filename="_ZN7bmalloc6ObjectC1EPv">(</a><a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage5beginEv" title='bmalloc::SmallPage::begin' data-ref="_ZN7bmalloc9SmallPage5beginEv" data-ref-filename="_ZN7bmalloc9SmallPage5beginEv">begin</a>()-&gt;<a class="ref fn" href="SmallLine.h.html#_ZN7bmalloc9SmallLine5beginEv" title='bmalloc::SmallLine::begin' data-ref="_ZN7bmalloc9SmallLine5beginEv" data-ref-filename="_ZN7bmalloc9SmallLine5beginEv">begin</a>());</td></tr>
<tr><th id="478">478</th><td>    <a class="type" href="Object.h.html#bmalloc::Object" title='bmalloc::Object' data-ref="bmalloc::Object" data-ref-filename="bmalloc..Object">Object</a> <dfn class="local col1 decl" id="121end" title='end' data-type='bmalloc::Object' data-ref="121end" data-ref-filename="121end">end</dfn>(<a class="local col0 ref" href="#120it" title='it' data-ref="120it" data-ref-filename="120it">it</a> <a class="ref fn" href="Object.h.html#_ZN7bmalloc6ObjectplEm" title='bmalloc::Object::operator+' data-ref="_ZN7bmalloc6ObjectplEm" data-ref-filename="_ZN7bmalloc6ObjectplEm">+</a> <a class="ref fn" href="Sizes.h.html#_ZN7bmalloc5Sizes8pageSizeEm" title='bmalloc::Sizes::pageSize' data-ref="_ZN7bmalloc5Sizes8pageSizeEm" data-ref-filename="_ZN7bmalloc5Sizes8pageSizeEm">pageSize</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_constants" title='bmalloc::Heap::m_constants' data-ref="bmalloc::Heap::m_constants" data-ref-filename="bmalloc..Heap..m_constants">m_constants</a>.<a class="ref fn" href="HeapConstants.h.html#_ZNK7bmalloc13HeapConstants9pageClassEm" title='bmalloc::HeapConstants::pageClass' data-ref="_ZNK7bmalloc13HeapConstants9pageClassEm" data-ref-filename="_ZNK7bmalloc13HeapConstants9pageClassEm">pageClass</a>(<a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage9sizeClassEv" title='bmalloc::SmallPage::sizeClass' data-ref="_ZN7bmalloc9SmallPage9sizeClassEv" data-ref-filename="_ZN7bmalloc9SmallPage9sizeClassEv">sizeClass</a>())));</td></tr>
<tr><th id="479">479</th><td>    <b>for</b> (;;) {</td></tr>
<tr><th id="480">480</th><td>        <b>if</b> (!<a class="local col2 ref" href="#112findSmallBumpRange" title='findSmallBumpRange' data-ref="112findSmallBumpRange" data-ref-filename="112findSmallBumpRange">findSmallBumpRange</a><a class="tu ref fn" href="#_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_514013655" title='bmalloc::Heap::allocateSmallBumpRangesByObject(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::BumpAllocator &amp;, bmalloc::BumpRangeCache &amp;, bmalloc::LineCache &amp;, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_514013655" data-ref-filename="_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_514013655">(<a class="local col0 ref" href="#120it" title='it' data-ref="120it" data-ref-filename="120it">it</a>, <a class="local col1 ref" href="#121end" title='end' data-ref="121end" data-ref-filename="121end">end</a>)</a>) {</td></tr>
<tr><th id="481">481</th><td>            <a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>-&gt;<a class="ref fn" href="SmallPage.h.html#_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" title='bmalloc::SmallPage::setHasFreeLines' data-ref="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb" data-ref-filename="_ZN7bmalloc9SmallPage15setHasFreeLinesERNSt3__111unique_lockINS_5MutexEEEb">setHasFreeLines</a>(<span class='refarg'><a class="local col4 ref" href="#104lock" title='lock' data-ref="104lock" data-ref-filename="104lock">lock</a></span>, <b>false</b>);</td></tr>
<tr><th id="482">482</th><td>            <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull || allocator.canAllocate())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col9 ref" href="#109action" title='action' data-ref="109action" data-ref-filename="109action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a> || <a class="local col6 ref" href="#106allocator" title='allocator' data-ref="106allocator" data-ref-filename="106allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>());</td></tr>
<tr><th id="483">483</th><td>            <b>return</b>;</td></tr>
<tr><th id="484">484</th><td>        }</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td>        <i>// In a fragmented page, some free ranges might not fit in the cache.</i></td></tr>
<tr><th id="487">487</th><td>        <b>if</b> (<a class="local col7 ref" href="#107rangeCache" title='rangeCache' data-ref="107rangeCache" data-ref-filename="107rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZNK7bmalloc11FixedVector4sizeEv" title='bmalloc::FixedVector::size' data-ref="_ZNK7bmalloc11FixedVector4sizeEv" data-ref-filename="_ZNK7bmalloc11FixedVector4sizeEv">size</a>() == <a class="local col7 ref" href="#107rangeCache" title='rangeCache' data-ref="107rangeCache" data-ref-filename="107rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZNK7bmalloc11FixedVector8capacityEv" title='bmalloc::FixedVector::capacity' data-ref="_ZNK7bmalloc11FixedVector8capacityEv" data-ref-filename="_ZNK7bmalloc11FixedVector8capacityEv">capacity</a>()) {</td></tr>
<tr><th id="488">488</th><td>            <a class="local col8 ref" href="#108lineCache" title='lineCache' data-ref="108lineCache" data-ref-filename="108lineCache">lineCache</a><span class='ref fn' title='std::__1::array::operator[]' data-ref="_ZNSt3__15arrayixEm" data-ref-filename="_ZNSt3__15arrayixEm">[<a class="local col5 ref" href="#105sizeClass" title='sizeClass' data-ref="105sizeClass" data-ref-filename="105sizeClass">sizeClass</a>]</span>.<a class="ref fn" href="List.h.html#_ZN7bmalloc4List4pushEPT_" title='bmalloc::List::push' data-ref="_ZN7bmalloc4List4pushEPT_" data-ref-filename="_ZN7bmalloc4List4pushEPT_">push</a>(<a class="local col1 ref" href="#111page" title='page' data-ref="111page" data-ref-filename="111page">page</a>);</td></tr>
<tr><th id="489">489</th><td>            <a class="macro" href="BAssert.h.html#121" title="do { if (!(action == FailureAction::ReturnNull || allocator.canAllocate())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col9 ref" href="#109action" title='action' data-ref="109action" data-ref-filename="109action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::ReturnNull" title='bmalloc::FailureAction::ReturnNull' data-ref="bmalloc::FailureAction::ReturnNull" data-ref-filename="bmalloc..FailureAction..ReturnNull">ReturnNull</a> || <a class="local col6 ref" href="#106allocator" title='allocator' data-ref="106allocator" data-ref-filename="106allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>());</td></tr>
<tr><th id="490">490</th><td>            <b>return</b>;</td></tr>
<tr><th id="491">491</th><td>        }</td></tr>
<tr><th id="492">492</th><td></td></tr>
<tr><th id="493">493</th><td>        <a class="type" href="BumpRange.h.html#bmalloc::BumpRange" title='bmalloc::BumpRange' data-ref="bmalloc::BumpRange" data-ref-filename="bmalloc..BumpRange">BumpRange</a> <dfn class="local col2 decl" id="122bumpRange" title='bumpRange' data-type='bmalloc::BumpRange' data-ref="122bumpRange" data-ref-filename="122bumpRange">bumpRange</dfn> = <a class="local col5 ref" href="#115allocateSmallBumpRange" title='allocateSmallBumpRange' data-ref="115allocateSmallBumpRange" data-ref-filename="115allocateSmallBumpRange">allocateSmallBumpRange</a><a class="tu ref fn" href="#_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_51653660" title='bmalloc::Heap::allocateSmallBumpRangesByObject(bmalloc::UniqueLockHolder &amp;, size_t, bmalloc::BumpAllocator &amp;, bmalloc::BumpRangeCache &amp;, bmalloc::LineCache &amp;, bmalloc::FailureAction)::(anonymous class)::operator()' data-use='c' data-ref="_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_51653660" data-ref-filename="_ZZN7bmalloc4Heap31allocateSmallBumpRangesByObjectERNSt3__111unique_lockINS_5MutexEEEmRNS_13BumpAllocatorERNS_11FixedVectorINS_9BumpRangeELm3EEERNS1_51653660">(<a class="local col0 ref" href="#120it" title='it' data-ref="120it" data-ref-filename="120it">it</a>, <a class="local col1 ref" href="#121end" title='end' data-ref="121end" data-ref-filename="121end">end</a>)</a>;</td></tr>
<tr><th id="494">494</th><td>        <b>if</b> (<a class="local col6 ref" href="#106allocator" title='allocator' data-ref="106allocator" data-ref-filename="106allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator11canAllocateEv" title='bmalloc::BumpAllocator::canAllocate' data-ref="_ZN7bmalloc13BumpAllocator11canAllocateEv" data-ref-filename="_ZN7bmalloc13BumpAllocator11canAllocateEv">canAllocate</a>())</td></tr>
<tr><th id="495">495</th><td>            <a class="local col7 ref" href="#107rangeCache" title='rangeCache' data-ref="107rangeCache" data-ref-filename="107rangeCache">rangeCache</a>.<a class="ref fn" href="FixedVector.h.html#_ZN7bmalloc11FixedVector4pushERKT_" title='bmalloc::FixedVector::push' data-ref="_ZN7bmalloc11FixedVector4pushERKT_" data-ref-filename="_ZN7bmalloc11FixedVector4pushERKT_">push</a>(<a class="local col2 ref" href="#122bumpRange" title='bumpRange' data-ref="122bumpRange" data-ref-filename="122bumpRange">bumpRange</a>);</td></tr>
<tr><th id="496">496</th><td>        <b>else</b></td></tr>
<tr><th id="497">497</th><td>            <a class="local col6 ref" href="#106allocator" title='allocator' data-ref="106allocator" data-ref-filename="106allocator">allocator</a>.<a class="ref fn" href="BumpAllocator.h.html#_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE" title='bmalloc::BumpAllocator::refill' data-ref="_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE" data-ref-filename="_ZN7bmalloc13BumpAllocator6refillERKNS_9BumpRangeE">refill</a>(<a class="local col2 ref" href="#122bumpRange" title='bumpRange' data-ref="122bumpRange" data-ref-filename="122bumpRange">bumpRange</a>);</td></tr>
<tr><th id="498">498</th><td>    }</td></tr>
<tr><th id="499">499</th><td>}</td></tr>
<tr><th id="500">500</th><td></td></tr>
<tr><th id="501">501</th><td><a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" title='bmalloc::Heap::splitAndAllocate' data-ref="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" data-ref-filename="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm">splitAndAllocate</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col3 decl" id="123lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="123lock" data-ref-filename="123lock">lock</dfn>, <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&amp; <dfn class="local col4 decl" id="124range" title='range' data-type='bmalloc::LargeRange &amp;' data-ref="124range" data-ref-filename="124range">range</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="125alignment" title='alignment' data-type='size_t' data-ref="125alignment" data-ref-filename="125alignment">alignment</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="126size" title='size' data-type='size_t' data-ref="126size" data-ref-filename="126size">size</dfn>)</td></tr>
<tr><th id="502">502</th><td>{</td></tr>
<tr><th id="503">503</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="504">504</th><td></td></tr>
<tr><th id="505">505</th><td>    <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <a class="ref fn fake" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1Ev" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1Ev" data-ref-filename="_ZN7bmalloc10LargeRangeC1Ev"></a><dfn class="local col7 decl" id="127prev" title='prev' data-type='bmalloc::LargeRange' data-ref="127prev" data-ref-filename="127prev">prev</dfn>;</td></tr>
<tr><th id="506">506</th><td>    <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <a class="ref fn fake" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1Ev" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1Ev" data-ref-filename="_ZN7bmalloc10LargeRangeC1Ev"></a><dfn class="local col8 decl" id="128next" title='next' data-type='bmalloc::LargeRange' data-ref="128next" data-ref-filename="128next">next</dfn>;</td></tr>
<tr><th id="507">507</th><td></td></tr>
<tr><th id="508">508</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="129alignmentMask" title='alignmentMask' data-type='size_t' data-ref="129alignmentMask" data-ref-filename="129alignmentMask">alignmentMask</dfn> = <a class="local col5 ref" href="#125alignment" title='alignment' data-ref="125alignment" data-ref-filename="125alignment">alignment</a> - <var>1</var>;</td></tr>
<tr><th id="509">509</th><td>    <b>if</b> (<a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc4testET_m" title='bmalloc::test' data-ref="_ZN7bmalloc4testET_m" data-ref-filename="_ZN7bmalloc4testET_m">test</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>(), <a class="local col9 ref" href="#129alignmentMask" title='alignmentMask' data-ref="129alignmentMask" data-ref-filename="129alignmentMask">alignmentMask</a>)) {</td></tr>
<tr><th id="510">510</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="130prefixSize" title='prefixSize' data-type='size_t' data-ref="130prefixSize" data-ref-filename="130prefixSize">prefixSize</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc19roundUpToMultipleOfEmPT_" title='bmalloc::roundUpToMultipleOf' data-ref="_ZN7bmalloc19roundUpToMultipleOfEmPT_" data-ref-filename="_ZN7bmalloc19roundUpToMultipleOfEmPT_">roundUpToMultipleOf</a>(<a class="local col5 ref" href="#125alignment" title='alignment' data-ref="125alignment" data-ref-filename="125alignment">alignment</a>, <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>()) - <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>();</td></tr>
<tr><th id="511">511</th><td>        <span class="namespace">std::</span><span class='type' title='std::__1::pair' data-ref="std::__1::pair" data-ref-filename="std..__1..pair">pair</span>&lt;<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>, <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&gt; <dfn class="local col1 decl" id="131pair" title='pair' data-type='std::pair&lt;LargeRange, LargeRange&gt;' data-ref="131pair" data-ref-filename="131pair">pair</dfn> = <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange5splitEm" title='bmalloc::LargeRange::split' data-ref="_ZNK7bmalloc10LargeRange5splitEm" data-ref-filename="_ZNK7bmalloc10LargeRange5splitEm">split</a>(<a class="local col0 ref" href="#130prefixSize" title='prefixSize' data-ref="130prefixSize" data-ref-filename="130prefixSize">prefixSize</a>);</td></tr>
<tr><th id="512">512</th><td>        <a class="local col7 ref" href="#127prev" title='prev' data-ref="127prev" data-ref-filename="127prev">prev</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSERKS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSERKS0_">=</a> <a class="local col1 ref" href="#131pair" title='pair' data-ref="131pair" data-ref-filename="131pair">pair</a>.<span class='ref field' title='std::__1::pair&lt;bmalloc::LargeRange, bmalloc::LargeRange&gt;::first' data-ref="std::__1::pair::first" data-ref-filename="std..__1..pair..first">first</span>;</td></tr>
<tr><th id="513">513</th><td>        <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSERKS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSERKS0_">=</a> <a class="local col1 ref" href="#131pair" title='pair' data-ref="131pair" data-ref-filename="131pair">pair</a>.<span class='ref field' title='std::__1::pair&lt;bmalloc::LargeRange, bmalloc::LargeRange&gt;::second' data-ref="std::__1::pair::second" data-ref-filename="std..__1..pair..second">second</span>;</td></tr>
<tr><th id="514">514</th><td>    }</td></tr>
<tr><th id="515">515</th><td></td></tr>
<tr><th id="516">516</th><td>    <b>if</b> (<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>() - <a class="local col6 ref" href="#126size" title='size' data-ref="126size" data-ref-filename="126size">size</a> &gt; <a class="local col6 ref" href="#126size" title='size' data-ref="126size" data-ref-filename="126size">size</a> / <a class="ref" href="Sizes.h.html#bmalloc::Sizes::pageSizeWasteFactor" title='bmalloc::Sizes::pageSizeWasteFactor' data-ref="bmalloc::Sizes::pageSizeWasteFactor" data-ref-filename="bmalloc..Sizes..pageSizeWasteFactor">pageSizeWasteFactor</a>) {</td></tr>
<tr><th id="517">517</th><td>        <span class="namespace">std::</span><span class='type' title='std::__1::pair' data-ref="std::__1::pair" data-ref-filename="std..__1..pair">pair</span>&lt;<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>, <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a>&gt; <dfn class="local col2 decl" id="132pair" title='pair' data-type='std::pair&lt;LargeRange, LargeRange&gt;' data-ref="132pair" data-ref-filename="132pair">pair</dfn> = <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange5splitEm" title='bmalloc::LargeRange::split' data-ref="_ZNK7bmalloc10LargeRange5splitEm" data-ref-filename="_ZNK7bmalloc10LargeRange5splitEm">split</a>(<a class="local col6 ref" href="#126size" title='size' data-ref="126size" data-ref-filename="126size">size</a>);</td></tr>
<tr><th id="518">518</th><td>        <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSERKS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSERKS0_">=</a> <a class="local col2 ref" href="#132pair" title='pair' data-ref="132pair" data-ref-filename="132pair">pair</a>.<span class='ref field' title='std::__1::pair&lt;bmalloc::LargeRange, bmalloc::LargeRange&gt;::first' data-ref="std::__1::pair::first" data-ref-filename="std..__1..pair..first">first</span>;</td></tr>
<tr><th id="519">519</th><td>        <a class="local col8 ref" href="#128next" title='next' data-ref="128next" data-ref-filename="128next">next</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSERKS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSERKS0_">=</a> <a class="local col2 ref" href="#132pair" title='pair' data-ref="132pair" data-ref-filename="132pair">pair</a>.<span class='ref field' title='std::__1::pair&lt;bmalloc::LargeRange, bmalloc::LargeRange&gt;::second' data-ref="std::__1::pair::second" data-ref-filename="std..__1..pair..second">second</span>;</td></tr>
<tr><th id="520">520</th><td>    }</td></tr>
<tr><th id="521">521</th><td>    </td></tr>
<tr><th id="522">522</th><td>    <b>if</b> (<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" title='bmalloc::LargeRange::startPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv">startPhysicalSize</a>() &lt; <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>()) {</td></tr>
<tr><th id="523">523</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm" title='bmalloc::Scavenger::scheduleIfUnderMemoryPressure' data-ref="_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm" data-ref-filename="_ZN7bmalloc9Scavenger29scheduleIfUnderMemoryPressureEm">scheduleIfUnderMemoryPressure</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>());</td></tr>
<tr><th id="524">524</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> += <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>() - <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="525">525</th><td>        <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm" title='bmalloc::vmAllocatePhysicalPagesSloppy' data-ref="_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm" data-ref-filename="_ZN7bmalloc29vmAllocatePhysicalPagesSloppyEPvm">vmAllocatePhysicalPagesSloppy</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>() + <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" title='bmalloc::LargeRange::startPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv">startPhysicalSize</a>(), <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>() - <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" title='bmalloc::LargeRange::startPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17startPhysicalSizeEv">startPhysicalSize</a>());</td></tr>
<tr><th id="526">526</th><td>        <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm" title='bmalloc::LargeRange::setStartPhysicalSize' data-ref="_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm" data-ref-filename="_ZN7bmalloc10LargeRange20setStartPhysicalSizeEm">setStartPhysicalSize</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>());</td></tr>
<tr><th id="527">527</th><td>        <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm" title='bmalloc::LargeRange::setTotalPhysicalSize' data-ref="_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm" data-ref-filename="_ZN7bmalloc10LargeRange20setTotalPhysicalSizeEm">setTotalPhysicalSize</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>());</td></tr>
<tr><th id="528">528</th><td><u>#<span data-ppcond="528">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u> </td></tr>
<tr><th id="529">529</th><td>        m_physicalPageMap.commit(range.begin(), range.size());</td></tr>
<tr><th id="530">530</th><td><u>#<span data-ppcond="528">endif</span></u></td></tr>
<tr><th id="531">531</th><td>    }</td></tr>
<tr><th id="532">532</th><td>    </td></tr>
<tr><th id="533">533</th><td>    <b>if</b> (<a class="ref fn fake" href="Range.h.html#_ZNK7bmalloc5RangecvbEv" title='bmalloc::Range::operator bool' data-ref="_ZNK7bmalloc5RangecvbEv" data-ref-filename="_ZNK7bmalloc5RangecvbEv"></a><a class="local col7 ref" href="#127prev" title='prev' data-ref="127prev" data-ref-filename="127prev">prev</a>) {</td></tr>
<tr><th id="534">534</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="local col7 ref" href="#127prev" title='prev' data-ref="127prev" data-ref-filename="127prev">prev</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="535">535</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="local col7 ref" href="#127prev" title='prev' data-ref="127prev" data-ref-filename="127prev">prev</a>);</td></tr>
<tr><th id="536">536</th><td>    }</td></tr>
<tr><th id="537">537</th><td></td></tr>
<tr><th id="538">538</th><td>    <b>if</b> (<a class="ref fn fake" href="Range.h.html#_ZNK7bmalloc5RangecvbEv" title='bmalloc::Range::operator bool' data-ref="_ZNK7bmalloc5RangecvbEv" data-ref-filename="_ZNK7bmalloc5RangecvbEv"></a><a class="local col8 ref" href="#128next" title='next' data-ref="128next" data-ref-filename="128next">next</a>) {</td></tr>
<tr><th id="539">539</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="local col8 ref" href="#128next" title='next' data-ref="128next" data-ref-filename="128next">next</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="540">540</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="local col8 ref" href="#128next" title='next' data-ref="128next" data-ref-filename="128next">next</a>);</td></tr>
<tr><th id="541">541</th><td>    }</td></tr>
<tr><th id="542">542</th><td></td></tr>
<tr><th id="543">543</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_objectTypes" title='bmalloc::Heap::m_objectTypes' data-ref="bmalloc::Heap::m_objectTypes" data-ref-filename="bmalloc..Heap..m_objectTypes">m_objectTypes</a>.<a class="ref fn" href="ObjectTypeTable.h.html#_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" title='bmalloc::ObjectTypeTable::set' data-ref="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE" data-ref-filename="_ZN7bmalloc15ObjectTypeTable3setERNSt3__111unique_lockINS_5MutexEEEPNS_5ChunkENS_10ObjectTypeE">set</a>(<span class='refarg'><a class="local col3 ref" href="#123lock" title='lock' data-ref="123lock" data-ref-filename="123lock">lock</a></span>, <a class="type" href="Chunk.h.html#bmalloc::Chunk" title='bmalloc::Chunk' data-ref="bmalloc::Chunk" data-ref-filename="bmalloc..Chunk">Chunk</a>::<a class="ref fn" href="Chunk.h.html#_ZN7bmalloc5Chunk3getEPv" title='bmalloc::Chunk::get' data-ref="_ZN7bmalloc5Chunk3getEPv" data-ref-filename="_ZN7bmalloc5Chunk3getEPv">get</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>()), <a class="type" href="ObjectType.h.html#bmalloc::ObjectType" title='bmalloc::ObjectType' data-ref="bmalloc::ObjectType" data-ref-filename="bmalloc..ObjectType">ObjectType</a>::<a class="enum" href="ObjectType.h.html#bmalloc::ObjectType::Large" title='bmalloc::ObjectType::Large' data-ref="bmalloc::ObjectType::Large" data-ref-filename="bmalloc..ObjectType..Large">Large</a>);</td></tr>
<tr><th id="544">544</th><td></td></tr>
<tr><th id="545">545</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeAllocated" title='bmalloc::Heap::m_largeAllocated' data-ref="bmalloc::Heap::m_largeAllocated" data-ref-filename="bmalloc..Heap..m_largeAllocated">m_largeAllocated</a>.<a class="ref fn" href="Map.h.html#_ZN7bmalloc3Map3setERKT_RKT0_" title='bmalloc::Map::set' data-ref="_ZN7bmalloc3Map3setERKT_RKT0_" data-ref-filename="_ZN7bmalloc3Map3setERKT_RKT0_">set</a>(<a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>(), <a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>());</td></tr>
<tr><th id="546">546</th><td>    <b>return</b> <a class="ref fn fake" href="LargeRange.h.html#34" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1ERKS0_" data-ref-filename="_ZN7bmalloc10LargeRangeC1ERKS0_"></a><a class="local col4 ref" href="#124range" title='range' data-ref="124range" data-ref-filename="124range">range</a>;</td></tr>
<tr><th id="547">547</th><td>}</td></tr>
<tr><th id="548">548</th><td></td></tr>
<tr><th id="549">549</th><td><em>void</em>* <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" title='bmalloc::Heap::allocateLarge' data-ref="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE">allocateLarge</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col3 decl" id="133lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="133lock" data-ref-filename="133lock">lock</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="134alignment" title='alignment' data-type='size_t' data-ref="134alignment" data-ref-filename="134alignment">alignment</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="135size" title='size' data-type='size_t' data-ref="135size" data-ref-filename="135size">size</dfn>, <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a> <dfn class="local col6 decl" id="136action" title='action' data-type='bmalloc::FailureAction' data-ref="136action" data-ref-filename="136action">action</dfn>)</td></tr>
<tr><th id="550">550</th><td>{</td></tr>
<tr><th id="551">551</th><td><u>#define <dfn class="macro" id="_M/ASSERT_OR_RETURN_ON_FAILURE" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</dfn>(cond) do { \</u></td></tr>
<tr><th id="552">552</th><td><u>        if (<a class="local col6 ref" href="#136action" title='action' data-ref="136action" data-ref-filename="136action">action</a> == <a class="type" href="FailureAction.h.html#bmalloc::FailureAction" title='bmalloc::FailureAction' data-ref="bmalloc::FailureAction" data-ref-filename="bmalloc..FailureAction">FailureAction</a>::<a class="enum" href="FailureAction.h.html#bmalloc::FailureAction::Crash" title='bmalloc::FailureAction::Crash' data-ref="bmalloc::FailureAction::Crash" data-ref-filename="bmalloc..FailureAction..Crash">Crash</a>) \</u></td></tr>
<tr><th id="553">553</th><td><u>            RELEASE_BASSERT(cond); \</u></td></tr>
<tr><th id="554">554</th><td><u>        else if (<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5RangentEv" title='bmalloc::Range::operator!' data-ref="_ZNK7bmalloc5RangentEv" data-ref-filename="_ZNK7bmalloc5RangentEv">!</a>(cond)) \</u></td></tr>
<tr><th id="555">555</th><td><u>            return nullptr; \</u></td></tr>
<tr><th id="556">556</th><td><u>    } while (false)</u></td></tr>
<tr><th id="557">557</th><td></td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>    <a class="macro" href="BAssert.h.html#83" title="do { if (!(isActiveHeapKind(m_kind))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/RELEASE_BASSERT">RELEASE_BASSERT</a>(<a class="ref fn" href="HeapKind.h.html#_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" title='bmalloc::isActiveHeapKind' data-ref="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE" data-ref-filename="_ZN7bmalloc16isActiveHeapKindENS_8HeapKindE">isActiveHeapKind</a>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_kind" title='bmalloc::Heap::m_kind' data-ref="bmalloc::Heap::m_kind" data-ref-filename="bmalloc..Heap..m_kind">m_kind</a>));</td></tr>
<tr><th id="560">560</th><td></td></tr>
<tr><th id="561">561</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(isPowerOfTwo(alignment))) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc12isPowerOfTwoET_" title='bmalloc::isPowerOfTwo' data-ref="_ZN7bmalloc12isPowerOfTwoET_" data-ref-filename="_ZN7bmalloc12isPowerOfTwoET_">isPowerOfTwo</a>(<a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>));</td></tr>
<tr><th id="562">562</th><td>    </td></tr>
<tr><th id="563">563</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger15didStartGrowingEv" title='bmalloc::Scavenger::didStartGrowing' data-ref="_ZN7bmalloc9Scavenger15didStartGrowingEv" data-ref-filename="_ZN7bmalloc9Scavenger15didStartGrowingEv">didStartGrowing</a>();</td></tr>
<tr><th id="564">564</th><td>    </td></tr>
<tr><th id="565">565</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="137roundedSize" title='roundedSize' data-type='size_t' data-ref="137roundedSize" data-ref-filename="137roundedSize">roundedSize</dfn> = <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a> ? <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc19roundUpToMultipleOfEmT_" title='bmalloc::roundUpToMultipleOf' data-ref="_ZN7bmalloc19roundUpToMultipleOfEmT_" data-ref-filename="_ZN7bmalloc19roundUpToMultipleOfEmT_">roundUpToMultipleOf</a>(<a class="ref" href="Sizes.h.html#bmalloc::Sizes::largeAlignment" title='bmalloc::Sizes::largeAlignment' data-ref="bmalloc::Sizes::largeAlignment" data-ref-filename="bmalloc..Sizes..largeAlignment">largeAlignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>) : <a class="ref" href="Sizes.h.html#bmalloc::Sizes::largeAlignment" title='bmalloc::Sizes::largeAlignment' data-ref="bmalloc::Sizes::largeAlignment" data-ref-filename="bmalloc..Sizes..largeAlignment">largeAlignment</a>;</td></tr>
<tr><th id="566">566</th><td>    <a class="macro" href="#551" title="do { if (action == FailureAction::Crash) do { if (!(roundedSize &gt;= size)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0); else if (!(roundedSize &gt;= size)) return nullptr; } while (false)" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a>(<a class="local col7 ref" href="#137roundedSize" title='roundedSize' data-ref="137roundedSize" data-ref-filename="137roundedSize">roundedSize</a> &gt;= <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>); <i>// Check for overflow</i></td></tr>
<tr><th id="567">567</th><td>    <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a> = <a class="local col7 ref" href="#137roundedSize" title='roundedSize' data-ref="137roundedSize" data-ref-filename="137roundedSize">roundedSize</a>;</td></tr>
<tr><th id="568">568</th><td></td></tr>
<tr><th id="569">569</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="138roundedAlignment" title='roundedAlignment' data-type='size_t' data-ref="138roundedAlignment" data-ref-filename="138roundedAlignment">roundedAlignment</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc19roundUpToMultipleOfET0_" title='bmalloc::roundUpToMultipleOf' data-ref="_ZN7bmalloc19roundUpToMultipleOfET0_" data-ref-filename="_ZN7bmalloc19roundUpToMultipleOfET0_">roundUpToMultipleOf</a>&lt;<a class="ref" href="Sizes.h.html#bmalloc::Sizes::largeAlignment" title='bmalloc::Sizes::largeAlignment' data-ref="bmalloc::Sizes::largeAlignment" data-ref-filename="bmalloc..Sizes..largeAlignment">largeAlignment</a>&gt;(<a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>);</td></tr>
<tr><th id="570">570</th><td>    <a class="macro" href="#551" title="do { if (action == FailureAction::Crash) do { if (!(roundedAlignment &gt;= alignment)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0); else if (!(roundedAlignment &gt;= alignment)) return nullptr; } while (false)" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a>(<a class="local col8 ref" href="#138roundedAlignment" title='roundedAlignment' data-ref="138roundedAlignment" data-ref-filename="138roundedAlignment">roundedAlignment</a> &gt;= <a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>); <i>// Check for overflow</i></td></tr>
<tr><th id="571">571</th><td>    <a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a> = <a class="local col8 ref" href="#138roundedAlignment" title='roundedAlignment' data-ref="138roundedAlignment" data-ref-filename="138roundedAlignment">roundedAlignment</a>;</td></tr>
<tr><th id="572">572</th><td></td></tr>
<tr><th id="573">573</th><td>    <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <dfn class="local col9 decl" id="139range" title='range' data-type='bmalloc::LargeRange' data-ref="139range" data-ref-filename="139range">range</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap6removeEmm" title='bmalloc::LargeMap::remove' data-ref="_ZN7bmalloc8LargeMap6removeEmm" data-ref-filename="_ZN7bmalloc8LargeMap6removeEmm">remove</a>(<a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>);</td></tr>
<tr><th id="574">574</th><td>    <b>if</b> (<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5RangentEv" title='bmalloc::Range::operator!' data-ref="_ZNK7bmalloc5RangentEv" data-ref-filename="_ZNK7bmalloc5RangentEv">!</a><a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a>) {</td></tr>
<tr><th id="575">575</th><td>        <b>if</b> (<a class="member field" href="Heap.h.html#bmalloc::Heap::m_hasPendingDecommits" title='bmalloc::Heap::m_hasPendingDecommits' data-ref="bmalloc::Heap::m_hasPendingDecommits" data-ref-filename="bmalloc..Heap..m_hasPendingDecommits">m_hasPendingDecommits</a>) {</td></tr>
<tr><th id="576">576</th><td>            <a class="member field" href="Heap.h.html#bmalloc::Heap::m_condition" title='bmalloc::Heap::m_condition' data-ref="bmalloc::Heap::m_condition" data-ref-filename="bmalloc..Heap..m_condition">m_condition</a>.<span class='ref fn' title='std::__1::condition_variable_any::wait' data-ref="_ZNSt3__122condition_variable_any4waitERT_T0_" data-ref-filename="_ZNSt3__122condition_variable_any4waitERT_T0_">wait</span>(<span class='refarg'><a class="local col3 ref" href="#133lock" title='lock' data-ref="133lock" data-ref-filename="133lock">lock</a></span>, [&amp;]() { <b>return</b> !<a class="member field" href="Heap.h.html#bmalloc::Heap::m_hasPendingDecommits" title='bmalloc::Heap::m_hasPendingDecommits' data-ref="bmalloc::Heap::m_hasPendingDecommits" data-ref-filename="bmalloc..Heap..m_hasPendingDecommits">m_hasPendingDecommits</a>; });</td></tr>
<tr><th id="577">577</th><td>            <i>// Now we're guaranteed we're looking at all available memory.</i></td></tr>
<tr><th id="578">578</th><td>            <b>return</b> <a class="member fn" href="#_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" title='bmalloc::Heap::allocateLarge' data-ref="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE" data-ref-filename="_ZN7bmalloc4Heap13allocateLargeERNSt3__111unique_lockINS_5MutexEEEmmNS_13FailureActionE">allocateLarge</a>(<span class='refarg'><a class="local col3 ref" href="#133lock" title='lock' data-ref="133lock" data-ref-filename="133lock">lock</a></span>, <a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>, <a class="local col6 ref" href="#136action" title='action' data-ref="136action" data-ref-filename="136action">action</a>);</td></tr>
<tr><th id="579">579</th><td>        }</td></tr>
<tr><th id="580">580</th><td></td></tr>
<tr><th id="581">581</th><td>        <a class="macro" href="#551" title="do { if (action == FailureAction::Crash) do { if (!(!usingGigacage())) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0); else if (!(!usingGigacage())) return nullptr; } while (false)" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a>(!<a class="member fn" href="#_ZN7bmalloc4Heap13usingGigacageEv" title='bmalloc::Heap::usingGigacage' data-ref="_ZN7bmalloc4Heap13usingGigacageEv" data-ref-filename="_ZN7bmalloc4Heap13usingGigacageEv">usingGigacage</a>());</td></tr>
<tr><th id="582">582</th><td></td></tr>
<tr><th id="583">583</th><td>        <a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSEOS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSEOS0_">=</a> <a class="member fn" href="#_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm" title='bmalloc::Heap::tryAllocateLargeChunk' data-ref="_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm" data-ref-filename="_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm">tryAllocateLargeChunk</a>(<a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>);</td></tr>
<tr><th id="584">584</th><td>        <a class="macro" href="#551" title="do { if (action == FailureAction::Crash) do { if (!(range)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0); else if (!(range)) return nullptr; } while (false)" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a>(<a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a>);</td></tr>
<tr><th id="585">585</th><td>        </td></tr>
<tr><th id="586">586</th><td>        <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a>);</td></tr>
<tr><th id="587">587</th><td>        <a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a> <a class="ref fn" href="LargeRange.h.html#34" title='bmalloc::LargeRange::operator=' data-ref="_ZN7bmalloc10LargeRangeaSEOS0_" data-ref-filename="_ZN7bmalloc10LargeRangeaSEOS0_">=</a> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap6removeEmm" title='bmalloc::LargeMap::remove' data-ref="_ZN7bmalloc8LargeMap6removeEmm" data-ref-filename="_ZN7bmalloc8LargeMap6removeEmm">remove</a>(<a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>);</td></tr>
<tr><th id="588">588</th><td>    }</td></tr>
<tr><th id="589">589</th><td></td></tr>
<tr><th id="590">590</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> -= <a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a>.<a class="ref fn" href="LargeRange.h.html#_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" title='bmalloc::LargeRange::totalPhysicalSize' data-ref="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv" data-ref-filename="_ZNK7bmalloc10LargeRange17totalPhysicalSizeEv">totalPhysicalSize</a>();</td></tr>
<tr><th id="591">591</th><td></td></tr>
<tr><th id="592">592</th><td>    <em>void</em>* <dfn class="local col0 decl" id="140result" title='result' data-type='void *' data-ref="140result" data-ref-filename="140result">result</dfn> = <a class="member fn" href="#_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" title='bmalloc::Heap::splitAndAllocate' data-ref="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" data-ref-filename="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm">splitAndAllocate</a>(<span class='refarg'><a class="local col3 ref" href="#133lock" title='lock' data-ref="133lock" data-ref-filename="133lock">lock</a></span>, <span class='refarg'><a class="local col9 ref" href="#139range" title='range' data-ref="139range" data-ref-filename="139range">range</a></span>, <a class="local col4 ref" href="#134alignment" title='alignment' data-ref="134alignment" data-ref-filename="134alignment">alignment</a>, <a class="local col5 ref" href="#135size" title='size' data-ref="135size" data-ref-filename="135size">size</a>).<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>();</td></tr>
<tr><th id="593">593</th><td><u>#<span data-ppcond="593">if</span> <a class="macro" href="BPlatform.h.html#106" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BUSE">BUSE</a>(PARTIAL_SCAVENGE)</u></td></tr>
<tr><th id="594">594</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::max' data-ref="_ZNSt3__1L3maxERKT_S2_" data-ref-filename="_ZNSt3__1L3maxERKT_S2_">max</span>(<a class="member field" href="Heap.h.html#bmalloc::Heap::m_highWatermark" title='bmalloc::Heap::m_highWatermark' data-ref="bmalloc::Heap::m_highWatermark" data-ref-filename="bmalloc..Heap..m_highWatermark">m_highWatermark</a>, <a class="local col0 ref" href="#140result" title='result' data-ref="140result" data-ref-filename="140result">result</a>);</td></tr>
<tr><th id="595">595</th><td><u>#<span data-ppcond="593">endif</span></u></td></tr>
<tr><th id="596">596</th><td>    <a class="macro" href="#551" title="do { if (action == FailureAction::Crash) do { if (!(result)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0); else if (!(result)) return nullptr; } while (false)" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a>(<a class="local col0 ref" href="#140result" title='result' data-ref="140result" data-ref-filename="140result">result</a>);</td></tr>
<tr><th id="597">597</th><td>    <b>return</b> <a class="local col0 ref" href="#140result" title='result' data-ref="140result" data-ref-filename="140result">result</a>;</td></tr>
<tr><th id="598">598</th><td></td></tr>
<tr><th id="599">599</th><td><u>#undef <a class="macro" href="#551" data-ref="_M/ASSERT_OR_RETURN_ON_FAILURE">ASSERT_OR_RETURN_ON_FAILURE</a></u></td></tr>
<tr><th id="600">600</th><td>}</td></tr>
<tr><th id="601">601</th><td></td></tr>
<tr><th id="602">602</th><td><a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm" title='bmalloc::Heap::tryAllocateLargeChunk' data-ref="_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm" data-ref-filename="_ZN7bmalloc4Heap21tryAllocateLargeChunkEmm">tryAllocateLargeChunk</dfn>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="141alignment" title='alignment' data-type='size_t' data-ref="141alignment" data-ref-filename="141alignment">alignment</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="142size" title='size' data-type='size_t' data-ref="142size" data-ref-filename="142size">size</dfn>)</td></tr>
<tr><th id="603">603</th><td>{</td></tr>
<tr><th id="604">604</th><td>    <i>// We allocate VM in aligned multiples to increase the chances that</i></td></tr>
<tr><th id="605">605</th><td><i>    // the OS will provide contiguous ranges that we can merge.</i></td></tr>
<tr><th id="606">606</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="143roundedAlignment" title='roundedAlignment' data-type='size_t' data-ref="143roundedAlignment" data-ref-filename="143roundedAlignment">roundedAlignment</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc19roundUpToMultipleOfET0_" title='bmalloc::roundUpToMultipleOf' data-ref="_ZN7bmalloc19roundUpToMultipleOfET0_" data-ref-filename="_ZN7bmalloc19roundUpToMultipleOfET0_">roundUpToMultipleOf</a>&lt;<a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a>&gt;(<a class="local col1 ref" href="#141alignment" title='alignment' data-ref="141alignment" data-ref-filename="141alignment">alignment</a>);</td></tr>
<tr><th id="607">607</th><td>    <b>if</b> (<a class="local col3 ref" href="#143roundedAlignment" title='roundedAlignment' data-ref="143roundedAlignment" data-ref-filename="143roundedAlignment">roundedAlignment</a> &lt; <a class="local col1 ref" href="#141alignment" title='alignment' data-ref="141alignment" data-ref-filename="141alignment">alignment</a>) <i>// Check for overflow</i></td></tr>
<tr><th id="608">608</th><td>        <b>return</b> <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1Ev" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1Ev" data-ref-filename="_ZN7bmalloc10LargeRangeC1Ev">(</a>);</td></tr>
<tr><th id="609">609</th><td>    <a class="local col1 ref" href="#141alignment" title='alignment' data-ref="141alignment" data-ref-filename="141alignment">alignment</a> = <a class="local col3 ref" href="#143roundedAlignment" title='roundedAlignment' data-ref="143roundedAlignment" data-ref-filename="143roundedAlignment">roundedAlignment</a>;</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="144roundedSize" title='roundedSize' data-type='size_t' data-ref="144roundedSize" data-ref-filename="144roundedSize">roundedSize</dfn> = <a class="ref fn" href="Algorithm.h.html#_ZN7bmalloc19roundUpToMultipleOfET0_" title='bmalloc::roundUpToMultipleOf' data-ref="_ZN7bmalloc19roundUpToMultipleOfET0_" data-ref-filename="_ZN7bmalloc19roundUpToMultipleOfET0_">roundUpToMultipleOf</a>&lt;<a class="ref" href="Sizes.h.html#bmalloc::Sizes::chunkSize" title='bmalloc::Sizes::chunkSize' data-ref="bmalloc::Sizes::chunkSize" data-ref-filename="bmalloc..Sizes..chunkSize">chunkSize</a>&gt;(<a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a>);</td></tr>
<tr><th id="612">612</th><td>    <b>if</b> (<a class="local col4 ref" href="#144roundedSize" title='roundedSize' data-ref="144roundedSize" data-ref-filename="144roundedSize">roundedSize</a> &lt; <a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a>) <i>// Check for overflow</i></td></tr>
<tr><th id="613">613</th><td>        <b>return</b> <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1Ev" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1Ev" data-ref-filename="_ZN7bmalloc10LargeRangeC1Ev">(</a>);</td></tr>
<tr><th id="614">614</th><td>    <a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a> = <a class="local col4 ref" href="#144roundedSize" title='roundedSize' data-ref="144roundedSize" data-ref-filename="144roundedSize">roundedSize</a>;</td></tr>
<tr><th id="615">615</th><td></td></tr>
<tr><th id="616">616</th><td>    <em>void</em>* <dfn class="local col5 decl" id="145memory" title='memory' data-type='void *' data-ref="145memory" data-ref-filename="145memory">memory</dfn> = <a class="ref fn" href="VMAllocate.h.html#_ZN7bmalloc13tryVMAllocateEmmNS_5VMTagE" title='bmalloc::tryVMAllocate' data-ref="_ZN7bmalloc13tryVMAllocateEmmNS_5VMTagE" data-ref-filename="_ZN7bmalloc13tryVMAllocateEmmNS_5VMTagE">tryVMAllocate</a>(<a class="local col1 ref" href="#141alignment" title='alignment' data-ref="141alignment" data-ref-filename="141alignment">alignment</a>, <a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a>);</td></tr>
<tr><th id="617">617</th><td>    <b>if</b> (!<a class="local col5 ref" href="#145memory" title='memory' data-ref="145memory" data-ref-filename="145memory">memory</a>)</td></tr>
<tr><th id="618">618</th><td>        <b>return</b> <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1Ev" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1Ev" data-ref-filename="_ZN7bmalloc10LargeRangeC1Ev">(</a>);</td></tr>
<tr><th id="619">619</th><td>    </td></tr>
<tr><th id="620">620</th><td><u>#<span data-ppcond="620">if</span> <a class="macro" href="BPlatform.h.html#37" title="(defined 1 &amp;&amp; 1)" data-ref="_M/BOS">BOS</a>(DARWIN)</u></td></tr>
<tr><th id="621">621</th><td>    <a class="type" href="PerProcess.h.html#bmalloc::PerProcess" title='bmalloc::PerProcess' data-ref="bmalloc::PerProcess" data-ref-filename="bmalloc..PerProcess">PerProcess</a>&lt;<a class="type" href="Zone.h.html#bmalloc::Zone" title='bmalloc::Zone' data-ref="bmalloc::Zone" data-ref-filename="bmalloc..Zone">Zone</a>&gt;::<a class="ref fn" href="PerProcess.h.html#_ZN7bmalloc10PerProcess3getEv" title='bmalloc::PerProcess::get' data-ref="_ZN7bmalloc10PerProcess3getEv" data-ref-filename="_ZN7bmalloc10PerProcess3getEv">get</a>()-&gt;<a class="ref fn" href="Zone.h.html#_ZN7bmalloc4Zone8addRangeENS_5RangeE" title='bmalloc::Zone::addRange' data-ref="_ZN7bmalloc4Zone8addRangeENS_5RangeE" data-ref-filename="_ZN7bmalloc4Zone8addRangeENS_5RangeE">addRange</a>(<a class="type" href="Range.h.html#bmalloc::Range" title='bmalloc::Range' data-ref="bmalloc::Range" data-ref-filename="bmalloc..Range">Range</a><a class="ref fn" href="Range.h.html#_ZN7bmalloc5RangeC1EPvm" title='bmalloc::Range::Range' data-ref="_ZN7bmalloc5RangeC1EPvm" data-ref-filename="_ZN7bmalloc5RangeC1EPvm">(</a><a class="local col5 ref" href="#145memory" title='memory' data-ref="145memory" data-ref-filename="145memory">memory</a>, <a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a>));</td></tr>
<tr><th id="622">622</th><td><u>#<span data-ppcond="620">endif</span></u></td></tr>
<tr><th id="623">623</th><td></td></tr>
<tr><th id="624">624</th><td>    <b>return</b> <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1EPvmmm" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1EPvmmm" data-ref-filename="_ZN7bmalloc10LargeRangeC1EPvmmm">(</a><a class="local col5 ref" href="#145memory" title='memory' data-ref="145memory" data-ref-filename="145memory">memory</a>, <a class="local col2 ref" href="#142size" title='size' data-ref="142size" data-ref-filename="142size">size</a>, <var>0</var>, <var>0</var>);</td></tr>
<tr><th id="625">625</th><td>}</td></tr>
<tr><th id="626">626</th><td></td></tr>
<tr><th id="627">627</th><td><span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap9largeSizeERNSt3__111unique_lockINS_5MutexEEEPv" title='bmalloc::Heap::largeSize' data-ref="_ZN7bmalloc4Heap9largeSizeERNSt3__111unique_lockINS_5MutexEEEPv" data-ref-filename="_ZN7bmalloc4Heap9largeSizeERNSt3__111unique_lockINS_5MutexEEEPv">largeSize</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <em>void</em>* <dfn class="local col6 decl" id="146object" title='object' data-type='void *' data-ref="146object" data-ref-filename="146object">object</dfn>)</td></tr>
<tr><th id="628">628</th><td>{</td></tr>
<tr><th id="629">629</th><td>    <b>return</b> <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeAllocated" title='bmalloc::Heap::m_largeAllocated' data-ref="bmalloc::Heap::m_largeAllocated" data-ref-filename="bmalloc..Heap..m_largeAllocated">m_largeAllocated</a>.<a class="ref fn" href="Map.h.html#_ZN7bmalloc3Map3getERKT_" title='bmalloc::Map::get' data-ref="_ZN7bmalloc3Map3getERKT_" data-ref-filename="_ZN7bmalloc3Map3getERKT_">get</a>(<a class="local col6 ref" href="#146object" title='object' data-ref="146object" data-ref-filename="146object">object</a>);</td></tr>
<tr><th id="630">630</th><td>}</td></tr>
<tr><th id="631">631</th><td></td></tr>
<tr><th id="632">632</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap11shrinkLargeERNSt3__111unique_lockINS_5MutexEEERKNS_5RangeEm" title='bmalloc::Heap::shrinkLarge' data-ref="_ZN7bmalloc4Heap11shrinkLargeERNSt3__111unique_lockINS_5MutexEEERKNS_5RangeEm" data-ref-filename="_ZN7bmalloc4Heap11shrinkLargeERNSt3__111unique_lockINS_5MutexEEERKNS_5RangeEm">shrinkLarge</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp; <dfn class="local col7 decl" id="147lock" title='lock' data-type='bmalloc::UniqueLockHolder &amp;' data-ref="147lock" data-ref-filename="147lock">lock</dfn>, <em>const</em> <a class="type" href="Range.h.html#bmalloc::Range" title='bmalloc::Range' data-ref="bmalloc::Range" data-ref-filename="bmalloc..Range">Range</a>&amp; <dfn class="local col8 decl" id="148object" title='object' data-type='const bmalloc::Range &amp;' data-ref="148object" data-ref-filename="148object">object</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="149newSize" title='newSize' data-type='size_t' data-ref="149newSize" data-ref-filename="149newSize">newSize</dfn>)</td></tr>
<tr><th id="633">633</th><td>{</td></tr>
<tr><th id="634">634</th><td>    <a class="macro" href="BAssert.h.html#121" title="do { if (!(object.size() &gt; newSize)) do { *(int*)0xbbadbeef = 0; __builtin_trap(); } while (0); } while (0)" data-ref="_M/BASSERT">BASSERT</a>(<a class="local col8 ref" href="#148object" title='object' data-ref="148object" data-ref-filename="148object">object</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range4sizeEv" title='bmalloc::Range::size' data-ref="_ZNK7bmalloc5Range4sizeEv" data-ref-filename="_ZNK7bmalloc5Range4sizeEv">size</a>() &gt; <a class="local col9 ref" href="#149newSize" title='newSize' data-ref="149newSize" data-ref-filename="149newSize">newSize</a>);</td></tr>
<tr><th id="635">635</th><td></td></tr>
<tr><th id="636">636</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="150size" title='size' data-type='size_t' data-ref="150size" data-ref-filename="150size">size</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeAllocated" title='bmalloc::Heap::m_largeAllocated' data-ref="bmalloc::Heap::m_largeAllocated" data-ref-filename="bmalloc..Heap..m_largeAllocated">m_largeAllocated</a>.<a class="ref fn" href="Map.h.html#_ZN7bmalloc3Map6removeERKT_" title='bmalloc::Map::remove' data-ref="_ZN7bmalloc3Map6removeERKT_" data-ref-filename="_ZN7bmalloc3Map6removeERKT_">remove</a>(<a class="local col8 ref" href="#148object" title='object' data-ref="148object" data-ref-filename="148object">object</a>.<a class="ref fn" href="Range.h.html#_ZNK7bmalloc5Range5beginEv" title='bmalloc::Range::begin' data-ref="_ZNK7bmalloc5Range5beginEv" data-ref-filename="_ZNK7bmalloc5Range5beginEv">begin</a>());</td></tr>
<tr><th id="637">637</th><td>    <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a> <dfn class="local col1 decl" id="151range" title='range' data-type='bmalloc::LargeRange' data-ref="151range" data-ref-filename="151range">range</dfn> = <a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1ERKNS_5RangeEmm" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1ERKNS_5RangeEmm" data-ref-filename="_ZN7bmalloc10LargeRangeC1ERKNS_5RangeEmm">(</a><a class="local col8 ref" href="#148object" title='object' data-ref="148object" data-ref-filename="148object">object</a>, <a class="local col0 ref" href="#150size" title='size' data-ref="150size" data-ref-filename="150size">size</a>, <a class="local col0 ref" href="#150size" title='size' data-ref="150size" data-ref-filename="150size">size</a>);</td></tr>
<tr><th id="638">638</th><td>    <a class="member fn" href="#_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" title='bmalloc::Heap::splitAndAllocate' data-ref="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm" data-ref-filename="_ZN7bmalloc4Heap16splitAndAllocateERNSt3__111unique_lockINS_5MutexEEERNS_10LargeRangeEmm">splitAndAllocate</a>(<span class='refarg'><a class="local col7 ref" href="#147lock" title='lock' data-ref="147lock" data-ref-filename="147lock">lock</a></span>, <span class='refarg'><a class="local col1 ref" href="#151range" title='range' data-ref="151range" data-ref-filename="151range">range</a></span>, <a class="ref" href="Sizes.h.html#bmalloc::Sizes::alignment" title='bmalloc::Sizes::alignment' data-ref="bmalloc::Sizes::alignment" data-ref-filename="bmalloc..Sizes..alignment">alignment</a>, <a class="local col9 ref" href="#149newSize" title='newSize' data-ref="149newSize" data-ref-filename="149newSize">newSize</a>);</td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger8scheduleEm" title='bmalloc::Scavenger::schedule' data-ref="_ZN7bmalloc9Scavenger8scheduleEm" data-ref-filename="_ZN7bmalloc9Scavenger8scheduleEm">schedule</a>(<a class="local col0 ref" href="#150size" title='size' data-ref="150size" data-ref-filename="150size">size</a>);</td></tr>
<tr><th id="641">641</th><td>}</td></tr>
<tr><th id="642">642</th><td></td></tr>
<tr><th id="643">643</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap15deallocateLargeERNSt3__111unique_lockINS_5MutexEEEPv" title='bmalloc::Heap::deallocateLarge' data-ref="_ZN7bmalloc4Heap15deallocateLargeERNSt3__111unique_lockINS_5MutexEEEPv" data-ref-filename="_ZN7bmalloc4Heap15deallocateLargeERNSt3__111unique_lockINS_5MutexEEEPv">deallocateLarge</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <em>void</em>* <dfn class="local col2 decl" id="152object" title='object' data-type='void *' data-ref="152object" data-ref-filename="152object">object</dfn>)</td></tr>
<tr><th id="644">644</th><td>{</td></tr>
<tr><th id="645">645</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="153size" title='size' data-type='size_t' data-ref="153size" data-ref-filename="153size">size</dfn> = <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeAllocated" title='bmalloc::Heap::m_largeAllocated' data-ref="bmalloc::Heap::m_largeAllocated" data-ref-filename="bmalloc..Heap..m_largeAllocated">m_largeAllocated</a>.<a class="ref fn" href="Map.h.html#_ZN7bmalloc3Map6removeERKT_" title='bmalloc::Map::remove' data-ref="_ZN7bmalloc3Map6removeERKT_" data-ref-filename="_ZN7bmalloc3Map6removeERKT_">remove</a>(<a class="local col2 ref" href="#152object" title='object' data-ref="152object" data-ref-filename="152object">object</a>);</td></tr>
<tr><th id="646">646</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_largeFree" title='bmalloc::Heap::m_largeFree' data-ref="bmalloc::Heap::m_largeFree" data-ref-filename="bmalloc..Heap..m_largeFree">m_largeFree</a>.<a class="ref fn" href="LargeMap.h.html#_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" title='bmalloc::LargeMap::add' data-ref="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE" data-ref-filename="_ZN7bmalloc8LargeMap3addERKNS_10LargeRangeE">add</a>(<a class="type" href="LargeRange.h.html#bmalloc::LargeRange" title='bmalloc::LargeRange' data-ref="bmalloc::LargeRange" data-ref-filename="bmalloc..LargeRange">LargeRange</a><a class="ref fn" href="LargeRange.h.html#_ZN7bmalloc10LargeRangeC1EPvmmm" title='bmalloc::LargeRange::LargeRange' data-ref="_ZN7bmalloc10LargeRangeC1EPvmmm" data-ref-filename="_ZN7bmalloc10LargeRangeC1EPvmmm">(</a><a class="local col2 ref" href="#152object" title='object' data-ref="152object" data-ref-filename="152object">object</a>, <a class="local col3 ref" href="#153size" title='size' data-ref="153size" data-ref-filename="153size">size</a>, <a class="local col3 ref" href="#153size" title='size' data-ref="153size" data-ref-filename="153size">size</a>, <a class="local col3 ref" href="#153size" title='size' data-ref="153size" data-ref-filename="153size">size</a>));</td></tr>
<tr><th id="647">647</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_freeableMemory" title='bmalloc::Heap::m_freeableMemory' data-ref="bmalloc::Heap::m_freeableMemory" data-ref-filename="bmalloc..Heap..m_freeableMemory">m_freeableMemory</a> += <a class="local col3 ref" href="#153size" title='size' data-ref="153size" data-ref-filename="153size">size</a>;</td></tr>
<tr><th id="648">648</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_scavenger" title='bmalloc::Heap::m_scavenger' data-ref="bmalloc::Heap::m_scavenger" data-ref-filename="bmalloc..Heap..m_scavenger">m_scavenger</a>-&gt;<a class="ref fn" href="Scavenger.h.html#_ZN7bmalloc9Scavenger8scheduleEm" title='bmalloc::Scavenger::schedule' data-ref="_ZN7bmalloc9Scavenger8scheduleEm" data-ref-filename="_ZN7bmalloc9Scavenger8scheduleEm">schedule</a>(<a class="local col3 ref" href="#153size" title='size' data-ref="153size" data-ref-filename="153size">size</a>);</td></tr>
<tr><th id="649">649</th><td>}</td></tr>
<tr><th id="650">650</th><td></td></tr>
<tr><th id="651">651</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap14externalCommitEPvm" title='bmalloc::Heap::externalCommit' data-ref="_ZN7bmalloc4Heap14externalCommitEPvm" data-ref-filename="_ZN7bmalloc4Heap14externalCommitEPvm">externalCommit</dfn>(<em>void</em>* <dfn class="local col4 decl" id="154ptr" title='ptr' data-type='void *' data-ref="154ptr" data-ref-filename="154ptr">ptr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="155size" title='size' data-type='size_t' data-ref="155size" data-ref-filename="155size">size</dfn>)</td></tr>
<tr><th id="652">652</th><td>{</td></tr>
<tr><th id="653">653</th><td>    <a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a> <dfn class="local col6 decl" id="156lock" title='lock' data-type='bmalloc::UniqueLockHolder' data-ref="156lock" data-ref-filename="156lock">lock</dfn><span class='ref fn' title='std::__1::unique_lock::unique_lock&lt;_Mutex&gt;' data-ref="_ZNSt3__111unique_lockC1ERT_" data-ref-filename="_ZNSt3__111unique_lockC1ERT_">(</span><a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<a class="member fn" href="Heap.h.html#_ZN7bmalloc4Heap5mutexEv" title='bmalloc::Heap::mutex' data-ref="_ZN7bmalloc4Heap5mutexEv" data-ref-filename="_ZN7bmalloc4Heap5mutexEv">mutex</a>());</td></tr>
<tr><th id="654">654</th><td>    <a class="member fn" href="#_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm" title='bmalloc::Heap::externalCommit' data-ref="_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm" data-ref-filename="_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm">externalCommit</a>(<span class='refarg'><a class="local col6 ref" href="#156lock" title='lock' data-ref="156lock" data-ref-filename="156lock">lock</a></span>, <a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr" data-ref-filename="154ptr">ptr</a>, <a class="local col5 ref" href="#155size" title='size' data-ref="155size" data-ref-filename="155size">size</a>);</td></tr>
<tr><th id="655">655</th><td>}</td></tr>
<tr><th id="656">656</th><td></td></tr>
<tr><th id="657">657</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm" title='bmalloc::Heap::externalCommit' data-ref="_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm" data-ref-filename="_ZN7bmalloc4Heap14externalCommitERNSt3__111unique_lockINS_5MutexEEEPvm">externalCommit</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <em>void</em>* <dfn class="local col7 decl" id="157ptr" title='ptr' data-type='void *' data-ref="157ptr" data-ref-filename="157ptr">ptr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="158size" title='size' data-type='size_t' data-ref="158size" data-ref-filename="158size">size</dfn>)</td></tr>
<tr><th id="658">658</th><td>{</td></tr>
<tr><th id="659">659</th><td>    <a class="macro" href="BPlatform.h.html#303" title="(void)ptr" data-ref="_M/BUNUSED_PARAM">BUNUSED_PARAM</a>(<a class="local col7 ref" href="#157ptr" title='ptr' data-ref="157ptr" data-ref-filename="157ptr">ptr</a>);</td></tr>
<tr><th id="660">660</th><td></td></tr>
<tr><th id="661">661</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> += <a class="local col8 ref" href="#158size" title='size' data-ref="158size" data-ref-filename="158size">size</a>;</td></tr>
<tr><th id="662">662</th><td><u>#<span data-ppcond="662">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u> </td></tr>
<tr><th id="663">663</th><td>    m_physicalPageMap.commit(ptr, size);</td></tr>
<tr><th id="664">664</th><td><u>#<span data-ppcond="662">endif</span></u></td></tr>
<tr><th id="665">665</th><td>}</td></tr>
<tr><th id="666">666</th><td></td></tr>
<tr><th id="667">667</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap16externalDecommitEPvm" title='bmalloc::Heap::externalDecommit' data-ref="_ZN7bmalloc4Heap16externalDecommitEPvm" data-ref-filename="_ZN7bmalloc4Heap16externalDecommitEPvm">externalDecommit</dfn>(<em>void</em>* <dfn class="local col9 decl" id="159ptr" title='ptr' data-type='void *' data-ref="159ptr" data-ref-filename="159ptr">ptr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="160size" title='size' data-type='size_t' data-ref="160size" data-ref-filename="160size">size</dfn>)</td></tr>
<tr><th id="668">668</th><td>{</td></tr>
<tr><th id="669">669</th><td>    <a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a> <dfn class="local col1 decl" id="161lock" title='lock' data-type='bmalloc::UniqueLockHolder' data-ref="161lock" data-ref-filename="161lock">lock</dfn><span class='ref fn' title='std::__1::unique_lock::unique_lock&lt;_Mutex&gt;' data-ref="_ZNSt3__111unique_lockC1ERT_" data-ref-filename="_ZNSt3__111unique_lockC1ERT_">(</span><a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<a class="member fn" href="Heap.h.html#_ZN7bmalloc4Heap5mutexEv" title='bmalloc::Heap::mutex' data-ref="_ZN7bmalloc4Heap5mutexEv" data-ref-filename="_ZN7bmalloc4Heap5mutexEv">mutex</a>());</td></tr>
<tr><th id="670">670</th><td>    <a class="member fn" href="#_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm" title='bmalloc::Heap::externalDecommit' data-ref="_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm" data-ref-filename="_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm">externalDecommit</a>(<span class='refarg'><a class="local col1 ref" href="#161lock" title='lock' data-ref="161lock" data-ref-filename="161lock">lock</a></span>, <a class="local col9 ref" href="#159ptr" title='ptr' data-ref="159ptr" data-ref-filename="159ptr">ptr</a>, <a class="local col0 ref" href="#160size" title='size' data-ref="160size" data-ref-filename="160size">size</a>);</td></tr>
<tr><th id="671">671</th><td>}</td></tr>
<tr><th id="672">672</th><td></td></tr>
<tr><th id="673">673</th><td><em>void</em> <a class="type" href="Heap.h.html#bmalloc::Heap" title='bmalloc::Heap' data-ref="bmalloc::Heap" data-ref-filename="bmalloc..Heap">Heap</a>::<dfn class="decl def fn" id="_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm" title='bmalloc::Heap::externalDecommit' data-ref="_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm" data-ref-filename="_ZN7bmalloc4Heap16externalDecommitERNSt3__111unique_lockINS_5MutexEEEPvm">externalDecommit</dfn>(<a class="typedef" href="Mutex.h.html#bmalloc::UniqueLockHolder" title='bmalloc::UniqueLockHolder' data-type='std::unique_lock&lt;Mutex&gt;' data-ref="bmalloc::UniqueLockHolder" data-ref-filename="bmalloc..UniqueLockHolder">UniqueLockHolder</a>&amp;, <em>void</em>* <dfn class="local col2 decl" id="162ptr" title='ptr' data-type='void *' data-ref="162ptr" data-ref-filename="162ptr">ptr</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="163size" title='size' data-type='size_t' data-ref="163size" data-ref-filename="163size">size</dfn>)</td></tr>
<tr><th id="674">674</th><td>{</td></tr>
<tr><th id="675">675</th><td>    <a class="macro" href="BPlatform.h.html#303" title="(void)ptr" data-ref="_M/BUNUSED_PARAM">BUNUSED_PARAM</a>(<a class="local col2 ref" href="#162ptr" title='ptr' data-ref="162ptr" data-ref-filename="162ptr">ptr</a>);</td></tr>
<tr><th id="676">676</th><td></td></tr>
<tr><th id="677">677</th><td>    <a class="member field" href="Heap.h.html#bmalloc::Heap::m_footprint" title='bmalloc::Heap::m_footprint' data-ref="bmalloc::Heap::m_footprint" data-ref-filename="bmalloc..Heap..m_footprint">m_footprint</a> -= <a class="local col3 ref" href="#163size" title='size' data-ref="163size" data-ref-filename="163size">size</a>;</td></tr>
<tr><th id="678">678</th><td><u>#<span data-ppcond="678">if</span> <a class="macro" href="BPlatform.h.html#310" title="0" data-ref="_M/ENABLE_PHYSICAL_PAGE_MAP">ENABLE_PHYSICAL_PAGE_MAP</a></u> </td></tr>
<tr><th id="679">679</th><td>    m_physicalPageMap.decommit(ptr, size);</td></tr>
<tr><th id="680">680</th><td><u>#<span data-ppcond="678">endif</span></u></td></tr>
<tr><th id="681">681</th><td>}</td></tr>
<tr><th id="682">682</th><td></td></tr>
<tr><th id="683">683</th><td>} <i>// namespace bmalloc</i></td></tr>
<tr><th id="684">684</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
