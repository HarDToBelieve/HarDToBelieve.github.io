<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ASTMetadataHLSL.cpp source code [webkit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp'; var root_path = '../../../../../../..'; var data_path = '../../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../..'>webkit</a>/<a href='../../../../..'>Source</a>/<a href='../../../..'>ThirdParty</a>/<a href='../../..'>ANGLE</a>/<a href='../..'>src</a>/<a href='..'>compiler</a>/<a href='./'>translator</a>/<a href='ASTMetadataHLSL.cpp.html'>ASTMetadataHLSL.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//</i></td></tr>
<tr><th id="2">2</th><td><i>// Copyright 2002 The ANGLE Project Authors. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i>// Use of this source code is governed by a BSD-style license that can be</i></td></tr>
<tr><th id="4">4</th><td><i>// found in the LICENSE file.</i></td></tr>
<tr><th id="5">5</th><td><i>//</i></td></tr>
<tr><th id="6">6</th><td><i></i></td></tr>
<tr><th id="7">7</th><td><i>// Analysis of the AST needed for HLSL generation</i></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><u>#include <a href="ASTMetadataHLSL.h.html">"compiler/translator/ASTMetadataHLSL.h"</a></u></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="CallDAG.h.html">"compiler/translator/CallDAG.h"</a></u></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="SymbolTable.h.html">"compiler/translator/SymbolTable.h"</a></u></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="tree_util/IntermTraverse.h.html">"compiler/translator/tree_util/IntermTraverse.h"</a></u></td></tr>
<tr><th id="14">14</th><td></td></tr>
<tr><th id="15">15</th><td><b>namespace</b> <span class="namespace">sh</span></td></tr>
<tr><th id="16">16</th><td>{</td></tr>
<tr><th id="17">17</th><td></td></tr>
<tr><th id="18">18</th><td><b>namespace</b></td></tr>
<tr><th id="19">19</th><td>{</td></tr>
<tr><th id="20">20</th><td></td></tr>
<tr><th id="21">21</th><td><i  data-doc="sh::(anonymousnamespace)::PullGradient">// Class used to traverse the AST of a function definition, checking if the</i></td></tr>
<tr><th id="22">22</th><td><i  data-doc="sh::(anonymousnamespace)::PullGradient">// function uses a gradient, and writing the set of control flow using gradients.</i></td></tr>
<tr><th id="23">23</th><td><i  data-doc="sh::(anonymousnamespace)::PullGradient">// It assumes that the analysis has already been made for the function's</i></td></tr>
<tr><th id="24">24</th><td><i  data-doc="sh::(anonymousnamespace)::PullGradient">// callees.</i></td></tr>
<tr><th id="25">25</th><td><b>class</b> <dfn class="tu type def" id="sh::(anonymousnamespace)::PullGradient" title='sh::(anonymous namespace)::PullGradient' data-ref="sh::(anonymousnamespace)::PullGradient" data-ref-filename="sh..(anonymousnamespace)..PullGradient">PullGradient</dfn> : <b>public</b> <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a></td></tr>
<tr><th id="26">26</th><td>{</td></tr>
<tr><th id="27">27</th><td>  <b>public</b>:</td></tr>
<tr><th id="28">28</th><td>    <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PullGradient::PullGradient' data-type='void sh::(anonymous namespace)::PullGradient::PullGradient(sh::MetadataList * metadataList, size_t index, const sh::CallDAG &amp; dag)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">PullGradient</dfn>(<a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="local col7 decl" id="767metadataList" title='metadataList' data-type='sh::MetadataList *' data-ref="767metadataList" data-ref-filename="767metadataList">metadataList</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="768index" title='index' data-type='size_t' data-ref="768index" data-ref-filename="768index">index</dfn>, <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="local col9 decl" id="769dag" title='dag' data-type='const sh::CallDAG &amp;' data-ref="769dag" data-ref-filename="769dag">dag</dfn>)</td></tr>
<tr><th id="29">29</th><td>        : <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a><a class="ref fn" href="tree_util/IntermTraverse.h.html#_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" title='sh::TIntermTraverser::TIntermTraverser' data-ref="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" data-ref-filename="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE">(</a><b>true</b>, <b>false</b>, <b>true</b>),</td></tr>
<tr><th id="30">30</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadataList" title='sh::(anonymous namespace)::PullGradient::mMetadataList' data-use='w' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadataList">mMetadataList</a>(<a class="local col7 ref" href="#767metadataList" title='metadataList' data-ref="767metadataList" data-ref-filename="767metadataList">metadataList</a>),</td></tr>
<tr><th id="31">31</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-use='w' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</a>(&amp;(*<a class="local col7 ref" href="#767metadataList" title='metadataList' data-ref="767metadataList" data-ref-filename="767metadataList">metadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col8 ref" href="#768index" title='index' data-ref="768index" data-ref-filename="768index">index</a>]</span>),</td></tr>
<tr><th id="32">32</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mIndex" title='sh::(anonymous namespace)::PullGradient::mIndex' data-use='w' data-ref="sh::(anonymousnamespace)::PullGradient::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mIndex">mIndex</a>(<a class="local col8 ref" href="#768index" title='index' data-ref="768index" data-ref-filename="768index">index</a>),</td></tr>
<tr><th id="33">33</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mDag" title='sh::(anonymous namespace)::PullGradient::mDag' data-use='w' data-ref="sh::(anonymousnamespace)::PullGradient::mDag" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mDag">mDag</a>(<a class="local col9 ref" href="#769dag" title='dag' data-ref="769dag" data-ref-filename="769dag">dag</a>)</td></tr>
<tr><th id="34">34</th><td>    {</td></tr>
<tr><th id="35">35</th><td>        <a class="macro" href="../../common/debug.h.html#316" title="(index &lt; metadataList-&gt;size() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 35, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 35 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;index &lt; metadataList-&gt;size()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col8 ref" href="#768index" title='index' data-ref="768index" data-ref-filename="768index">index</a> &lt; <a class="local col7 ref" href="#767metadataList" title='metadataList' data-ref="767metadataList" data-ref-filename="767metadataList">metadataList</a>-&gt;<span class='ref fn' title='std::__1::vector::size' data-ref="_ZNKSt3__16vector4sizeEv" data-ref-filename="_ZNKSt3__16vector4sizeEv">size</span>());</td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td>        <i>// ESSL 100 builtin gradient functions</i></td></tr>
<tr><th id="38">38</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"texture2D"</q>));</td></tr>
<tr><th id="39">39</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"texture2DProj"</q>));</td></tr>
<tr><th id="40">40</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"textureCube"</q>));</td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td>        <i>// ESSL 300 builtin gradient functions</i></td></tr>
<tr><th id="43">43</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"texture"</q>));</td></tr>
<tr><th id="44">44</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"textureProj"</q>));</td></tr>
<tr><th id="45">45</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"textureOffset"</q>));</td></tr>
<tr><th id="46">46</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertEOT_" data-ref-filename="_ZNSt3__13set6insertEOT_">insert</span>(<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a><a class="ref fn" href="ImmutableString.h.html#_ZN2sh15ImmutableStringC1EPKc" title='sh::ImmutableString::ImmutableString' data-ref="_ZN2sh15ImmutableStringC1EPKc" data-ref-filename="_ZN2sh15ImmutableStringC1EPKc">(</a><q>"textureProjOffset"</q>));</td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td>        <i>// ESSL 310 doesn't add builtin gradient functions</i></td></tr>
<tr><th id="49">49</th><td>    }</td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PullGradient::traverse' data-type='void sh::(anonymous namespace)::PullGradient::traverse(sh::TIntermFunctionDefinition * node)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE">traverse</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermFunctionDefinition" title='sh::TIntermFunctionDefinition' data-ref="sh::TIntermFunctionDefinition" data-ref-filename="sh..TIntermFunctionDefinition">TIntermFunctionDefinition</a> *<dfn class="local col0 decl" id="770node" title='node' data-type='sh::TIntermFunctionDefinition *' data-ref="770node" data-ref-filename="770node">node</dfn>)</td></tr>
<tr><th id="52">52</th><td>    {</td></tr>
<tr><th id="53">53</th><td>        <a class="local col0 ref" href="#770node" title='node' data-ref="770node" data-ref-filename="770node">node</a>-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" title='sh::TIntermFunctionDefinition::traverse' data-ref="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" data-ref-filename="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE">traverse</a>(<b>this</b>);</td></tr>
<tr><th id="54">54</th><td>        <a class="macro" href="../../common/debug.h.html#316" title="(mParents.empty() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 54, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 54 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mParents.empty()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>());</td></tr>
<tr><th id="55">55</th><td>    }</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td>    <i  data-doc="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv">// Called when a gradient operation or a call to a function using a gradient is found.</i></td></tr>
<tr><th id="58">58</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" title='sh::(anonymous namespace)::PullGradient::onGradient' data-type='void sh::(anonymous namespace)::PullGradient::onGradient()' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv">onGradient</dfn>()</td></tr>
<tr><th id="59">59</th><td>    {</td></tr>
<tr><th id="60">60</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mUsesGradient" title='sh::ASTMetadataHLSL::mUsesGradient' data-ref="sh::ASTMetadataHLSL::mUsesGradient" data-ref-filename="sh..ASTMetadataHLSL..mUsesGradient">mUsesGradient</a> = <b>true</b>;</td></tr>
<tr><th id="61">61</th><td>        <i>// Mark the latest control flow as using a gradient.</i></td></tr>
<tr><th id="62">62</th><td>        <b>if</b> (!<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>())</td></tr>
<tr><th id="63">63</th><td>        {</td></tr>
<tr><th id="64">64</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mControlFlowsContainingGradient" title='sh::ASTMetadataHLSL::mControlFlowsContainingGradient' data-ref="sh::ASTMetadataHLSL::mControlFlowsContainingGradient" data-ref-filename="sh..ASTMetadataHLSL..mControlFlowsContainingGradient">mControlFlowsContainingGradient</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>());</td></tr>
<tr><th id="65">65</th><td>        }</td></tr>
<tr><th id="66">66</th><td>    }</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" title='sh::(anonymous namespace)::PullGradient::visitControlFlow' data-type='void sh::(anonymous namespace)::PullGradient::visitControlFlow(sh::Visit visit, sh::TIntermNode * node)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE">visitControlFlow</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col1 decl" id="771visit" title='visit' data-type='sh::Visit' data-ref="771visit" data-ref-filename="771visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermNode" title='sh::TIntermNode' data-ref="sh::TIntermNode" data-ref-filename="sh..TIntermNode">TIntermNode</a> *<dfn class="local col2 decl" id="772node" title='node' data-type='sh::TIntermNode *' data-ref="772node" data-ref-filename="772node">node</dfn>)</td></tr>
<tr><th id="69">69</th><td>    {</td></tr>
<tr><th id="70">70</th><td>        <b>if</b> (<a class="local col1 ref" href="#771visit" title='visit' data-ref="771visit" data-ref-filename="771visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="71">71</th><td>        {</td></tr>
<tr><th id="72">72</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE" data-ref-filename="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE">push_back</span>(<a class="local col2 ref" href="#772node" title='node' data-ref="772node" data-ref-filename="772node">node</a>);</td></tr>
<tr><th id="73">73</th><td>        }</td></tr>
<tr><th id="74">74</th><td>        <b>else</b> <b>if</b> (<a class="local col1 ref" href="#771visit" title='visit' data-ref="771visit" data-ref-filename="771visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PostVisit" title='sh::PostVisit' data-ref="sh::PostVisit" data-ref-filename="sh..PostVisit">PostVisit</a>)</td></tr>
<tr><th id="75">75</th><td>        {</td></tr>
<tr><th id="76">76</th><td>            <a class="macro" href="../../common/debug.h.html#316" title="(mParents.back() == node ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 76, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 76 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mParents.back() == node&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>() == <a class="local col2 ref" href="#772node" title='node' data-ref="772node" data-ref-filename="772node">node</a>);</td></tr>
<tr><th id="77">77</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::pop_back' data-ref="_ZNSt3__16vector8pop_backEv" data-ref-filename="_ZNSt3__16vector8pop_backEv">pop_back</span>();</td></tr>
<tr><th id="78">78</th><td>            <i>// A control flow's using a gradient means its parents are too.</i></td></tr>
<tr><th id="79">79</th><td>            <b>if</b> (<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mControlFlowsContainingGradient" title='sh::ASTMetadataHLSL::mControlFlowsContainingGradient' data-ref="sh::ASTMetadataHLSL::mControlFlowsContainingGradient" data-ref-filename="sh..ASTMetadataHLSL..mControlFlowsContainingGradient">mControlFlowsContainingGradient</a>.<span class='ref fn' title='std::__1::set::count' data-ref="_ZNKSt3__13set5countERKT_" data-ref-filename="_ZNKSt3__13set5countERKT_">count</span>(<a class="local col2 ref" href="#772node" title='node' data-ref="772node" data-ref-filename="772node">node</a>) &gt; <var>0</var> &amp;&amp; !<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>())</td></tr>
<tr><th id="80">80</th><td>            {</td></tr>
<tr><th id="81">81</th><td>                <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mControlFlowsContainingGradient" title='sh::ASTMetadataHLSL::mControlFlowsContainingGradient' data-ref="sh::ASTMetadataHLSL::mControlFlowsContainingGradient" data-ref-filename="sh..ASTMetadataHLSL..mControlFlowsContainingGradient">mControlFlowsContainingGradient</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>());</td></tr>
<tr><th id="82">82</th><td>            }</td></tr>
<tr><th id="83">83</th><td>        }</td></tr>
<tr><th id="84">84</th><td>    }</td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient9visitLoopENS_5VisitEPNS_11TIntermLoopE" title='sh::(anonymous namespace)::PullGradient::visitLoop' data-type='bool sh::(anonymous namespace)::PullGradient::visitLoop(sh::Visit visit, sh::TIntermLoop * loop)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient9visitLoopENS_5VisitEPNS_11TIntermLoopE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient9visitLoopENS_5VisitEPNS_11TIntermLoopE">visitLoop</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col3 decl" id="773visit" title='visit' data-type='sh::Visit' data-ref="773visit" data-ref-filename="773visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col4 decl" id="774loop" title='loop' data-type='sh::TIntermLoop *' data-ref="774loop" data-ref-filename="774loop">loop</dfn>) override</td></tr>
<tr><th id="87">87</th><td>    {</td></tr>
<tr><th id="88">88</th><td>        <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" title='sh::(anonymous namespace)::PullGradient::visitControlFlow' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE">visitControlFlow</a>(<a class="local col3 ref" href="#773visit" title='visit' data-ref="773visit" data-ref-filename="773visit">visit</a>, <a class="local col4 ref" href="#774loop" title='loop' data-ref="774loop" data-ref-filename="774loop">loop</a>);</td></tr>
<tr><th id="89">89</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="90">90</th><td>    }</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient11visitIfElseENS_5VisitEPNS_13TIntermIfElseE" title='sh::(anonymous namespace)::PullGradient::visitIfElse' data-type='bool sh::(anonymous namespace)::PullGradient::visitIfElse(sh::Visit visit, sh::TIntermIfElse * ifElse)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient11visitIfElseENS_5VisitEPNS_13TIntermIfElseE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient11visitIfElseENS_5VisitEPNS_13TIntermIfElseE">visitIfElse</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col5 decl" id="775visit" title='visit' data-type='sh::Visit' data-ref="775visit" data-ref-filename="775visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermIfElse" title='sh::TIntermIfElse' data-ref="sh::TIntermIfElse" data-ref-filename="sh..TIntermIfElse">TIntermIfElse</a> *<dfn class="local col6 decl" id="776ifElse" title='ifElse' data-type='sh::TIntermIfElse *' data-ref="776ifElse" data-ref-filename="776ifElse">ifElse</dfn>) override</td></tr>
<tr><th id="93">93</th><td>    {</td></tr>
<tr><th id="94">94</th><td>        <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" title='sh::(anonymous namespace)::PullGradient::visitControlFlow' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient16visitControlFlowENS_5VisitEPNS_11TIntermNodeE">visitControlFlow</a>(<a class="local col5 ref" href="#775visit" title='visit' data-ref="775visit" data-ref-filename="775visit">visit</a>, <a class="local col6 ref" href="#776ifElse" title='ifElse' data-ref="776ifElse" data-ref-filename="776ifElse">ifElse</a>);</td></tr>
<tr><th id="95">95</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="96">96</th><td>    }</td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient10visitUnaryENS_5VisitEPNS_12TIntermUnaryE" title='sh::(anonymous namespace)::PullGradient::visitUnary' data-type='bool sh::(anonymous namespace)::PullGradient::visitUnary(sh::Visit visit, sh::TIntermUnary * node)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient10visitUnaryENS_5VisitEPNS_12TIntermUnaryE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient10visitUnaryENS_5VisitEPNS_12TIntermUnaryE">visitUnary</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col7 decl" id="777visit" title='visit' data-type='sh::Visit' data-ref="777visit" data-ref-filename="777visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermUnary" title='sh::TIntermUnary' data-ref="sh::TIntermUnary" data-ref-filename="sh..TIntermUnary">TIntermUnary</a> *<dfn class="local col8 decl" id="778node" title='node' data-type='sh::TIntermUnary *' data-ref="778node" data-ref-filename="778node">node</dfn>) override</td></tr>
<tr><th id="99">99</th><td>    {</td></tr>
<tr><th id="100">100</th><td>        <b>if</b> (<a class="local col7 ref" href="#777visit" title='visit' data-ref="777visit" data-ref-filename="777visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="101">101</th><td>        {</td></tr>
<tr><th id="102">102</th><td>            <b>switch</b> (<a class="local col8 ref" href="#778node" title='node' data-ref="778node" data-ref-filename="778node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh15TIntermOperator5getOpEv" title='sh::TIntermOperator::getOp' data-ref="_ZNK2sh15TIntermOperator5getOpEv" data-ref-filename="_ZNK2sh15TIntermOperator5getOpEv">getOp</a>())</td></tr>
<tr><th id="103">103</th><td>            {</td></tr>
<tr><th id="104">104</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpDFdx" title='EOpDFdx' data-ref="EOpDFdx" data-ref-filename="EOpDFdx">EOpDFdx</a>:</td></tr>
<tr><th id="105">105</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpDFdy" title='EOpDFdy' data-ref="EOpDFdy" data-ref-filename="EOpDFdy">EOpDFdy</a>:</td></tr>
<tr><th id="106">106</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpFwidth" title='EOpFwidth' data-ref="EOpFwidth" data-ref-filename="EOpFwidth">EOpFwidth</a>:</td></tr>
<tr><th id="107">107</th><td>                    <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" title='sh::(anonymous namespace)::PullGradient::onGradient' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv">onGradient</a>();</td></tr>
<tr><th id="108">108</th><td>                    <b>break</b>;</td></tr>
<tr><th id="109">109</th><td>                <b>default</b>:</td></tr>
<tr><th id="110">110</th><td>                    <b>break</b>;</td></tr>
<tr><th id="111">111</th><td>            }</td></tr>
<tr><th id="112">112</th><td>        }</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="115">115</th><td>    }</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_112PullGradient14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" title='sh::(anonymous namespace)::PullGradient::visitAggregate' data-type='bool sh::(anonymous namespace)::PullGradient::visitAggregate(sh::Visit visit, sh::TIntermAggregate * node)' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient14visitAggregateENS_5VisitEPNS_16TIntermAggregateE">visitAggregate</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col9 decl" id="779visit" title='visit' data-type='sh::Visit' data-ref="779visit" data-ref-filename="779visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermAggregate" title='sh::TIntermAggregate' data-ref="sh::TIntermAggregate" data-ref-filename="sh..TIntermAggregate">TIntermAggregate</a> *<dfn class="local col0 decl" id="780node" title='node' data-type='sh::TIntermAggregate *' data-ref="780node" data-ref-filename="780node">node</dfn>) override</td></tr>
<tr><th id="118">118</th><td>    {</td></tr>
<tr><th id="119">119</th><td>        <b>if</b> (<a class="local col9 ref" href="#779visit" title='visit' data-ref="779visit" data-ref-filename="779visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="120">120</th><td>        {</td></tr>
<tr><th id="121">121</th><td>            <b>if</b> (<a class="local col0 ref" href="#780node" title='node' data-ref="780node" data-ref-filename="780node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh15TIntermOperator5getOpEv" title='sh::TIntermOperator::getOp' data-ref="_ZNK2sh15TIntermOperator5getOpEv" data-ref-filename="_ZNK2sh15TIntermOperator5getOpEv">getOp</a>() == <a class="enum" href="Operator.h.html#EOpCallFunctionInAST" title='EOpCallFunctionInAST' data-ref="EOpCallFunctionInAST" data-ref-filename="EOpCallFunctionInAST">EOpCallFunctionInAST</a>)</td></tr>
<tr><th id="122">122</th><td>            {</td></tr>
<tr><th id="123">123</th><td>                <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="781calleeIndex" title='calleeIndex' data-type='size_t' data-ref="781calleeIndex" data-ref-filename="781calleeIndex">calleeIndex</dfn> = <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mDag" title='sh::(anonymous namespace)::PullGradient::mDag' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mDag" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mDag">mDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" title='sh::CallDAG::findIndex' data-ref="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" data-ref-filename="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE">findIndex</a>(<a class="local col0 ref" href="#780node" title='node' data-ref="780node" data-ref-filename="780node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh16TIntermAggregate11getFunctionEv" title='sh::TIntermAggregate::getFunction' data-ref="_ZNK2sh16TIntermAggregate11getFunctionEv" data-ref-filename="_ZNK2sh16TIntermAggregate11getFunctionEv">getFunction</a>()-&gt;<a class="ref fn" href="Symbol.h.html#_ZNK2sh7TSymbol8uniqueIdEv" title='sh::TSymbol::uniqueId' data-ref="_ZNK2sh7TSymbol8uniqueIdEv" data-ref-filename="_ZNK2sh7TSymbol8uniqueIdEv">uniqueId</a>());</td></tr>
<tr><th id="124">124</th><td>                <a class="macro" href="../../common/debug.h.html#316" title="(calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 124, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 124 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#781calleeIndex" title='calleeIndex' data-ref="781calleeIndex" data-ref-filename="781calleeIndex">calleeIndex</a> != <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a>::<a class="ref" href="CallDAG.h.html#sh::CallDAG::InvalidIndex" title='sh::CallDAG::InvalidIndex' data-ref="sh::CallDAG::InvalidIndex" data-ref-filename="sh..CallDAG..InvalidIndex">InvalidIndex</a> &amp;&amp; <a class="local col1 ref" href="#781calleeIndex" title='calleeIndex' data-ref="781calleeIndex" data-ref-filename="781calleeIndex">calleeIndex</a> &lt; <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mIndex" title='sh::(anonymous namespace)::PullGradient::mIndex' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mIndex">mIndex</a>);</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td>                <b>if</b> ((*<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mMetadataList" title='sh::(anonymous namespace)::PullGradient::mMetadataList' data-use='r' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadataList">mMetadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col1 ref" href="#781calleeIndex" title='calleeIndex' data-ref="781calleeIndex" data-ref-filename="781calleeIndex">calleeIndex</a>]</span>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mUsesGradient" title='sh::ASTMetadataHLSL::mUsesGradient' data-ref="sh::ASTMetadataHLSL::mUsesGradient" data-ref-filename="sh..ASTMetadataHLSL..mUsesGradient">mUsesGradient</a>)</td></tr>
<tr><th id="127">127</th><td>                {</td></tr>
<tr><th id="128">128</th><td>                    <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" title='sh::(anonymous namespace)::PullGradient::onGradient' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv">onGradient</a>();</td></tr>
<tr><th id="129">129</th><td>                }</td></tr>
<tr><th id="130">130</th><td>            }</td></tr>
<tr><th id="131">131</th><td>            <b>else</b> <b>if</b> (<a class="local col0 ref" href="#780node" title='node' data-ref="780node" data-ref-filename="780node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh15TIntermOperator5getOpEv" title='sh::TIntermOperator::getOp' data-ref="_ZNK2sh15TIntermOperator5getOpEv" data-ref-filename="_ZNK2sh15TIntermOperator5getOpEv">getOp</a>() == <a class="enum" href="Operator.h.html#EOpCallBuiltInFunction" title='EOpCallBuiltInFunction' data-ref="EOpCallBuiltInFunction" data-ref-filename="EOpCallBuiltInFunction">EOpCallBuiltInFunction</a>)</td></tr>
<tr><th id="132">132</th><td>            {</td></tr>
<tr><th id="133">133</th><td>                <b>if</b> (<a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::find' data-ref="_ZNSt3__13set4findERKT_" data-ref-filename="_ZNSt3__13set4findERKT_">find</span>(<a class="local col0 ref" href="#780node" title='node' data-ref="780node" data-ref-filename="780node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh16TIntermAggregate11getFunctionEv" title='sh::TIntermAggregate::getFunction' data-ref="_ZNK2sh16TIntermAggregate11getFunctionEv" data-ref-filename="_ZNK2sh16TIntermAggregate11getFunctionEv">getFunction</a>()-&gt;<a class="ref fn" href="Symbol.h.html#_ZNK2sh7TSymbol4nameEv" title='sh::TSymbol::name' data-ref="_ZNK2sh7TSymbol4nameEv" data-ref-filename="_ZNK2sh7TSymbol4nameEv">name</a>()) <span class='ref fn' title='std::__1::operator!=' data-ref="_ZNSt3__1neERKNS_21__tree_const_iteratorIT_T0_T1_EES7_" data-ref-filename="_ZNSt3__1neERKNS_21__tree_const_iteratorIT_T0_T1_EES7_">!=</span></td></tr>
<tr><th id="134">134</th><td>                    <a class="tu member field" href="#sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-use='m' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</a>.<span class='ref fn' title='std::__1::set::end' data-ref="_ZNSt3__13set3endEv" data-ref-filename="_ZNSt3__13set3endEv">end</span>())</td></tr>
<tr><th id="135">135</th><td>                {</td></tr>
<tr><th id="136">136</th><td>                    <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" title='sh::(anonymous namespace)::PullGradient::onGradient' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient10onGradientEv">onGradient</a>();</td></tr>
<tr><th id="137">137</th><td>                }</td></tr>
<tr><th id="138">138</th><td>            }</td></tr>
<tr><th id="139">139</th><td>        }</td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="142">142</th><td>    }</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td>  <b>private</b>:</td></tr>
<tr><th id="145">145</th><td>    <a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mMetadataList" title='sh::(anonymous namespace)::PullGradient::mMetadataList' data-type='sh::MetadataList *' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadataList">mMetadataList</dfn>;</td></tr>
<tr><th id="146">146</th><td>    <a class="type" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL" title='sh::ASTMetadataHLSL' data-ref="sh::ASTMetadataHLSL" data-ref-filename="sh..ASTMetadataHLSL">ASTMetadataHLSL</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mMetadata" title='sh::(anonymous namespace)::PullGradient::mMetadata' data-type='sh::ASTMetadataHLSL *' data-ref="sh::(anonymousnamespace)::PullGradient::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mMetadata">mMetadata</dfn>;</td></tr>
<tr><th id="147">147</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mIndex" title='sh::(anonymous namespace)::PullGradient::mIndex' data-type='size_t' data-ref="sh::(anonymousnamespace)::PullGradient::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mIndex">mIndex</dfn>;</td></tr>
<tr><th id="148">148</th><td>    <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mDag" title='sh::(anonymous namespace)::PullGradient::mDag' data-type='const sh::CallDAG &amp;' data-ref="sh::(anonymousnamespace)::PullGradient::mDag" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mDag">mDag</dfn>;</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td>    <i  data-doc="sh::(anonymousnamespace)::PullGradient::mParents">// Contains a stack of the control flow nodes that are parents of the node being</i></td></tr>
<tr><th id="151">151</th><td><i  data-doc="sh::(anonymousnamespace)::PullGradient::mParents">    // currently visited. It is used to mark control flows using a gradient.</i></td></tr>
<tr><th id="152">152</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="IntermNode.h.html#sh::TIntermNode" title='sh::TIntermNode' data-ref="sh::TIntermNode" data-ref-filename="sh..TIntermNode">TIntermNode</a> *&gt; <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mParents" title='sh::(anonymous namespace)::PullGradient::mParents' data-type='std::vector&lt;TIntermNode *&gt;' data-ref="sh::(anonymousnamespace)::PullGradient::mParents" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mParents">mParents</dfn>;</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td>    <i  data-doc="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions">// A list of builtin functions that use gradients</i></td></tr>
<tr><th id="155">155</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::set' data-ref="std::__1::set" data-ref-filename="std..__1..set">set</span>&lt;<a class="type" href="ImmutableString.h.html#sh::ImmutableString" title='sh::ImmutableString' data-ref="sh::ImmutableString" data-ref-filename="sh..ImmutableString">ImmutableString</a>&gt; <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" title='sh::(anonymous namespace)::PullGradient::mGradientBuiltinFunctions' data-type='std::set&lt;ImmutableString&gt;' data-ref="sh::(anonymousnamespace)::PullGradient::mGradientBuiltinFunctions" data-ref-filename="sh..(anonymousnamespace)..PullGradient..mGradientBuiltinFunctions">mGradientBuiltinFunctions</dfn>;</td></tr>
<tr><th id="156">156</th><td>};</td></tr>
<tr><th id="157">157</th><td></td></tr>
<tr><th id="158">158</th><td><i  data-doc="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops">// Traverses the AST of a function definition to compute the the discontinuous loops</i></td></tr>
<tr><th id="159">159</th><td><i  data-doc="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops">// and the if statements containing gradient loops. It assumes that the gradient loops</i></td></tr>
<tr><th id="160">160</th><td><i  data-doc="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops">// (loops that contain a gradient) have already been computed and that it has already</i></td></tr>
<tr><th id="161">161</th><td><i  data-doc="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops">// traversed the current function's callees.</i></td></tr>
<tr><th id="162">162</th><td><b>class</b> <dfn class="tu type def" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops">PullComputeDiscontinuousAndGradientLoops</dfn> : <b>public</b> <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a></td></tr>
<tr><th id="163">163</th><td>{</td></tr>
<tr><th id="164">164</th><td>  <b>public</b>:</td></tr>
<tr><th id="165">165</th><td>    <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::PullComputeDiscontinuousAndGradientLoops' data-type='void sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::PullComputeDiscontinuousAndGradientLoops(sh::MetadataList * metadataList, size_t index, const sh::CallDAG &amp; dag)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">PullComputeDiscontinuousAndGradientLoops</dfn>(<a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="local col2 decl" id="782metadataList" title='metadataList' data-type='sh::MetadataList *' data-ref="782metadataList" data-ref-filename="782metadataList">metadataList</dfn>,</td></tr>
<tr><th id="166">166</th><td>                                             <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="783index" title='index' data-type='size_t' data-ref="783index" data-ref-filename="783index">index</dfn>,</td></tr>
<tr><th id="167">167</th><td>                                             <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="local col4 decl" id="784dag" title='dag' data-type='const sh::CallDAG &amp;' data-ref="784dag" data-ref-filename="784dag">dag</dfn>)</td></tr>
<tr><th id="168">168</th><td>        : <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a><a class="ref fn" href="tree_util/IntermTraverse.h.html#_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" title='sh::TIntermTraverser::TIntermTraverser' data-ref="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" data-ref-filename="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE">(</a><b>true</b>, <b>false</b>, <b>true</b>),</td></tr>
<tr><th id="169">169</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList' data-use='w' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadataList">mMetadataList</a>(<a class="local col2 ref" href="#782metadataList" title='metadataList' data-ref="782metadataList" data-ref-filename="782metadataList">metadataList</a>),</td></tr>
<tr><th id="170">170</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='w' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>(&amp;(*<a class="local col2 ref" href="#782metadataList" title='metadataList' data-ref="782metadataList" data-ref-filename="782metadataList">metadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col3 ref" href="#783index" title='index' data-ref="783index" data-ref-filename="783index">index</a>]</span>),</td></tr>
<tr><th id="171">171</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIndex' data-use='w' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIndex">mIndex</a>(<a class="local col3 ref" href="#783index" title='index' data-ref="783index" data-ref-filename="783index">index</a>),</td></tr>
<tr><th id="172">172</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mDag' data-use='w' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mDag">mDag</a>(<a class="local col4 ref" href="#784dag" title='dag' data-ref="784dag" data-ref-filename="784dag">dag</a>)</td></tr>
<tr><th id="173">173</th><td>    {}</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::traverse' data-type='void sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::traverse(sh::TIntermFunctionDefinition * node)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE">traverse</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermFunctionDefinition" title='sh::TIntermFunctionDefinition' data-ref="sh::TIntermFunctionDefinition" data-ref-filename="sh..TIntermFunctionDefinition">TIntermFunctionDefinition</a> *<dfn class="local col5 decl" id="785node" title='node' data-type='sh::TIntermFunctionDefinition *' data-ref="785node" data-ref-filename="785node">node</dfn>)</td></tr>
<tr><th id="176">176</th><td>    {</td></tr>
<tr><th id="177">177</th><td>        <a class="local col5 ref" href="#785node" title='node' data-ref="785node" data-ref-filename="785node">node</a>-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" title='sh::TIntermFunctionDefinition::traverse' data-ref="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" data-ref-filename="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE">traverse</a>(<b>this</b>);</td></tr>
<tr><th id="178">178</th><td>        <a class="macro" href="../../common/debug.h.html#316" title="(mLoopsAndSwitches.empty() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 178, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 178 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mLoopsAndSwitches.empty()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>());</td></tr>
<tr><th id="179">179</th><td>        <a class="macro" href="../../common/debug.h.html#316" title="(mIfs.empty() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 179, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 179 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mIfs.empty()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>());</td></tr>
<tr><th id="180">180</th><td>    }</td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td>    <i  data-doc="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv">// Called when traversing a gradient loop or a call to a function with a</i></td></tr>
<tr><th id="183">183</th><td><i  data-doc="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv">    // gradient loop in its call graph.</i></td></tr>
<tr><th id="184">184</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::onGradientLoop' data-type='void sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::onGradientLoop()' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv">onGradientLoop</dfn>()</td></tr>
<tr><th id="185">185</th><td>    {</td></tr>
<tr><th id="186">186</th><td>        <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph" title='sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph' data-ref="sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph" data-ref-filename="sh..ASTMetadataHLSL..mHasGradientLoopInCallGraph">mHasGradientLoopInCallGraph</a> = <b>true</b>;</td></tr>
<tr><th id="187">187</th><td>        <i>// Mark the latest if as using a discontinuous loop.</i></td></tr>
<tr><th id="188">188</th><td>        <b>if</b> (!<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>())</td></tr>
<tr><th id="189">189</th><td>        {</td></tr>
<tr><th id="190">190</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mIfsContainingGradientLoop" title='sh::ASTMetadataHLSL::mIfsContainingGradientLoop' data-ref="sh::ASTMetadataHLSL::mIfsContainingGradientLoop" data-ref-filename="sh..ASTMetadataHLSL..mIfsContainingGradientLoop">mIfsContainingGradientLoop</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>());</td></tr>
<tr><th id="191">191</th><td>        }</td></tr>
<tr><th id="192">192</th><td>    }</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitLoop' data-type='bool sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitLoop(sh::Visit visit, sh::TIntermLoop * loop)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE">visitLoop</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col6 decl" id="786visit" title='visit' data-type='sh::Visit' data-ref="786visit" data-ref-filename="786visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col7 decl" id="787loop" title='loop' data-type='sh::TIntermLoop *' data-ref="787loop" data-ref-filename="787loop">loop</dfn>) override</td></tr>
<tr><th id="195">195</th><td>    {</td></tr>
<tr><th id="196">196</th><td>        <b>if</b> (<a class="local col6 ref" href="#786visit" title='visit' data-ref="786visit" data-ref-filename="786visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="197">197</th><td>        {</td></tr>
<tr><th id="198">198</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backEOT_" data-ref-filename="_ZNSt3__16vector9push_backEOT_">push_back</span>(<a class="local col7 ref" href="#787loop" title='loop' data-ref="787loop" data-ref-filename="787loop">loop</a>);</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td>            <b>if</b> (<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref fn" href="#_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE" title='sh::ASTMetadataHLSL::hasGradientInCallGraph' data-ref="_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE" data-ref-filename="_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE">hasGradientInCallGraph</a>(<a class="local col7 ref" href="#787loop" title='loop' data-ref="787loop" data-ref-filename="787loop">loop</a>))</td></tr>
<tr><th id="201">201</th><td>            {</td></tr>
<tr><th id="202">202</th><td>                <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::onGradientLoop' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv">onGradientLoop</a>();</td></tr>
<tr><th id="203">203</th><td>            }</td></tr>
<tr><th id="204">204</th><td>        }</td></tr>
<tr><th id="205">205</th><td>        <b>else</b> <b>if</b> (<a class="local col6 ref" href="#786visit" title='visit' data-ref="786visit" data-ref-filename="786visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PostVisit" title='sh::PostVisit' data-ref="sh::PostVisit" data-ref-filename="sh..PostVisit">PostVisit</a>)</td></tr>
<tr><th id="206">206</th><td>        {</td></tr>
<tr><th id="207">207</th><td>            <a class="macro" href="../../common/debug.h.html#316" title="(mLoopsAndSwitches.back() == loop ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 207, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 207 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mLoopsAndSwitches.back() == loop&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>() == <a class="local col7 ref" href="#787loop" title='loop' data-ref="787loop" data-ref-filename="787loop">loop</a>);</td></tr>
<tr><th id="208">208</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::pop_back' data-ref="_ZNSt3__16vector8pop_backEv" data-ref-filename="_ZNSt3__16vector8pop_backEv">pop_back</span>();</td></tr>
<tr><th id="209">209</th><td>        }</td></tr>
<tr><th id="210">210</th><td></td></tr>
<tr><th id="211">211</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="212">212</th><td>    }</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitIfElseENS_5VisitEPNS_13TIntermIfElseE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitIfElse' data-type='bool sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitIfElse(sh::Visit visit, sh::TIntermIfElse * node)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitIfElseENS_5VisitEPNS_13TIntermIfElseE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitIfElseENS_5VisitEPNS_13TIntermIfElseE">visitIfElse</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col8 decl" id="788visit" title='visit' data-type='sh::Visit' data-ref="788visit" data-ref-filename="788visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermIfElse" title='sh::TIntermIfElse' data-ref="sh::TIntermIfElse" data-ref-filename="sh..TIntermIfElse">TIntermIfElse</a> *<dfn class="local col9 decl" id="789node" title='node' data-type='sh::TIntermIfElse *' data-ref="789node" data-ref-filename="789node">node</dfn>) override</td></tr>
<tr><th id="215">215</th><td>    {</td></tr>
<tr><th id="216">216</th><td>        <b>if</b> (<a class="local col8 ref" href="#788visit" title='visit' data-ref="788visit" data-ref-filename="788visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="217">217</th><td>        {</td></tr>
<tr><th id="218">218</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE" data-ref-filename="_ZNSt3__16vector9push_backENS_13__vector_baseIT_T0_E15const_referenceE">push_back</span>(<a class="local col9 ref" href="#789node" title='node' data-ref="789node" data-ref-filename="789node">node</a>);</td></tr>
<tr><th id="219">219</th><td>        }</td></tr>
<tr><th id="220">220</th><td>        <b>else</b> <b>if</b> (<a class="local col8 ref" href="#788visit" title='visit' data-ref="788visit" data-ref-filename="788visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PostVisit" title='sh::PostVisit' data-ref="sh::PostVisit" data-ref-filename="sh..PostVisit">PostVisit</a>)</td></tr>
<tr><th id="221">221</th><td>        {</td></tr>
<tr><th id="222">222</th><td>            <a class="macro" href="../../common/debug.h.html#316" title="(mIfs.back() == node ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 222, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 222 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mIfs.back() == node&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>() == <a class="local col9 ref" href="#789node" title='node' data-ref="789node" data-ref-filename="789node">node</a>);</td></tr>
<tr><th id="223">223</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::pop_back' data-ref="_ZNSt3__16vector8pop_backEv" data-ref-filename="_ZNSt3__16vector8pop_backEv">pop_back</span>();</td></tr>
<tr><th id="224">224</th><td>            <i>// An if using a discontinuous loop means its parents ifs are also discontinuous.</i></td></tr>
<tr><th id="225">225</th><td>            <b>if</b> (<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mIfsContainingGradientLoop" title='sh::ASTMetadataHLSL::mIfsContainingGradientLoop' data-ref="sh::ASTMetadataHLSL::mIfsContainingGradientLoop" data-ref-filename="sh..ASTMetadataHLSL..mIfsContainingGradientLoop">mIfsContainingGradientLoop</a>.<span class='ref fn' title='std::__1::set::count' data-ref="_ZNKSt3__13set5countERKT_" data-ref-filename="_ZNKSt3__13set5countERKT_">count</span>(<a class="local col9 ref" href="#789node" title='node' data-ref="789node" data-ref-filename="789node">node</a>) &gt; <var>0</var> &amp;&amp; !<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>())</td></tr>
<tr><th id="226">226</th><td>            {</td></tr>
<tr><th id="227">227</th><td>                <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mIfsContainingGradientLoop" title='sh::ASTMetadataHLSL::mIfsContainingGradientLoop' data-ref="sh::ASTMetadataHLSL::mIfsContainingGradientLoop" data-ref-filename="sh..ASTMetadataHLSL..mIfsContainingGradientLoop">mIfsContainingGradientLoop</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>());</td></tr>
<tr><th id="228">228</th><td>            }</td></tr>
<tr><th id="229">229</th><td>        }</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="232">232</th><td>    }</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitBranchENS_5VisitEPNS_13TIntermBranchE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitBranch' data-type='bool sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitBranch(sh::Visit visit, sh::TIntermBranch * node)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitBranchENS_5VisitEPNS_13TIntermBranchE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitBranchENS_5VisitEPNS_13TIntermBranchE">visitBranch</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col0 decl" id="790visit" title='visit' data-type='sh::Visit' data-ref="790visit" data-ref-filename="790visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermBranch" title='sh::TIntermBranch' data-ref="sh::TIntermBranch" data-ref-filename="sh..TIntermBranch">TIntermBranch</a> *<dfn class="local col1 decl" id="791node" title='node' data-type='sh::TIntermBranch *' data-ref="791node" data-ref-filename="791node">node</dfn>) override</td></tr>
<tr><th id="235">235</th><td>    {</td></tr>
<tr><th id="236">236</th><td>        <b>if</b> (<a class="local col0 ref" href="#790visit" title='visit' data-ref="790visit" data-ref-filename="790visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="237">237</th><td>        {</td></tr>
<tr><th id="238">238</th><td>            <b>switch</b> (<a class="local col1 ref" href="#791node" title='node' data-ref="791node" data-ref-filename="791node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZN2sh13TIntermBranch9getFlowOpEv" title='sh::TIntermBranch::getFlowOp' data-ref="_ZN2sh13TIntermBranch9getFlowOpEv" data-ref-filename="_ZN2sh13TIntermBranch9getFlowOpEv">getFlowOp</a>())</td></tr>
<tr><th id="239">239</th><td>            {</td></tr>
<tr><th id="240">240</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpBreak" title='EOpBreak' data-ref="EOpBreak" data-ref-filename="EOpBreak">EOpBreak</a>:</td></tr>
<tr><th id="241">241</th><td>                {</td></tr>
<tr><th id="242">242</th><td>                    <a class="macro" href="../../common/debug.h.html#316" title="(!mLoopsAndSwitches.empty() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 242, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 242 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;!mLoopsAndSwitches.empty()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(!<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>());</td></tr>
<tr><th id="243">243</th><td>                    <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col2 decl" id="792loop" title='loop' data-type='sh::TIntermLoop *' data-ref="792loop" data-ref-filename="792loop">loop</dfn> = <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>()-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh11TIntermNode13getAsLoopNodeEv" title='sh::TIntermNode::getAsLoopNode' data-ref="_ZN2sh11TIntermNode13getAsLoopNodeEv" data-ref-filename="_ZN2sh11TIntermNode13getAsLoopNodeEv">getAsLoopNode</a>();</td></tr>
<tr><th id="244">244</th><td>                    <b>if</b> (<a class="local col2 ref" href="#792loop" title='loop' data-ref="792loop" data-ref-filename="792loop">loop</a> != <b>nullptr</b>)</td></tr>
<tr><th id="245">245</th><td>                    {</td></tr>
<tr><th id="246">246</th><td>                        <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mDiscontinuousLoops" title='sh::ASTMetadataHLSL::mDiscontinuousLoops' data-ref="sh::ASTMetadataHLSL::mDiscontinuousLoops" data-ref-filename="sh..ASTMetadataHLSL..mDiscontinuousLoops">mDiscontinuousLoops</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="local col2 ref" href="#792loop" title='loop' data-ref="792loop" data-ref-filename="792loop">loop</a>);</td></tr>
<tr><th id="247">247</th><td>                    }</td></tr>
<tr><th id="248">248</th><td>                }</td></tr>
<tr><th id="249">249</th><td>                <b>break</b>;</td></tr>
<tr><th id="250">250</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpContinue" title='EOpContinue' data-ref="EOpContinue" data-ref-filename="EOpContinue">EOpContinue</a>:</td></tr>
<tr><th id="251">251</th><td>                {</td></tr>
<tr><th id="252">252</th><td>                    <a class="macro" href="../../common/debug.h.html#316" title="(!mLoopsAndSwitches.empty() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 252, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 252 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;!mLoopsAndSwitches.empty()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(!<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>());</td></tr>
<tr><th id="253">253</th><td>                    <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col3 decl" id="793loop" title='loop' data-type='sh::TIntermLoop *' data-ref="793loop" data-ref-filename="793loop">loop</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="254">254</th><td>                    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="794i" title='i' data-type='size_t' data-ref="794i" data-ref-filename="794i">i</dfn>          = <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::size' data-ref="_ZNKSt3__16vector4sizeEv" data-ref-filename="_ZNKSt3__16vector4sizeEv">size</span>();</td></tr>
<tr><th id="255">255</th><td>                    <b>while</b> (<a class="local col3 ref" href="#793loop" title='loop' data-ref="793loop" data-ref-filename="793loop">loop</a> == <b>nullptr</b> &amp;&amp; <a class="local col4 ref" href="#794i" title='i' data-ref="794i" data-ref-filename="794i">i</a> &gt; <var>0</var>)</td></tr>
<tr><th id="256">256</th><td>                    {</td></tr>
<tr><th id="257">257</th><td>                        --<a class="local col4 ref" href="#794i" title='i' data-ref="794i" data-ref-filename="794i">i</a>;</td></tr>
<tr><th id="258">258</th><td>                        <a class="local col3 ref" href="#793loop" title='loop' data-ref="793loop" data-ref-filename="793loop">loop</a> = <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::at' data-ref="_ZNSt3__16vector2atENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vector2atENS_13__vector_baseIT_T0_E9size_typeE">at</span>(<a class="local col4 ref" href="#794i" title='i' data-ref="794i" data-ref-filename="794i">i</a>)-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh11TIntermNode13getAsLoopNodeEv" title='sh::TIntermNode::getAsLoopNode' data-ref="_ZN2sh11TIntermNode13getAsLoopNodeEv" data-ref-filename="_ZN2sh11TIntermNode13getAsLoopNodeEv">getAsLoopNode</a>();</td></tr>
<tr><th id="259">259</th><td>                    }</td></tr>
<tr><th id="260">260</th><td>                    <a class="macro" href="../../common/debug.h.html#316" title="(loop != nullptr ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 260, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 260 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;loop != nullptr&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col3 ref" href="#793loop" title='loop' data-ref="793loop" data-ref-filename="793loop">loop</a> != <b>nullptr</b>);</td></tr>
<tr><th id="261">261</th><td>                    <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mDiscontinuousLoops" title='sh::ASTMetadataHLSL::mDiscontinuousLoops' data-ref="sh::ASTMetadataHLSL::mDiscontinuousLoops" data-ref-filename="sh..ASTMetadataHLSL..mDiscontinuousLoops">mDiscontinuousLoops</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="local col3 ref" href="#793loop" title='loop' data-ref="793loop" data-ref-filename="793loop">loop</a>);</td></tr>
<tr><th id="262">262</th><td>                }</td></tr>
<tr><th id="263">263</th><td>                <b>break</b>;</td></tr>
<tr><th id="264">264</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpKill" title='EOpKill' data-ref="EOpKill" data-ref-filename="EOpKill">EOpKill</a>:</td></tr>
<tr><th id="265">265</th><td>                <b>case</b> <a class="enum" href="Operator.h.html#EOpReturn" title='EOpReturn' data-ref="EOpReturn" data-ref-filename="EOpReturn">EOpReturn</a>:</td></tr>
<tr><th id="266">266</th><td>                    <i>// A return or discard jumps out of all the enclosing loops</i></td></tr>
<tr><th id="267">267</th><td>                    <b>if</b> (!<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::empty' data-ref="_ZNKSt3__16vector5emptyEv" data-ref-filename="_ZNKSt3__16vector5emptyEv">empty</span>())</td></tr>
<tr><th id="268">268</th><td>                    {</td></tr>
<tr><th id="269">269</th><td>                        <b>for</b> (<a class="type" href="IntermNode.h.html#sh::TIntermNode" title='sh::TIntermNode' data-ref="sh::TIntermNode" data-ref-filename="sh..TIntermNode">TIntermNode</a> *<dfn class="local col5 decl" id="795intermNode" title='intermNode' data-type='sh::TIntermNode *' data-ref="795intermNode" data-ref-filename="795intermNode">intermNode</dfn> : <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>)</td></tr>
<tr><th id="270">270</th><td>                        {</td></tr>
<tr><th id="271">271</th><td>                            <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col6 decl" id="796loop" title='loop' data-type='sh::TIntermLoop *' data-ref="796loop" data-ref-filename="796loop">loop</dfn> = <a class="local col5 ref" href="#795intermNode" title='intermNode' data-ref="795intermNode" data-ref-filename="795intermNode">intermNode</a>-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh11TIntermNode13getAsLoopNodeEv" title='sh::TIntermNode::getAsLoopNode' data-ref="_ZN2sh11TIntermNode13getAsLoopNodeEv" data-ref-filename="_ZN2sh11TIntermNode13getAsLoopNodeEv">getAsLoopNode</a>();</td></tr>
<tr><th id="272">272</th><td>                            <b>if</b> (<a class="local col6 ref" href="#796loop" title='loop' data-ref="796loop" data-ref-filename="796loop">loop</a>)</td></tr>
<tr><th id="273">273</th><td>                            {</td></tr>
<tr><th id="274">274</th><td>                                <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mDiscontinuousLoops" title='sh::ASTMetadataHLSL::mDiscontinuousLoops' data-ref="sh::ASTMetadataHLSL::mDiscontinuousLoops" data-ref-filename="sh..ASTMetadataHLSL..mDiscontinuousLoops">mDiscontinuousLoops</a>.<span class='ref fn' title='std::__1::set::insert' data-ref="_ZNSt3__13set6insertERKT_" data-ref-filename="_ZNSt3__13set6insertERKT_">insert</span>(<a class="local col6 ref" href="#796loop" title='loop' data-ref="796loop" data-ref-filename="796loop">loop</a>);</td></tr>
<tr><th id="275">275</th><td>                            }</td></tr>
<tr><th id="276">276</th><td>                        }</td></tr>
<tr><th id="277">277</th><td>                    }</td></tr>
<tr><th id="278">278</th><td>                    <b>break</b>;</td></tr>
<tr><th id="279">279</th><td>                <b>default</b>:</td></tr>
<tr><th id="280">280</th><td>                    <a class="macro" href="../../common/debug.h.html#343" title="do { !((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 280, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Unreachable reached: &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot;(&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 280 &lt;&lt; &quot;)&quot;; } while (0)" data-ref="_M/UNREACHABLE">UNREACHABLE</a>();</td></tr>
<tr><th id="281">281</th><td>            }</td></tr>
<tr><th id="282">282</th><td>        }</td></tr>
<tr><th id="283">283</th><td></td></tr>
<tr><th id="284">284</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="285">285</th><td>    }</td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitAggregate' data-type='bool sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitAggregate(sh::Visit visit, sh::TIntermAggregate * node)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE">visitAggregate</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col7 decl" id="797visit" title='visit' data-type='sh::Visit' data-ref="797visit" data-ref-filename="797visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermAggregate" title='sh::TIntermAggregate' data-ref="sh::TIntermAggregate" data-ref-filename="sh..TIntermAggregate">TIntermAggregate</a> *<dfn class="local col8 decl" id="798node" title='node' data-type='sh::TIntermAggregate *' data-ref="798node" data-ref-filename="798node">node</dfn>) override</td></tr>
<tr><th id="288">288</th><td>    {</td></tr>
<tr><th id="289">289</th><td>        <b>if</b> (<a class="local col7 ref" href="#797visit" title='visit' data-ref="797visit" data-ref-filename="797visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a> &amp;&amp; <a class="local col8 ref" href="#798node" title='node' data-ref="798node" data-ref-filename="798node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh15TIntermOperator5getOpEv" title='sh::TIntermOperator::getOp' data-ref="_ZNK2sh15TIntermOperator5getOpEv" data-ref-filename="_ZNK2sh15TIntermOperator5getOpEv">getOp</a>() == <a class="enum" href="Operator.h.html#EOpCallFunctionInAST" title='EOpCallFunctionInAST' data-ref="EOpCallFunctionInAST" data-ref-filename="EOpCallFunctionInAST">EOpCallFunctionInAST</a>)</td></tr>
<tr><th id="290">290</th><td>        {</td></tr>
<tr><th id="291">291</th><td>            <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="799calleeIndex" title='calleeIndex' data-type='size_t' data-ref="799calleeIndex" data-ref-filename="799calleeIndex">calleeIndex</dfn> = <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mDag' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mDag">mDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" title='sh::CallDAG::findIndex' data-ref="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" data-ref-filename="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE">findIndex</a>(<a class="local col8 ref" href="#798node" title='node' data-ref="798node" data-ref-filename="798node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh16TIntermAggregate11getFunctionEv" title='sh::TIntermAggregate::getFunction' data-ref="_ZNK2sh16TIntermAggregate11getFunctionEv" data-ref-filename="_ZNK2sh16TIntermAggregate11getFunctionEv">getFunction</a>()-&gt;<a class="ref fn" href="Symbol.h.html#_ZNK2sh7TSymbol8uniqueIdEv" title='sh::TSymbol::uniqueId' data-ref="_ZNK2sh7TSymbol8uniqueIdEv" data-ref-filename="_ZNK2sh7TSymbol8uniqueIdEv">uniqueId</a>());</td></tr>
<tr><th id="292">292</th><td>            <a class="macro" href="../../common/debug.h.html#316" title="(calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 292, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 292 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col9 ref" href="#799calleeIndex" title='calleeIndex' data-ref="799calleeIndex" data-ref-filename="799calleeIndex">calleeIndex</a> != <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a>::<a class="ref" href="CallDAG.h.html#sh::CallDAG::InvalidIndex" title='sh::CallDAG::InvalidIndex' data-ref="sh::CallDAG::InvalidIndex" data-ref-filename="sh..CallDAG..InvalidIndex">InvalidIndex</a> &amp;&amp; <a class="local col9 ref" href="#799calleeIndex" title='calleeIndex' data-ref="799calleeIndex" data-ref-filename="799calleeIndex">calleeIndex</a> &lt; <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIndex' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIndex">mIndex</a>);</td></tr>
<tr><th id="293">293</th><td></td></tr>
<tr><th id="294">294</th><td>            <b>if</b> ((*<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList' data-use='r' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadataList">mMetadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col9 ref" href="#799calleeIndex" title='calleeIndex' data-ref="799calleeIndex" data-ref-filename="799calleeIndex">calleeIndex</a>]</span>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph" title='sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph' data-ref="sh::ASTMetadataHLSL::mHasGradientLoopInCallGraph" data-ref-filename="sh..ASTMetadataHLSL..mHasGradientLoopInCallGraph">mHasGradientLoopInCallGraph</a>)</td></tr>
<tr><th id="295">295</th><td>            {</td></tr>
<tr><th id="296">296</th><td>                <a class="tu member fn" href="#_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::onGradientLoop' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops14onGradientLoopEv">onGradientLoop</a>();</td></tr>
<tr><th id="297">297</th><td>            }</td></tr>
<tr><th id="298">298</th><td>        }</td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="301">301</th><td>    }</td></tr>
<tr><th id="302">302</th><td></td></tr>
<tr><th id="303">303</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitSwitchENS_5VisitEPNS_13TIntermSwitchE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitSwitch' data-type='bool sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::visitSwitch(sh::Visit visit, sh::TIntermSwitch * node)' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitSwitchENS_5VisitEPNS_13TIntermSwitchE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops11visitSwitchENS_5VisitEPNS_13TIntermSwitchE">visitSwitch</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col0 decl" id="800visit" title='visit' data-type='sh::Visit' data-ref="800visit" data-ref-filename="800visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermSwitch" title='sh::TIntermSwitch' data-ref="sh::TIntermSwitch" data-ref-filename="sh..TIntermSwitch">TIntermSwitch</a> *<dfn class="local col1 decl" id="801node" title='node' data-type='sh::TIntermSwitch *' data-ref="801node" data-ref-filename="801node">node</dfn>) override</td></tr>
<tr><th id="304">304</th><td>    {</td></tr>
<tr><th id="305">305</th><td>        <b>if</b> (<a class="local col0 ref" href="#800visit" title='visit' data-ref="800visit" data-ref-filename="800visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a>)</td></tr>
<tr><th id="306">306</th><td>        {</td></tr>
<tr><th id="307">307</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::push_back' data-ref="_ZNSt3__16vector9push_backEOT_" data-ref-filename="_ZNSt3__16vector9push_backEOT_">push_back</span>(<a class="local col1 ref" href="#801node" title='node' data-ref="801node" data-ref-filename="801node">node</a>);</td></tr>
<tr><th id="308">308</th><td>        }</td></tr>
<tr><th id="309">309</th><td>        <b>else</b> <b>if</b> (<a class="local col0 ref" href="#800visit" title='visit' data-ref="800visit" data-ref-filename="800visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PostVisit" title='sh::PostVisit' data-ref="sh::PostVisit" data-ref-filename="sh..PostVisit">PostVisit</a>)</td></tr>
<tr><th id="310">310</th><td>        {</td></tr>
<tr><th id="311">311</th><td>            <a class="macro" href="../../common/debug.h.html#316" title="(mLoopsAndSwitches.back() == node ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 311, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 311 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mLoopsAndSwitches.back() == node&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>() == <a class="local col1 ref" href="#801node" title='node' data-ref="801node" data-ref-filename="801node">node</a>);</td></tr>
<tr><th id="312">312</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-use='m' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</a>.<span class='ref fn' title='std::__1::vector::pop_back' data-ref="_ZNSt3__16vector8pop_backEv" data-ref-filename="_ZNSt3__16vector8pop_backEv">pop_back</span>();</td></tr>
<tr><th id="313">313</th><td>        }</td></tr>
<tr><th id="314">314</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="315">315</th><td>    }</td></tr>
<tr><th id="316">316</th><td></td></tr>
<tr><th id="317">317</th><td>  <b>private</b>:</td></tr>
<tr><th id="318">318</th><td>    <a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList' data-type='sh::MetadataList *' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadataList">mMetadataList</dfn>;</td></tr>
<tr><th id="319">319</th><td>    <a class="type" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL" title='sh::ASTMetadataHLSL' data-ref="sh::ASTMetadataHLSL" data-ref-filename="sh..ASTMetadataHLSL">ASTMetadataHLSL</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata' data-type='sh::ASTMetadataHLSL *' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mMetadata">mMetadata</dfn>;</td></tr>
<tr><th id="320">320</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIndex' data-type='size_t' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIndex">mIndex</dfn>;</td></tr>
<tr><th id="321">321</th><td>    <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mDag' data-type='const sh::CallDAG &amp;' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mDag">mDag</dfn>;</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="IntermNode.h.html#sh::TIntermNode" title='sh::TIntermNode' data-ref="sh::TIntermNode" data-ref-filename="sh..TIntermNode">TIntermNode</a> *&gt; <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches' data-type='std::vector&lt;TIntermNode *&gt;' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mLoopsAndSwitches" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mLoopsAndSwitches">mLoopsAndSwitches</dfn>;</td></tr>
<tr><th id="324">324</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="IntermNode.h.html#sh::TIntermIfElse" title='sh::TIntermIfElse' data-ref="sh::TIntermIfElse" data-ref-filename="sh..TIntermIfElse">TIntermIfElse</a> *&gt; <dfn class="tu decl field" id="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::mIfs' data-type='std::vector&lt;TIntermIfElse *&gt;' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops::mIfs" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops..mIfs">mIfs</dfn>;</td></tr>
<tr><th id="325">325</th><td>};</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td><i  data-doc="sh::(anonymousnamespace)::PushDiscontinuousLoops">// Tags all the functions called in a discontinuous loop</i></td></tr>
<tr><th id="328">328</th><td><b>class</b> <dfn class="tu type def" id="sh::(anonymousnamespace)::PushDiscontinuousLoops" title='sh::(anonymous namespace)::PushDiscontinuousLoops' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops">PushDiscontinuousLoops</dfn> : <b>public</b> <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a></td></tr>
<tr><th id="329">329</th><td>{</td></tr>
<tr><th id="330">330</th><td>  <b>public</b>:</td></tr>
<tr><th id="331">331</th><td>    <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::PushDiscontinuousLoops' data-type='void sh::(anonymous namespace)::PushDiscontinuousLoops::PushDiscontinuousLoops(sh::MetadataList * metadataList, size_t index, const sh::CallDAG &amp; dag)' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">PushDiscontinuousLoops</dfn>(<a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="local col2 decl" id="802metadataList" title='metadataList' data-type='sh::MetadataList *' data-ref="802metadataList" data-ref-filename="802metadataList">metadataList</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="803index" title='index' data-type='size_t' data-ref="803index" data-ref-filename="803index">index</dfn>, <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="local col4 decl" id="804dag" title='dag' data-type='const sh::CallDAG &amp;' data-ref="804dag" data-ref-filename="804dag">dag</dfn>)</td></tr>
<tr><th id="332">332</th><td>        : <a class="type" href="tree_util/IntermTraverse.h.html#sh::TIntermTraverser" title='sh::TIntermTraverser' data-ref="sh::TIntermTraverser" data-ref-filename="sh..TIntermTraverser">TIntermTraverser</a><a class="ref fn" href="tree_util/IntermTraverse.h.html#_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" title='sh::TIntermTraverser::TIntermTraverser' data-ref="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE" data-ref-filename="_ZN2sh16TIntermTraverserC1EbbbPNS_12TSymbolTableE">(</a><b>true</b>, <b>true</b>, <b>true</b>),</td></tr>
<tr><th id="333">333</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadataList' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadataList">mMetadataList</a>(<a class="local col2 ref" href="#802metadataList" title='metadataList' data-ref="802metadataList" data-ref-filename="802metadataList">metadataList</a>),</td></tr>
<tr><th id="334">334</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadata' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadata">mMetadata</a>(&amp;(*<a class="local col2 ref" href="#802metadataList" title='metadataList' data-ref="802metadataList" data-ref-filename="802metadataList">metadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col3 ref" href="#803index" title='index' data-ref="803index" data-ref-filename="803index">index</a>]</span>),</td></tr>
<tr><th id="335">335</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mIndex' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mIndex">mIndex</a>(<a class="local col3 ref" href="#803index" title='index' data-ref="803index" data-ref-filename="803index">index</a>),</td></tr>
<tr><th id="336">336</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mDag' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mDag">mDag</a>(<a class="local col4 ref" href="#804dag" title='dag' data-ref="804dag" data-ref-filename="804dag">dag</a>),</td></tr>
<tr><th id="337">337</th><td>          <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" title='sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop' data-ref="sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" data-ref-filename="sh..ASTMetadataHLSL..mCalledInDiscontinuousLoop">mCalledInDiscontinuousLoop</a> ? <var>1</var> : <var>0</var>)</td></tr>
<tr><th id="338">338</th><td>    {}</td></tr>
<tr><th id="339">339</th><td></td></tr>
<tr><th id="340">340</th><td>    <em>void</em> <dfn class="tu decl def fn" id="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::traverse' data-type='void sh::(anonymous namespace)::PushDiscontinuousLoops::traverse(sh::TIntermFunctionDefinition * node)' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE">traverse</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermFunctionDefinition" title='sh::TIntermFunctionDefinition' data-ref="sh::TIntermFunctionDefinition" data-ref-filename="sh..TIntermFunctionDefinition">TIntermFunctionDefinition</a> *<dfn class="local col5 decl" id="805node" title='node' data-type='sh::TIntermFunctionDefinition *' data-ref="805node" data-ref-filename="805node">node</dfn>)</td></tr>
<tr><th id="341">341</th><td>    {</td></tr>
<tr><th id="342">342</th><td>        <a class="local col5 ref" href="#805node" title='node' data-ref="805node" data-ref-filename="805node">node</a>-&gt;<a class="virtual ref fn" href="IntermNode.h.html#_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" title='sh::TIntermFunctionDefinition::traverse' data-ref="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE" data-ref-filename="_ZN2sh25TIntermFunctionDefinition8traverseEPNS_16TIntermTraverserE">traverse</a>(<b>this</b>);</td></tr>
<tr><th id="343">343</th><td>        <a class="macro" href="../../common/debug.h.html#316" title="(mNestedDiscont == (mMetadata-&gt;mCalledInDiscontinuousLoop ? 1 : 0) ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 343, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 343 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mNestedDiscont == (mMetadata-&gt;mCalledInDiscontinuousLoop ? 1 : 0)&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</a> == (<a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" title='sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop' data-ref="sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" data-ref-filename="sh..ASTMetadataHLSL..mCalledInDiscontinuousLoop">mCalledInDiscontinuousLoop</a> ? <var>1</var> : <var>0</var>));</td></tr>
<tr><th id="344">344</th><td>    }</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::visitLoop' data-type='bool sh::(anonymous namespace)::PushDiscontinuousLoops::visitLoop(sh::Visit visit, sh::TIntermLoop * loop)' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops9visitLoopENS_5VisitEPNS_11TIntermLoopE">visitLoop</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col6 decl" id="806visit" title='visit' data-type='sh::Visit' data-ref="806visit" data-ref-filename="806visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col7 decl" id="807loop" title='loop' data-type='sh::TIntermLoop *' data-ref="807loop" data-ref-filename="807loop">loop</dfn>) override</td></tr>
<tr><th id="347">347</th><td>    {</td></tr>
<tr><th id="348">348</th><td>        <em>bool</em> <dfn class="local col8 decl" id="808isDiscontinuous" title='isDiscontinuous' data-type='bool' data-ref="808isDiscontinuous" data-ref-filename="808isDiscontinuous">isDiscontinuous</dfn> = <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadata' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadata">mMetadata</a>-&gt;<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mDiscontinuousLoops" title='sh::ASTMetadataHLSL::mDiscontinuousLoops' data-ref="sh::ASTMetadataHLSL::mDiscontinuousLoops" data-ref-filename="sh..ASTMetadataHLSL..mDiscontinuousLoops">mDiscontinuousLoops</a>.<span class='ref fn' title='std::__1::set::count' data-ref="_ZNKSt3__13set5countERKT_" data-ref-filename="_ZNKSt3__13set5countERKT_">count</span>(<a class="local col7 ref" href="#807loop" title='loop' data-ref="807loop" data-ref-filename="807loop">loop</a>) &gt; <var>0</var>;</td></tr>
<tr><th id="349">349</th><td></td></tr>
<tr><th id="350">350</th><td>        <b>if</b> (<a class="local col6 ref" href="#806visit" title='visit' data-ref="806visit" data-ref-filename="806visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a> &amp;&amp; <a class="local col8 ref" href="#808isDiscontinuous" title='isDiscontinuous' data-ref="808isDiscontinuous" data-ref-filename="808isDiscontinuous">isDiscontinuous</a>)</td></tr>
<tr><th id="351">351</th><td>        {</td></tr>
<tr><th id="352">352</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</a>++;</td></tr>
<tr><th id="353">353</th><td>        }</td></tr>
<tr><th id="354">354</th><td>        <b>else</b> <b>if</b> (<a class="local col6 ref" href="#806visit" title='visit' data-ref="806visit" data-ref-filename="806visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PostVisit" title='sh::PostVisit' data-ref="sh::PostVisit" data-ref-filename="sh..PostVisit">PostVisit</a> &amp;&amp; <a class="local col8 ref" href="#808isDiscontinuous" title='isDiscontinuous' data-ref="808isDiscontinuous" data-ref-filename="808isDiscontinuous">isDiscontinuous</a>)</td></tr>
<tr><th id="355">355</th><td>        {</td></tr>
<tr><th id="356">356</th><td>            <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-use='w' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</a>--;</td></tr>
<tr><th id="357">357</th><td>        }</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="360">360</th><td>    }</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>    <em>bool</em> <dfn class="virtual tu decl def fn" id="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::visitAggregate' data-type='bool sh::(anonymous namespace)::PushDiscontinuousLoops::visitAggregate(sh::Visit visit, sh::TIntermAggregate * node)' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops14visitAggregateENS_5VisitEPNS_16TIntermAggregateE">visitAggregate</dfn>(<a class="type" href="tree_util/Visit.h.html#sh::Visit" title='sh::Visit' data-ref="sh::Visit" data-ref-filename="sh..Visit">Visit</a> <dfn class="local col9 decl" id="809visit" title='visit' data-type='sh::Visit' data-ref="809visit" data-ref-filename="809visit">visit</dfn>, <a class="type" href="IntermNode.h.html#sh::TIntermAggregate" title='sh::TIntermAggregate' data-ref="sh::TIntermAggregate" data-ref-filename="sh..TIntermAggregate">TIntermAggregate</a> *<dfn class="local col0 decl" id="810node" title='node' data-type='sh::TIntermAggregate *' data-ref="810node" data-ref-filename="810node">node</dfn>) override</td></tr>
<tr><th id="363">363</th><td>    {</td></tr>
<tr><th id="364">364</th><td>        <b>switch</b> (<a class="local col0 ref" href="#810node" title='node' data-ref="810node" data-ref-filename="810node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh15TIntermOperator5getOpEv" title='sh::TIntermOperator::getOp' data-ref="_ZNK2sh15TIntermOperator5getOpEv" data-ref-filename="_ZNK2sh15TIntermOperator5getOpEv">getOp</a>())</td></tr>
<tr><th id="365">365</th><td>        {</td></tr>
<tr><th id="366">366</th><td>            <b>case</b> <a class="enum" href="Operator.h.html#EOpCallFunctionInAST" title='EOpCallFunctionInAST' data-ref="EOpCallFunctionInAST" data-ref-filename="EOpCallFunctionInAST">EOpCallFunctionInAST</a>:</td></tr>
<tr><th id="367">367</th><td>                <b>if</b> (<a class="local col9 ref" href="#809visit" title='visit' data-ref="809visit" data-ref-filename="809visit">visit</a> == <a class="enum" href="tree_util/Visit.h.html#sh::PreVisit" title='sh::PreVisit' data-ref="sh::PreVisit" data-ref-filename="sh..PreVisit">PreVisit</a> &amp;&amp; <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</a> &gt; <var>0</var>)</td></tr>
<tr><th id="368">368</th><td>                {</td></tr>
<tr><th id="369">369</th><td>                    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="811calleeIndex" title='calleeIndex' data-type='size_t' data-ref="811calleeIndex" data-ref-filename="811calleeIndex">calleeIndex</dfn> = <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mDag' data-use='m' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mDag">mDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" title='sh::CallDAG::findIndex' data-ref="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE" data-ref-filename="_ZNK2sh7CallDAG9findIndexERKNS_15TSymbolUniqueIdE">findIndex</a>(<a class="local col0 ref" href="#810node" title='node' data-ref="810node" data-ref-filename="810node">node</a>-&gt;<a class="ref fn" href="IntermNode.h.html#_ZNK2sh16TIntermAggregate11getFunctionEv" title='sh::TIntermAggregate::getFunction' data-ref="_ZNK2sh16TIntermAggregate11getFunctionEv" data-ref-filename="_ZNK2sh16TIntermAggregate11getFunctionEv">getFunction</a>()-&gt;<a class="ref fn" href="Symbol.h.html#_ZNK2sh7TSymbol8uniqueIdEv" title='sh::TSymbol::uniqueId' data-ref="_ZNK2sh7TSymbol8uniqueIdEv" data-ref-filename="_ZNK2sh7TSymbol8uniqueIdEv">uniqueId</a>());</td></tr>
<tr><th id="370">370</th><td>                    <a class="macro" href="../../common/debug.h.html#316" title="(calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot;, __FUNCTION__, 370, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/compiler/translator/ASTMetadataHLSL.cpp&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 370 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;calleeIndex != CallDAG::InvalidIndex &amp;&amp; calleeIndex &lt; mIndex&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#811calleeIndex" title='calleeIndex' data-ref="811calleeIndex" data-ref-filename="811calleeIndex">calleeIndex</a> != <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a>::<a class="ref" href="CallDAG.h.html#sh::CallDAG::InvalidIndex" title='sh::CallDAG::InvalidIndex' data-ref="sh::CallDAG::InvalidIndex" data-ref-filename="sh..CallDAG..InvalidIndex">InvalidIndex</a> &amp;&amp; <a class="local col1 ref" href="#811calleeIndex" title='calleeIndex' data-ref="811calleeIndex" data-ref-filename="811calleeIndex">calleeIndex</a> &lt; <a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mIndex' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mIndex">mIndex</a>);</td></tr>
<tr><th id="371">371</th><td></td></tr>
<tr><th id="372">372</th><td>                    (*<a class="tu member field" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadataList' data-use='r' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadataList">mMetadataList</a>)<span class='ref fn' title='std::__1::vector::operator[]' data-ref="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorixENS_13__vector_baseIT_T0_E9size_typeE">[<a class="local col1 ref" href="#811calleeIndex" title='calleeIndex' data-ref="811calleeIndex" data-ref-filename="811calleeIndex">calleeIndex</a>]</span>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" title='sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop' data-ref="sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" data-ref-filename="sh..ASTMetadataHLSL..mCalledInDiscontinuousLoop">mCalledInDiscontinuousLoop</a> = <b>true</b>;</td></tr>
<tr><th id="373">373</th><td>                }</td></tr>
<tr><th id="374">374</th><td>                <b>break</b>;</td></tr>
<tr><th id="375">375</th><td>            <b>default</b>:</td></tr>
<tr><th id="376">376</th><td>                <b>break</b>;</td></tr>
<tr><th id="377">377</th><td>        }</td></tr>
<tr><th id="378">378</th><td>        <b>return</b> <b>true</b>;</td></tr>
<tr><th id="379">379</th><td>    }</td></tr>
<tr><th id="380">380</th><td></td></tr>
<tr><th id="381">381</th><td>  <b>private</b>:</td></tr>
<tr><th id="382">382</th><td>    <a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadataList' data-type='sh::MetadataList *' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadataList" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadataList">mMetadataList</dfn>;</td></tr>
<tr><th id="383">383</th><td>    <a class="type" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL" title='sh::ASTMetadataHLSL' data-ref="sh::ASTMetadataHLSL" data-ref-filename="sh..ASTMetadataHLSL">ASTMetadataHLSL</a> *<dfn class="tu decl field" id="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mMetadata' data-type='sh::ASTMetadataHLSL *' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mMetadata" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mMetadata">mMetadata</dfn>;</td></tr>
<tr><th id="384">384</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl field" id="sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mIndex' data-type='size_t' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mIndex" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mIndex">mIndex</dfn>;</td></tr>
<tr><th id="385">385</th><td>    <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="tu decl field" id="sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mDag' data-type='const sh::CallDAG &amp;' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mDag" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mDag">mDag</dfn>;</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td>    <em>int</em> <dfn class="tu decl field" id="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" title='sh::(anonymous namespace)::PushDiscontinuousLoops::mNestedDiscont' data-type='int' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops::mNestedDiscont" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops..mNestedDiscont">mNestedDiscont</dfn>;</td></tr>
<tr><th id="388">388</th><td>};</td></tr>
<tr><th id="389">389</th><td>}  <i>// namespace</i></td></tr>
<tr><th id="390">390</th><td></td></tr>
<tr><th id="391">391</th><td><em>bool</em> <a class="type" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL" title='sh::ASTMetadataHLSL' data-ref="sh::ASTMetadataHLSL" data-ref-filename="sh..ASTMetadataHLSL">ASTMetadataHLSL</a>::<dfn class="decl def fn" id="_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE" title='sh::ASTMetadataHLSL::hasGradientInCallGraph' data-ref="_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE" data-ref-filename="_ZN2sh15ASTMetadataHLSL22hasGradientInCallGraphEPNS_11TIntermLoopE">hasGradientInCallGraph</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermLoop" title='sh::TIntermLoop' data-ref="sh::TIntermLoop" data-ref-filename="sh..TIntermLoop">TIntermLoop</a> *<dfn class="local col2 decl" id="812node" title='node' data-type='sh::TIntermLoop *' data-ref="812node" data-ref-filename="812node">node</dfn>)</td></tr>
<tr><th id="392">392</th><td>{</td></tr>
<tr><th id="393">393</th><td>    <b>return</b> <a class="member field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mControlFlowsContainingGradient" title='sh::ASTMetadataHLSL::mControlFlowsContainingGradient' data-ref="sh::ASTMetadataHLSL::mControlFlowsContainingGradient" data-ref-filename="sh..ASTMetadataHLSL..mControlFlowsContainingGradient">mControlFlowsContainingGradient</a>.<span class='ref fn' title='std::__1::set::count' data-ref="_ZNKSt3__13set5countERKT_" data-ref-filename="_ZNKSt3__13set5countERKT_">count</span>(<a class="local col2 ref" href="#812node" title='node' data-ref="812node" data-ref-filename="812node">node</a>) &gt; <var>0</var>;</td></tr>
<tr><th id="394">394</th><td>}</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td><em>bool</em> <a class="type" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL" title='sh::ASTMetadataHLSL' data-ref="sh::ASTMetadataHLSL" data-ref-filename="sh..ASTMetadataHLSL">ASTMetadataHLSL</a>::<dfn class="decl def fn" id="_ZN2sh15ASTMetadataHLSL15hasGradientLoopEPNS_13TIntermIfElseE" title='sh::ASTMetadataHLSL::hasGradientLoop' data-ref="_ZN2sh15ASTMetadataHLSL15hasGradientLoopEPNS_13TIntermIfElseE" data-ref-filename="_ZN2sh15ASTMetadataHLSL15hasGradientLoopEPNS_13TIntermIfElseE">hasGradientLoop</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermIfElse" title='sh::TIntermIfElse' data-ref="sh::TIntermIfElse" data-ref-filename="sh..TIntermIfElse">TIntermIfElse</a> *<dfn class="local col3 decl" id="813node" title='node' data-type='sh::TIntermIfElse *' data-ref="813node" data-ref-filename="813node">node</dfn>)</td></tr>
<tr><th id="397">397</th><td>{</td></tr>
<tr><th id="398">398</th><td>    <b>return</b> <a class="member field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mIfsContainingGradientLoop" title='sh::ASTMetadataHLSL::mIfsContainingGradientLoop' data-ref="sh::ASTMetadataHLSL::mIfsContainingGradientLoop" data-ref-filename="sh..ASTMetadataHLSL..mIfsContainingGradientLoop">mIfsContainingGradientLoop</a>.<span class='ref fn' title='std::__1::set::count' data-ref="_ZNKSt3__13set5countERKT_" data-ref-filename="_ZNKSt3__13set5countERKT_">count</span>(<a class="local col3 ref" href="#813node" title='node' data-ref="813node" data-ref-filename="813node">node</a>) &gt; <var>0</var>;</td></tr>
<tr><th id="399">399</th><td>}</td></tr>
<tr><th id="400">400</th><td></td></tr>
<tr><th id="401">401</th><td><a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> <dfn class="decl def fn" id="_ZN2sh21CreateASTMetadataHLSLEPNS_11TIntermNodeERKNS_7CallDAGE" title='sh::CreateASTMetadataHLSL' data-ref="_ZN2sh21CreateASTMetadataHLSLEPNS_11TIntermNodeERKNS_7CallDAGE" data-ref-filename="_ZN2sh21CreateASTMetadataHLSLEPNS_11TIntermNodeERKNS_7CallDAGE">CreateASTMetadataHLSL</dfn>(<a class="type" href="IntermNode.h.html#sh::TIntermNode" title='sh::TIntermNode' data-ref="sh::TIntermNode" data-ref-filename="sh..TIntermNode">TIntermNode</a> *<dfn class="local col4 decl" id="814root" title='root' data-type='sh::TIntermNode *' data-ref="814root" data-ref-filename="814root">root</dfn>, <em>const</em> <a class="type" href="CallDAG.h.html#sh::CallDAG" title='sh::CallDAG' data-ref="sh::CallDAG" data-ref-filename="sh..CallDAG">CallDAG</a> &amp;<dfn class="local col5 decl" id="815callDag" title='callDag' data-type='const sh::CallDAG &amp;' data-ref="815callDag" data-ref-filename="815callDag">callDag</dfn>)</td></tr>
<tr><th id="402">402</th><td>{</td></tr>
<tr><th id="403">403</th><td>    <a class="typedef" href="ASTMetadataHLSL.h.html#sh::MetadataList" title='sh::MetadataList' data-type='std::vector&lt;ASTMetadataHLSL&gt;' data-ref="sh::MetadataList" data-ref-filename="sh..MetadataList">MetadataList</a> <dfn class="local col6 decl" id="816metadataList" title='metadataList' data-type='sh::MetadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</dfn><span class='ref fn' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1ENS_13__vector_baseIT_T0_E9size_typeE" data-ref-filename="_ZNSt3__16vectorC1ENS_13__vector_baseIT_T0_E9size_typeE">(</span><a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG4sizeEv" title='sh::CallDAG::size' data-ref="_ZNK2sh7CallDAG4sizeEv" data-ref-filename="_ZNK2sh7CallDAG4sizeEv">size</a>());</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td>    <i>// Compute all the information related to when gradient operations are used.</i></td></tr>
<tr><th id="406">406</th><td><i>    // We want to know for each function and control flow operation if they have</i></td></tr>
<tr><th id="407">407</th><td><i>    // a gradient operation in their call graph (shortened to "using a gradient"</i></td></tr>
<tr><th id="408">408</th><td><i>    // in the rest of the file).</i></td></tr>
<tr><th id="409">409</th><td><i>    //</i></td></tr>
<tr><th id="410">410</th><td><i>    // This computation is logically split in three steps:</i></td></tr>
<tr><th id="411">411</th><td><i>    //  1 - For each function compute if it uses a gradient in its body, ignoring</i></td></tr>
<tr><th id="412">412</th><td><i>    // calls to other user-defined functions.</i></td></tr>
<tr><th id="413">413</th><td><i>    //  2 - For each function determine if it uses a gradient in its call graph,</i></td></tr>
<tr><th id="414">414</th><td><i>    // using the result of step 1 and the CallDAG to know its callees.</i></td></tr>
<tr><th id="415">415</th><td><i>    //  3 - For each control flow statement of each function, check if it uses a</i></td></tr>
<tr><th id="416">416</th><td><i>    // gradient in the function's body, or if it calls a user-defined function that</i></td></tr>
<tr><th id="417">417</th><td><i>    // uses a gradient.</i></td></tr>
<tr><th id="418">418</th><td><i>    //</i></td></tr>
<tr><th id="419">419</th><td><i>    // We take advantage of the call graph being a DAG and instead compute 1, 2 and 3</i></td></tr>
<tr><th id="420">420</th><td><i>    // for leaves first, then going down the tree. This is correct because 1 doesn't</i></td></tr>
<tr><th id="421">421</th><td><i>    // depend on other functions, and 2 and 3 depend only on callees.</i></td></tr>
<tr><th id="422">422</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="817i" title='i' data-type='size_t' data-ref="817i" data-ref-filename="817i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#817i" title='i' data-ref="817i" data-ref-filename="817i">i</a> &lt; <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG4sizeEv" title='sh::CallDAG::size' data-ref="_ZNK2sh7CallDAG4sizeEv" data-ref-filename="_ZNK2sh7CallDAG4sizeEv">size</a>(); <a class="local col7 ref" href="#817i" title='i' data-ref="817i" data-ref-filename="817i">i</a>++)</td></tr>
<tr><th id="423">423</th><td>    {</td></tr>
<tr><th id="424">424</th><td>        <a class="tu type" href="#sh::(anonymousnamespace)::PullGradient" title='sh::(anonymous namespace)::PullGradient' data-ref="sh::(anonymousnamespace)::PullGradient" data-ref-filename="sh..(anonymousnamespace)..PullGradient">PullGradient</a> <dfn class="local col8 decl" id="818pull" title='pull' data-type='sh::(anonymous namespace)::PullGradient' data-ref="818pull" data-ref-filename="818pull">pull</dfn><a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PullGradient::PullGradient' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradientC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">(</a>&amp;<a class="local col6 ref" href="#816metadataList" title='metadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</a>, <a class="local col7 ref" href="#817i" title='i' data-ref="817i" data-ref-filename="817i">i</a>, <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>);</td></tr>
<tr><th id="425">425</th><td>        <a class="local col8 ref" href="#818pull" title='pull' data-ref="818pull" data-ref-filename="818pull">pull</a>.<a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PullGradient::traverse' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_112PullGradient8traverseEPNS_25TIntermFunctionDefinitionE">traverse</a>(<a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG18getRecordFromIndexEm" title='sh::CallDAG::getRecordFromIndex' data-ref="_ZNK2sh7CallDAG18getRecordFromIndexEm" data-ref-filename="_ZNK2sh7CallDAG18getRecordFromIndexEm">getRecordFromIndex</a>(<a class="local col7 ref" href="#817i" title='i' data-ref="817i" data-ref-filename="817i">i</a>).<a class="ref field" href="CallDAG.h.html#sh::CallDAG::Record::node" title='sh::CallDAG::Record::node' data-ref="sh::CallDAG::Record::node" data-ref-filename="sh..CallDAG..Record..node">node</a>);</td></tr>
<tr><th id="426">426</th><td>    }</td></tr>
<tr><th id="427">427</th><td></td></tr>
<tr><th id="428">428</th><td>    <i>// Compute which loops are discontinuous and which function are called in</i></td></tr>
<tr><th id="429">429</th><td><i>    // these loops. The same way computing gradient usage is a "pull" process,</i></td></tr>
<tr><th id="430">430</th><td><i>    // computing "bing used in a discont. loop" is a push process. However we also</i></td></tr>
<tr><th id="431">431</th><td><i>    // need to know what ifs have a discontinuous loop inside so we do the same type</i></td></tr>
<tr><th id="432">432</th><td><i>    // of callgraph analysis as for the gradient.</i></td></tr>
<tr><th id="433">433</th><td><i></i></td></tr>
<tr><th id="434">434</th><td><i>    // First compute which loops are discontinuous (no specific order) and pull</i></td></tr>
<tr><th id="435">435</th><td><i>    // the ifs and functions using a gradient loop.</i></td></tr>
<tr><th id="436">436</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="819i" title='i' data-type='size_t' data-ref="819i" data-ref-filename="819i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#819i" title='i' data-ref="819i" data-ref-filename="819i">i</a> &lt; <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG4sizeEv" title='sh::CallDAG::size' data-ref="_ZNK2sh7CallDAG4sizeEv" data-ref-filename="_ZNK2sh7CallDAG4sizeEv">size</a>(); <a class="local col9 ref" href="#819i" title='i' data-ref="819i" data-ref-filename="819i">i</a>++)</td></tr>
<tr><th id="437">437</th><td>    {</td></tr>
<tr><th id="438">438</th><td>        <a class="tu type" href="#sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops' data-ref="sh::(anonymousnamespace)::PullComputeDiscontinuousAndGradientLoops" data-ref-filename="sh..(anonymousnamespace)..PullComputeDiscontinuousAndGradientLoops">PullComputeDiscontinuousAndGradientLoops</a> <dfn class="local col0 decl" id="820pull" title='pull' data-type='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops' data-ref="820pull" data-ref-filename="820pull">pull</dfn><a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::PullComputeDiscontinuousAndGradientLoops' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">(</a>&amp;<a class="local col6 ref" href="#816metadataList" title='metadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</a>, <a class="local col9 ref" href="#819i" title='i' data-ref="819i" data-ref-filename="819i">i</a>, <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>);</td></tr>
<tr><th id="439">439</th><td>        <a class="local col0 ref" href="#820pull" title='pull' data-ref="820pull" data-ref-filename="820pull">pull</a>.<a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PullComputeDiscontinuousAndGradientLoops::traverse' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_140PullComputeDiscontinuousAndGradientLoops8traverseEPNS_25TIntermFunctionDefinitionE">traverse</a>(<a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG18getRecordFromIndexEm" title='sh::CallDAG::getRecordFromIndex' data-ref="_ZNK2sh7CallDAG18getRecordFromIndexEm" data-ref-filename="_ZNK2sh7CallDAG18getRecordFromIndexEm">getRecordFromIndex</a>(<a class="local col9 ref" href="#819i" title='i' data-ref="819i" data-ref-filename="819i">i</a>).<a class="ref field" href="CallDAG.h.html#sh::CallDAG::Record::node" title='sh::CallDAG::Record::node' data-ref="sh::CallDAG::Record::node" data-ref-filename="sh..CallDAG..Record..node">node</a>);</td></tr>
<tr><th id="440">440</th><td>    }</td></tr>
<tr><th id="441">441</th><td></td></tr>
<tr><th id="442">442</th><td>    <i>// Then push the information to callees, either from the a local discontinuous</i></td></tr>
<tr><th id="443">443</th><td><i>    // loop or from the caller being called in a discontinuous loop already</i></td></tr>
<tr><th id="444">444</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="821i" title='i' data-type='size_t' data-ref="821i" data-ref-filename="821i">i</dfn> = <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG4sizeEv" title='sh::CallDAG::size' data-ref="_ZNK2sh7CallDAG4sizeEv" data-ref-filename="_ZNK2sh7CallDAG4sizeEv">size</a>(); <a class="local col1 ref" href="#821i" title='i' data-ref="821i" data-ref-filename="821i">i</a>-- &gt; <var>0</var>;)</td></tr>
<tr><th id="445">445</th><td>    {</td></tr>
<tr><th id="446">446</th><td>        <a class="tu type" href="#sh::(anonymousnamespace)::PushDiscontinuousLoops" title='sh::(anonymous namespace)::PushDiscontinuousLoops' data-ref="sh::(anonymousnamespace)::PushDiscontinuousLoops" data-ref-filename="sh..(anonymousnamespace)..PushDiscontinuousLoops">PushDiscontinuousLoops</a> <dfn class="local col2 decl" id="822push" title='push' data-type='sh::(anonymous namespace)::PushDiscontinuousLoops' data-ref="822push" data-ref-filename="822push">push</dfn><a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::PushDiscontinuousLoops' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoopsC1EPNSt3__16vectorINS_15ASTMetadataHLSLENS2_9allocatorIS4_EEEEmRKNS_7CallDAGE">(</a>&amp;<a class="local col6 ref" href="#816metadataList" title='metadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</a>, <a class="local col1 ref" href="#821i" title='i' data-ref="821i" data-ref-filename="821i">i</a>, <a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>);</td></tr>
<tr><th id="447">447</th><td>        <a class="local col2 ref" href="#822push" title='push' data-ref="822push" data-ref-filename="822push">push</a>.<a class="tu ref fn" href="#_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE" title='sh::(anonymous namespace)::PushDiscontinuousLoops::traverse' data-use='c' data-ref="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE" data-ref-filename="_ZN2sh12_GLOBAL__N_122PushDiscontinuousLoops8traverseEPNS_25TIntermFunctionDefinitionE">traverse</a>(<a class="local col5 ref" href="#815callDag" title='callDag' data-ref="815callDag" data-ref-filename="815callDag">callDag</a>.<a class="ref fn" href="CallDAG.h.html#_ZNK2sh7CallDAG18getRecordFromIndexEm" title='sh::CallDAG::getRecordFromIndex' data-ref="_ZNK2sh7CallDAG18getRecordFromIndexEm" data-ref-filename="_ZNK2sh7CallDAG18getRecordFromIndexEm">getRecordFromIndex</a>(<a class="local col1 ref" href="#821i" title='i' data-ref="821i" data-ref-filename="821i">i</a>).<a class="ref field" href="CallDAG.h.html#sh::CallDAG::Record::node" title='sh::CallDAG::Record::node' data-ref="sh::CallDAG::Record::node" data-ref-filename="sh..CallDAG..Record..node">node</a>);</td></tr>
<tr><th id="448">448</th><td>    }</td></tr>
<tr><th id="449">449</th><td></td></tr>
<tr><th id="450">450</th><td>    <i>// We create "Lod0" version of functions with the gradient operations replaced</i></td></tr>
<tr><th id="451">451</th><td><i>    // by non-gradient operations so that the D3D compiler is happier with discont</i></td></tr>
<tr><th id="452">452</th><td><i>    // loops.</i></td></tr>
<tr><th id="453">453</th><td>    <b>for</b> (<em>auto</em> &amp;<dfn class="local col3 decl" id="823metadata" title='metadata' data-type='sh::ASTMetadataHLSL &amp;' data-ref="823metadata" data-ref-filename="823metadata">metadata</dfn> : <a class="local col6 ref" href="#816metadataList" title='metadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</a>)</td></tr>
<tr><th id="454">454</th><td>    {</td></tr>
<tr><th id="455">455</th><td>        <a class="local col3 ref" href="#823metadata" title='metadata' data-ref="823metadata" data-ref-filename="823metadata">metadata</a>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mNeedsLod0" title='sh::ASTMetadataHLSL::mNeedsLod0' data-ref="sh::ASTMetadataHLSL::mNeedsLod0" data-ref-filename="sh..ASTMetadataHLSL..mNeedsLod0">mNeedsLod0</a> = <a class="local col3 ref" href="#823metadata" title='metadata' data-ref="823metadata" data-ref-filename="823metadata">metadata</a>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" title='sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop' data-ref="sh::ASTMetadataHLSL::mCalledInDiscontinuousLoop" data-ref-filename="sh..ASTMetadataHLSL..mCalledInDiscontinuousLoop">mCalledInDiscontinuousLoop</a> &amp;&amp; <a class="local col3 ref" href="#823metadata" title='metadata' data-ref="823metadata" data-ref-filename="823metadata">metadata</a>.<a class="ref field" href="ASTMetadataHLSL.h.html#sh::ASTMetadataHLSL::mUsesGradient" title='sh::ASTMetadataHLSL::mUsesGradient' data-ref="sh::ASTMetadataHLSL::mUsesGradient" data-ref-filename="sh..ASTMetadataHLSL..mUsesGradient">mUsesGradient</a>;</td></tr>
<tr><th id="456">456</th><td>    }</td></tr>
<tr><th id="457">457</th><td></td></tr>
<tr><th id="458">458</th><td>    <b>return</b> <a class="local col6 ref" href="#816metadataList" title='metadataList' data-ref="816metadataList" data-ref-filename="816metadataList">metadataList</a>;</td></tr>
<tr><th id="459">459</th><td>}</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td>}  <i>// namespace sh</i></td></tr>
<tr><th id="462">462</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
