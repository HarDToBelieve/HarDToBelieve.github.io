<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BufferMtl.mm source code [webkit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm'; var root_path = '../../../../../../../..'; var data_path = '../../../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../../..'>webkit</a>/<a href='../../../../../..'>Source</a>/<a href='../../../../..'>ThirdParty</a>/<a href='../../../..'>ANGLE</a>/<a href='../../..'>src</a>/<a href='../..'>libANGLE</a>/<a href='..'>renderer</a>/<a href='./'>metal</a>/<a href='BufferMtl.mm.html'>BufferMtl.mm</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//</i></td></tr>
<tr><th id="2">2</th><td><i>// Copyright 2019 The ANGLE Project Authors. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i>// Use of this source code is governed by a BSD-style license that can be</i></td></tr>
<tr><th id="4">4</th><td><i>// found in the LICENSE file.</i></td></tr>
<tr><th id="5">5</th><td><i>//</i></td></tr>
<tr><th id="6">6</th><td><i>// BufferMtl.mm:</i></td></tr>
<tr><th id="7">7</th><td><i>//    Implements the class methods for BufferMtl.</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td></td></tr>
<tr><th id="10">10</th><td><u>#include <a href="BufferMtl.h.html">"libANGLE/renderer/metal/BufferMtl.h"</a></u></td></tr>
<tr><th id="11">11</th><td></td></tr>
<tr><th id="12">12</th><td><u>#include <a href="../../../common/debug.h.html">"common/debug.h"</a></u></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="../../../common/utilities.h.html">"common/utilities.h"</a></u></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="ContextMtl.h.html">"libANGLE/renderer/metal/ContextMtl.h"</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="DisplayMtl.h.html">"libANGLE/renderer/metal/DisplayMtl.h"</a></u></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><b>namespace</b> <span class="namespace">rx</span></td></tr>
<tr><th id="18">18</th><td>{</td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><b>namespace</b></td></tr>
<tr><th id="21">21</th><td>{</td></tr>
<tr><th id="22">22</th><td></td></tr>
<tr><th id="23">23</th><td><i  data-doc="rx::(anonymousnamespace)::kConvertedElementArrayBufferInitialSize">// Start with a fairly small buffer size. We can increase this dynamically as we convert more data.</i></td></tr>
<tr><th id="24">24</th><td><b>constexpr</b> <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl def" id="rx::(anonymousnamespace)::kConvertedElementArrayBufferInitialSize" title='rx::(anonymous namespace)::kConvertedElementArrayBufferInitialSize' data-type='const size_t' data-ref="rx::(anonymousnamespace)::kConvertedElementArrayBufferInitialSize" data-ref-filename="rx..(anonymousnamespace)..kConvertedElementArrayBufferInitialSize">kConvertedElementArrayBufferInitialSize</dfn> = <var>1024</var> * <var>8</var>;</td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><i  data-doc="rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize">// The max size that we will use buffer pool for dynamic update.</i></td></tr>
<tr><th id="27">27</th><td><i  data-doc="rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize">// If the buffer size exceeds this limit, we will use only one buffer instead of using the pool.</i></td></tr>
<tr><th id="28">28</th><td><b>constexpr</b> <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="tu decl def" id="rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize" title='rx::(anonymous namespace)::kDynamicBufferPoolMaxBufSize' data-type='const size_t' data-ref="rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize" data-ref-filename="rx..(anonymousnamespace)..kDynamicBufferPoolMaxBufSize">kDynamicBufferPoolMaxBufSize</dfn> = <var>128</var> * <var>1024</var>;</td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><b>template</b> &lt;<b>typename</b> IndexType&gt;</td></tr>
<tr><th id="31">31</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <dfn class="tu decl def fn" id="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" title='rx::(anonymous namespace)::GetFirstLastIndices' data-type='angle::Result rx::(anonymous namespace)::GetFirstLastIndices(const IndexType * indices, size_t count, std::pair&lt;uint32_t, uint32_t&gt; * outIndices)' data-ref="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" data-ref-filename="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE">GetFirstLastIndices</dfn>(<em>const</em> IndexType *<dfn class="local col4 decl" id="1794indices" title='indices' data-type='const IndexType *' data-ref="1794indices" data-ref-filename="1794indices">indices</dfn>,</td></tr>
<tr><th id="32">32</th><td>                                  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="1795count" title='count' data-type='size_t' data-ref="1795count" data-ref-filename="1795count">count</dfn>,</td></tr>
<tr><th id="33">33</th><td>                                  <span class="namespace">std::</span><span class='type' title='std::__1::pair' data-ref="std::__1::pair" data-ref-filename="std..__1..pair">pair</span>&lt;<span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span>, <span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span>&gt; *<dfn class="local col6 decl" id="1796outIndices" title='outIndices' data-type='std::pair&lt;uint32_t, uint32_t&gt; *' data-ref="1796outIndices" data-ref-filename="1796outIndices">outIndices</dfn>)</td></tr>
<tr><th id="34">34</th><td>{</td></tr>
<tr><th id="35">35</th><td>    IndexType <dfn class="local col7 decl" id="1797first" title='first' data-type='IndexType' data-ref="1797first" data-ref-filename="1797first">first</dfn>, <dfn class="local col8 decl" id="1798last" title='last' data-type='IndexType' data-ref="1798last" data-ref-filename="1798last">last</dfn>;</td></tr>
<tr><th id="36">36</th><td>    <i>// Use memcpy to avoid unaligned memory access crash:</i></td></tr>
<tr><th id="37">37</th><td>    memcpy(&amp;<a class="local col7 ref" href="#1797first" title='first' data-ref="1797first" data-ref-filename="1797first">first</a>, &amp;<a class="local col4 ref" href="#1794indices" title='indices' data-ref="1794indices" data-ref-filename="1794indices">indices</a>[<var>0</var>], <b>sizeof</b>(<a class="local col7 ref" href="#1797first" title='first' data-ref="1797first" data-ref-filename="1797first">first</a>));</td></tr>
<tr><th id="38">38</th><td>    memcpy(&amp;<a class="local col8 ref" href="#1798last" title='last' data-ref="1798last" data-ref-filename="1798last">last</a>, &amp;<a class="local col4 ref" href="#1794indices" title='indices' data-ref="1794indices" data-ref-filename="1794indices">indices</a>[<a class="local col5 ref" href="#1795count" title='count' data-ref="1795count" data-ref-filename="1795count">count</a> - <var>1</var>], <b>sizeof</b>(<a class="local col8 ref" href="#1798last" title='last' data-ref="1798last" data-ref-filename="1798last">last</a>));</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td>    <a class="local col6 ref" href="#1796outIndices" title='outIndices' data-ref="1796outIndices" data-ref-filename="1796outIndices">outIndices</a>-&gt;<span class='ref field' title='std::__1::pair&lt;unsigned int, unsigned int&gt;::first' data-ref="std::__1::pair::first" data-ref-filename="std..__1..pair..first">first</span>  = <a class="local col7 ref" href="#1797first" title='first' data-ref="1797first" data-ref-filename="1797first">first</a>;</td></tr>
<tr><th id="41">41</th><td>    <a class="local col6 ref" href="#1796outIndices" title='outIndices' data-ref="1796outIndices" data-ref-filename="1796outIndices">outIndices</a>-&gt;<span class='ref field' title='std::__1::pair&lt;unsigned int, unsigned int&gt;::second' data-ref="std::__1::pair::second" data-ref-filename="std..__1..pair..second">second</span> = <a class="local col8 ref" href="#1798last" title='last' data-ref="1798last" data-ref-filename="1798last">last</a>;</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="44">44</th><td>}</td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td>}  <i>// namespace</i></td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><i>// ConversionBufferMtl implementation.</i></td></tr>
<tr><th id="49">49</th><td><a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" title='rx::ConversionBufferMtl::ConversionBufferMtl' data-ref="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm">ConversionBufferMtl</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col9 decl" id="1799contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1799contextMtl" data-ref-filename="1799contextMtl">contextMtl</dfn>,</td></tr>
<tr><th id="50">50</th><td>                                         <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="1800initialSize" title='initialSize' data-type='size_t' data-ref="1800initialSize" data-ref-filename="1800initialSize">initialSize</dfn>,</td></tr>
<tr><th id="51">51</th><td>                                         <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="1801alignment" title='alignment' data-type='size_t' data-ref="1801alignment" data-ref-filename="1801alignment">alignment</dfn>)</td></tr>
<tr><th id="52">52</th><td>    : <a class="member field" href="BufferMtl.h.html#rx::ConversionBufferMtl::dirty" title='rx::ConversionBufferMtl::dirty' data-ref="rx::ConversionBufferMtl::dirty" data-ref-filename="rx..ConversionBufferMtl..dirty">dirty</a>(<b>true</b>), <a class="member field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedBuffer" title='rx::ConversionBufferMtl::convertedBuffer' data-ref="rx::ConversionBufferMtl::convertedBuffer" data-ref-filename="rx..ConversionBufferMtl..convertedBuffer">convertedBuffer</a><span class='ref fn' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn">(</span><b>nullptr</b>), <a class="member field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedOffset" title='rx::ConversionBufferMtl::convertedOffset' data-ref="rx::ConversionBufferMtl::convertedOffset" data-ref-filename="rx..ConversionBufferMtl..convertedOffset">convertedOffset</a>(<var>0</var>)</td></tr>
<tr><th id="53">53</th><td>{</td></tr>
<tr><th id="54">54</th><td>    <a class="member field" href="BufferMtl.h.html#rx::ConversionBufferMtl::data" title='rx::ConversionBufferMtl::data' data-ref="rx::ConversionBufferMtl::data" data-ref-filename="rx..ConversionBufferMtl..data">data</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool10initializeEPNS0_7ContextEmmm" title='rx::mtl::BufferPool::initialize' data-ref="_ZN2rx3mtl10BufferPool10initializeEPNS0_7ContextEmmm" data-ref-filename="_ZN2rx3mtl10BufferPool10initializeEPNS0_7ContextEmmm">initialize</a>(<a class="local col9 ref" href="#1799contextMtl" title='contextMtl' data-ref="1799contextMtl" data-ref-filename="1799contextMtl">contextMtl</a>, <a class="local col0 ref" href="#1800initialSize" title='initialSize' data-ref="1800initialSize" data-ref-filename="1800initialSize">initialSize</a>, <a class="local col1 ref" href="#1801alignment" title='alignment' data-ref="1801alignment" data-ref-filename="1801alignment">alignment</a>, <var>0</var>);</td></tr>
<tr><th id="55">55</th><td>}</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx19ConversionBufferMtlD1Ev" title='rx::ConversionBufferMtl::~ConversionBufferMtl' data-ref="_ZN2rx19ConversionBufferMtlD1Ev" data-ref-filename="_ZN2rx19ConversionBufferMtlD1Ev">~ConversionBufferMtl</dfn>() = <b>default</b>;</td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td><i>// IndexConversionBufferMtl implementation.</i></td></tr>
<tr><th id="60">60</th><td><a class="type" href="BufferMtl.h.html#rx::IndexConversionBufferMtl" title='rx::IndexConversionBufferMtl' data-ref="rx::IndexConversionBufferMtl" data-ref-filename="rx..IndexConversionBufferMtl">IndexConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx24IndexConversionBufferMtlC1EPNS_10ContextMtlEN2gl16DrawElementsTypeEbm" title='rx::IndexConversionBufferMtl::IndexConversionBufferMtl' data-ref="_ZN2rx24IndexConversionBufferMtlC1EPNS_10ContextMtlEN2gl16DrawElementsTypeEbm" data-ref-filename="_ZN2rx24IndexConversionBufferMtlC1EPNS_10ContextMtlEN2gl16DrawElementsTypeEbm">IndexConversionBufferMtl</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col2 decl" id="1802context" title='context' data-type='rx::ContextMtl *' data-ref="1802context" data-ref-filename="1802context">context</dfn>,</td></tr>
<tr><th id="61">61</th><td>                                                   <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a> <dfn class="local col3 decl" id="1803elemTypeIn" title='elemTypeIn' data-type='gl::DrawElementsType' data-ref="1803elemTypeIn" data-ref-filename="1803elemTypeIn">elemTypeIn</dfn>,</td></tr>
<tr><th id="62">62</th><td>                                                   <em>bool</em> <dfn class="local col4 decl" id="1804primitiveRestartEnabledIn" title='primitiveRestartEnabledIn' data-type='bool' data-ref="1804primitiveRestartEnabledIn" data-ref-filename="1804primitiveRestartEnabledIn">primitiveRestartEnabledIn</dfn>,</td></tr>
<tr><th id="63">63</th><td>                                                   <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="1805offsetIn" title='offsetIn' data-type='size_t' data-ref="1805offsetIn" data-ref-filename="1805offsetIn">offsetIn</dfn>)</td></tr>
<tr><th id="64">64</th><td>    : <a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a><a class="ref fn" href="#_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" title='rx::ConversionBufferMtl::ConversionBufferMtl' data-ref="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm">(</a><a class="local col2 ref" href="#1802context" title='context' data-ref="1802context" data-ref-filename="1802context">context</a>,</td></tr>
<tr><th id="65">65</th><td>                          <a class="tu ref" href="#rx::(anonymousnamespace)::kConvertedElementArrayBufferInitialSize" title='rx::(anonymous namespace)::kConvertedElementArrayBufferInitialSize' data-use='r' data-ref="rx::(anonymousnamespace)::kConvertedElementArrayBufferInitialSize" data-ref-filename="rx..(anonymousnamespace)..kConvertedElementArrayBufferInitialSize">kConvertedElementArrayBufferInitialSize</a>,</td></tr>
<tr><th id="66">66</th><td>                          <span class="namespace">mtl::</span><a class="ref" href="mtl_constants.h.html#rx::mtl::kIndexBufferOffsetAlignment" title='rx::mtl::kIndexBufferOffsetAlignment' data-ref="rx::mtl::kIndexBufferOffsetAlignment" data-ref-filename="rx..mtl..kIndexBufferOffsetAlignment">kIndexBufferOffsetAlignment</a>),</td></tr>
<tr><th id="67">67</th><td>      <a class="member field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::elemType" title='rx::IndexConversionBufferMtl::elemType' data-ref="rx::IndexConversionBufferMtl::elemType" data-ref-filename="rx..IndexConversionBufferMtl..elemType">elemType</a>(<a class="local col3 ref" href="#1803elemTypeIn" title='elemTypeIn' data-ref="1803elemTypeIn" data-ref-filename="1803elemTypeIn">elemTypeIn</a>),</td></tr>
<tr><th id="68">68</th><td>      <a class="member field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::offset" title='rx::IndexConversionBufferMtl::offset' data-ref="rx::IndexConversionBufferMtl::offset" data-ref-filename="rx..IndexConversionBufferMtl..offset">offset</a>(<a class="local col5 ref" href="#1805offsetIn" title='offsetIn' data-ref="1805offsetIn" data-ref-filename="1805offsetIn">offsetIn</a>),</td></tr>
<tr><th id="69">69</th><td>      <a class="member field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::primitiveRestartEnabled" title='rx::IndexConversionBufferMtl::primitiveRestartEnabled' data-ref="rx::IndexConversionBufferMtl::primitiveRestartEnabled" data-ref-filename="rx..IndexConversionBufferMtl..primitiveRestartEnabled">primitiveRestartEnabled</a>(<a class="local col4 ref" href="#1804primitiveRestartEnabledIn" title='primitiveRestartEnabledIn' data-ref="1804primitiveRestartEnabledIn" data-ref-filename="1804primitiveRestartEnabledIn">primitiveRestartEnabledIn</a>)</td></tr>
<tr><th id="70">70</th><td>{</td></tr>
<tr><th id="71">71</th><td>}</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td><a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a> <a class="type" href="BufferMtl.h.html#rx::IndexConversionBufferMtl" title='rx::IndexConversionBufferMtl' data-ref="rx::IndexConversionBufferMtl" data-ref-filename="rx..IndexConversionBufferMtl">IndexConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx24IndexConversionBufferMtl26getRangeForConvertedBufferEm" title='rx::IndexConversionBufferMtl::getRangeForConvertedBuffer' data-ref="_ZN2rx24IndexConversionBufferMtl26getRangeForConvertedBufferEm" data-ref-filename="_ZN2rx24IndexConversionBufferMtl26getRangeForConvertedBufferEm">getRangeForConvertedBuffer</dfn>(<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="1806count" title='count' data-type='size_t' data-ref="1806count" data-ref-filename="1806count">count</dfn>)</td></tr>
<tr><th id="74">74</th><td>{</td></tr>
<tr><th id="75">75</th><td>    <b>return</b> <a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a><a class="ref fn" href="BufferMtl.h.html#_ZN2rx10IndexRangeC1Emm" title='rx::IndexRange::IndexRange' data-ref="_ZN2rx10IndexRangeC1Emm" data-ref-filename="_ZN2rx10IndexRangeC1Emm">{</a><var>0</var>, <a class="local col6 ref" href="#1806count" title='count' data-ref="1806count" data-ref-filename="1806count">count</a>};</td></tr>
<tr><th id="76">76</th><td>}</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><i>// UniformConversionBufferMtl implementation</i></td></tr>
<tr><th id="79">79</th><td><a class="type" href="BufferMtl.h.html#rx::UniformConversionBufferMtl" title='rx::UniformConversionBufferMtl' data-ref="rx::UniformConversionBufferMtl" data-ref-filename="rx..UniformConversionBufferMtl">UniformConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx26UniformConversionBufferMtlC1EPNS_10ContextMtlEm" title='rx::UniformConversionBufferMtl::UniformConversionBufferMtl' data-ref="_ZN2rx26UniformConversionBufferMtlC1EPNS_10ContextMtlEm" data-ref-filename="_ZN2rx26UniformConversionBufferMtlC1EPNS_10ContextMtlEm">UniformConversionBufferMtl</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col7 decl" id="1807context" title='context' data-type='rx::ContextMtl *' data-ref="1807context" data-ref-filename="1807context">context</dfn>, <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="1808offsetIn" title='offsetIn' data-type='size_t' data-ref="1808offsetIn" data-ref-filename="1808offsetIn">offsetIn</dfn>)</td></tr>
<tr><th id="80">80</th><td>    : <a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a><a class="ref fn" href="#_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" title='rx::ConversionBufferMtl::ConversionBufferMtl' data-ref="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm">(</a><a class="local col7 ref" href="#1807context" title='context' data-ref="1807context" data-ref-filename="1807context">context</a>, <var>0</var>, <span class="namespace">mtl::</span><a class="ref" href="mtl_constants.h.html#rx::mtl::kUniformBufferSettingOffsetMinAlignment" title='rx::mtl::kUniformBufferSettingOffsetMinAlignment' data-ref="rx::mtl::kUniformBufferSettingOffsetMinAlignment" data-ref-filename="rx..mtl..kUniformBufferSettingOffsetMinAlignment">kUniformBufferSettingOffsetMinAlignment</a>),</td></tr>
<tr><th id="81">81</th><td>      <a class="member field" href="BufferMtl.h.html#rx::UniformConversionBufferMtl::offset" title='rx::UniformConversionBufferMtl::offset' data-ref="rx::UniformConversionBufferMtl::offset" data-ref-filename="rx..UniformConversionBufferMtl..offset">offset</a>(<a class="local col8 ref" href="#1808offsetIn" title='offsetIn' data-ref="1808offsetIn" data-ref-filename="1808offsetIn">offsetIn</a>)</td></tr>
<tr><th id="82">82</th><td>{}</td></tr>
<tr><th id="83">83</th><td></td></tr>
<tr><th id="84">84</th><td><i>// VertexConversionBufferMtl implementation.</i></td></tr>
<tr><th id="85">85</th><td><a class="type" href="BufferMtl.h.html#rx::VertexConversionBufferMtl" title='rx::VertexConversionBufferMtl' data-ref="rx::VertexConversionBufferMtl" data-ref-filename="rx..VertexConversionBufferMtl">VertexConversionBufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx25VertexConversionBufferMtlC1EPNS_10ContextMtlEN5angle8FormatIDEjm" title='rx::VertexConversionBufferMtl::VertexConversionBufferMtl' data-ref="_ZN2rx25VertexConversionBufferMtlC1EPNS_10ContextMtlEN5angle8FormatIDEjm" data-ref-filename="_ZN2rx25VertexConversionBufferMtlC1EPNS_10ContextMtlEN5angle8FormatIDEjm">VertexConversionBufferMtl</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col9 decl" id="1809context" title='context' data-type='rx::ContextMtl *' data-ref="1809context" data-ref-filename="1809context">context</dfn>,</td></tr>
<tr><th id="86">86</th><td>                                                     <span class="namespace">angle::</span><a class="type" href="../FormatID_autogen.h.html#angle::FormatID" title='angle::FormatID' data-ref="angle::FormatID" data-ref-filename="angle..FormatID">FormatID</a> <dfn class="local col0 decl" id="1810formatIDIn" title='formatIDIn' data-type='angle::FormatID' data-ref="1810formatIDIn" data-ref-filename="1810formatIDIn">formatIDIn</dfn>,</td></tr>
<tr><th id="87">87</th><td>                                                     <a class="typedef" href="../../../../include/GLES/gl.h.html#GLuint" title='GLuint' data-type='unsigned int' data-ref="GLuint" data-ref-filename="GLuint">GLuint</a> <dfn class="local col1 decl" id="1811strideIn" title='strideIn' data-type='GLuint' data-ref="1811strideIn" data-ref-filename="1811strideIn">strideIn</dfn>,</td></tr>
<tr><th id="88">88</th><td>                                                     <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="1812offsetIn" title='offsetIn' data-type='size_t' data-ref="1812offsetIn" data-ref-filename="1812offsetIn">offsetIn</dfn>)</td></tr>
<tr><th id="89">89</th><td>    : <a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a><a class="ref fn" href="#_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" title='rx::ConversionBufferMtl::ConversionBufferMtl' data-ref="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx19ConversionBufferMtlC1EPNS_10ContextMtlEmm">(</a><a class="local col9 ref" href="#1809context" title='context' data-ref="1809context" data-ref-filename="1809context">context</a>, <var>0</var>, <span class="namespace">mtl::</span><a class="ref" href="mtl_constants.h.html#rx::mtl::kVertexAttribBufferStrideAlignment" title='rx::mtl::kVertexAttribBufferStrideAlignment' data-ref="rx::mtl::kVertexAttribBufferStrideAlignment" data-ref-filename="rx..mtl..kVertexAttribBufferStrideAlignment">kVertexAttribBufferStrideAlignment</a>),</td></tr>
<tr><th id="90">90</th><td>      <a class="member field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::formatID" title='rx::VertexConversionBufferMtl::formatID' data-ref="rx::VertexConversionBufferMtl::formatID" data-ref-filename="rx..VertexConversionBufferMtl..formatID">formatID</a>(<a class="local col0 ref" href="#1810formatIDIn" title='formatIDIn' data-ref="1810formatIDIn" data-ref-filename="1810formatIDIn">formatIDIn</a>),</td></tr>
<tr><th id="91">91</th><td>      <a class="member field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::stride" title='rx::VertexConversionBufferMtl::stride' data-ref="rx::VertexConversionBufferMtl::stride" data-ref-filename="rx..VertexConversionBufferMtl..stride">stride</a>(<a class="local col1 ref" href="#1811strideIn" title='strideIn' data-ref="1811strideIn" data-ref-filename="1811strideIn">strideIn</a>),</td></tr>
<tr><th id="92">92</th><td>      <a class="member field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::offset" title='rx::VertexConversionBufferMtl::offset' data-ref="rx::VertexConversionBufferMtl::offset" data-ref-filename="rx..VertexConversionBufferMtl..offset">offset</a>(<a class="local col2 ref" href="#1812offsetIn" title='offsetIn' data-ref="1812offsetIn" data-ref-filename="1812offsetIn">offsetIn</a>)</td></tr>
<tr><th id="93">93</th><td>{}</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td><i>// BufferMtl implementation</i></td></tr>
<tr><th id="96">96</th><td><a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtlC1ERKN2gl11BufferStateE" title='rx::BufferMtl::BufferMtl' data-ref="_ZN2rx9BufferMtlC1ERKN2gl11BufferStateE" data-ref-filename="_ZN2rx9BufferMtlC1ERKN2gl11BufferStateE">BufferMtl</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Buffer.h.html#gl::BufferState" title='gl::BufferState' data-ref="gl::BufferState" data-ref-filename="gl..BufferState">BufferState</a> &amp;<dfn class="local col3 decl" id="1813state" title='state' data-type='const gl::BufferState &amp;' data-ref="1813state" data-ref-filename="1813state">state</dfn>)</td></tr>
<tr><th id="97">97</th><td>    : <a class="type" href="../BufferImpl.h.html#rx::BufferImpl" title='rx::BufferImpl' data-ref="rx::BufferImpl" data-ref-filename="rx..BufferImpl">BufferImpl</a><a class="ref fn" href="../BufferImpl.h.html#_ZN2rx10BufferImplC1ERKN2gl11BufferStateE" title='rx::BufferImpl::BufferImpl' data-ref="_ZN2rx10BufferImplC1ERKN2gl11BufferStateE" data-ref-filename="_ZN2rx10BufferImplC1ERKN2gl11BufferStateE">(</a><a class="local col3 ref" href="#1813state" title='state' data-ref="1813state" data-ref-filename="1813state">state</a>), <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a><a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPoolC1Eb" title='rx::mtl::BufferPool::BufferPool' data-ref="_ZN2rx3mtl10BufferPoolC1Eb" data-ref-filename="_ZN2rx3mtl10BufferPoolC1Eb">(</a><i class="doc">/** alwaysAllocNewBuffer */</i> <b>true</b>)</td></tr>
<tr><th id="98">98</th><td>{}</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td><a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtlD1Ev" title='rx::BufferMtl::~BufferMtl' data-ref="_ZN2rx9BufferMtlD1Ev" data-ref-filename="_ZN2rx9BufferMtlD1Ev">~BufferMtl</dfn>() {}</td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td><em>void</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl7destroyEPKN2gl7ContextE" title='rx::BufferMtl::destroy' data-ref="_ZN2rx9BufferMtl7destroyEPKN2gl7ContextE" data-ref-filename="_ZN2rx9BufferMtl7destroyEPKN2gl7ContextE">destroy</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col4 decl" id="1814context" title='context' data-type='const gl::Context *' data-ref="1814context" data-ref-filename="1814context">context</dfn>)</td></tr>
<tr><th id="103">103</th><td>{</td></tr>
<tr><th id="104">104</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col5 decl" id="1815contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1815contextMtl" data-ref-filename="1815contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col4 ref" href="#1814context" title='context' data-ref="1814context" data-ref-filename="1814context">context</a>);</td></tr>
<tr><th id="105">105</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer5clearEv" title='angle::MemoryBuffer::clear' data-ref="_ZN5angle12MemoryBuffer5clearEv" data-ref-filename="_ZN5angle12MemoryBuffer5clearEv">clear</a>();</td></tr>
<tr><th id="106">106</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool7destroyEPNS_10ContextMtlE" title='rx::mtl::BufferPool::destroy' data-ref="_ZN2rx3mtl10BufferPool7destroyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl10BufferPool7destroyEPNS_10ContextMtlE">destroy</a>(<a class="local col5 ref" href="#1815contextMtl" title='contextMtl' data-ref="1815contextMtl" data-ref-filename="1815contextMtl">contextMtl</a>);</td></tr>
<tr><th id="107">107</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a> <span class='ref fn' title='std::__1::shared_ptr::operator=' data-ref="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE" data-ref-filename="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE">=</span> <span class='ref fn fake' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn"></span><b>nullptr</b>;</td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td>    <a class="member fn" href="#_ZN2rx9BufferMtl22clearConversionBuffersEv" title='rx::BufferMtl::clearConversionBuffers' data-ref="_ZN2rx9BufferMtl22clearConversionBuffersEv" data-ref-filename="_ZN2rx9BufferMtl22clearConversionBuffersEv">clearConversionBuffers</a>();</td></tr>
<tr><th id="110">110</th><td>}</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl7setDataEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" title='rx::BufferMtl::setData' data-ref="_ZN2rx9BufferMtl7setDataEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" data-ref-filename="_ZN2rx9BufferMtl7setDataEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE">setData</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col6 decl" id="1816context" title='context' data-type='const gl::Context *' data-ref="1816context" data-ref-filename="1816context">context</dfn>,</td></tr>
<tr><th id="113">113</th><td>                                 <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding" title='gl::BufferBinding' data-ref="gl::BufferBinding" data-ref-filename="gl..BufferBinding">BufferBinding</a> <dfn class="local col7 decl" id="1817target" title='target' data-type='gl::BufferBinding' data-ref="1817target" data-ref-filename="1817target">target</dfn>,</td></tr>
<tr><th id="114">114</th><td>                                 <em>const</em> <em>void</em> *<dfn class="local col8 decl" id="1818data" title='data' data-type='const void *' data-ref="1818data" data-ref-filename="1818data">data</dfn>,</td></tr>
<tr><th id="115">115</th><td>                                 <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="1819intendedSize" title='intendedSize' data-type='size_t' data-ref="1819intendedSize" data-ref-filename="1819intendedSize">intendedSize</dfn>,</td></tr>
<tr><th id="116">116</th><td>                                 <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a> <dfn class="local col0 decl" id="1820usage" title='usage' data-type='gl::BufferUsage' data-ref="1820usage" data-ref-filename="1820usage">usage</dfn>)</td></tr>
<tr><th id="117">117</th><td>{</td></tr>
<tr><th id="118">118</th><td>    <b>return</b> <a class="member fn" href="#_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" title='rx::BufferMtl::setDataImpl' data-ref="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" data-ref-filename="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE">setDataImpl</a>(<a class="local col6 ref" href="#1816context" title='context' data-ref="1816context" data-ref-filename="1816context">context</a>, <a class="local col7 ref" href="#1817target" title='target' data-ref="1817target" data-ref-filename="1817target">target</a>, <a class="local col8 ref" href="#1818data" title='data' data-ref="1818data" data-ref-filename="1818data">data</a>, <a class="local col9 ref" href="#1819intendedSize" title='intendedSize' data-ref="1819intendedSize" data-ref-filename="1819intendedSize">intendedSize</a>, <a class="local col0 ref" href="#1820usage" title='usage' data-ref="1820usage" data-ref-filename="1820usage">usage</a>);</td></tr>
<tr><th id="119">119</th><td>}</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl10setSubDataEPKN2gl7ContextENS1_13BufferBindingEPKvmm" title='rx::BufferMtl::setSubData' data-ref="_ZN2rx9BufferMtl10setSubDataEPKN2gl7ContextENS1_13BufferBindingEPKvmm" data-ref-filename="_ZN2rx9BufferMtl10setSubDataEPKN2gl7ContextENS1_13BufferBindingEPKvmm">setSubData</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col1 decl" id="1821context" title='context' data-type='const gl::Context *' data-ref="1821context" data-ref-filename="1821context">context</dfn>,</td></tr>
<tr><th id="122">122</th><td>                                    <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding" title='gl::BufferBinding' data-ref="gl::BufferBinding" data-ref-filename="gl..BufferBinding">BufferBinding</a> <dfn class="local col2 decl" id="1822target" title='target' data-type='gl::BufferBinding' data-ref="1822target" data-ref-filename="1822target">target</dfn>,</td></tr>
<tr><th id="123">123</th><td>                                    <em>const</em> <em>void</em> *<dfn class="local col3 decl" id="1823data" title='data' data-type='const void *' data-ref="1823data" data-ref-filename="1823data">data</dfn>,</td></tr>
<tr><th id="124">124</th><td>                                    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="1824size" title='size' data-type='size_t' data-ref="1824size" data-ref-filename="1824size">size</dfn>,</td></tr>
<tr><th id="125">125</th><td>                                    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="1825offset" title='offset' data-type='size_t' data-ref="1825offset" data-ref-filename="1825offset">offset</dfn>)</td></tr>
<tr><th id="126">126</th><td>{</td></tr>
<tr><th id="127">127</th><td>    <b>return</b> <a class="member fn" href="#_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" title='rx::BufferMtl::setSubDataImpl' data-ref="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" data-ref-filename="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm">setSubDataImpl</a>(<a class="local col1 ref" href="#1821context" title='context' data-ref="1821context" data-ref-filename="1821context">context</a>, <a class="local col3 ref" href="#1823data" title='data' data-ref="1823data" data-ref-filename="1823data">data</a>, <a class="local col4 ref" href="#1824size" title='size' data-ref="1824size" data-ref-filename="1824size">size</a>, <a class="local col5 ref" href="#1825offset" title='offset' data-ref="1825offset" data-ref-filename="1825offset">offset</a>);</td></tr>
<tr><th id="128">128</th><td>}</td></tr>
<tr><th id="129">129</th><td></td></tr>
<tr><th id="130">130</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl11copySubDataEPKN2gl7ContextEPNS_10BufferImplElll" title='rx::BufferMtl::copySubData' data-ref="_ZN2rx9BufferMtl11copySubDataEPKN2gl7ContextEPNS_10BufferImplElll" data-ref-filename="_ZN2rx9BufferMtl11copySubDataEPKN2gl7ContextEPNS_10BufferImplElll">copySubData</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col6 decl" id="1826context" title='context' data-type='const gl::Context *' data-ref="1826context" data-ref-filename="1826context">context</dfn>,</td></tr>
<tr><th id="131">131</th><td>                                     <a class="type" href="../BufferImpl.h.html#rx::BufferImpl" title='rx::BufferImpl' data-ref="rx::BufferImpl" data-ref-filename="rx..BufferImpl">BufferImpl</a> *<dfn class="local col7 decl" id="1827source" title='source' data-type='rx::BufferImpl *' data-ref="1827source" data-ref-filename="1827source">source</dfn>,</td></tr>
<tr><th id="132">132</th><td>                                     <a class="typedef" href="../../../../include/GLES/gl.h.html#GLintptr" title='GLintptr' data-type='khronos_intptr_t' data-ref="GLintptr" data-ref-filename="GLintptr">GLintptr</a> <dfn class="local col8 decl" id="1828sourceOffset" title='sourceOffset' data-type='GLintptr' data-ref="1828sourceOffset" data-ref-filename="1828sourceOffset">sourceOffset</dfn>,</td></tr>
<tr><th id="133">133</th><td>                                     <a class="typedef" href="../../../../include/GLES/gl.h.html#GLintptr" title='GLintptr' data-type='khronos_intptr_t' data-ref="GLintptr" data-ref-filename="GLintptr">GLintptr</a> <dfn class="local col9 decl" id="1829destOffset" title='destOffset' data-type='GLintptr' data-ref="1829destOffset" data-ref-filename="1829destOffset">destOffset</dfn>,</td></tr>
<tr><th id="134">134</th><td>                                     <a class="typedef" href="../../../../include/GLES/gl.h.html#GLsizeiptr" title='GLsizeiptr' data-type='khronos_ssize_t' data-ref="GLsizeiptr" data-ref-filename="GLsizeiptr">GLsizeiptr</a> <dfn class="local col0 decl" id="1830size" title='size' data-type='GLsizeiptr' data-ref="1830size" data-ref-filename="1830size">size</dfn>)</td></tr>
<tr><th id="135">135</th><td>{</td></tr>
<tr><th id="136">136</th><td>    <b>if</b> (!<a class="local col7 ref" href="#1827source" title='source' data-ref="1827source" data-ref-filename="1827source">source</a>)</td></tr>
<tr><th id="137">137</th><td>    {</td></tr>
<tr><th id="138">138</th><td>        <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="139">139</th><td>    }</td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col1 decl" id="1831contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1831contextMtl" data-ref-filename="1831contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col6 ref" href="#1826context" title='context' data-ref="1826context" data-ref-filename="1826context">context</a>);</td></tr>
<tr><th id="142">142</th><td>    <em>auto</em> <dfn class="local col2 decl" id="1832srcMtl" title='srcMtl' data-type='rx::BufferMtl *' data-ref="1832srcMtl" data-ref-filename="1832srcMtl">srcMtl</dfn>            = <a class="ref fn" href="../../angletypes.h.html#_ZN2rx5GetAsEPT0_" title='rx::GetAs' data-ref="_ZN2rx5GetAsEPT0_" data-ref-filename="_ZN2rx5GetAsEPT0_">GetAs</a>&lt;<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>&gt;(<a class="local col7 ref" href="#1827source" title='source' data-ref="1827source" data-ref-filename="1827source">source</a>);</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td>    <b>if</b> (<a class="local col2 ref" href="#1832srcMtl" title='srcMtl' data-ref="1832srcMtl" data-ref-filename="1832srcMtl">srcMtl</a>-&gt;<a class="member fn" href="#_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE" title='rx::BufferMtl::clientShadowCopyDataNeedSync' data-ref="_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE">clientShadowCopyDataNeedSync</a>(<a class="local col1 ref" href="#1831contextMtl" title='contextMtl' data-ref="1831contextMtl" data-ref-filename="1831contextMtl">contextMtl</a>) || <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl8Resource16isBeingUsedByGPUEPNS0_7ContextE" title='rx::mtl::Resource::isBeingUsedByGPU' data-ref="_ZNK2rx3mtl8Resource16isBeingUsedByGPUEPNS0_7ContextE" data-ref-filename="_ZNK2rx3mtl8Resource16isBeingUsedByGPUEPNS0_7ContextE">isBeingUsedByGPU</a>(<a class="local col1 ref" href="#1831contextMtl" title='contextMtl' data-ref="1831contextMtl" data-ref-filename="1831contextMtl">contextMtl</a>))</td></tr>
<tr><th id="145">145</th><td>    {</td></tr>
<tr><th id="146">146</th><td>        <i>// If shadow copy requires a synchronization then use blit command instead.</i></td></tr>
<tr><th id="147">147</th><td><i>        // It might break a pending render pass, but still faster than synchronization with</i></td></tr>
<tr><th id="148">148</th><td><i>        // GPU.</i></td></tr>
<tr><th id="149">149</th><td>        <span class="namespace">mtl::</span><a class="type" href="mtl_command_buffer.h.html#rx::mtl::BlitCommandEncoder" title='rx::mtl::BlitCommandEncoder' data-ref="rx::mtl::BlitCommandEncoder" data-ref-filename="rx..mtl..BlitCommandEncoder">BlitCommandEncoder</a> *<dfn class="local col3 decl" id="1833blitEncoder" title='blitEncoder' data-type='mtl::BlitCommandEncoder *' data-ref="1833blitEncoder" data-ref-filename="1833blitEncoder">blitEncoder</dfn> = <a class="local col1 ref" href="#1831contextMtl" title='contextMtl' data-ref="1831contextMtl" data-ref-filename="1831contextMtl">contextMtl</a>-&gt;<a class="ref fn" href="ContextMtl.h.html#_ZN2rx10ContextMtl21getBlitCommandEncoderEv" title='rx::ContextMtl::getBlitCommandEncoder' data-ref="_ZN2rx10ContextMtl21getBlitCommandEncoderEv" data-ref-filename="_ZN2rx10ContextMtl21getBlitCommandEncoderEv">getBlitCommandEncoder</a>();</td></tr>
<tr><th id="150">150</th><td>        <a class="local col3 ref" href="#1833blitEncoder" title='blitEncoder' data-ref="1833blitEncoder" data-ref-filename="1833blitEncoder">blitEncoder</a>-&gt;<a class="ref fn" href="mtl_command_buffer.h.html#_ZN2rx3mtl18BlitCommandEncoder10copyBufferERKNSt3__110shared_ptrINS0_6BufferEEEmS7_mm" title='rx::mtl::BlitCommandEncoder::copyBuffer' data-ref="_ZN2rx3mtl18BlitCommandEncoder10copyBufferERKNSt3__110shared_ptrINS0_6BufferEEEmS7_mm" data-ref-filename="_ZN2rx3mtl18BlitCommandEncoder10copyBufferERKNSt3__110shared_ptrINS0_6BufferEEEmS7_mm">copyBuffer</a>(<a class="local col2 ref" href="#1832srcMtl" title='srcMtl' data-ref="1832srcMtl" data-ref-filename="1832srcMtl">srcMtl</a>-&gt;<a class="member fn" href="BufferMtl.h.html#_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" title='rx::BufferHolderMtl::getCurrentBuffer' data-ref="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" data-ref-filename="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv">getCurrentBuffer</a>(), <a class="local col8 ref" href="#1828sourceOffset" title='sourceOffset' data-ref="1828sourceOffset" data-ref-filename="1828sourceOffset">sourceOffset</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>, <a class="local col9 ref" href="#1829destOffset" title='destOffset' data-ref="1829destOffset" data-ref-filename="1829destOffset">destOffset</a>,</td></tr>
<tr><th id="151">151</th><td>                                <a class="local col0 ref" href="#1830size" title='size' data-ref="1830size" data-ref-filename="1830size">size</a>);</td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td>        <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="154">154</th><td>    }</td></tr>
<tr><th id="155">155</th><td>    <b>return</b> <a class="member fn" href="#_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" title='rx::BufferMtl::setSubDataImpl' data-ref="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" data-ref-filename="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm">setSubDataImpl</a>(<a class="local col6 ref" href="#1826context" title='context' data-ref="1826context" data-ref-filename="1826context">context</a>, <a class="local col2 ref" href="#1832srcMtl" title='srcMtl' data-ref="1832srcMtl" data-ref-filename="1832srcMtl">srcMtl</a>-&gt;<a class="member fn" href="#_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" title='rx::BufferMtl::getClientShadowCopyData' data-ref="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE">getClientShadowCopyData</a>(<a class="local col1 ref" href="#1831contextMtl" title='contextMtl' data-ref="1831contextMtl" data-ref-filename="1831contextMtl">contextMtl</a>) + <a class="local col8 ref" href="#1828sourceOffset" title='sourceOffset' data-ref="1828sourceOffset" data-ref-filename="1828sourceOffset">sourceOffset</a>, <a class="local col0 ref" href="#1830size" title='size' data-ref="1830size" data-ref-filename="1830size">size</a>,</td></tr>
<tr><th id="156">156</th><td>                          <a class="local col9 ref" href="#1829destOffset" title='destOffset' data-ref="1829destOffset" data-ref-filename="1829destOffset">destOffset</a>);</td></tr>
<tr><th id="157">157</th><td>}</td></tr>
<tr><th id="158">158</th><td></td></tr>
<tr><th id="159">159</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl3mapEPKN2gl7ContextEjPPv" title='rx::BufferMtl::map' data-ref="_ZN2rx9BufferMtl3mapEPKN2gl7ContextEjPPv" data-ref-filename="_ZN2rx9BufferMtl3mapEPKN2gl7ContextEjPPv">map</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col4 decl" id="1834context" title='context' data-type='const gl::Context *' data-ref="1834context" data-ref-filename="1834context">context</dfn>, <a class="typedef" href="../../../../include/GLES/gl.h.html#GLenum" title='GLenum' data-type='unsigned int' data-ref="GLenum" data-ref-filename="GLenum">GLenum</a> <dfn class="local col5 decl" id="1835access" title='access' data-type='GLenum' data-ref="1835access" data-ref-filename="1835access">access</dfn>, <em>void</em> **<dfn class="local col6 decl" id="1836mapPtr" title='mapPtr' data-type='void **' data-ref="1836mapPtr" data-ref-filename="1836mapPtr">mapPtr</dfn>)</td></tr>
<tr><th id="160">160</th><td>{</td></tr>
<tr><th id="161">161</th><td>    <a class="typedef" href="../../../../include/GLES/gl.h.html#GLbitfield" title='GLbitfield' data-type='unsigned int' data-ref="GLbitfield" data-ref-filename="GLbitfield">GLbitfield</a> <dfn class="local col7 decl" id="1837mapRangeAccess" title='mapRangeAccess' data-type='GLbitfield' data-ref="1837mapRangeAccess" data-ref-filename="1837mapRangeAccess">mapRangeAccess</dfn> = <var>0</var>;</td></tr>
<tr><th id="162">162</th><td>    <b>if</b> ((<a class="local col5 ref" href="#1835access" title='access' data-ref="1835access" data-ref-filename="1835access">access</a> &amp; <a class="macro" href="../../../../include/GLES/glext.h.html#319" title="0x88B9" data-ref="_M/GL_WRITE_ONLY_OES">GL_WRITE_ONLY_OES</a>) != <var>0</var> || (<a class="local col5 ref" href="#1835access" title='access' data-ref="1835access" data-ref-filename="1835access">access</a> &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#1326" title="0x88BA" data-ref="_M/GL_READ_WRITE">GL_READ_WRITE</a>) != <var>0</var>)</td></tr>
<tr><th id="163">163</th><td>    {</td></tr>
<tr><th id="164">164</th><td>        <a class="local col7 ref" href="#1837mapRangeAccess" title='mapRangeAccess' data-ref="1837mapRangeAccess" data-ref-filename="1837mapRangeAccess">mapRangeAccess</a> |= <a class="macro" href="../../../../include/GLES3/gl32.h.html#880" title="0x0002" data-ref="_M/GL_MAP_WRITE_BIT">GL_MAP_WRITE_BIT</a>;</td></tr>
<tr><th id="165">165</th><td>    }</td></tr>
<tr><th id="166">166</th><td>    <b>return</b> <a class="virtual member fn" href="#_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv" title='rx::BufferMtl::mapRange' data-ref="_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv" data-ref-filename="_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv">mapRange</a>(<a class="local col4 ref" href="#1834context" title='context' data-ref="1834context" data-ref-filename="1834context">context</a>, <var>0</var>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx9BufferMtl4sizeEv" title='rx::BufferMtl::size' data-ref="_ZNK2rx9BufferMtl4sizeEv" data-ref-filename="_ZNK2rx9BufferMtl4sizeEv">size</a>(), <a class="local col7 ref" href="#1837mapRangeAccess" title='mapRangeAccess' data-ref="1837mapRangeAccess" data-ref-filename="1837mapRangeAccess">mapRangeAccess</a>, <a class="local col6 ref" href="#1836mapPtr" title='mapPtr' data-ref="1836mapPtr" data-ref-filename="1836mapPtr">mapPtr</a>);</td></tr>
<tr><th id="167">167</th><td>}</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv" title='rx::BufferMtl::mapRange' data-ref="_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv" data-ref-filename="_ZN2rx9BufferMtl8mapRangeEPKN2gl7ContextEmmjPPv">mapRange</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col8 decl" id="1838context" title='context' data-type='const gl::Context *' data-ref="1838context" data-ref-filename="1838context">context</dfn>,</td></tr>
<tr><th id="170">170</th><td>                                  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="1839offset" title='offset' data-type='size_t' data-ref="1839offset" data-ref-filename="1839offset">offset</dfn>,</td></tr>
<tr><th id="171">171</th><td>                                  <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="1840length" title='length' data-type='size_t' data-ref="1840length" data-ref-filename="1840length">length</dfn>,</td></tr>
<tr><th id="172">172</th><td>                                  <a class="typedef" href="../../../../include/GLES/gl.h.html#GLbitfield" title='GLbitfield' data-type='unsigned int' data-ref="GLbitfield" data-ref-filename="GLbitfield">GLbitfield</a> <dfn class="local col1 decl" id="1841access" title='access' data-type='GLbitfield' data-ref="1841access" data-ref-filename="1841access">access</dfn>,</td></tr>
<tr><th id="173">173</th><td>                                  <em>void</em> **<dfn class="local col2 decl" id="1842mapPtr" title='mapPtr' data-type='void **' data-ref="1842mapPtr" data-ref-filename="1842mapPtr">mapPtr</dfn>)</td></tr>
<tr><th id="174">174</th><td>{</td></tr>
<tr><th id="175">175</th><td>    <b>if</b> (<a class="local col1 ref" href="#1841access" title='access' data-ref="1841access" data-ref-filename="1841access">access</a> &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#882" title="0x0008" data-ref="_M/GL_MAP_INVALIDATE_BUFFER_BIT">GL_MAP_INVALIDATE_BUFFER_BIT</a>)</td></tr>
<tr><th id="176">176</th><td>    {</td></tr>
<tr><th id="177">177</th><td>        <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = setDataImpl(context, gl::BufferBinding::InvalidEnum, nullptr, size(), mState.getUsage()); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" title='rx::BufferMtl::setDataImpl' data-ref="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" data-ref-filename="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE">setDataImpl</a>(<a class="local col8 ref" href="#1838context" title='context' data-ref="1838context" data-ref-filename="1838context">context</a>, gl::<a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding" title='gl::BufferBinding' data-ref="gl::BufferBinding" data-ref-filename="gl..BufferBinding">BufferBinding</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding::InvalidEnum" title='gl::BufferBinding::InvalidEnum' data-ref="gl::BufferBinding::InvalidEnum" data-ref-filename="gl..BufferBinding..InvalidEnum">InvalidEnum</a>, <b>nullptr</b>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx9BufferMtl4sizeEv" title='rx::BufferMtl::size' data-ref="_ZNK2rx9BufferMtl4sizeEv" data-ref-filename="_ZNK2rx9BufferMtl4sizeEv">size</a>(),</td></tr>
<tr><th id="178">178</th><td>                              <a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState8getUsageEv" title='gl::BufferState::getUsage' data-ref="_ZNK2gl11BufferState8getUsageEv" data-ref-filename="_ZNK2gl11BufferState8getUsageEv">getUsage</a>()));</td></tr>
<tr><th id="179">179</th><td>    }</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td>    <b>if</b> (<a class="local col2 ref" href="#1842mapPtr" title='mapPtr' data-ref="1842mapPtr" data-ref-filename="1842mapPtr">mapPtr</a>)</td></tr>
<tr><th id="182">182</th><td>    {</td></tr>
<tr><th id="183">183</th><td>        <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col3 decl" id="1843contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1843contextMtl" data-ref-filename="1843contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col8 ref" href="#1838context" title='context' data-ref="1838context" data-ref-filename="1838context">context</a>);</td></tr>
<tr><th id="184">184</th><td>        <b>if</b> (<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" title='rx::mtl::BufferPool::getMaxBuffers' data-ref="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" data-ref-filename="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv">getMaxBuffers</a>() == <var>1</var>)</td></tr>
<tr><th id="185">185</th><td>        {</td></tr>
<tr><th id="186">186</th><td>            *<a class="local col2 ref" href="#1842mapPtr" title='mapPtr' data-ref="1842mapPtr" data-ref-filename="1842mapPtr">mapPtr</a> = <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb" title='rx::mtl::Buffer::mapWithOpt' data-ref="_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb" data-ref-filename="_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb">mapWithOpt</a>(<a class="local col3 ref" href="#1843contextMtl" title='contextMtl' data-ref="1843contextMtl" data-ref-filename="1843contextMtl">contextMtl</a>, (<a class="local col1 ref" href="#1841access" title='access' data-ref="1841access" data-ref-filename="1841access">access</a> &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#880" title="0x0002" data-ref="_M/GL_MAP_WRITE_BIT">GL_MAP_WRITE_BIT</a>) == <var>0</var>,</td></tr>
<tr><th id="187">187</th><td>                                   <a class="local col1 ref" href="#1841access" title='access' data-ref="1841access" data-ref-filename="1841access">access</a> &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#884" title="0x0020" data-ref="_M/GL_MAP_UNSYNCHRONIZED_BIT">GL_MAP_UNSYNCHRONIZED_BIT</a>) +</td></tr>
<tr><th id="188">188</th><td>                      <a class="local col9 ref" href="#1839offset" title='offset' data-ref="1839offset" data-ref-filename="1839offset">offset</a>;</td></tr>
<tr><th id="189">189</th><td>        }</td></tr>
<tr><th id="190">190</th><td>        <b>else</b></td></tr>
<tr><th id="191">191</th><td>        {</td></tr>
<tr><th id="192">192</th><td>            *<a class="local col2 ref" href="#1842mapPtr" title='mapPtr' data-ref="1842mapPtr" data-ref-filename="1842mapPtr">mapPtr</a> = <a class="member fn" href="#_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" title='rx::BufferMtl::syncAndObtainShadowCopy' data-ref="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE">syncAndObtainShadowCopy</a>(<a class="local col3 ref" href="#1843contextMtl" title='contextMtl' data-ref="1843contextMtl" data-ref-filename="1843contextMtl">contextMtl</a>) + <a class="local col9 ref" href="#1839offset" title='offset' data-ref="1839offset" data-ref-filename="1839offset">offset</a>;</td></tr>
<tr><th id="193">193</th><td>        }</td></tr>
<tr><th id="194">194</th><td>    }</td></tr>
<tr><th id="195">195</th><td></td></tr>
<tr><th id="196">196</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="197">197</th><td>}</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl5unmapEPKN2gl7ContextEPh" title='rx::BufferMtl::unmap' data-ref="_ZN2rx9BufferMtl5unmapEPKN2gl7ContextEPh" data-ref-filename="_ZN2rx9BufferMtl5unmapEPKN2gl7ContextEPh">unmap</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col4 decl" id="1844context" title='context' data-type='const gl::Context *' data-ref="1844context" data-ref-filename="1844context">context</dfn>, <a class="typedef" href="../../../../include/GLES/gl.h.html#GLboolean" title='GLboolean' data-type='unsigned char' data-ref="GLboolean" data-ref-filename="GLboolean">GLboolean</a> *<dfn class="local col5 decl" id="1845result" title='result' data-type='GLboolean *' data-ref="1845result" data-ref-filename="1845result">result</dfn>)</td></tr>
<tr><th id="200">200</th><td>{</td></tr>
<tr><th id="201">201</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col6 decl" id="1846contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1846contextMtl" data-ref-filename="1846contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col4 ref" href="#1844context" title='context' data-ref="1844context" data-ref-filename="1844context">context</a>);</td></tr>
<tr><th id="202">202</th><td>    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="1847offset" title='offset' data-type='size_t' data-ref="1847offset" data-ref-filename="1847offset">offset</dfn>          = <b>static_cast</b>&lt;<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span>&gt;(<a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState12getMapOffsetEv" title='gl::BufferState::getMapOffset' data-ref="_ZNK2gl11BufferState12getMapOffsetEv" data-ref-filename="_ZNK2gl11BufferState12getMapOffsetEv">getMapOffset</a>());</td></tr>
<tr><th id="203">203</th><td>    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="1848len" title='len' data-type='size_t' data-ref="1848len" data-ref-filename="1848len">len</dfn>             = <b>static_cast</b>&lt;<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span>&gt;(<a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState12getMapLengthEv" title='gl::BufferState::getMapLength' data-ref="_ZNK2gl11BufferState12getMapLengthEv" data-ref-filename="_ZNK2gl11BufferState12getMapLengthEv">getMapLength</a>());</td></tr>
<tr><th id="204">204</th><td></td></tr>
<tr><th id="205">205</th><td>    <a class="member fn" href="#_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" title='rx::BufferMtl::markConversionBuffersDirty' data-ref="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" data-ref-filename="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv">markConversionBuffersDirty</a>();</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>    <b>if</b> (<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" title='rx::mtl::BufferPool::getMaxBuffers' data-ref="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" data-ref-filename="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv">getMaxBuffers</a>() == <var>1</var>)</td></tr>
<tr><th id="208">208</th><td>    {</td></tr>
<tr><th id="209">209</th><td>        <a class="macro" href="../../../common/debug.h.html#316" title="(mBuffer ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 209, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 209 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mBuffer&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<span class='ref fn fake' title='std::__1::shared_ptr::operator bool' data-ref="_ZNKSt3__110shared_ptrcvbEv" data-ref-filename="_ZNKSt3__110shared_ptrcvbEv"></span><a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>);</td></tr>
<tr><th id="210">210</th><td>        <b>if</b> (<a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState14getAccessFlagsEv" title='gl::BufferState::getAccessFlags' data-ref="_ZNK2gl11BufferState14getAccessFlagsEv" data-ref-filename="_ZNK2gl11BufferState14getAccessFlagsEv">getAccessFlags</a>() &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#880" title="0x0002" data-ref="_M/GL_MAP_WRITE_BIT">GL_MAP_WRITE_BIT</a>)</td></tr>
<tr><th id="211">211</th><td>        {</td></tr>
<tr><th id="212">212</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" title='rx::mtl::Buffer::unmapAndFlushSubset' data-ref="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm">unmapAndFlushSubset</a>(<a class="local col6 ref" href="#1846contextMtl" title='contextMtl' data-ref="1846contextMtl" data-ref-filename="1846contextMtl">contextMtl</a>, <a class="local col7 ref" href="#1847offset" title='offset' data-ref="1847offset" data-ref-filename="1847offset">offset</a>, <a class="local col8 ref" href="#1848len" title='len' data-ref="1848len" data-ref-filename="1848len">len</a>);</td></tr>
<tr><th id="213">213</th><td>        }</td></tr>
<tr><th id="214">214</th><td>        <b>else</b></td></tr>
<tr><th id="215">215</th><td>        {</td></tr>
<tr><th id="216">216</th><td>            <i>// Buffer is already mapped with readonly flag, so just unmap it, no flushing will</i></td></tr>
<tr><th id="217">217</th><td><i>            // occur.</i></td></tr>
<tr><th id="218">218</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" title='rx::mtl::Buffer::unmap' data-ref="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE">unmap</a>(<a class="local col6 ref" href="#1846contextMtl" title='contextMtl' data-ref="1846contextMtl" data-ref-filename="1846contextMtl">contextMtl</a>);</td></tr>
<tr><th id="219">219</th><td>        }</td></tr>
<tr><th id="220">220</th><td>    }</td></tr>
<tr><th id="221">221</th><td>    <b>else</b></td></tr>
<tr><th id="222">222</th><td>    {</td></tr>
<tr><th id="223">223</th><td>        <a class="macro" href="../../../common/debug.h.html#316" title="(mShadowCopy.size() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 223, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 223 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mShadowCopy.size()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZNK5angle12MemoryBuffer4sizeEv" title='angle::MemoryBuffer::size' data-ref="_ZNK5angle12MemoryBuffer4sizeEv" data-ref-filename="_ZNK5angle12MemoryBuffer4sizeEv">size</a>());</td></tr>
<tr><th id="224">224</th><td></td></tr>
<tr><th id="225">225</th><td>        <b>if</b> (<a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState14getAccessFlagsEv" title='gl::BufferState::getAccessFlags' data-ref="_ZNK2gl11BufferState14getAccessFlagsEv" data-ref-filename="_ZNK2gl11BufferState14getAccessFlagsEv">getAccessFlags</a>() &amp; <a class="macro" href="../../../../include/GLES3/gl32.h.html#884" title="0x0020" data-ref="_M/GL_MAP_UNSYNCHRONIZED_BIT">GL_MAP_UNSYNCHRONIZED_BIT</a>)</td></tr>
<tr><th id="226">226</th><td>        {</td></tr>
<tr><th id="227">227</th><td>            <i>// Copy the mapped region without synchronization with GPU</i></td></tr>
<tr><th id="228">228</th><td>            <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col9 decl" id="1849ptr" title='ptr' data-type='uint8_t *' data-ref="1849ptr" data-ref-filename="1849ptr">ptr</dfn> =</td></tr>
<tr><th id="229">229</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb" title='rx::mtl::Buffer::mapWithOpt' data-ref="_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb" data-ref-filename="_ZN2rx3mtl6Buffer10mapWithOptEPNS_10ContextMtlEbb">mapWithOpt</a>(<a class="local col6 ref" href="#1846contextMtl" title='contextMtl' data-ref="1846contextMtl" data-ref-filename="1846contextMtl">contextMtl</a>, <i>/* readonly */</i> <b>false</b>, <i>/* noSync */</i> <b>true</b>) + <a class="local col7 ref" href="#1847offset" title='offset' data-ref="1847offset" data-ref-filename="1847offset">offset</a>;</td></tr>
<tr><th id="230">230</th><td>            <span class="namespace">std::</span><span class='ref fn' title='std::__1::copy' data-ref="_ZNSt3__1L4copyET_S0_T0_" data-ref-filename="_ZNSt3__1L4copyET_S0_T0_">copy</span>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>() + <a class="local col7 ref" href="#1847offset" title='offset' data-ref="1847offset" data-ref-filename="1847offset">offset</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>() + <a class="local col7 ref" href="#1847offset" title='offset' data-ref="1847offset" data-ref-filename="1847offset">offset</a> + <a class="local col8 ref" href="#1848len" title='len' data-ref="1848len" data-ref-filename="1848len">len</a>, <a class="local col9 ref" href="#1849ptr" title='ptr' data-ref="1849ptr" data-ref-filename="1849ptr">ptr</a>);</td></tr>
<tr><th id="231">231</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" title='rx::mtl::Buffer::unmapAndFlushSubset' data-ref="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm">unmapAndFlushSubset</a>(<a class="local col6 ref" href="#1846contextMtl" title='contextMtl' data-ref="1846contextMtl" data-ref-filename="1846contextMtl">contextMtl</a>, <a class="local col7 ref" href="#1847offset" title='offset' data-ref="1847offset" data-ref-filename="1847offset">offset</a>, <a class="local col8 ref" href="#1848len" title='len' data-ref="1848len" data-ref-filename="1848len">len</a>);</td></tr>
<tr><th id="232">232</th><td>        }</td></tr>
<tr><th id="233">233</th><td>        <b>else</b></td></tr>
<tr><th id="234">234</th><td>        {</td></tr>
<tr><th id="235">235</th><td>            <i>// commit shadow copy data to GPU synchronously</i></td></tr>
<tr><th id="236">236</th><td>            <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = commitShadowCopy(context); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE">commitShadowCopy</a>(<a class="local col4 ref" href="#1844context" title='context' data-ref="1844context" data-ref-filename="1844context">context</a>));</td></tr>
<tr><th id="237">237</th><td>        }</td></tr>
<tr><th id="238">238</th><td>    }</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td>    <b>if</b> (<a class="local col5 ref" href="#1845result" title='result' data-ref="1845result" data-ref-filename="1845result">result</a>)</td></tr>
<tr><th id="241">241</th><td>    {</td></tr>
<tr><th id="242">242</th><td>        *<a class="local col5 ref" href="#1845result" title='result' data-ref="1845result" data-ref-filename="1845result">result</a> = <b>true</b>;</td></tr>
<tr><th id="243">243</th><td>    }</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="246">246</th><td>}</td></tr>
<tr><th id="247">247</th><td></td></tr>
<tr><th id="248">248</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl13getIndexRangeEPKN2gl7ContextENS1_16DrawElementsTypeEmmbPNS1_10IndexRangeE" title='rx::BufferMtl::getIndexRange' data-ref="_ZN2rx9BufferMtl13getIndexRangeEPKN2gl7ContextENS1_16DrawElementsTypeEmmbPNS1_10IndexRangeE" data-ref-filename="_ZN2rx9BufferMtl13getIndexRangeEPKN2gl7ContextENS1_16DrawElementsTypeEmmbPNS1_10IndexRangeE">getIndexRange</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col0 decl" id="1850context" title='context' data-type='const gl::Context *' data-ref="1850context" data-ref-filename="1850context">context</dfn>,</td></tr>
<tr><th id="249">249</th><td>                                       <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a> <dfn class="local col1 decl" id="1851type" title='type' data-type='gl::DrawElementsType' data-ref="1851type" data-ref-filename="1851type">type</dfn>,</td></tr>
<tr><th id="250">250</th><td>                                       <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="1852offset" title='offset' data-type='size_t' data-ref="1852offset" data-ref-filename="1852offset">offset</dfn>,</td></tr>
<tr><th id="251">251</th><td>                                       <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="1853count" title='count' data-type='size_t' data-ref="1853count" data-ref-filename="1853count">count</dfn>,</td></tr>
<tr><th id="252">252</th><td>                                       <em>bool</em> <dfn class="local col4 decl" id="1854primitiveRestartEnabled" title='primitiveRestartEnabled' data-type='bool' data-ref="1854primitiveRestartEnabled" data-ref-filename="1854primitiveRestartEnabled">primitiveRestartEnabled</dfn>,</td></tr>
<tr><th id="253">253</th><td>                                       <span class="namespace">gl::</span><a class="type" href="../../../common/mathutil.h.html#gl::IndexRange" title='gl::IndexRange' data-ref="gl::IndexRange" data-ref-filename="gl..IndexRange">IndexRange</a> *<dfn class="local col5 decl" id="1855outRange" title='outRange' data-type='gl::IndexRange *' data-ref="1855outRange" data-ref-filename="1855outRange">outRange</dfn>)</td></tr>
<tr><th id="254">254</th><td>{</td></tr>
<tr><th id="255">255</th><td>    <em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col6 decl" id="1856indices" title='indices' data-type='const uint8_t *' data-ref="1856indices" data-ref-filename="1856indices">indices</dfn> = <a class="member fn" href="#_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" title='rx::BufferMtl::getClientShadowCopyData' data-ref="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE">getClientShadowCopyData</a>(<span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col0 ref" href="#1850context" title='context' data-ref="1850context" data-ref-filename="1850context">context</a>)) + <a class="local col2 ref" href="#1852offset" title='offset' data-ref="1852offset" data-ref-filename="1852offset">offset</a>;</td></tr>
<tr><th id="256">256</th><td></td></tr>
<tr><th id="257">257</th><td>    *<a class="local col5 ref" href="#1855outRange" title='outRange' data-ref="1855outRange" data-ref-filename="1855outRange">outRange</a> <a class="ref fn" href="../../../common/mathutil.h.html#746" title='gl::IndexRange::operator=' data-ref="_ZN2gl10IndexRangeaSEOS0_" data-ref-filename="_ZN2gl10IndexRangeaSEOS0_">=</a> <span class="namespace">gl::</span><a class="ref fn" href="../../../common/utilities.h.html#_ZN2gl17ComputeIndexRangeENS_16DrawElementsTypeEPKvmb" title='gl::ComputeIndexRange' data-ref="_ZN2gl17ComputeIndexRangeENS_16DrawElementsTypeEPKvmb" data-ref-filename="_ZN2gl17ComputeIndexRangeENS_16DrawElementsTypeEPKvmb">ComputeIndexRange</a>(<a class="local col1 ref" href="#1851type" title='type' data-ref="1851type" data-ref-filename="1851type">type</a>, <a class="local col6 ref" href="#1856indices" title='indices' data-ref="1856indices" data-ref-filename="1856indices">indices</a>, <a class="local col3 ref" href="#1853count" title='count' data-ref="1853count" data-ref-filename="1853count">count</a>, <a class="local col4 ref" href="#1854primitiveRestartEnabled" title='primitiveRestartEnabled' data-ref="1854primitiveRestartEnabled" data-ref-filename="1854primitiveRestartEnabled">primitiveRestartEnabled</a>);</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="260">260</th><td>}</td></tr>
<tr><th id="261">261</th><td></td></tr>
<tr><th id="262">262</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl19getFirstLastIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeEmmPNSt3__14pairIjjEE" title='rx::BufferMtl::getFirstLastIndices' data-ref="_ZN2rx9BufferMtl19getFirstLastIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeEmmPNSt3__14pairIjjEE" data-ref-filename="_ZN2rx9BufferMtl19getFirstLastIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeEmmPNSt3__14pairIjjEE">getFirstLastIndices</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col7 decl" id="1857contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1857contextMtl" data-ref-filename="1857contextMtl">contextMtl</dfn>,</td></tr>
<tr><th id="263">263</th><td>                                             <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a> <dfn class="local col8 decl" id="1858type" title='type' data-type='gl::DrawElementsType' data-ref="1858type" data-ref-filename="1858type">type</dfn>,</td></tr>
<tr><th id="264">264</th><td>                                             <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="1859offset" title='offset' data-type='size_t' data-ref="1859offset" data-ref-filename="1859offset">offset</dfn>,</td></tr>
<tr><th id="265">265</th><td>                                             <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="1860count" title='count' data-type='size_t' data-ref="1860count" data-ref-filename="1860count">count</dfn>,</td></tr>
<tr><th id="266">266</th><td>                                             <span class="namespace">std::</span><span class='type' title='std::__1::pair' data-ref="std::__1::pair" data-ref-filename="std..__1..pair">pair</span>&lt;<span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span>, <span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span>&gt; *<dfn class="local col1 decl" id="1861outIndices" title='outIndices' data-type='std::pair&lt;uint32_t, uint32_t&gt; *' data-ref="1861outIndices" data-ref-filename="1861outIndices">outIndices</dfn>)</td></tr>
<tr><th id="267">267</th><td>{</td></tr>
<tr><th id="268">268</th><td>    <em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col2 decl" id="1862indices" title='indices' data-type='const uint8_t *' data-ref="1862indices" data-ref-filename="1862indices">indices</dfn> = <a class="member fn" href="#_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" title='rx::BufferMtl::getClientShadowCopyData' data-ref="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE">getClientShadowCopyData</a>(<a class="local col7 ref" href="#1857contextMtl" title='contextMtl' data-ref="1857contextMtl" data-ref-filename="1857contextMtl">contextMtl</a>) + <a class="local col9 ref" href="#1859offset" title='offset' data-ref="1859offset" data-ref-filename="1859offset">offset</a>;</td></tr>
<tr><th id="269">269</th><td></td></tr>
<tr><th id="270">270</th><td>    <b>switch</b> (<a class="local col8 ref" href="#1858type" title='type' data-ref="1858type" data-ref-filename="1858type">type</a>)</td></tr>
<tr><th id="271">271</th><td>    {</td></tr>
<tr><th id="272">272</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedByte" title='gl::DrawElementsType::UnsignedByte' data-ref="gl::DrawElementsType::UnsignedByte" data-ref-filename="gl..DrawElementsType..UnsignedByte">UnsignedByte</a>:</td></tr>
<tr><th id="273">273</th><td>            <b>return</b> <a class="tu ref fn" href="#_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" title='rx::(anonymous namespace)::GetFirstLastIndices' data-use='c' data-ref="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" data-ref-filename="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE">GetFirstLastIndices</a>(<b>static_cast</b>&lt;<em>const</em> <a class="typedef" href="../../../../include/GLES/gl.h.html#GLubyte" title='GLubyte' data-type='khronos_uint8_t' data-ref="GLubyte" data-ref-filename="GLubyte">GLubyte</a> *&gt;(<a class="local col2 ref" href="#1862indices" title='indices' data-ref="1862indices" data-ref-filename="1862indices">indices</a>), <a class="local col0 ref" href="#1860count" title='count' data-ref="1860count" data-ref-filename="1860count">count</a>, <a class="local col1 ref" href="#1861outIndices" title='outIndices' data-ref="1861outIndices" data-ref-filename="1861outIndices">outIndices</a>);</td></tr>
<tr><th id="274">274</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedShort" title='gl::DrawElementsType::UnsignedShort' data-ref="gl::DrawElementsType::UnsignedShort" data-ref-filename="gl..DrawElementsType..UnsignedShort">UnsignedShort</a>:</td></tr>
<tr><th id="275">275</th><td>            <b>return</b> <a class="tu ref fn" href="#_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" title='rx::(anonymous namespace)::GetFirstLastIndices' data-use='c' data-ref="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" data-ref-filename="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE">GetFirstLastIndices</a>(<b>reinterpret_cast</b>&lt;<em>const</em> <a class="typedef" href="../../../../include/GLES/gl.h.html#GLushort" title='GLushort' data-type='unsigned short' data-ref="GLushort" data-ref-filename="GLushort">GLushort</a> *&gt;(<a class="local col2 ref" href="#1862indices" title='indices' data-ref="1862indices" data-ref-filename="1862indices">indices</a>), <a class="local col0 ref" href="#1860count" title='count' data-ref="1860count" data-ref-filename="1860count">count</a>,</td></tr>
<tr><th id="276">276</th><td>                                       <a class="local col1 ref" href="#1861outIndices" title='outIndices' data-ref="1861outIndices" data-ref-filename="1861outIndices">outIndices</a>);</td></tr>
<tr><th id="277">277</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedInt" title='gl::DrawElementsType::UnsignedInt' data-ref="gl::DrawElementsType::UnsignedInt" data-ref-filename="gl..DrawElementsType..UnsignedInt">UnsignedInt</a>:</td></tr>
<tr><th id="278">278</th><td>            <b>return</b> <a class="tu ref fn" href="#_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" title='rx::(anonymous namespace)::GetFirstLastIndices' data-use='c' data-ref="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE" data-ref-filename="_ZN2rx12_GLOBAL__N_119GetFirstLastIndicesEPKT_mPNSt3__14pairIjjEE">GetFirstLastIndices</a>(<b>reinterpret_cast</b>&lt;<em>const</em> <a class="typedef" href="../../../../include/GLES/gl.h.html#GLuint" title='GLuint' data-type='unsigned int' data-ref="GLuint" data-ref-filename="GLuint">GLuint</a> *&gt;(<a class="local col2 ref" href="#1862indices" title='indices' data-ref="1862indices" data-ref-filename="1862indices">indices</a>), <a class="local col0 ref" href="#1860count" title='count' data-ref="1860count" data-ref-filename="1860count">count</a>,</td></tr>
<tr><th id="279">279</th><td>                                       <a class="local col1 ref" href="#1861outIndices" title='outIndices' data-ref="1861outIndices" data-ref-filename="1861outIndices">outIndices</a>);</td></tr>
<tr><th id="280">280</th><td>        <b>default</b>:</td></tr>
<tr><th id="281">281</th><td>            <a class="macro" href="../../../common/debug.h.html#343" title="do { !((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 281, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Unreachable reached: &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot;(&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 281 &lt;&lt; &quot;)&quot;; } while (0)" data-ref="_M/UNREACHABLE">UNREACHABLE</a>();</td></tr>
<tr><th id="282">282</th><td>            <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Stop" title='angle::Result::Stop' data-ref="angle::Result::Stop" data-ref-filename="angle..Result..Stop">Stop</a>;</td></tr>
<tr><th id="283">283</th><td>    }</td></tr>
<tr><th id="284">284</th><td></td></tr>
<tr><th id="285">285</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><em>void</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="virtual decl def fn" id="_ZN2rx9BufferMtl13onDataChangedEv" title='rx::BufferMtl::onDataChanged' data-ref="_ZN2rx9BufferMtl13onDataChangedEv" data-ref-filename="_ZN2rx9BufferMtl13onDataChangedEv">onDataChanged</dfn>()</td></tr>
<tr><th id="289">289</th><td>{</td></tr>
<tr><th id="290">290</th><td>    <a class="member fn" href="#_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" title='rx::BufferMtl::markConversionBuffersDirty' data-ref="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" data-ref-filename="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv">markConversionBuffersDirty</a>();</td></tr>
<tr><th id="291">291</th><td>}</td></tr>
<tr><th id="292">292</th><td></td></tr>
<tr><th id="293">293</th><td><i>/* public */</i></td></tr>
<tr><th id="294">294</th><td><em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" title='rx::BufferMtl::getClientShadowCopyData' data-ref="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23getClientShadowCopyDataEPNS_10ContextMtlE">getClientShadowCopyData</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col3 decl" id="1863contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1863contextMtl" data-ref-filename="1863contextMtl">contextMtl</dfn>)</td></tr>
<tr><th id="295">295</th><td>{</td></tr>
<tr><th id="296">296</th><td>    <b>if</b> (<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" title='rx::mtl::BufferPool::getMaxBuffers' data-ref="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" data-ref-filename="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv">getMaxBuffers</a>() == <var>1</var>)</td></tr>
<tr><th id="297">297</th><td>    {</td></tr>
<tr><th id="298">298</th><td>        <i>// Don't need shadow copy in this case, use the buffer directly</i></td></tr>
<tr><th id="299">299</th><td>        <b>return</b> <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" title='rx::mtl::Buffer::mapReadOnly' data-ref="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE">mapReadOnly</a>(<a class="local col3 ref" href="#1863contextMtl" title='contextMtl' data-ref="1863contextMtl" data-ref-filename="1863contextMtl">contextMtl</a>);</td></tr>
<tr><th id="300">300</th><td>    }</td></tr>
<tr><th id="301">301</th><td>    <b>return</b> <a class="member fn" href="#_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" title='rx::BufferMtl::syncAndObtainShadowCopy' data-ref="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE">syncAndObtainShadowCopy</a>(<a class="local col3 ref" href="#1863contextMtl" title='contextMtl' data-ref="1863contextMtl" data-ref-filename="1863contextMtl">contextMtl</a>);</td></tr>
<tr><th id="302">302</th><td>}</td></tr>
<tr><th id="303">303</th><td></td></tr>
<tr><th id="304">304</th><td><em>bool</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE" title='rx::BufferMtl::clientShadowCopyDataNeedSync' data-ref="_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl28clientShadowCopyDataNeedSyncEPNS_10ContextMtlE">clientShadowCopyDataNeedSync</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col4 decl" id="1864contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1864contextMtl" data-ref-filename="1864contextMtl">contextMtl</dfn>)</td></tr>
<tr><th id="305">305</th><td>{</td></tr>
<tr><th id="306">306</th><td>    <b>return</b> <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv" title='rx::mtl::Resource::isCPUReadMemDirty' data-ref="_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv" data-ref-filename="_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv">isCPUReadMemDirty</a>();</td></tr>
<tr><th id="307">307</th><td>}</td></tr>
<tr><th id="308">308</th><td></td></tr>
<tr><th id="309">309</th><td><em>void</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" title='rx::BufferMtl::ensureShadowCopySyncedFromGPU' data-ref="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE">ensureShadowCopySyncedFromGPU</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col5 decl" id="1865contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1865contextMtl" data-ref-filename="1865contextMtl">contextMtl</dfn>)</td></tr>
<tr><th id="310">310</th><td>{</td></tr>
<tr><th id="311">311</th><td>    <b>if</b> (<a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv" title='rx::mtl::Resource::isCPUReadMemDirty' data-ref="_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv" data-ref-filename="_ZNK2rx3mtl8Resource17isCPUReadMemDirtyEv">isCPUReadMemDirty</a>())</td></tr>
<tr><th id="312">312</th><td>    {</td></tr>
<tr><th id="313">313</th><td>        <em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col6 decl" id="1866ptr" title='ptr' data-type='const uint8_t *' data-ref="1866ptr" data-ref-filename="1866ptr">ptr</dfn> = <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" title='rx::mtl::Buffer::mapReadOnly' data-ref="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE">mapReadOnly</a>(<a class="local col5 ref" href="#1865contextMtl" title='contextMtl' data-ref="1865contextMtl" data-ref-filename="1865contextMtl">contextMtl</a>);</td></tr>
<tr><th id="314">314</th><td>        <span class='ref fn' title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</span>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>(), <a class="local col6 ref" href="#1866ptr" title='ptr' data-ref="1866ptr" data-ref-filename="1866ptr">ptr</a>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx9BufferMtl4sizeEv" title='rx::BufferMtl::size' data-ref="_ZNK2rx9BufferMtl4sizeEv" data-ref-filename="_ZNK2rx9BufferMtl4sizeEv">size</a>());</td></tr>
<tr><th id="315">315</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" title='rx::mtl::Buffer::unmap' data-ref="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE">unmap</a>(<a class="local col5 ref" href="#1865contextMtl" title='contextMtl' data-ref="1865contextMtl" data-ref-filename="1865contextMtl">contextMtl</a>);</td></tr>
<tr><th id="316">316</th><td></td></tr>
<tr><th id="317">317</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl8Resource20resetCPUReadMemDirtyEv" title='rx::mtl::Resource::resetCPUReadMemDirty' data-ref="_ZN2rx3mtl8Resource20resetCPUReadMemDirtyEv" data-ref-filename="_ZN2rx3mtl8Resource20resetCPUReadMemDirtyEv">resetCPUReadMemDirty</a>();</td></tr>
<tr><th id="318">318</th><td>    }</td></tr>
<tr><th id="319">319</th><td>}</td></tr>
<tr><th id="320">320</th><td><span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" title='rx::BufferMtl::syncAndObtainShadowCopy' data-ref="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl23syncAndObtainShadowCopyEPNS_10ContextMtlE">syncAndObtainShadowCopy</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col7 decl" id="1867contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1867contextMtl" data-ref-filename="1867contextMtl">contextMtl</dfn>)</td></tr>
<tr><th id="321">321</th><td>{</td></tr>
<tr><th id="322">322</th><td>    <a class="macro" href="../../../common/debug.h.html#316" title="(mShadowCopy.size() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 322, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 322 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mShadowCopy.size()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZNK5angle12MemoryBuffer4sizeEv" title='angle::MemoryBuffer::size' data-ref="_ZNK5angle12MemoryBuffer4sizeEv" data-ref-filename="_ZNK5angle12MemoryBuffer4sizeEv">size</a>());</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td>    <a class="member fn" href="#_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" title='rx::BufferMtl::ensureShadowCopySyncedFromGPU' data-ref="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE">ensureShadowCopySyncedFromGPU</a>(<a class="local col7 ref" href="#1867contextMtl" title='contextMtl' data-ref="1867contextMtl" data-ref-filename="1867contextMtl">contextMtl</a>);</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td>    <b>return</b> <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>();</td></tr>
<tr><th id="327">327</th><td>}</td></tr>
<tr><th id="328">328</th><td></td></tr>
<tr><th id="329">329</th><td><a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a> *<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl25getVertexConversionBufferEPNS_10ContextMtlEN5angle8FormatIDEjm" title='rx::BufferMtl::getVertexConversionBuffer' data-ref="_ZN2rx9BufferMtl25getVertexConversionBufferEPNS_10ContextMtlEN5angle8FormatIDEjm" data-ref-filename="_ZN2rx9BufferMtl25getVertexConversionBufferEPNS_10ContextMtlEN5angle8FormatIDEjm">getVertexConversionBuffer</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col8 decl" id="1868context" title='context' data-type='rx::ContextMtl *' data-ref="1868context" data-ref-filename="1868context">context</dfn>,</td></tr>
<tr><th id="330">330</th><td>                                                          <span class="namespace">angle::</span><a class="type" href="../FormatID_autogen.h.html#angle::FormatID" title='angle::FormatID' data-ref="angle::FormatID" data-ref-filename="angle..FormatID">FormatID</a> <dfn class="local col9 decl" id="1869formatID" title='formatID' data-type='angle::FormatID' data-ref="1869formatID" data-ref-filename="1869formatID">formatID</dfn>,</td></tr>
<tr><th id="331">331</th><td>                                                          <a class="typedef" href="../../../../include/GLES/gl.h.html#GLuint" title='GLuint' data-type='unsigned int' data-ref="GLuint" data-ref-filename="GLuint">GLuint</a> <dfn class="local col0 decl" id="1870stride" title='stride' data-type='GLuint' data-ref="1870stride" data-ref-filename="1870stride">stride</dfn>,</td></tr>
<tr><th id="332">332</th><td>                                                          <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="1871offset" title='offset' data-type='size_t' data-ref="1871offset" data-ref-filename="1871offset">offset</dfn>)</td></tr>
<tr><th id="333">333</th><td>{</td></tr>
<tr><th id="334">334</th><td>    <b>for</b> (<a class="type" href="BufferMtl.h.html#rx::VertexConversionBufferMtl" title='rx::VertexConversionBufferMtl' data-ref="rx::VertexConversionBufferMtl" data-ref-filename="rx..VertexConversionBufferMtl">VertexConversionBufferMtl</a> &amp;<dfn class="local col2 decl" id="1872buffer" title='buffer' data-type='rx::VertexConversionBufferMtl &amp;' data-ref="1872buffer" data-ref-filename="1872buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mVertexConversionBuffers" title='rx::BufferMtl::mVertexConversionBuffers' data-ref="rx::BufferMtl::mVertexConversionBuffers" data-ref-filename="rx..BufferMtl..mVertexConversionBuffers">mVertexConversionBuffers</a>)</td></tr>
<tr><th id="335">335</th><td>    {</td></tr>
<tr><th id="336">336</th><td>        <b>if</b> (<a class="local col2 ref" href="#1872buffer" title='buffer' data-ref="1872buffer" data-ref-filename="1872buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::formatID" title='rx::VertexConversionBufferMtl::formatID' data-ref="rx::VertexConversionBufferMtl::formatID" data-ref-filename="rx..VertexConversionBufferMtl..formatID">formatID</a> == <a class="local col9 ref" href="#1869formatID" title='formatID' data-ref="1869formatID" data-ref-filename="1869formatID">formatID</a> &amp;&amp; <a class="local col2 ref" href="#1872buffer" title='buffer' data-ref="1872buffer" data-ref-filename="1872buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::stride" title='rx::VertexConversionBufferMtl::stride' data-ref="rx::VertexConversionBufferMtl::stride" data-ref-filename="rx..VertexConversionBufferMtl..stride">stride</a> == <a class="local col0 ref" href="#1870stride" title='stride' data-ref="1870stride" data-ref-filename="1870stride">stride</a> &amp;&amp; <a class="local col2 ref" href="#1872buffer" title='buffer' data-ref="1872buffer" data-ref-filename="1872buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::VertexConversionBufferMtl::offset" title='rx::VertexConversionBufferMtl::offset' data-ref="rx::VertexConversionBufferMtl::offset" data-ref-filename="rx..VertexConversionBufferMtl..offset">offset</a> == <a class="local col1 ref" href="#1871offset" title='offset' data-ref="1871offset" data-ref-filename="1871offset">offset</a>)</td></tr>
<tr><th id="337">337</th><td>        {</td></tr>
<tr><th id="338">338</th><td>            <b>return</b> &amp;<a class="local col2 ref" href="#1872buffer" title='buffer' data-ref="1872buffer" data-ref-filename="1872buffer">buffer</a>;</td></tr>
<tr><th id="339">339</th><td>        }</td></tr>
<tr><th id="340">340</th><td>    }</td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mVertexConversionBuffers" title='rx::BufferMtl::mVertexConversionBuffers' data-ref="rx::BufferMtl::mVertexConversionBuffers" data-ref-filename="rx..BufferMtl..mVertexConversionBuffers">mVertexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::emplace_back' data-ref="_ZNSt3__16vector12emplace_backEDpOTL0__" data-ref-filename="_ZNSt3__16vector12emplace_backEDpOTL0__">emplace_back</span>(<span class='refarg'><a class="local col8 ref" href="#1868context" title='context' data-ref="1868context" data-ref-filename="1868context">context</a></span>, <span class='refarg'><a class="local col9 ref" href="#1869formatID" title='formatID' data-ref="1869formatID" data-ref-filename="1869formatID">formatID</a></span>, <span class='refarg'><a class="local col0 ref" href="#1870stride" title='stride' data-ref="1870stride" data-ref-filename="1870stride">stride</a></span>, <span class='refarg'><a class="local col1 ref" href="#1871offset" title='offset' data-ref="1871offset" data-ref-filename="1871offset">offset</a></span>);</td></tr>
<tr><th id="343">343</th><td>    <a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a> *<dfn class="local col3 decl" id="1873conv" title='conv' data-type='rx::ConversionBufferMtl *' data-ref="1873conv" data-ref-filename="1873conv">conv</dfn>        = &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mVertexConversionBuffers" title='rx::BufferMtl::mVertexConversionBuffers' data-ref="rx::BufferMtl::mVertexConversionBuffers" data-ref-filename="rx..BufferMtl..mVertexConversionBuffers">mVertexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>();</td></tr>
<tr><th id="344">344</th><td>    <em>const</em> <span class="namespace">angle::</span><a class="type" href="../Format.h.html#angle::Format" title='angle::Format' data-ref="angle::Format" data-ref-filename="angle..Format">Format</a> &amp;<dfn class="local col4 decl" id="1874angleFormat" title='angleFormat' data-type='const angle::Format &amp;' data-ref="1874angleFormat" data-ref-filename="1874angleFormat">angleFormat</dfn> = <span class="namespace">angle::</span><a class="type" href="../Format.h.html#angle::Format" title='angle::Format' data-ref="angle::Format" data-ref-filename="angle..Format">Format</a>::<a class="ref fn" href="../Format.h.html#_ZN5angle6Format3GetENS_8FormatIDE" title='angle::Format::Get' data-ref="_ZN5angle6Format3GetENS_8FormatIDE" data-ref-filename="_ZN5angle6Format3GetENS_8FormatIDE">Get</a>(<a class="local col9 ref" href="#1869formatID" title='formatID' data-ref="1869formatID" data-ref-filename="1869formatID">formatID</a>);</td></tr>
<tr><th id="345">345</th><td>    <a class="local col3 ref" href="#1873conv" title='conv' data-ref="1873conv" data-ref-filename="1873conv">conv</a>-&gt;<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::data" title='rx::ConversionBufferMtl::data' data-ref="rx::ConversionBufferMtl::data" data-ref-filename="rx..ConversionBufferMtl..data">data</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool15updateAlignmentEPNS0_7ContextEm" title='rx::mtl::BufferPool::updateAlignment' data-ref="_ZN2rx3mtl10BufferPool15updateAlignmentEPNS0_7ContextEm" data-ref-filename="_ZN2rx3mtl10BufferPool15updateAlignmentEPNS0_7ContextEm">updateAlignment</a>(<a class="local col8 ref" href="#1868context" title='context' data-ref="1868context" data-ref-filename="1868context">context</a>, <a class="local col4 ref" href="#1874angleFormat" title='angleFormat' data-ref="1874angleFormat" data-ref-filename="1874angleFormat">angleFormat</a>.<a class="ref field" href="../Format.h.html#angle::Format::pixelBytes" title='angle::Format::pixelBytes' data-ref="angle::Format::pixelBytes" data-ref-filename="angle..Format..pixelBytes">pixelBytes</a>);</td></tr>
<tr><th id="346">346</th><td></td></tr>
<tr><th id="347">347</th><td>    <b>return</b> <a class="local col3 ref" href="#1873conv" title='conv' data-ref="1873conv" data-ref-filename="1873conv">conv</a>;</td></tr>
<tr><th id="348">348</th><td>}</td></tr>
<tr><th id="349">349</th><td></td></tr>
<tr><th id="350">350</th><td><a class="type" href="BufferMtl.h.html#rx::IndexConversionBufferMtl" title='rx::IndexConversionBufferMtl' data-ref="rx::IndexConversionBufferMtl" data-ref-filename="rx..IndexConversionBufferMtl">IndexConversionBufferMtl</a> *<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl24getIndexConversionBufferEPNS_10ContextMtlEN2gl16DrawElementsTypeEbm" title='rx::BufferMtl::getIndexConversionBuffer' data-ref="_ZN2rx9BufferMtl24getIndexConversionBufferEPNS_10ContextMtlEN2gl16DrawElementsTypeEbm" data-ref-filename="_ZN2rx9BufferMtl24getIndexConversionBufferEPNS_10ContextMtlEN2gl16DrawElementsTypeEbm">getIndexConversionBuffer</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col5 decl" id="1875context" title='context' data-type='rx::ContextMtl *' data-ref="1875context" data-ref-filename="1875context">context</dfn>,</td></tr>
<tr><th id="351">351</th><td>                                                              <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a> <dfn class="local col6 decl" id="1876elemType" title='elemType' data-type='gl::DrawElementsType' data-ref="1876elemType" data-ref-filename="1876elemType">elemType</dfn>,</td></tr>
<tr><th id="352">352</th><td>                                                              <em>bool</em> <dfn class="local col7 decl" id="1877primitiveRestartEnabled" title='primitiveRestartEnabled' data-type='bool' data-ref="1877primitiveRestartEnabled" data-ref-filename="1877primitiveRestartEnabled">primitiveRestartEnabled</dfn>,</td></tr>
<tr><th id="353">353</th><td>                                                              <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="1878offset" title='offset' data-type='size_t' data-ref="1878offset" data-ref-filename="1878offset">offset</dfn>)</td></tr>
<tr><th id="354">354</th><td>{</td></tr>
<tr><th id="355">355</th><td>    <b>for</b> (<em>auto</em> &amp;<dfn class="local col9 decl" id="1879buffer" title='buffer' data-type='rx::IndexConversionBufferMtl &amp;' data-ref="1879buffer" data-ref-filename="1879buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mIndexConversionBuffers" title='rx::BufferMtl::mIndexConversionBuffers' data-ref="rx::BufferMtl::mIndexConversionBuffers" data-ref-filename="rx..BufferMtl..mIndexConversionBuffers">mIndexConversionBuffers</a>)</td></tr>
<tr><th id="356">356</th><td>    {</td></tr>
<tr><th id="357">357</th><td>        <b>if</b> (<a class="local col9 ref" href="#1879buffer" title='buffer' data-ref="1879buffer" data-ref-filename="1879buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::elemType" title='rx::IndexConversionBufferMtl::elemType' data-ref="rx::IndexConversionBufferMtl::elemType" data-ref-filename="rx..IndexConversionBufferMtl..elemType">elemType</a> == <a class="local col6 ref" href="#1876elemType" title='elemType' data-ref="1876elemType" data-ref-filename="1876elemType">elemType</a> &amp;&amp; <a class="local col9 ref" href="#1879buffer" title='buffer' data-ref="1879buffer" data-ref-filename="1879buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::offset" title='rx::IndexConversionBufferMtl::offset' data-ref="rx::IndexConversionBufferMtl::offset" data-ref-filename="rx..IndexConversionBufferMtl..offset">offset</a> == <a class="local col8 ref" href="#1878offset" title='offset' data-ref="1878offset" data-ref-filename="1878offset">offset</a> &amp;&amp;</td></tr>
<tr><th id="358">358</th><td>            <a class="local col9 ref" href="#1879buffer" title='buffer' data-ref="1879buffer" data-ref-filename="1879buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::IndexConversionBufferMtl::primitiveRestartEnabled" title='rx::IndexConversionBufferMtl::primitiveRestartEnabled' data-ref="rx::IndexConversionBufferMtl::primitiveRestartEnabled" data-ref-filename="rx..IndexConversionBufferMtl..primitiveRestartEnabled">primitiveRestartEnabled</a> == <a class="local col7 ref" href="#1877primitiveRestartEnabled" title='primitiveRestartEnabled' data-ref="1877primitiveRestartEnabled" data-ref-filename="1877primitiveRestartEnabled">primitiveRestartEnabled</a>)</td></tr>
<tr><th id="359">359</th><td>        {</td></tr>
<tr><th id="360">360</th><td>            <b>return</b> &amp;<a class="local col9 ref" href="#1879buffer" title='buffer' data-ref="1879buffer" data-ref-filename="1879buffer">buffer</a>;</td></tr>
<tr><th id="361">361</th><td>        }</td></tr>
<tr><th id="362">362</th><td>    }</td></tr>
<tr><th id="363">363</th><td></td></tr>
<tr><th id="364">364</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mIndexConversionBuffers" title='rx::BufferMtl::mIndexConversionBuffers' data-ref="rx::BufferMtl::mIndexConversionBuffers" data-ref-filename="rx..BufferMtl..mIndexConversionBuffers">mIndexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::emplace_back' data-ref="_ZNSt3__16vector12emplace_backEDpOTL0__" data-ref-filename="_ZNSt3__16vector12emplace_backEDpOTL0__">emplace_back</span>(<span class='refarg'><a class="local col5 ref" href="#1875context" title='context' data-ref="1875context" data-ref-filename="1875context">context</a></span>, <span class='refarg'><a class="local col6 ref" href="#1876elemType" title='elemType' data-ref="1876elemType" data-ref-filename="1876elemType">elemType</a></span>, <span class='refarg'><a class="local col7 ref" href="#1877primitiveRestartEnabled" title='primitiveRestartEnabled' data-ref="1877primitiveRestartEnabled" data-ref-filename="1877primitiveRestartEnabled">primitiveRestartEnabled</a></span>, <span class='refarg'><a class="local col8 ref" href="#1878offset" title='offset' data-ref="1878offset" data-ref-filename="1878offset">offset</a></span>);</td></tr>
<tr><th id="365">365</th><td>    <b>return</b> &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mIndexConversionBuffers" title='rx::BufferMtl::mIndexConversionBuffers' data-ref="rx::BufferMtl::mIndexConversionBuffers" data-ref-filename="rx..BufferMtl..mIndexConversionBuffers">mIndexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>();</td></tr>
<tr><th id="366">366</th><td>}</td></tr>
<tr><th id="367">367</th><td></td></tr>
<tr><th id="368">368</th><td><a class="type" href="BufferMtl.h.html#rx::ConversionBufferMtl" title='rx::ConversionBufferMtl' data-ref="rx::ConversionBufferMtl" data-ref-filename="rx..ConversionBufferMtl">ConversionBufferMtl</a> *<a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl26getUniformConversionBufferEPNS_10ContextMtlEm" title='rx::BufferMtl::getUniformConversionBuffer' data-ref="_ZN2rx9BufferMtl26getUniformConversionBufferEPNS_10ContextMtlEm" data-ref-filename="_ZN2rx9BufferMtl26getUniformConversionBufferEPNS_10ContextMtlEm">getUniformConversionBuffer</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col0 decl" id="1880context" title='context' data-type='rx::ContextMtl *' data-ref="1880context" data-ref-filename="1880context">context</dfn>, <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="1881offset" title='offset' data-type='size_t' data-ref="1881offset" data-ref-filename="1881offset">offset</dfn>)</td></tr>
<tr><th id="369">369</th><td>{</td></tr>
<tr><th id="370">370</th><td>    <b>for</b> (<a class="type" href="BufferMtl.h.html#rx::UniformConversionBufferMtl" title='rx::UniformConversionBufferMtl' data-ref="rx::UniformConversionBufferMtl" data-ref-filename="rx..UniformConversionBufferMtl">UniformConversionBufferMtl</a> &amp;<dfn class="local col2 decl" id="1882buffer" title='buffer' data-type='rx::UniformConversionBufferMtl &amp;' data-ref="1882buffer" data-ref-filename="1882buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mUniformConversionBuffers" title='rx::BufferMtl::mUniformConversionBuffers' data-ref="rx::BufferMtl::mUniformConversionBuffers" data-ref-filename="rx..BufferMtl..mUniformConversionBuffers">mUniformConversionBuffers</a>)</td></tr>
<tr><th id="371">371</th><td>    {</td></tr>
<tr><th id="372">372</th><td>        <b>if</b> (<a class="local col2 ref" href="#1882buffer" title='buffer' data-ref="1882buffer" data-ref-filename="1882buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::UniformConversionBufferMtl::offset" title='rx::UniformConversionBufferMtl::offset' data-ref="rx::UniformConversionBufferMtl::offset" data-ref-filename="rx..UniformConversionBufferMtl..offset">offset</a> == <a class="local col1 ref" href="#1881offset" title='offset' data-ref="1881offset" data-ref-filename="1881offset">offset</a>)</td></tr>
<tr><th id="373">373</th><td>        {</td></tr>
<tr><th id="374">374</th><td>            <b>return</b> &amp;<a class="local col2 ref" href="#1882buffer" title='buffer' data-ref="1882buffer" data-ref-filename="1882buffer">buffer</a>;</td></tr>
<tr><th id="375">375</th><td>        }</td></tr>
<tr><th id="376">376</th><td>    }</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mUniformConversionBuffers" title='rx::BufferMtl::mUniformConversionBuffers' data-ref="rx::BufferMtl::mUniformConversionBuffers" data-ref-filename="rx..BufferMtl..mUniformConversionBuffers">mUniformConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::emplace_back' data-ref="_ZNSt3__16vector12emplace_backEDpOTL0__" data-ref-filename="_ZNSt3__16vector12emplace_backEDpOTL0__">emplace_back</span>(<span class='refarg'><a class="local col0 ref" href="#1880context" title='context' data-ref="1880context" data-ref-filename="1880context">context</a></span>, <span class='refarg'><a class="local col1 ref" href="#1881offset" title='offset' data-ref="1881offset" data-ref-filename="1881offset">offset</a></span>);</td></tr>
<tr><th id="379">379</th><td>    <b>return</b> &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mUniformConversionBuffers" title='rx::BufferMtl::mUniformConversionBuffers' data-ref="rx::BufferMtl::mUniformConversionBuffers" data-ref-filename="rx..BufferMtl..mUniformConversionBuffers">mUniformConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::back' data-ref="_ZNSt3__16vector4backEv" data-ref-filename="_ZNSt3__16vector4backEv">back</span>();</td></tr>
<tr><th id="380">380</th><td>}</td></tr>
<tr><th id="381">381</th><td></td></tr>
<tr><th id="382">382</th><td><em>void</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" title='rx::BufferMtl::markConversionBuffersDirty' data-ref="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" data-ref-filename="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv">markConversionBuffersDirty</dfn>()</td></tr>
<tr><th id="383">383</th><td>{</td></tr>
<tr><th id="384">384</th><td>    <b>for</b> (<a class="type" href="BufferMtl.h.html#rx::VertexConversionBufferMtl" title='rx::VertexConversionBufferMtl' data-ref="rx::VertexConversionBufferMtl" data-ref-filename="rx..VertexConversionBufferMtl">VertexConversionBufferMtl</a> &amp;<dfn class="local col3 decl" id="1883buffer" title='buffer' data-type='rx::VertexConversionBufferMtl &amp;' data-ref="1883buffer" data-ref-filename="1883buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mVertexConversionBuffers" title='rx::BufferMtl::mVertexConversionBuffers' data-ref="rx::BufferMtl::mVertexConversionBuffers" data-ref-filename="rx..BufferMtl..mVertexConversionBuffers">mVertexConversionBuffers</a>)</td></tr>
<tr><th id="385">385</th><td>    {</td></tr>
<tr><th id="386">386</th><td>        <a class="local col3 ref" href="#1883buffer" title='buffer' data-ref="1883buffer" data-ref-filename="1883buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::dirty" title='rx::ConversionBufferMtl::dirty' data-ref="rx::ConversionBufferMtl::dirty" data-ref-filename="rx..ConversionBufferMtl..dirty">dirty</a>           = <b>true</b>;</td></tr>
<tr><th id="387">387</th><td>        <a class="local col3 ref" href="#1883buffer" title='buffer' data-ref="1883buffer" data-ref-filename="1883buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedBuffer" title='rx::ConversionBufferMtl::convertedBuffer' data-ref="rx::ConversionBufferMtl::convertedBuffer" data-ref-filename="rx..ConversionBufferMtl..convertedBuffer">convertedBuffer</a> <span class='ref fn' title='std::__1::shared_ptr::operator=' data-ref="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE" data-ref-filename="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE">=</span> <span class='ref fn fake' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn"></span><b>nullptr</b>;</td></tr>
<tr><th id="388">388</th><td>        <a class="local col3 ref" href="#1883buffer" title='buffer' data-ref="1883buffer" data-ref-filename="1883buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedOffset" title='rx::ConversionBufferMtl::convertedOffset' data-ref="rx::ConversionBufferMtl::convertedOffset" data-ref-filename="rx..ConversionBufferMtl..convertedOffset">convertedOffset</a> = <var>0</var>;</td></tr>
<tr><th id="389">389</th><td>    }</td></tr>
<tr><th id="390">390</th><td></td></tr>
<tr><th id="391">391</th><td>    <b>for</b> (<a class="type" href="BufferMtl.h.html#rx::IndexConversionBufferMtl" title='rx::IndexConversionBufferMtl' data-ref="rx::IndexConversionBufferMtl" data-ref-filename="rx..IndexConversionBufferMtl">IndexConversionBufferMtl</a> &amp;<dfn class="local col4 decl" id="1884buffer" title='buffer' data-type='rx::IndexConversionBufferMtl &amp;' data-ref="1884buffer" data-ref-filename="1884buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mIndexConversionBuffers" title='rx::BufferMtl::mIndexConversionBuffers' data-ref="rx::BufferMtl::mIndexConversionBuffers" data-ref-filename="rx..BufferMtl..mIndexConversionBuffers">mIndexConversionBuffers</a>)</td></tr>
<tr><th id="392">392</th><td>    {</td></tr>
<tr><th id="393">393</th><td>        <a class="local col4 ref" href="#1884buffer" title='buffer' data-ref="1884buffer" data-ref-filename="1884buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::dirty" title='rx::ConversionBufferMtl::dirty' data-ref="rx::ConversionBufferMtl::dirty" data-ref-filename="rx..ConversionBufferMtl..dirty">dirty</a>           = <b>true</b>;</td></tr>
<tr><th id="394">394</th><td>        <a class="local col4 ref" href="#1884buffer" title='buffer' data-ref="1884buffer" data-ref-filename="1884buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedBuffer" title='rx::ConversionBufferMtl::convertedBuffer' data-ref="rx::ConversionBufferMtl::convertedBuffer" data-ref-filename="rx..ConversionBufferMtl..convertedBuffer">convertedBuffer</a> <span class='ref fn' title='std::__1::shared_ptr::operator=' data-ref="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE" data-ref-filename="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE">=</span> <span class='ref fn fake' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn"></span><b>nullptr</b>;</td></tr>
<tr><th id="395">395</th><td>        <a class="local col4 ref" href="#1884buffer" title='buffer' data-ref="1884buffer" data-ref-filename="1884buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedOffset" title='rx::ConversionBufferMtl::convertedOffset' data-ref="rx::ConversionBufferMtl::convertedOffset" data-ref-filename="rx..ConversionBufferMtl..convertedOffset">convertedOffset</a> = <var>0</var>;</td></tr>
<tr><th id="396">396</th><td>    }</td></tr>
<tr><th id="397">397</th><td></td></tr>
<tr><th id="398">398</th><td>    <b>for</b> (<a class="type" href="BufferMtl.h.html#rx::UniformConversionBufferMtl" title='rx::UniformConversionBufferMtl' data-ref="rx::UniformConversionBufferMtl" data-ref-filename="rx..UniformConversionBufferMtl">UniformConversionBufferMtl</a> &amp;<dfn class="local col5 decl" id="1885buffer" title='buffer' data-type='rx::UniformConversionBufferMtl &amp;' data-ref="1885buffer" data-ref-filename="1885buffer">buffer</dfn> : <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mUniformConversionBuffers" title='rx::BufferMtl::mUniformConversionBuffers' data-ref="rx::BufferMtl::mUniformConversionBuffers" data-ref-filename="rx..BufferMtl..mUniformConversionBuffers">mUniformConversionBuffers</a>)</td></tr>
<tr><th id="399">399</th><td>    {</td></tr>
<tr><th id="400">400</th><td>        <a class="local col5 ref" href="#1885buffer" title='buffer' data-ref="1885buffer" data-ref-filename="1885buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::dirty" title='rx::ConversionBufferMtl::dirty' data-ref="rx::ConversionBufferMtl::dirty" data-ref-filename="rx..ConversionBufferMtl..dirty">dirty</a>           = <b>true</b>;</td></tr>
<tr><th id="401">401</th><td>        <a class="local col5 ref" href="#1885buffer" title='buffer' data-ref="1885buffer" data-ref-filename="1885buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedBuffer" title='rx::ConversionBufferMtl::convertedBuffer' data-ref="rx::ConversionBufferMtl::convertedBuffer" data-ref-filename="rx..ConversionBufferMtl..convertedBuffer">convertedBuffer</a> <span class='ref fn' title='std::__1::shared_ptr::operator=' data-ref="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE" data-ref-filename="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE">=</span> <span class='ref fn fake' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn"></span><b>nullptr</b>;</td></tr>
<tr><th id="402">402</th><td>        <a class="local col5 ref" href="#1885buffer" title='buffer' data-ref="1885buffer" data-ref-filename="1885buffer">buffer</a>.<a class="ref field" href="BufferMtl.h.html#rx::ConversionBufferMtl::convertedOffset" title='rx::ConversionBufferMtl::convertedOffset' data-ref="rx::ConversionBufferMtl::convertedOffset" data-ref-filename="rx..ConversionBufferMtl..convertedOffset">convertedOffset</a> = <var>0</var>;</td></tr>
<tr><th id="403">403</th><td>    }</td></tr>
<tr><th id="404">404</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndicesDirty" title='rx::BufferMtl::mRestartIndicesDirty' data-ref="rx::BufferMtl::mRestartIndicesDirty" data-ref-filename="rx..BufferMtl..mRestartIndicesDirty">mRestartIndicesDirty</a> = <b>true</b>;</td></tr>
<tr><th id="405">405</th><td>}</td></tr>
<tr><th id="406">406</th><td></td></tr>
<tr><th id="407">407</th><td><em>void</em> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl22clearConversionBuffersEv" title='rx::BufferMtl::clearConversionBuffers' data-ref="_ZN2rx9BufferMtl22clearConversionBuffersEv" data-ref-filename="_ZN2rx9BufferMtl22clearConversionBuffersEv">clearConversionBuffers</dfn>()</td></tr>
<tr><th id="408">408</th><td>{</td></tr>
<tr><th id="409">409</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mVertexConversionBuffers" title='rx::BufferMtl::mVertexConversionBuffers' data-ref="rx::BufferMtl::mVertexConversionBuffers" data-ref-filename="rx..BufferMtl..mVertexConversionBuffers">mVertexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::clear' data-ref="_ZNSt3__16vector5clearEv" data-ref-filename="_ZNSt3__16vector5clearEv">clear</span>();</td></tr>
<tr><th id="410">410</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mIndexConversionBuffers" title='rx::BufferMtl::mIndexConversionBuffers' data-ref="rx::BufferMtl::mIndexConversionBuffers" data-ref-filename="rx..BufferMtl..mIndexConversionBuffers">mIndexConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::clear' data-ref="_ZNSt3__16vector5clearEv" data-ref-filename="_ZNSt3__16vector5clearEv">clear</span>();</td></tr>
<tr><th id="411">411</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mUniformConversionBuffers" title='rx::BufferMtl::mUniformConversionBuffers' data-ref="rx::BufferMtl::mUniformConversionBuffers" data-ref-filename="rx..BufferMtl..mUniformConversionBuffers">mUniformConversionBuffers</a>.<span class='ref fn' title='std::__1::vector::clear' data-ref="_ZNSt3__16vector5clearEv" data-ref-filename="_ZNSt3__16vector5clearEv">clear</span>();</td></tr>
<tr><th id="412">412</th><td>}</td></tr>
<tr><th id="413">413</th><td></td></tr>
<tr><th id="414">414</th><td><b>template</b>&lt;<b>typename</b> T&gt;</td></tr>
<tr><th id="415">415</th><td><em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a>&gt; <dfn class="tu decl def fn" id="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" title='rx::calculateRestartRanges' data-type='std::vector&lt;IndexRange&gt; rx::calculateRestartRanges(rx::ContextMtl * ctx, mtl::BufferRef idxBuffer)' data-ref="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" data-ref-filename="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE">calculateRestartRanges</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col6 decl" id="1886ctx" title='ctx' data-type='rx::ContextMtl *' data-ref="1886ctx" data-ref-filename="1886ctx">ctx</dfn>, <span class="namespace">mtl::</span><a class="typedef" href="mtl_resources.h.html#rx::mtl::BufferRef" title='rx::mtl::BufferRef' data-type='std::shared_ptr&lt;Buffer&gt;' data-ref="rx::mtl::BufferRef" data-ref-filename="rx..mtl..BufferRef">BufferRef</a> <dfn class="local col7 decl" id="1887idxBuffer" title='idxBuffer' data-type='mtl::BufferRef' data-ref="1887idxBuffer" data-ref-filename="1887idxBuffer">idxBuffer</dfn>)</td></tr>
<tr><th id="416">416</th><td>{</td></tr>
<tr><th id="417">417</th><td>    <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a>&gt; <span class='ref fn fake' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev"></span><dfn class="local col8 decl" id="1888result" title='result' data-type='std::vector&lt;IndexRange&gt;' data-ref="1888result" data-ref-filename="1888result">result</dfn>;</td></tr>
<tr><th id="418">418</th><td>    <em>const</em> T *<dfn class="local col9 decl" id="1889bufferData" title='bufferData' data-type='const T *' data-ref="1889bufferData" data-ref-filename="1889bufferData">bufferData</dfn> = <b>reinterpret_cast</b>&lt;<em>const</em> T *&gt;(<a class="local col7 ref" href="#1887idxBuffer" title='idxBuffer' data-ref="1887idxBuffer" data-ref-filename="1887idxBuffer">idxBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" title='rx::mtl::Buffer::mapReadOnly' data-ref="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer11mapReadOnlyEPNS_10ContextMtlE">mapReadOnly</a>(<a class="local col6 ref" href="#1886ctx" title='ctx' data-ref="1886ctx" data-ref-filename="1886ctx">ctx</a>));</td></tr>
<tr><th id="419">419</th><td>    <em>const</em> <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="1890numIndices" title='numIndices' data-type='const size_t' data-ref="1890numIndices" data-ref-filename="1890numIndices">numIndices</dfn> = <a class="local col7 ref" href="#1887idxBuffer" title='idxBuffer' data-ref="1887idxBuffer" data-ref-filename="1887idxBuffer">idxBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl6Buffer4sizeEv" title='rx::mtl::Buffer::size' data-ref="_ZNK2rx3mtl6Buffer4sizeEv" data-ref-filename="_ZNK2rx3mtl6Buffer4sizeEv">size</a>() / <b>sizeof</b>(T);</td></tr>
<tr><th id="420">420</th><td>    <b>constexpr</b> T <dfn class="local col1 decl" id="1891restartMarker" title='restartMarker' data-type='const T' data-ref="1891restartMarker" data-ref-filename="1891restartMarker">restartMarker</dfn> = <span class="namespace">std::</span><span class='type' title='std::__1::numeric_limits' data-ref="std::__1::numeric_limits" data-ref-filename="std..__1..numeric_limits">numeric_limits</span>&lt;T&gt;::max();</td></tr>
<tr><th id="421">421</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="1892i" title='i' data-type='size_t' data-ref="1892i" data-ref-filename="1892i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a> &lt; <a class="local col0 ref" href="#1890numIndices" title='numIndices' data-ref="1890numIndices" data-ref-filename="1890numIndices">numIndices</a>; ++<a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a>)</td></tr>
<tr><th id="422">422</th><td>    {</td></tr>
<tr><th id="423">423</th><td>        <i>// Find the start of the restart range, i.e. first index with value of restart marker.</i></td></tr>
<tr><th id="424">424</th><td>        <b>if</b> (<a class="local col9 ref" href="#1889bufferData" title='bufferData' data-ref="1889bufferData" data-ref-filename="1889bufferData">bufferData</a>[<a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a>] != <a class="local col1 ref" href="#1891restartMarker" title='restartMarker' data-ref="1891restartMarker" data-ref-filename="1891restartMarker">restartMarker</a>)</td></tr>
<tr><th id="425">425</th><td>            <b>continue</b>;</td></tr>
<tr><th id="426">426</th><td>        <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="1893restartBegin" title='restartBegin' data-type='size_t' data-ref="1893restartBegin" data-ref-filename="1893restartBegin">restartBegin</dfn> = <a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a>;</td></tr>
<tr><th id="427">427</th><td>        <i>// Find the end of the restart range, i.e. last index with value of restart marker.</i></td></tr>
<tr><th id="428">428</th><td>        <b>do</b></td></tr>
<tr><th id="429">429</th><td>        {</td></tr>
<tr><th id="430">430</th><td>            ++<a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a>;</td></tr>
<tr><th id="431">431</th><td>        } <b>while</b> (<a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a> &lt; <a class="local col0 ref" href="#1890numIndices" title='numIndices' data-ref="1890numIndices" data-ref-filename="1890numIndices">numIndices</a> &amp;&amp; <a class="local col9 ref" href="#1889bufferData" title='bufferData' data-ref="1889bufferData" data-ref-filename="1889bufferData">bufferData</a>[<a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a>] == <a class="local col1 ref" href="#1891restartMarker" title='restartMarker' data-ref="1891restartMarker" data-ref-filename="1891restartMarker">restartMarker</a>);</td></tr>
<tr><th id="432">432</th><td>        <a class="local col8 ref" href="#1888result" title='result' data-ref="1888result" data-ref-filename="1888result">result</a>.<span class='ref fn' title='std::__1::vector::emplace_back' data-ref="_ZNSt3__16vector12emplace_backEDpOTL0__" data-ref-filename="_ZNSt3__16vector12emplace_backEDpOTL0__">emplace_back</span>(<span class='refarg'><a class="local col3 ref" href="#1893restartBegin" title='restartBegin' data-ref="1893restartBegin" data-ref-filename="1893restartBegin">restartBegin</a></span>, <a class="local col2 ref" href="#1892i" title='i' data-ref="1892i" data-ref-filename="1892i">i</a> - <var>1</var>);</td></tr>
<tr><th id="433">433</th><td>    }</td></tr>
<tr><th id="434">434</th><td>    <a class="local col7 ref" href="#1887idxBuffer" title='idxBuffer' data-ref="1887idxBuffer" data-ref-filename="1887idxBuffer">idxBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" title='rx::mtl::Buffer::unmap' data-ref="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer5unmapEPNS_10ContextMtlE">unmap</a>(<a class="local col6 ref" href="#1886ctx" title='ctx' data-ref="1886ctx" data-ref-filename="1886ctx">ctx</a>);</td></tr>
<tr><th id="435">435</th><td>    <b>return</b> <a class="local col8 ref" href="#1888result" title='result' data-ref="1888result" data-ref-filename="1888result">result</a>;</td></tr>
<tr><th id="436">436</th><td>}</td></tr>
<tr><th id="437">437</th><td></td></tr>
<tr><th id="438">438</th><td><em>const</em> <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a>&gt; &amp; <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl17getRestartIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeE" title='rx::BufferMtl::getRestartIndices' data-ref="_ZN2rx9BufferMtl17getRestartIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeE" data-ref-filename="_ZN2rx9BufferMtl17getRestartIndicesEPNS_10ContextMtlEN2gl16DrawElementsTypeE">getRestartIndices</dfn>(<a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> * <dfn class="local col4 decl" id="1894ctx" title='ctx' data-type='rx::ContextMtl *' data-ref="1894ctx" data-ref-filename="1894ctx">ctx</dfn>, <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a> <dfn class="local col5 decl" id="1895indexType" title='indexType' data-type='gl::DrawElementsType' data-ref="1895indexType" data-ref-filename="1895indexType">indexType</dfn>)</td></tr>
<tr><th id="439">439</th><td>{</td></tr>
<tr><th id="440">440</th><td>    <b>if</b>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndicesDirty" title='rx::BufferMtl::mRestartIndicesDirty' data-ref="rx::BufferMtl::mRestartIndicesDirty" data-ref-filename="rx..BufferMtl..mRestartIndicesDirty">mRestartIndicesDirty</a>)</td></tr>
<tr><th id="441">441</th><td>    {</td></tr>
<tr><th id="442">442</th><td>        <span class="namespace">std::</span><span class='type' title='std::__1::vector' data-ref="std::__1::vector" data-ref-filename="std..__1..vector">vector</span>&lt;<a class="type" href="BufferMtl.h.html#rx::IndexRange" title='rx::IndexRange' data-ref="rx::IndexRange" data-ref-filename="rx..IndexRange">IndexRange</a>&gt;<span class='ref fn' title='std::__1::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt3__16vectorC1Ev" data-ref-filename="_ZNSt3__16vectorC1Ev">(</span>).<span class='ref fn' title='std::__1::vector::swap' data-ref="_ZNSt3__16vector4swapERNS_6vectorIT_T0_EE" data-ref-filename="_ZNSt3__16vector4swapERNS_6vectorIT_T0_EE">swap</span>(<span class='refarg'><a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndices" title='rx::BufferMtl::mRestartIndices' data-ref="rx::BufferMtl::mRestartIndices" data-ref-filename="rx..BufferMtl..mRestartIndices">mRestartIndices</a></span>);</td></tr>
<tr><th id="443">443</th><td>        <b>switch</b>(<a class="local col5 ref" href="#1895indexType" title='indexType' data-ref="1895indexType" data-ref-filename="1895indexType">indexType</a>)</td></tr>
<tr><th id="444">444</th><td>        {</td></tr>
<tr><th id="445">445</th><td>            <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedByte" title='gl::DrawElementsType::UnsignedByte' data-ref="gl::DrawElementsType::UnsignedByte" data-ref-filename="gl..DrawElementsType..UnsignedByte">UnsignedByte</a>:</td></tr>
<tr><th id="446">446</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndices" title='rx::BufferMtl::mRestartIndices' data-ref="rx::BufferMtl::mRestartIndices" data-ref-filename="rx..BufferMtl..mRestartIndices">mRestartIndices</a> <span class='ref fn' title='std::__1::vector::operator=' data-ref="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE" data-ref-filename="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE">=</span> <a class="tu ref fn" href="#_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" title='rx::calculateRestartRanges' data-use='c' data-ref="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" data-ref-filename="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE">calculateRestartRanges</a>&lt;<span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span>&gt;(<a class="local col4 ref" href="#1894ctx" title='ctx' data-ref="1894ctx" data-ref-filename="1894ctx">ctx</a>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" title='rx::BufferHolderMtl::getCurrentBuffer' data-ref="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" data-ref-filename="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv">getCurrentBuffer</a>());</td></tr>
<tr><th id="447">447</th><td>                <b>break</b>;</td></tr>
<tr><th id="448">448</th><td>            <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedShort" title='gl::DrawElementsType::UnsignedShort' data-ref="gl::DrawElementsType::UnsignedShort" data-ref-filename="gl..DrawElementsType..UnsignedShort">UnsignedShort</a>:</td></tr>
<tr><th id="449">449</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndices" title='rx::BufferMtl::mRestartIndices' data-ref="rx::BufferMtl::mRestartIndices" data-ref-filename="rx..BufferMtl..mRestartIndices">mRestartIndices</a> <span class='ref fn' title='std::__1::vector::operator=' data-ref="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE" data-ref-filename="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE">=</span> <a class="tu ref fn" href="#_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" title='rx::calculateRestartRanges' data-use='c' data-ref="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" data-ref-filename="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE">calculateRestartRanges</a>&lt;<span class='typedef' title='uint16_t' data-type='unsigned short' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</span>&gt;(<a class="local col4 ref" href="#1894ctx" title='ctx' data-ref="1894ctx" data-ref-filename="1894ctx">ctx</a>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" title='rx::BufferHolderMtl::getCurrentBuffer' data-ref="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" data-ref-filename="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv">getCurrentBuffer</a>());</td></tr>
<tr><th id="450">450</th><td>                <b>break</b>;</td></tr>
<tr><th id="451">451</th><td>            <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedEnums.h.html#gl::DrawElementsType" title='gl::DrawElementsType' data-ref="gl::DrawElementsType" data-ref-filename="gl..DrawElementsType">DrawElementsType</a>::<a class="enum" href="../../../common/PackedEnums.h.html#gl::DrawElementsType::UnsignedInt" title='gl::DrawElementsType::UnsignedInt' data-ref="gl::DrawElementsType::UnsignedInt" data-ref-filename="gl..DrawElementsType..UnsignedInt">UnsignedInt</a>:</td></tr>
<tr><th id="452">452</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndices" title='rx::BufferMtl::mRestartIndices' data-ref="rx::BufferMtl::mRestartIndices" data-ref-filename="rx..BufferMtl..mRestartIndices">mRestartIndices</a> <span class='ref fn' title='std::__1::vector::operator=' data-ref="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE" data-ref-filename="_ZNSt3__16vectoraSEONS_6vectorIT_T0_EE">=</span> <a class="tu ref fn" href="#_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" title='rx::calculateRestartRanges' data-use='c' data-ref="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE" data-ref-filename="_ZN2rxL22calculateRestartRangesEPNS_10ContextMtlENSt3__110shared_ptrINS_3mtl6BufferEEE">calculateRestartRanges</a>&lt;<span class='typedef' title='uint32_t' data-type='unsigned int' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</span>&gt;(<a class="local col4 ref" href="#1894ctx" title='ctx' data-ref="1894ctx" data-ref-filename="1894ctx">ctx</a>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" title='rx::BufferHolderMtl::getCurrentBuffer' data-ref="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv" data-ref-filename="_ZNK2rx15BufferHolderMtl16getCurrentBufferEv">getCurrentBuffer</a>());</td></tr>
<tr><th id="453">453</th><td>                <b>break</b>;</td></tr>
<tr><th id="454">454</th><td>            <b>default</b>:</td></tr>
<tr><th id="455">455</th><td>                <a class="macro" href="../../../common/debug.h.html#316" title="(false ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 455, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 455 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;false&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<b>false</b>);</td></tr>
<tr><th id="456">456</th><td>        }</td></tr>
<tr><th id="457">457</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndicesDirty" title='rx::BufferMtl::mRestartIndicesDirty' data-ref="rx::BufferMtl::mRestartIndicesDirty" data-ref-filename="rx..BufferMtl..mRestartIndicesDirty">mRestartIndicesDirty</a> = <b>false</b>;</td></tr>
<tr><th id="458">458</th><td>    }</td></tr>
<tr><th id="459">459</th><td>    <b>return</b> <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mRestartIndices" title='rx::BufferMtl::mRestartIndices' data-ref="rx::BufferMtl::mRestartIndices" data-ref-filename="rx..BufferMtl..mRestartIndices">mRestartIndices</a>;</td></tr>
<tr><th id="460">460</th><td>}</td></tr>
<tr><th id="461">461</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" title='rx::BufferMtl::setDataImpl' data-ref="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE" data-ref-filename="_ZN2rx9BufferMtl11setDataImplEPKN2gl7ContextENS1_13BufferBindingEPKvmNS1_11BufferUsageE">setDataImpl</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col6 decl" id="1896context" title='context' data-type='const gl::Context *' data-ref="1896context" data-ref-filename="1896context">context</dfn>,</td></tr>
<tr><th id="462">462</th><td>                                     <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding" title='gl::BufferBinding' data-ref="gl::BufferBinding" data-ref-filename="gl..BufferBinding">BufferBinding</a> <dfn class="local col7 decl" id="1897target" title='target' data-type='gl::BufferBinding' data-ref="1897target" data-ref-filename="1897target">target</dfn>,</td></tr>
<tr><th id="463">463</th><td>                                     <em>const</em> <em>void</em> *<dfn class="local col8 decl" id="1898data" title='data' data-type='const void *' data-ref="1898data" data-ref-filename="1898data">data</dfn>,</td></tr>
<tr><th id="464">464</th><td>                                     <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="1899intendedSize" title='intendedSize' data-type='size_t' data-ref="1899intendedSize" data-ref-filename="1899intendedSize">intendedSize</dfn>,</td></tr>
<tr><th id="465">465</th><td>                                     <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a> <dfn class="local col0 decl" id="1900usage" title='usage' data-type='gl::BufferUsage' data-ref="1900usage" data-ref-filename="1900usage">usage</dfn>)</td></tr>
<tr><th id="466">466</th><td>{</td></tr>
<tr><th id="467">467</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col1 decl" id="1901contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1901contextMtl" data-ref-filename="1901contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col6 ref" href="#1896context" title='context' data-ref="1896context" data-ref-filename="1896context">context</a>);</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td>    <i>// Invalidate conversion buffers</i></td></tr>
<tr><th id="470">470</th><td>    <b>if</b> (<a class="member field" href="../BufferImpl.h.html#rx::BufferImpl::mState" title='rx::BufferImpl::mState' data-ref="rx::BufferImpl::mState" data-ref-filename="rx..BufferImpl..mState">mState</a>.<a class="ref fn" href="../../Buffer.h.html#_ZNK2gl11BufferState7getSizeEv" title='gl::BufferState::getSize' data-ref="_ZNK2gl11BufferState7getSizeEv" data-ref-filename="_ZNK2gl11BufferState7getSizeEv">getSize</a>() != <b>static_cast</b>&lt;<a class="typedef" href="../../../../include/GLES/glext.h.html#GLint64" title='GLint64' data-type='khronos_int64_t' data-ref="GLint64" data-ref-filename="GLint64">GLint64</a>&gt;(<a class="local col9 ref" href="#1899intendedSize" title='intendedSize' data-ref="1899intendedSize" data-ref-filename="1899intendedSize">intendedSize</a>))</td></tr>
<tr><th id="471">471</th><td>    {</td></tr>
<tr><th id="472">472</th><td>        <a class="member fn" href="#_ZN2rx9BufferMtl22clearConversionBuffersEv" title='rx::BufferMtl::clearConversionBuffers' data-ref="_ZN2rx9BufferMtl22clearConversionBuffersEv" data-ref-filename="_ZN2rx9BufferMtl22clearConversionBuffersEv">clearConversionBuffers</a>();</td></tr>
<tr><th id="473">473</th><td>    }</td></tr>
<tr><th id="474">474</th><td>    <b>else</b></td></tr>
<tr><th id="475">475</th><td>    {</td></tr>
<tr><th id="476">476</th><td>        <a class="member fn" href="#_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" title='rx::BufferMtl::markConversionBuffersDirty' data-ref="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" data-ref-filename="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv">markConversionBuffersDirty</a>();</td></tr>
<tr><th id="477">477</th><td>    }</td></tr>
<tr><th id="478">478</th><td></td></tr>
<tr><th id="479">479</th><td>    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="1902adjustedSize" title='adjustedSize' data-type='size_t' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</dfn> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::max' data-ref="_ZNSt3__1L3maxERKT_S2_" data-ref-filename="_ZNSt3__1L3maxERKT_S2_">max</span>&lt;<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span>&gt;(<var>1</var>, <a class="local col9 ref" href="#1899intendedSize" title='intendedSize' data-ref="1899intendedSize" data-ref-filename="1899intendedSize">intendedSize</a>);</td></tr>
<tr><th id="480">480</th><td></td></tr>
<tr><th id="481">481</th><td>    <i>// Ensures no validation layer issues in std140 with data types like vec3 being 12 bytes vs 16</i></td></tr>
<tr><th id="482">482</th><td><i>    // in MSL.</i></td></tr>
<tr><th id="483">483</th><td>    <b>if</b> (<a class="local col7 ref" href="#1897target" title='target' data-ref="1897target" data-ref-filename="1897target">target</a> == <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding" title='gl::BufferBinding' data-ref="gl::BufferBinding" data-ref-filename="gl..BufferBinding">BufferBinding</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferBinding::Uniform" title='gl::BufferBinding::Uniform' data-ref="gl::BufferBinding::Uniform" data-ref-filename="gl..BufferBinding..Uniform">Uniform</a>)</td></tr>
<tr><th id="484">484</th><td>    {</td></tr>
<tr><th id="485">485</th><td>        <a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a> = <a class="ref fn" href="../../../common/mathutil.h.html#_ZN2rx11roundUpPow2ET_S0_" title='rx::roundUpPow2' data-ref="_ZN2rx11roundUpPow2ET_S0_" data-ref-filename="_ZN2rx11roundUpPow2ET_S0_">roundUpPow2</a>(<a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a>, (<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span>)<var>16</var>);</td></tr>
<tr><th id="486">486</th><td>    }</td></tr>
<tr><th id="487">487</th><td></td></tr>
<tr><th id="488">488</th><td>    <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="1903maxBuffers" title='maxBuffers' data-type='size_t' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</dfn>;</td></tr>
<tr><th id="489">489</th><td>    <b>switch</b> (<a class="local col0 ref" href="#1900usage" title='usage' data-ref="1900usage" data-ref-filename="1900usage">usage</a>)</td></tr>
<tr><th id="490">490</th><td>    {</td></tr>
<tr><th id="491">491</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage::StaticCopy" title='gl::BufferUsage::StaticCopy' data-ref="gl::BufferUsage::StaticCopy" data-ref-filename="gl..BufferUsage..StaticCopy">StaticCopy</a>:</td></tr>
<tr><th id="492">492</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage::StaticDraw" title='gl::BufferUsage::StaticDraw' data-ref="gl::BufferUsage::StaticDraw" data-ref-filename="gl..BufferUsage..StaticDraw">StaticDraw</a>:</td></tr>
<tr><th id="493">493</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage::StaticRead" title='gl::BufferUsage::StaticRead' data-ref="gl::BufferUsage::StaticRead" data-ref-filename="gl..BufferUsage..StaticRead">StaticRead</a>:</td></tr>
<tr><th id="494">494</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage::DynamicRead" title='gl::BufferUsage::DynamicRead' data-ref="gl::BufferUsage::DynamicRead" data-ref-filename="gl..BufferUsage..DynamicRead">DynamicRead</a>:</td></tr>
<tr><th id="495">495</th><td>        <b>case</b> <span class="namespace">gl::</span><a class="type" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage" title='gl::BufferUsage' data-ref="gl::BufferUsage" data-ref-filename="gl..BufferUsage">BufferUsage</a>::<a class="enum" href="../../../common/PackedGLEnums_autogen.h.html#gl::BufferUsage::StreamRead" title='gl::BufferUsage::StreamRead' data-ref="gl::BufferUsage::StreamRead" data-ref-filename="gl..BufferUsage..StreamRead">StreamRead</a>:</td></tr>
<tr><th id="496">496</th><td>            <a class="local col3 ref" href="#1903maxBuffers" title='maxBuffers' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</a> = <var>1</var>;  <i>// static/read buffer doesn't need high speed data update</i></td></tr>
<tr><th id="497">497</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv" title='rx::mtl::BufferPool::setAlwaysUseGPUMem' data-ref="_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv" data-ref-filename="_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv">setAlwaysUseGPUMem</a>();</td></tr>
<tr><th id="498">498</th><td>            <b>break</b>;</td></tr>
<tr><th id="499">499</th><td>        <b>default</b>:</td></tr>
<tr><th id="500">500</th><td>            <i>// dynamic buffer, allow up to 10 update per frame/encoding without</i></td></tr>
<tr><th id="501">501</th><td><i>            // waiting for GPU.</i></td></tr>
<tr><th id="502">502</th><td>            <b>if</b> (<a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a> &lt;= <a class="tu ref" href="#rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize" title='rx::(anonymous namespace)::kDynamicBufferPoolMaxBufSize' data-use='r' data-ref="rx::(anonymousnamespace)::kDynamicBufferPoolMaxBufSize" data-ref-filename="rx..(anonymousnamespace)..kDynamicBufferPoolMaxBufSize">kDynamicBufferPoolMaxBufSize</a>)</td></tr>
<tr><th id="503">503</th><td>            {</td></tr>
<tr><th id="504">504</th><td>                <a class="local col3 ref" href="#1903maxBuffers" title='maxBuffers' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</a> = <var>10</var>;</td></tr>
<tr><th id="505">505</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool21setAlwaysUseSharedMemEv" title='rx::mtl::BufferPool::setAlwaysUseSharedMem' data-ref="_ZN2rx3mtl10BufferPool21setAlwaysUseSharedMemEv" data-ref-filename="_ZN2rx3mtl10BufferPool21setAlwaysUseSharedMemEv">setAlwaysUseSharedMem</a>();</td></tr>
<tr><th id="506">506</th><td>            }</td></tr>
<tr><th id="507">507</th><td>            <b>else</b></td></tr>
<tr><th id="508">508</th><td>            {</td></tr>
<tr><th id="509">509</th><td>                <a class="local col3 ref" href="#1903maxBuffers" title='maxBuffers' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</a> = <var>1</var>;</td></tr>
<tr><th id="510">510</th><td>                <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv" title='rx::mtl::BufferPool::setAlwaysUseGPUMem' data-ref="_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv" data-ref-filename="_ZN2rx3mtl10BufferPool18setAlwaysUseGPUMemEv">setAlwaysUseGPUMem</a>();</td></tr>
<tr><th id="511">511</th><td>            }</td></tr>
<tr><th id="512">512</th><td>            <b>break</b>;</td></tr>
<tr><th id="513">513</th><td>    }</td></tr>
<tr><th id="514">514</th><td></td></tr>
<tr><th id="515">515</th><td>    <i>// Re-create the buffer</i></td></tr>
<tr><th id="516">516</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a> <span class='ref fn' title='std::__1::shared_ptr::operator=' data-ref="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE" data-ref-filename="_ZNSt3__110shared_ptraSEONS_10shared_ptrIT_EE">=</span> <span class='ref fn fake' title='std::__1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3__110shared_ptrC1EDn" data-ref-filename="_ZNSt3__110shared_ptrC1EDn"></span><b>nullptr</b>;</td></tr>
<tr><th id="517">517</th><td>    <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = mBufferPool.reset(contextMtl, adjustedSize, 1, maxBuffers); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool5resetEPNS_10ContextMtlEmmm" title='rx::mtl::BufferPool::reset' data-ref="_ZN2rx3mtl10BufferPool5resetEPNS_10ContextMtlEmmm" data-ref-filename="_ZN2rx3mtl10BufferPool5resetEPNS_10ContextMtlEmmm">reset</a>(<a class="local col1 ref" href="#1901contextMtl" title='contextMtl' data-ref="1901contextMtl" data-ref-filename="1901contextMtl">contextMtl</a>, <a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a>, <var>1</var>, <a class="local col3 ref" href="#1903maxBuffers" title='maxBuffers' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</a>));</td></tr>
<tr><th id="518">518</th><td></td></tr>
<tr><th id="519">519</th><td>    <b>if</b> (<a class="local col3 ref" href="#1903maxBuffers" title='maxBuffers' data-ref="1903maxBuffers" data-ref-filename="1903maxBuffers">maxBuffers</a> &gt; <var>1</var>)</td></tr>
<tr><th id="520">520</th><td>    {</td></tr>
<tr><th id="521">521</th><td>        <i>// We use shadow copy to maintain consistent data between buffers in pool</i></td></tr>
<tr><th id="522">522</th><td>        <a class="macro" href="mtl_common.h.html#441" title="do { if (__builtin_expect(!!(!(mShadowCopy.resize(adjustedSize))), 0)) { contextMtl-&gt;handleError(0x0505, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __func__, 522); return angle::Result::Stop; } } while (0)" data-ref="_M/ANGLE_MTL_CHECK">ANGLE_MTL_CHECK</a>(<a class="local col1 ref" href="#1901contextMtl" title='contextMtl' data-ref="1901contextMtl" data-ref-filename="1901contextMtl">contextMtl</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer6resizeEm" title='angle::MemoryBuffer::resize' data-ref="_ZN5angle12MemoryBuffer6resizeEm" data-ref-filename="_ZN5angle12MemoryBuffer6resizeEm">resize</a>(<a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a>), <a class="macro" href="../../../../include/GLES2/gl2.h.html#147" title="0x0505" data-ref="_M/GL_OUT_OF_MEMORY">GL_OUT_OF_MEMORY</a>);</td></tr>
<tr><th id="523">523</th><td></td></tr>
<tr><th id="524">524</th><td>        <b>if</b> (<a class="local col8 ref" href="#1898data" title='data' data-ref="1898data" data-ref-filename="1898data">data</a>)</td></tr>
<tr><th id="525">525</th><td>        {</td></tr>
<tr><th id="526">526</th><td>            <i>// Transfer data to shadow copy buffer</i></td></tr>
<tr><th id="527">527</th><td>            <em>auto</em> <dfn class="local col4 decl" id="1904ptr" title='ptr' data-type='const unsigned char *' data-ref="1904ptr" data-ref-filename="1904ptr">ptr</dfn> = <b>static_cast</b>&lt;<em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *&gt;(<a class="local col8 ref" href="#1898data" title='data' data-ref="1898data" data-ref-filename="1898data">data</a>);</td></tr>
<tr><th id="528">528</th><td>            <span class="namespace">std::</span><span class='ref fn' title='std::__1::copy' data-ref="_ZNSt3__1L4copyET_S0_T0_" data-ref-filename="_ZNSt3__1L4copyET_S0_T0_">copy</span>(<a class="local col4 ref" href="#1904ptr" title='ptr' data-ref="1904ptr" data-ref-filename="1904ptr">ptr</a>, <a class="local col4 ref" href="#1904ptr" title='ptr' data-ref="1904ptr" data-ref-filename="1904ptr">ptr</a> + <a class="local col9 ref" href="#1899intendedSize" title='intendedSize' data-ref="1899intendedSize" data-ref-filename="1899intendedSize">intendedSize</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>());</td></tr>
<tr><th id="529">529</th><td></td></tr>
<tr><th id="530">530</th><td>            <i>// Transfer data from shadow copy buffer to GPU buffer.</i></td></tr>
<tr><th id="531">531</th><td>            <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = commitShadowCopy(context, adjustedSize); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm">commitShadowCopy</a>(<a class="local col6 ref" href="#1896context" title='context' data-ref="1896context" data-ref-filename="1896context">context</a>, <a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a>));</td></tr>
<tr><th id="532">532</th><td>        }</td></tr>
<tr><th id="533">533</th><td>        <b>else</b></td></tr>
<tr><th id="534">534</th><td>        {</td></tr>
<tr><th id="535">535</th><td>            <i>// This is needed so that first buffer pointer could be available</i></td></tr>
<tr><th id="536">536</th><td>            <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = commitShadowCopy(context, 0); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm">commitShadowCopy</a>(<a class="local col6 ref" href="#1896context" title='context' data-ref="1896context" data-ref-filename="1896context">context</a>, <var>0</var>));</td></tr>
<tr><th id="537">537</th><td>        }</td></tr>
<tr><th id="538">538</th><td>    }</td></tr>
<tr><th id="539">539</th><td>    <b>else</b></td></tr>
<tr><th id="540">540</th><td>    {</td></tr>
<tr><th id="541">541</th><td>        <i>// We don't need shadow copy if there will be only one buffer in the pool.</i></td></tr>
<tr><th id="542">542</th><td>        <a class="macro" href="mtl_common.h.html#441" title="do { if (__builtin_expect(!!(!(mShadowCopy.resize(0))), 0)) { contextMtl-&gt;handleError(0x0505, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __func__, 542); return angle::Result::Stop; } } while (0)" data-ref="_M/ANGLE_MTL_CHECK">ANGLE_MTL_CHECK</a>(<a class="local col1 ref" href="#1901contextMtl" title='contextMtl' data-ref="1901contextMtl" data-ref-filename="1901contextMtl">contextMtl</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer6resizeEm" title='angle::MemoryBuffer::resize' data-ref="_ZN5angle12MemoryBuffer6resizeEm" data-ref-filename="_ZN5angle12MemoryBuffer6resizeEm">resize</a>(<var>0</var>), <a class="macro" href="../../../../include/GLES2/gl2.h.html#147" title="0x0505" data-ref="_M/GL_OUT_OF_MEMORY">GL_OUT_OF_MEMORY</a>);</td></tr>
<tr><th id="543">543</th><td></td></tr>
<tr><th id="544">544</th><td>        <i>// Allocate one buffer to use</i></td></tr>
<tr><th id="545">545</th><td>        <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = mBufferPool.allocate(contextMtl, adjustedSize, nullptr, &amp;mBuffer, nullptr, nullptr); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(</td></tr>
<tr><th id="546">546</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" title='rx::mtl::BufferPool::allocate' data-ref="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" data-ref-filename="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb">allocate</a>(<a class="local col1 ref" href="#1901contextMtl" title='contextMtl' data-ref="1901contextMtl" data-ref-filename="1901contextMtl">contextMtl</a>, <a class="local col2 ref" href="#1902adjustedSize" title='adjustedSize' data-ref="1902adjustedSize" data-ref-filename="1902adjustedSize">adjustedSize</a>, <b>nullptr</b>, &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>, <b>nullptr</b>, <b>nullptr</b>));</td></tr>
<tr><th id="547">547</th><td></td></tr>
<tr><th id="548">548</th><td>        <b>if</b> (<a class="local col8 ref" href="#1898data" title='data' data-ref="1898data" data-ref-filename="1898data">data</a>)</td></tr>
<tr><th id="549">549</th><td>        {</td></tr>
<tr><th id="550">550</th><td>            <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = setSubDataImpl(context, data, intendedSize, 0); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" title='rx::BufferMtl::setSubDataImpl' data-ref="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" data-ref-filename="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm">setSubDataImpl</a>(<a class="local col6 ref" href="#1896context" title='context' data-ref="1896context" data-ref-filename="1896context">context</a>, <a class="local col8 ref" href="#1898data" title='data' data-ref="1898data" data-ref-filename="1898data">data</a>, <a class="local col9 ref" href="#1899intendedSize" title='intendedSize' data-ref="1899intendedSize" data-ref-filename="1899intendedSize">intendedSize</a>, <var>0</var>));</td></tr>
<tr><th id="551">551</th><td>        }</td></tr>
<tr><th id="552">552</th><td>    }</td></tr>
<tr><th id="553">553</th><td></td></tr>
<tr><th id="554">554</th><td><u>#<span data-ppcond="554">ifndef</span> <span class="macro" data-ref="_M/NDEBUG">NDEBUG</span></u></td></tr>
<tr><th id="555">555</th><td>    <a class="macro" href="mtl_common.h.html#55" title="@autoreleasepool" data-ref="_M/ANGLE_MTL_OBJC_SCOPE">ANGLE_MTL_OBJC_SCOPE</a></td></tr>
<tr><th id="556">556</th><td>    {</td></tr>
<tr><th id="557">557</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_common.h.html#_ZNK2rx3mtl13WrappedObject3getEv" title='rx::mtl::WrappedObject::get' data-ref="_ZNK2rx3mtl13WrappedObject3getEv" data-ref-filename="_ZNK2rx3mtl13WrappedObject3getEv">get</a>().label = [NSString stringWithFormat:@<q>"BufferMtl=%p"</q>, <b>this</b>];</td></tr>
<tr><th id="558">558</th><td>    }</td></tr>
<tr><th id="559">559</th><td><u>#<span data-ppcond="554">endif</span></u></td></tr>
<tr><th id="560">560</th><td></td></tr>
<tr><th id="561">561</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="562">562</th><td>}</td></tr>
<tr><th id="563">563</th><td></td></tr>
<tr><th id="564">564</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" title='rx::BufferMtl::setSubDataImpl' data-ref="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm" data-ref-filename="_ZN2rx9BufferMtl14setSubDataImplEPKN2gl7ContextEPKvmm">setSubDataImpl</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col5 decl" id="1905context" title='context' data-type='const gl::Context *' data-ref="1905context" data-ref-filename="1905context">context</dfn>,</td></tr>
<tr><th id="565">565</th><td>                                        <em>const</em> <em>void</em> *<dfn class="local col6 decl" id="1906data" title='data' data-type='const void *' data-ref="1906data" data-ref-filename="1906data">data</dfn>,</td></tr>
<tr><th id="566">566</th><td>                                        <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="1907size" title='size' data-type='size_t' data-ref="1907size" data-ref-filename="1907size">size</dfn>,</td></tr>
<tr><th id="567">567</th><td>                                        <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="1908offset" title='offset' data-type='size_t' data-ref="1908offset" data-ref-filename="1908offset">offset</dfn>)</td></tr>
<tr><th id="568">568</th><td>{</td></tr>
<tr><th id="569">569</th><td>    <b>if</b> (!<a class="local col6 ref" href="#1906data" title='data' data-ref="1906data" data-ref-filename="1906data">data</a>)</td></tr>
<tr><th id="570">570</th><td>    {</td></tr>
<tr><th id="571">571</th><td>        <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="572">572</th><td>    }</td></tr>
<tr><th id="573">573</th><td></td></tr>
<tr><th id="574">574</th><td>    <a class="macro" href="../../../common/debug.h.html#316" title="(mBuffer ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 574, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 574 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mBuffer&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<span class='ref fn fake' title='std::__1::shared_ptr::operator bool' data-ref="_ZNKSt3__110shared_ptrcvbEv" data-ref-filename="_ZNKSt3__110shared_ptrcvbEv"></span><a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>);</td></tr>
<tr><th id="575">575</th><td></td></tr>
<tr><th id="576">576</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col9 decl" id="1909contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1909contextMtl" data-ref-filename="1909contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col5 ref" href="#1905context" title='context' data-ref="1905context" data-ref-filename="1905context">context</a>);</td></tr>
<tr><th id="577">577</th><td></td></tr>
<tr><th id="578">578</th><td>    <a class="macro" href="mtl_common.h.html#451" title="do { if (__builtin_expect(!!(!(offset &lt;= mBuffer-&gt;size())), 0)) { contextMtl-&gt;handleError(0x0502, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __func__, 578); return angle::Result::Stop; } } while (0)" data-ref="_M/ANGLE_MTL_TRY">ANGLE_MTL_TRY</a>(<a class="local col9 ref" href="#1909contextMtl" title='contextMtl' data-ref="1909contextMtl" data-ref-filename="1909contextMtl">contextMtl</a>, <a class="local col8 ref" href="#1908offset" title='offset' data-ref="1908offset" data-ref-filename="1908offset">offset</a> &lt;= <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl6Buffer4sizeEv" title='rx::mtl::Buffer::size' data-ref="_ZNK2rx3mtl6Buffer4sizeEv" data-ref-filename="_ZNK2rx3mtl6Buffer4sizeEv">size</a>());</td></tr>
<tr><th id="579">579</th><td></td></tr>
<tr><th id="580">580</th><td>    <em>auto</em> <dfn class="local col0 decl" id="1910srcPtr" title='srcPtr' data-type='const unsigned char *' data-ref="1910srcPtr" data-ref-filename="1910srcPtr">srcPtr</dfn>     = <b>static_cast</b>&lt;<em>const</em> <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *&gt;(<a class="local col6 ref" href="#1906data" title='data' data-ref="1906data" data-ref-filename="1906data">data</a>);</td></tr>
<tr><th id="581">581</th><td>    <em>auto</em> <dfn class="local col1 decl" id="1911sizeToCopy" title='sizeToCopy' data-type='unsigned long' data-ref="1911sizeToCopy" data-ref-filename="1911sizeToCopy">sizeToCopy</dfn> = <span class="namespace">std::</span><span class='ref fn' title='std::__1::min' data-ref="_ZNSt3__1L3minERKT_S2_" data-ref-filename="_ZNSt3__1L3minERKT_S2_">min</span>&lt;<span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span>&gt;(<a class="local col7 ref" href="#1907size" title='size' data-ref="1907size" data-ref-filename="1907size">size</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZNK2rx3mtl6Buffer4sizeEv" title='rx::mtl::Buffer::size' data-ref="_ZNK2rx3mtl6Buffer4sizeEv" data-ref-filename="_ZNK2rx3mtl6Buffer4sizeEv">size</a>() - <a class="local col8 ref" href="#1908offset" title='offset' data-ref="1908offset" data-ref-filename="1908offset">offset</a>);</td></tr>
<tr><th id="582">582</th><td></td></tr>
<tr><th id="583">583</th><td>    <a class="member fn" href="#_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" title='rx::BufferMtl::markConversionBuffersDirty' data-ref="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv" data-ref-filename="_ZN2rx9BufferMtl26markConversionBuffersDirtyEv">markConversionBuffersDirty</a>();</td></tr>
<tr><th id="584">584</th><td></td></tr>
<tr><th id="585">585</th><td>    <b>if</b> (<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" title='rx::mtl::BufferPool::getMaxBuffers' data-ref="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv" data-ref-filename="_ZNK2rx3mtl10BufferPool13getMaxBuffersEv">getMaxBuffers</a>() == <var>1</var>)</td></tr>
<tr><th id="586">586</th><td>    {</td></tr>
<tr><th id="587">587</th><td>        <a class="macro" href="../../../common/debug.h.html#316" title="(mBuffer ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 587, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 587 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mBuffer&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<span class='ref fn fake' title='std::__1::shared_ptr::operator bool' data-ref="_ZNKSt3__110shared_ptrcvbEv" data-ref-filename="_ZNKSt3__110shared_ptrcvbEv"></span><a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>);</td></tr>
<tr><th id="588">588</th><td>        <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col2 decl" id="1912ptr" title='ptr' data-type='uint8_t *' data-ref="1912ptr" data-ref-filename="1912ptr">ptr</dfn> = <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer3mapEPNS_10ContextMtlE" title='rx::mtl::Buffer::map' data-ref="_ZN2rx3mtl6Buffer3mapEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl6Buffer3mapEPNS_10ContextMtlE">map</a>(<a class="local col9 ref" href="#1909contextMtl" title='contextMtl' data-ref="1909contextMtl" data-ref-filename="1909contextMtl">contextMtl</a>);</td></tr>
<tr><th id="589">589</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::copy' data-ref="_ZNSt3__1L4copyET_S0_T0_" data-ref-filename="_ZNSt3__1L4copyET_S0_T0_">copy</span>(<a class="local col0 ref" href="#1910srcPtr" title='srcPtr' data-ref="1910srcPtr" data-ref-filename="1910srcPtr">srcPtr</a>, <a class="local col0 ref" href="#1910srcPtr" title='srcPtr' data-ref="1910srcPtr" data-ref-filename="1910srcPtr">srcPtr</a> + <a class="local col1 ref" href="#1911sizeToCopy" title='sizeToCopy' data-ref="1911sizeToCopy" data-ref-filename="1911sizeToCopy">sizeToCopy</a>, <a class="local col2 ref" href="#1912ptr" title='ptr' data-ref="1912ptr" data-ref-filename="1912ptr">ptr</a> + <a class="local col8 ref" href="#1908offset" title='offset' data-ref="1908offset" data-ref-filename="1908offset">offset</a>);</td></tr>
<tr><th id="590">590</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a><span class='ref fn' title='std::__1::shared_ptr::operator-&gt;' data-ref="_ZNKSt3__110shared_ptrptEv" data-ref-filename="_ZNKSt3__110shared_ptrptEv">-&gt;</span><a class="ref fn" href="mtl_resources.h.html#_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" title='rx::mtl::Buffer::unmapAndFlushSubset' data-ref="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm" data-ref-filename="_ZN2rx3mtl6Buffer19unmapAndFlushSubsetEPNS_10ContextMtlEmm">unmapAndFlushSubset</a>(<a class="local col9 ref" href="#1909contextMtl" title='contextMtl' data-ref="1909contextMtl" data-ref-filename="1909contextMtl">contextMtl</a>, <a class="local col8 ref" href="#1908offset" title='offset' data-ref="1908offset" data-ref-filename="1908offset">offset</a>, <a class="local col1 ref" href="#1911sizeToCopy" title='sizeToCopy' data-ref="1911sizeToCopy" data-ref-filename="1911sizeToCopy">sizeToCopy</a>);</td></tr>
<tr><th id="591">591</th><td>    }</td></tr>
<tr><th id="592">592</th><td>    <b>else</b></td></tr>
<tr><th id="593">593</th><td>    {</td></tr>
<tr><th id="594">594</th><td>        <a class="macro" href="../../../common/debug.h.html#316" title="(mShadowCopy.size() ? static_cast&lt;void&gt;(0) : (!((::gl::priv::ShouldCreatePlatformLogMessage(::gl::LOG_FATAL))) ? static_cast&lt;void&gt;(0) : ::gl::priv::LogMessageVoidify() &amp; (::gl::LogMessage(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot;, __FUNCTION__, 594, ::gl::LOG_FATAL).stream()) &lt;&lt; &quot;\t! Assert failed in &quot; &lt;&lt; __FUNCTION__ &lt;&lt; &quot; (&quot; &lt;&lt; &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/ANGLE/src/libANGLE/renderer/metal/BufferMtl.mm&quot; &lt;&lt; &quot;:&quot; &lt;&lt; 594 &lt;&lt; &quot;): &quot; &lt;&lt; &quot;mShadowCopy.size()&quot;))" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZNK5angle12MemoryBuffer4sizeEv" title='angle::MemoryBuffer::size' data-ref="_ZNK5angle12MemoryBuffer4sizeEv" data-ref-filename="_ZNK5angle12MemoryBuffer4sizeEv">size</a>());</td></tr>
<tr><th id="595">595</th><td></td></tr>
<tr><th id="596">596</th><td>        <i>// 1. Before copying data from client, we need to synchronize modified data from GPU to</i></td></tr>
<tr><th id="597">597</th><td><i>        // shadow copy first.</i></td></tr>
<tr><th id="598">598</th><td>        <a class="member fn" href="#_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" title='rx::BufferMtl::ensureShadowCopySyncedFromGPU' data-ref="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE" data-ref-filename="_ZN2rx9BufferMtl29ensureShadowCopySyncedFromGPUEPNS_10ContextMtlE">ensureShadowCopySyncedFromGPU</a>(<a class="local col9 ref" href="#1909contextMtl" title='contextMtl' data-ref="1909contextMtl" data-ref-filename="1909contextMtl">contextMtl</a>);</td></tr>
<tr><th id="599">599</th><td></td></tr>
<tr><th id="600">600</th><td>        <i>// 2. Copy data from client to shadow copy.</i></td></tr>
<tr><th id="601">601</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::copy' data-ref="_ZNSt3__1L4copyET_S0_T0_" data-ref-filename="_ZNSt3__1L4copyET_S0_T0_">copy</span>(<a class="local col0 ref" href="#1910srcPtr" title='srcPtr' data-ref="1910srcPtr" data-ref-filename="1910srcPtr">srcPtr</a>, <a class="local col0 ref" href="#1910srcPtr" title='srcPtr' data-ref="1910srcPtr" data-ref-filename="1910srcPtr">srcPtr</a> + <a class="local col1 ref" href="#1911sizeToCopy" title='sizeToCopy' data-ref="1911sizeToCopy" data-ref-filename="1911sizeToCopy">sizeToCopy</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>() + <a class="local col8 ref" href="#1908offset" title='offset' data-ref="1908offset" data-ref-filename="1908offset">offset</a>);</td></tr>
<tr><th id="602">602</th><td></td></tr>
<tr><th id="603">603</th><td>        <i>// 3. Copy data from shadow copy to GPU.</i></td></tr>
<tr><th id="604">604</th><td>        <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = commitShadowCopy(context); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member fn" href="#_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE">commitShadowCopy</a>(<a class="local col5 ref" href="#1905context" title='context' data-ref="1905context" data-ref-filename="1905context">context</a>));</td></tr>
<tr><th id="605">605</th><td>    }</td></tr>
<tr><th id="606">606</th><td></td></tr>
<tr><th id="607">607</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="608">608</th><td>}</td></tr>
<tr><th id="609">609</th><td></td></tr>
<tr><th id="610">610</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextE">commitShadowCopy</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col3 decl" id="1913context" title='context' data-type='const gl::Context *' data-ref="1913context" data-ref-filename="1913context">context</dfn>)</td></tr>
<tr><th id="611">611</th><td>{</td></tr>
<tr><th id="612">612</th><td>    <b>return</b> <a class="member fn" href="#_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm">commitShadowCopy</a>(<a class="local col3 ref" href="#1913context" title='context' data-ref="1913context" data-ref-filename="1913context">context</a>, <a class="member fn" href="BufferMtl.h.html#_ZNK2rx9BufferMtl4sizeEv" title='rx::BufferMtl::size' data-ref="_ZNK2rx9BufferMtl4sizeEv" data-ref-filename="_ZNK2rx9BufferMtl4sizeEv">size</a>());</td></tr>
<tr><th id="613">613</th><td>}</td></tr>
<tr><th id="614">614</th><td></td></tr>
<tr><th id="615">615</th><td><span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a> <a class="type" href="BufferMtl.h.html#rx::BufferMtl" title='rx::BufferMtl' data-ref="rx::BufferMtl" data-ref-filename="rx..BufferMtl">BufferMtl</a>::<dfn class="decl def fn" id="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" title='rx::BufferMtl::commitShadowCopy' data-ref="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm" data-ref-filename="_ZN2rx9BufferMtl16commitShadowCopyEPKN2gl7ContextEm">commitShadowCopy</dfn>(<em>const</em> <span class="namespace">gl::</span><a class="type" href="../../Context.h.html#gl::Context" title='gl::Context' data-ref="gl::Context" data-ref-filename="gl..Context">Context</a> *<dfn class="local col4 decl" id="1914context" title='context' data-type='const gl::Context *' data-ref="1914context" data-ref-filename="1914context">context</dfn>, <span class='typedef' title='size_t' data-type='__darwin_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="1915size" title='size' data-type='size_t' data-ref="1915size" data-ref-filename="1915size">size</dfn>)</td></tr>
<tr><th id="616">616</th><td>{</td></tr>
<tr><th id="617">617</th><td>    <a class="type" href="ContextMtl.h.html#rx::ContextMtl" title='rx::ContextMtl' data-ref="rx::ContextMtl" data-ref-filename="rx..ContextMtl">ContextMtl</a> *<dfn class="local col6 decl" id="1916contextMtl" title='contextMtl' data-type='rx::ContextMtl *' data-ref="1916contextMtl" data-ref-filename="1916contextMtl">contextMtl</dfn> = <span class="namespace">mtl::</span><a class="ref fn" href="mtl_common.h.html#_ZN2rx3mtl7GetImplEPKT_" title='rx::mtl::GetImpl' data-ref="_ZN2rx3mtl7GetImplEPKT_" data-ref-filename="_ZN2rx3mtl7GetImplEPKT_">GetImpl</a>(<a class="local col4 ref" href="#1914context" title='context' data-ref="1914context" data-ref-filename="1914context">context</a>);</td></tr>
<tr><th id="618">618</th><td></td></tr>
<tr><th id="619">619</th><td>    <b>if</b> (!<a class="local col5 ref" href="#1915size" title='size' data-ref="1915size" data-ref-filename="1915size">size</a>)</td></tr>
<tr><th id="620">620</th><td>    {</td></tr>
<tr><th id="621">621</th><td>        <i>// Skip mapping if size to commit is zero.</i></td></tr>
<tr><th id="622">622</th><td><i>        // zero size is passed to allocate buffer only.</i></td></tr>
<tr><th id="623">623</th><td>        <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = mBufferPool.allocate(contextMtl, mShadowCopy.size(), nullptr, &amp;mBuffer, nullptr, nullptr); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" title='rx::mtl::BufferPool::allocate' data-ref="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" data-ref-filename="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb">allocate</a>(<a class="local col6 ref" href="#1916contextMtl" title='contextMtl' data-ref="1916contextMtl" data-ref-filename="1916contextMtl">contextMtl</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZNK5angle12MemoryBuffer4sizeEv" title='angle::MemoryBuffer::size' data-ref="_ZNK5angle12MemoryBuffer4sizeEv" data-ref-filename="_ZNK5angle12MemoryBuffer4sizeEv">size</a>(), <b>nullptr</b>, &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>, <b>nullptr</b>,</td></tr>
<tr><th id="624">624</th><td>                                       <b>nullptr</b>));</td></tr>
<tr><th id="625">625</th><td>    }</td></tr>
<tr><th id="626">626</th><td>    <b>else</b></td></tr>
<tr><th id="627">627</th><td>    {</td></tr>
<tr><th id="628">628</th><td>        <span class='typedef' title='uint8_t' data-type='unsigned char' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</span> *<dfn class="local col7 decl" id="1917ptr" title='ptr' data-type='uint8_t *' data-ref="1917ptr" data-ref-filename="1917ptr">ptr</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="629">629</th><td>        <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool22releaseInFlightBuffersEPNS_10ContextMtlE" title='rx::mtl::BufferPool::releaseInFlightBuffers' data-ref="_ZN2rx3mtl10BufferPool22releaseInFlightBuffersEPNS_10ContextMtlE" data-ref-filename="_ZN2rx3mtl10BufferPool22releaseInFlightBuffersEPNS_10ContextMtlE">releaseInFlightBuffers</a>(<a class="local col6 ref" href="#1916contextMtl" title='contextMtl' data-ref="1916contextMtl" data-ref-filename="1916contextMtl">contextMtl</a>);</td></tr>
<tr><th id="630">630</th><td>        <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = mBufferPool.allocate(contextMtl, mShadowCopy.size(), &amp;ptr, &amp;mBuffer, nullptr, nullptr); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(</td></tr>
<tr><th id="631">631</th><td>            <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" title='rx::mtl::BufferPool::allocate' data-ref="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb" data-ref-filename="_ZN2rx3mtl10BufferPool8allocateEPNS_10ContextMtlEmPPhPNSt3__110shared_ptrINS0_6BufferEEEPmPb">allocate</a>(<a class="local col6 ref" href="#1916contextMtl" title='contextMtl' data-ref="1916contextMtl" data-ref-filename="1916contextMtl">contextMtl</a>, <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZNK5angle12MemoryBuffer4sizeEv" title='angle::MemoryBuffer::size' data-ref="_ZNK5angle12MemoryBuffer4sizeEv" data-ref-filename="_ZNK5angle12MemoryBuffer4sizeEv">size</a>(), &amp;<a class="local col7 ref" href="#1917ptr" title='ptr' data-ref="1917ptr" data-ref-filename="1917ptr">ptr</a>, &amp;<a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mBuffer" title='rx::BufferHolderMtl::mBuffer' data-ref="rx::BufferHolderMtl::mBuffer" data-ref-filename="rx..BufferHolderMtl..mBuffer">mBuffer</a>, <b>nullptr</b>, <b>nullptr</b>));</td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::copy' data-ref="_ZNSt3__1L4copyET_S0_T0_" data-ref-filename="_ZNSt3__1L4copyET_S0_T0_">copy</span>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>(), <a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mShadowCopy" title='rx::BufferMtl::mShadowCopy' data-ref="rx::BufferMtl::mShadowCopy" data-ref-filename="rx..BufferMtl..mShadowCopy">mShadowCopy</a>.<a class="ref fn" href="../../../common/MemoryBuffer.h.html#_ZN5angle12MemoryBuffer4dataEv" title='angle::MemoryBuffer::data' data-ref="_ZN5angle12MemoryBuffer4dataEv" data-ref-filename="_ZN5angle12MemoryBuffer4dataEv">data</a>() + <a class="local col5 ref" href="#1915size" title='size' data-ref="1915size" data-ref-filename="1915size">size</a>, <a class="local col7 ref" href="#1917ptr" title='ptr' data-ref="1917ptr" data-ref-filename="1917ptr">ptr</a>);</td></tr>
<tr><th id="634">634</th><td>    }</td></tr>
<tr><th id="635">635</th><td></td></tr>
<tr><th id="636">636</th><td>    <a class="macro" href="../../Error.h.html#133" title="do { auto ANGLE_LOCAL_VAR = mBufferPool.commit(contextMtl); if (__builtin_expect(!!(IsError(ANGLE_LOCAL_VAR)), 0)) { return ANGLE_LOCAL_VAR;; } } while (0)" data-ref="_M/ANGLE_TRY">ANGLE_TRY</a>(<a class="member field" href="BufferMtl.h.html#rx::BufferMtl::mBufferPool" title='rx::BufferMtl::mBufferPool' data-ref="rx::BufferMtl::mBufferPool" data-ref-filename="rx..BufferMtl..mBufferPool">mBufferPool</a>.<a class="ref fn" href="mtl_buffer_pool.h.html#_ZN2rx3mtl10BufferPool6commitEPNS_10ContextMtlEb" title='rx::mtl::BufferPool::commit' data-ref="_ZN2rx3mtl10BufferPool6commitEPNS_10ContextMtlEb" data-ref-filename="_ZN2rx3mtl10BufferPool6commitEPNS_10ContextMtlEb">commit</a>(<a class="local col6 ref" href="#1916contextMtl" title='contextMtl' data-ref="1916contextMtl" data-ref-filename="1916contextMtl">contextMtl</a>));</td></tr>
<tr><th id="637">637</th><td></td></tr>
<tr><th id="638">638</th><td>    <b>return</b> <span class="namespace">angle::</span><a class="type" href="../../Error.h.html#angle::Result" title='angle::Result' data-ref="angle::Result" data-ref-filename="angle..Result">Result</a>::<a class="enum" href="../../Error.h.html#angle::Result::Continue" title='angle::Result::Continue' data-ref="angle::Result::Continue" data-ref-filename="angle..Result..Continue">Continue</a>;</td></tr>
<tr><th id="639">639</th><td>}</td></tr>
<tr><th id="640">640</th><td></td></tr>
<tr><th id="641">641</th><td><i>// SimpleWeakBufferHolderMtl implementation</i></td></tr>
<tr><th id="642">642</th><td><a class="type" href="BufferMtl.h.html#rx::SimpleWeakBufferHolderMtl" title='rx::SimpleWeakBufferHolderMtl' data-ref="rx::SimpleWeakBufferHolderMtl" data-ref-filename="rx..SimpleWeakBufferHolderMtl">SimpleWeakBufferHolderMtl</a>::<dfn class="decl def fn" id="_ZN2rx25SimpleWeakBufferHolderMtlC1Ev" title='rx::SimpleWeakBufferHolderMtl::SimpleWeakBufferHolderMtl' data-ref="_ZN2rx25SimpleWeakBufferHolderMtlC1Ev" data-ref-filename="_ZN2rx25SimpleWeakBufferHolderMtlC1Ev">SimpleWeakBufferHolderMtl</dfn>()</td></tr>
<tr><th id="643">643</th><td>{</td></tr>
<tr><th id="644">644</th><td>    <a class="member field" href="BufferMtl.h.html#rx::BufferHolderMtl::mIsWeak" title='rx::BufferHolderMtl::mIsWeak' data-ref="rx::BufferHolderMtl::mIsWeak" data-ref-filename="rx..BufferHolderMtl..mIsWeak">mIsWeak</a> = <b>true</b>;</td></tr>
<tr><th id="645">645</th><td>}</td></tr>
<tr><th id="646">646</th><td></td></tr>
<tr><th id="647">647</th><td>}  <i>// namespace rx</i></td></tr>
<tr><th id="648">648</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
