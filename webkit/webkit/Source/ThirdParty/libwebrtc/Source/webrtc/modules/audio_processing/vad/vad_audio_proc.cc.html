<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>vad_audio_proc.cc source code [webkit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc'; var root_path = '../../../../../../../../..'; var data_path = '../../../../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../../../..'>webkit</a>/<a href='../../../../../../..'>Source</a>/<a href='../../../../../..'>ThirdParty</a>/<a href='../../../../..'>libwebrtc</a>/<a href='../../../..'>Source</a>/<a href='../../..'>webrtc</a>/<a href='../..'>modules</a>/<a href='..'>audio_processing</a>/<a href='./'>vad</a>/<a href='vad_audio_proc.cc.html'>vad_audio_proc.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> *  Copyright (c) 2012 The WebRTC project authors. All Rights Reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> *  Use of this source code is governed by a BSD-style license</i></td></tr>
<tr><th id="5">5</th><td><i> *  that can be found in the LICENSE file in the root of the source</i></td></tr>
<tr><th id="6">6</th><td><i> *  tree. An additional intellectual property rights grant can be found</i></td></tr>
<tr><th id="7">7</th><td><i> *  in the file PATENTS.  All contributing project authors may</i></td></tr>
<tr><th id="8">8</th><td><i> *  be found in the AUTHORS file in the root of the source tree.</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="vad_audio_proc.h.html">"modules/audio_processing/vad/vad_audio_proc.h"</a></u></td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><u>#include &lt;math.h&gt;</u></td></tr>
<tr><th id="14">14</th><td><u>#include &lt;stdio.h&gt;</u></td></tr>
<tr><th id="15">15</th><td><u>#include &lt;string.h&gt;</u></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../../common_audio/third_party/ooura/fft_size_256/fft4g.h.html">"common_audio/third_party/ooura/fft_size_256/fft4g.h"</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="pitch_internal.h.html">"modules/audio_processing/vad/pitch_internal.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="pole_zero_filter.h.html">"modules/audio_processing/vad/pole_zero_filter.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="vad_audio_proc_internal.h.html">"modules/audio_processing/vad/vad_audio_proc_internal.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../../rtc_base/checks.h.html">"rtc_base/checks.h"</a></u></td></tr>
<tr><th id="22">22</th><td><b>extern</b> <q>"C"</q> {</td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../audio_coding/codecs/isac/main/source/filter_functions.h.html">"modules/audio_coding/codecs/isac/main/source/filter_functions.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../../audio_coding/codecs/isac/main/source/isac_vad.h.html">"modules/audio_coding/codecs/isac/main/source/isac_vad.h"</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../../audio_coding/codecs/isac/main/source/pitch_estimator.h.html">"modules/audio_coding/codecs/isac/main/source/pitch_estimator.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../audio_coding/codecs/isac/main/source/structs.h.html">"modules/audio_coding/codecs/isac/main/source/structs.h"</a></u></td></tr>
<tr><th id="27">27</th><td>}</td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><b>namespace</b> <span class="namespace">webrtc</span> {</td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><i>// The following structures are declared anonymous in iSAC's structs.h. To</i></td></tr>
<tr><th id="32">32</th><td><i>// forward declare them, we use this derived class trick.</i></td></tr>
<tr><th id="33">33</th><td><b>struct</b> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="type def" id="webrtc::VadAudioProc::PitchAnalysisStruct" title='webrtc::VadAudioProc::PitchAnalysisStruct' data-ref="webrtc::VadAudioProc::PitchAnalysisStruct" data-ref-filename="webrtc..VadAudioProc..PitchAnalysisStruct">PitchAnalysisStruct</dfn> : <b>public</b> ::<a class="typedef" href="../../audio_coding/codecs/isac/main/source/structs.h.html#PitchAnalysisStruct" title='PitchAnalysisStruct' data-type='struct PitchAnalysisStruct' data-ref="PitchAnalysisStruct" data-ref-filename="PitchAnalysisStruct">PitchAnalysisStruct</a> {};</td></tr>
<tr><th id="34">34</th><td><b>struct</b> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="type def" id="webrtc::VadAudioProc::PreFiltBankstr" title='webrtc::VadAudioProc::PreFiltBankstr' data-ref="webrtc::VadAudioProc::PreFiltBankstr" data-ref-filename="webrtc..VadAudioProc..PreFiltBankstr">PreFiltBankstr</dfn> : <b>public</b> ::<a class="typedef" href="../../audio_coding/codecs/isac/main/source/structs.h.html#PreFiltBankstr" title='PreFiltBankstr' data-type='struct PreFiltBankstr' data-ref="PreFiltBankstr" data-ref-filename="PreFiltBankstr">PreFiltBankstr</a> {};</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td><em>static</em> <b>constexpr</b> <em>float</em> <dfn class="tu decl def" id="webrtc::kFrequencyResolution" title='webrtc::kFrequencyResolution' data-type='const float' data-ref="webrtc::kFrequencyResolution" data-ref-filename="webrtc..kFrequencyResolution">kFrequencyResolution</dfn> =</td></tr>
<tr><th id="37">37</th><td>    <a class="ref" href="common.h.html#kSampleRateHz" title='kSampleRateHz' data-ref="kSampleRateHz" data-ref-filename="kSampleRateHz">kSampleRateHz</a> / <b>static_cast</b>&lt;<em>float</em>&gt;(<a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<a class="ref" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a>);</td></tr>
<tr><th id="38">38</th><td><em>static</em> <b>constexpr</b> <em>int</em> <dfn class="tu decl def" id="webrtc::kSilenceRms" title='webrtc::kSilenceRms' data-type='const int' data-ref="webrtc::kSilenceRms" data-ref-filename="webrtc..kSilenceRms">kSilenceRms</dfn> = <var>5</var>;</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><i>// TODO(turajs): Make a Create or Init for VadAudioProc.</i></td></tr>
<tr><th id="41">41</th><td><a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProcC1Ev" title='webrtc::VadAudioProc::VadAudioProc' data-ref="_ZN6webrtc12VadAudioProcC1Ev" data-ref-filename="_ZN6webrtc12VadAudioProcC1Ev">VadAudioProc</dfn>()</td></tr>
<tr><th id="42">42</th><td>    : <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>(),</td></tr>
<tr><th id="43">43</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a>(<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>),</td></tr>
<tr><th id="44">44</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::log_old_gain_" title='webrtc::VadAudioProc::log_old_gain_' data-ref="webrtc::VadAudioProc::log_old_gain_" data-ref-filename="webrtc..VadAudioProc..log_old_gain_">log_old_gain_</a>(-<var>2</var>),</td></tr>
<tr><th id="45">45</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::old_lag_" title='webrtc::VadAudioProc::old_lag_' data-ref="webrtc::VadAudioProc::old_lag_" data-ref-filename="webrtc..VadAudioProc..old_lag_">old_lag_</a>(<var>50</var>),  <i>// Arbitrary but valid as pitch-lag (in samples).</i></td></tr>
<tr><th id="46">46</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pitch_analysis_handle_" title='webrtc::VadAudioProc::pitch_analysis_handle_' data-ref="webrtc::VadAudioProc::pitch_analysis_handle_" data-ref-filename="webrtc..VadAudioProc..pitch_analysis_handle_">pitch_analysis_handle_</a><span class='ref fn' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE" data-ref-filename="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE">(</span><b>new</b> <a class="ref fn fake" href="#33" title='webrtc::VadAudioProc::PitchAnalysisStruct::PitchAnalysisStruct' data-ref="_ZN6webrtc12VadAudioProc19PitchAnalysisStructC1Ev" data-ref-filename="_ZN6webrtc12VadAudioProc19PitchAnalysisStructC1Ev"></a><a class="type" href="#webrtc::VadAudioProc::PitchAnalysisStruct" title='webrtc::VadAudioProc::PitchAnalysisStruct' data-ref="webrtc::VadAudioProc::PitchAnalysisStruct" data-ref-filename="webrtc..VadAudioProc..PitchAnalysisStruct">PitchAnalysisStruct</a>),</td></tr>
<tr><th id="47">47</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pre_filter_handle_" title='webrtc::VadAudioProc::pre_filter_handle_' data-ref="webrtc::VadAudioProc::pre_filter_handle_" data-ref-filename="webrtc..VadAudioProc..pre_filter_handle_">pre_filter_handle_</a><span class='ref fn' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE" data-ref-filename="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE">(</span><b>new</b> <a class="ref fn fake" href="#34" title='webrtc::VadAudioProc::PreFiltBankstr::PreFiltBankstr' data-ref="_ZN6webrtc12VadAudioProc14PreFiltBankstrC1Ev" data-ref-filename="_ZN6webrtc12VadAudioProc14PreFiltBankstrC1Ev"></a><a class="type" href="#webrtc::VadAudioProc::PreFiltBankstr" title='webrtc::VadAudioProc::PreFiltBankstr' data-ref="webrtc::VadAudioProc::PreFiltBankstr" data-ref-filename="webrtc..VadAudioProc..PreFiltBankstr">PreFiltBankstr</a>),</td></tr>
<tr><th id="48">48</th><td>      <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::high_pass_filter_" title='webrtc::VadAudioProc::high_pass_filter_' data-ref="webrtc::VadAudioProc::high_pass_filter_" data-ref-filename="webrtc..VadAudioProc..high_pass_filter_">high_pass_filter_</a><span class='ref fn' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE" data-ref-filename="_ZNSt3__110unique_ptrC1ENS_14__pointer_typeIT_T0_E4typeE">(</span><a class="type" href="pole_zero_filter.h.html#webrtc::PoleZeroFilter" title='webrtc::PoleZeroFilter' data-ref="webrtc::PoleZeroFilter" data-ref-filename="webrtc..PoleZeroFilter">PoleZeroFilter</a>::<a class="ref fn" href="pole_zero_filter.h.html#_ZN6webrtc14PoleZeroFilter6CreateEPKfmS2_m" title='webrtc::PoleZeroFilter::Create' data-ref="_ZN6webrtc14PoleZeroFilter6CreateEPKfmS2_m" data-ref-filename="_ZN6webrtc14PoleZeroFilter6CreateEPKfmS2_m">Create</a>(<a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kCoeffNumerator" title='webrtc::kCoeffNumerator' data-ref="webrtc::kCoeffNumerator" data-ref-filename="webrtc..kCoeffNumerator">kCoeffNumerator</a>,</td></tr>
<tr><th id="49">49</th><td>                                               <a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kFilterOrder" title='webrtc::kFilterOrder' data-ref="webrtc::kFilterOrder" data-ref-filename="webrtc..kFilterOrder">kFilterOrder</a>,</td></tr>
<tr><th id="50">50</th><td>                                               <a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kCoeffDenominator" title='webrtc::kCoeffDenominator' data-ref="webrtc::kCoeffDenominator" data-ref-filename="webrtc..kCoeffDenominator">kCoeffDenominator</a>,</td></tr>
<tr><th id="51">51</th><td>                                               <a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kFilterOrder" title='webrtc::kFilterOrder' data-ref="webrtc::kFilterOrder" data-ref-filename="webrtc..kFilterOrder">kFilterOrder</a>)) {</td></tr>
<tr><th id="52">52</th><td>  <b>static_assert</b>(<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a> + <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a> ==</td></tr>
<tr><th id="53">53</th><td>                    <b>sizeof</b>(<a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kLpcAnalWin" title='webrtc::kLpcAnalWin' data-ref="webrtc::kLpcAnalWin" data-ref-filename="webrtc..kLpcAnalWin">kLpcAnalWin</a>) / <b>sizeof</b>(<a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kLpcAnalWin" title='webrtc::kLpcAnalWin' data-ref="webrtc::kLpcAnalWin" data-ref-filename="webrtc..kLpcAnalWin">kLpcAnalWin</a>[<var>0</var>]),</td></tr>
<tr><th id="54">54</th><td>                <q>"lpc analysis window incorrect size"</q>);</td></tr>
<tr><th id="55">55</th><td>  <b>static_assert</b>(<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var> == <b>sizeof</b>(<a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kCorrWeight" title='webrtc::kCorrWeight' data-ref="webrtc::kCorrWeight" data-ref-filename="webrtc..kCorrWeight">kCorrWeight</a>) / <b>sizeof</b>(<a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kCorrWeight" title='webrtc::kCorrWeight' data-ref="webrtc::kCorrWeight" data-ref-filename="webrtc..kCorrWeight">kCorrWeight</a>[<var>0</var>]),</td></tr>
<tr><th id="56">56</th><td>                <q>"correlation weight incorrect size"</q>);</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td>  <i>// TODO(turajs): Are we doing too much in the constructor?</i></td></tr>
<tr><th id="59">59</th><td>  <em>float</em> <dfn class="local col1 decl" id="1data" title='data' data-type='float [512]' data-ref="1data" data-ref-filename="1data">data</dfn>[<a class="member" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a>];</td></tr>
<tr><th id="60">60</th><td>  <i>// Make FFT to initialize.</i></td></tr>
<tr><th id="61">61</th><td>  <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::ip_" title='webrtc::VadAudioProc::ip_' data-ref="webrtc::VadAudioProc::ip_" data-ref-filename="webrtc..VadAudioProc..ip_">ip_</a>[<var>0</var>] = <var>0</var>;</td></tr>
<tr><th id="62">62</th><td>  <a class="ref fn" href="../../../common_audio/third_party/ooura/fft_size_256/fft4g.h.html#_ZN6webrtc11WebRtc_rdftEmiPfPmS0_" title='webrtc::WebRtc_rdft' data-ref="_ZN6webrtc11WebRtc_rdftEmiPfPmS0_" data-ref-filename="_ZN6webrtc11WebRtc_rdftEmiPfPmS0_">WebRtc_rdft</a>(<a class="member" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a>, <var>1</var>, <a class="local col1 ref" href="#1data" title='data' data-ref="1data" data-ref-filename="1data">data</a>, <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::ip_" title='webrtc::VadAudioProc::ip_' data-ref="webrtc::VadAudioProc::ip_" data-ref-filename="webrtc..VadAudioProc..ip_">ip_</a>, <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::w_fft_" title='webrtc::VadAudioProc::w_fft_' data-ref="webrtc::VadAudioProc::w_fft_" data-ref-filename="webrtc..VadAudioProc..w_fft_">w_fft_</a>);</td></tr>
<tr><th id="63">63</th><td>  <i>// TODO(turajs): Need to initialize high-pass filter.</i></td></tr>
<tr><th id="64">64</th><td><i></i></td></tr>
<tr><th id="65">65</th><td><i>  // Initialize iSAC components.</i></td></tr>
<tr><th id="66">66</th><td>  <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/isac_vad.h.html#WebRtcIsac_InitPreFilterbank" title='WebRtcIsac_InitPreFilterbank' data-ref="WebRtcIsac_InitPreFilterbank" data-ref-filename="WebRtcIsac_InitPreFilterbank">WebRtcIsac_InitPreFilterbank</a>(<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pre_filter_handle_" title='webrtc::VadAudioProc::pre_filter_handle_' data-ref="webrtc::VadAudioProc::pre_filter_handle_" data-ref-filename="webrtc..VadAudioProc..pre_filter_handle_">pre_filter_handle_</a>.<span class='ref fn' title='std::__1::unique_ptr::get' data-ref="_ZNKSt3__110unique_ptr3getEv" data-ref-filename="_ZNKSt3__110unique_ptr3getEv">get</span>());</td></tr>
<tr><th id="67">67</th><td>  <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/isac_vad.h.html#WebRtcIsac_InitPitchAnalysis" title='WebRtcIsac_InitPitchAnalysis' data-ref="WebRtcIsac_InitPitchAnalysis" data-ref-filename="WebRtcIsac_InitPitchAnalysis">WebRtcIsac_InitPitchAnalysis</a>(<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pitch_analysis_handle_" title='webrtc::VadAudioProc::pitch_analysis_handle_' data-ref="webrtc::VadAudioProc::pitch_analysis_handle_" data-ref-filename="webrtc..VadAudioProc..pitch_analysis_handle_">pitch_analysis_handle_</a>.<span class='ref fn' title='std::__1::unique_ptr::get' data-ref="_ZNKSt3__110unique_ptr3getEv" data-ref-filename="_ZNKSt3__110unique_ptr3getEv">get</span>());</td></tr>
<tr><th id="68">68</th><td>}</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProcD1Ev" title='webrtc::VadAudioProc::~VadAudioProc' data-ref="_ZN6webrtc12VadAudioProcD1Ev" data-ref-filename="_ZN6webrtc12VadAudioProcD1Ev">~VadAudioProc</dfn>() {}</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc11ResetBufferEv" title='webrtc::VadAudioProc::ResetBuffer' data-ref="_ZN6webrtc12VadAudioProc11ResetBufferEv" data-ref-filename="_ZN6webrtc12VadAudioProc11ResetBufferEv">ResetBuffer</dfn>() {</td></tr>
<tr><th id="73">73</th><td>  <span class='ref fn' title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</span>(<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>, &amp;<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSamplesToProcess" title='webrtc::VadAudioProc::kNumSamplesToProcess' data-ref="webrtc::VadAudioProc::kNumSamplesToProcess" data-ref-filename="webrtc..VadAudioProc..kNumSamplesToProcess">kNumSamplesToProcess</a>],</td></tr>
<tr><th id="74">74</th><td>         <b>sizeof</b>(<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<var>0</var>]) * <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>);</td></tr>
<tr><th id="75">75</th><td>  <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a> = <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>;</td></tr>
<tr><th id="76">76</th><td>}</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><em>int</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc15ExtractFeaturesEPKsmP13AudioFeatures" title='webrtc::VadAudioProc::ExtractFeatures' data-ref="_ZN6webrtc12VadAudioProc15ExtractFeaturesEPKsmP13AudioFeatures" data-ref-filename="_ZN6webrtc12VadAudioProc15ExtractFeaturesEPKsmP13AudioFeatures">ExtractFeatures</dfn>(<em>const</em> <span class='typedef' title='int16_t' data-type='short' data-ref="int16_t" data-ref-filename="int16_t">int16_t</span>* <dfn class="local col2 decl" id="2frame" title='frame' data-type='const int16_t *' data-ref="2frame" data-ref-filename="2frame">frame</dfn>,</td></tr>
<tr><th id="79">79</th><td>                                  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="3length" title='length' data-type='size_t' data-ref="3length" data-ref-filename="3length">length</dfn>,</td></tr>
<tr><th id="80">80</th><td>                                  <a class="type" href="common.h.html#AudioFeatures" title='AudioFeatures' data-ref="AudioFeatures" data-ref-filename="AudioFeatures">AudioFeatures</a>* <dfn class="local col4 decl" id="4features" title='features' data-type='AudioFeatures *' data-ref="4features" data-ref-filename="4features">features</dfn>) {</td></tr>
<tr><th id="81">81</th><td>  <a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::num_frames" title='AudioFeatures::num_frames' data-ref="AudioFeatures::num_frames" data-ref-filename="AudioFeatures..num_frames">num_frames</a> = <var>0</var>;</td></tr>
<tr><th id="82">82</th><td>  <b>if</b> (<a class="local col3 ref" href="#3length" title='length' data-ref="3length" data-ref-filename="3length">length</a> != <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>) {</td></tr>
<tr><th id="83">83</th><td>    <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="84">84</th><td>  }</td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td>  <i>// High-pass filter to remove the DC component and very low frequency content.</i></td></tr>
<tr><th id="87">87</th><td><i>  // We have experienced that this high-pass filtering improves voice/non-voiced</i></td></tr>
<tr><th id="88">88</th><td><i>  // classification.</i></td></tr>
<tr><th id="89">89</th><td>  <b>if</b> (<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::high_pass_filter_" title='webrtc::VadAudioProc::high_pass_filter_' data-ref="webrtc::VadAudioProc::high_pass_filter_" data-ref-filename="webrtc..VadAudioProc..high_pass_filter_">high_pass_filter_</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="pole_zero_filter.h.html#_ZN6webrtc14PoleZeroFilter6FilterEPKsmPf" title='webrtc::PoleZeroFilter::Filter' data-ref="_ZN6webrtc14PoleZeroFilter6FilterEPKsmPf" data-ref-filename="_ZN6webrtc14PoleZeroFilter6FilterEPKsmPf">Filter</a>(<a class="local col2 ref" href="#2frame" title='frame' data-ref="2frame" data-ref-filename="2frame">frame</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>,</td></tr>
<tr><th id="90">90</th><td>                                &amp;<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a>]) != <var>0</var>) {</td></tr>
<tr><th id="91">91</th><td>    <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="92">92</th><td>  }</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td>  <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a> += <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>;</td></tr>
<tr><th id="95">95</th><td>  <b>if</b> (<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kBufferLength" title='webrtc::VadAudioProc::kBufferLength' data-ref="webrtc::VadAudioProc::kBufferLength" data-ref-filename="webrtc..VadAudioProc..kBufferLength">kBufferLength</a>) {</td></tr>
<tr><th id="96">96</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="97">97</th><td>  }</td></tr>
<tr><th id="98">98</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#430" title="::rtc::SafeEq((num_buffer_samples_), (kBufferLength)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 98, &quot;num_buffer_samples_&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;kBufferLength&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (num_buffer_samples_) &lt;&lt; (kBufferLength)" data-ref="_M/RTC_DCHECK_EQ">RTC_DCHECK_EQ</a>(<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::num_buffer_samples_" title='webrtc::VadAudioProc::num_buffer_samples_' data-ref="webrtc::VadAudioProc::num_buffer_samples_" data-ref-filename="webrtc..VadAudioProc..num_buffer_samples_">num_buffer_samples_</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kBufferLength" title='webrtc::VadAudioProc::kBufferLength' data-ref="webrtc::VadAudioProc::kBufferLength" data-ref-filename="webrtc..VadAudioProc..kBufferLength">kBufferLength</a>);</td></tr>
<tr><th id="99">99</th><td>  <a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::num_frames" title='AudioFeatures::num_frames' data-ref="AudioFeatures::num_frames" data-ref-filename="AudioFeatures..num_frames">num_frames</a> = <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>;</td></tr>
<tr><th id="100">100</th><td>  <a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::silence" title='AudioFeatures::silence' data-ref="AudioFeatures::silence" data-ref-filename="AudioFeatures..silence">silence</a> = <b>false</b>;</td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td>  <a class="member fn" href="#_ZN6webrtc12VadAudioProc3RmsEPdm" title='webrtc::VadAudioProc::Rms' data-ref="_ZN6webrtc12VadAudioProc3RmsEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc3RmsEPdm">Rms</a>(<a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::rms" title='AudioFeatures::rms' data-ref="AudioFeatures::rms" data-ref-filename="AudioFeatures..rms">rms</a>, <a class="ref" href="common.h.html#kMaxNumFrames" title='kMaxNumFrames' data-ref="kMaxNumFrames" data-ref-filename="kMaxNumFrames">kMaxNumFrames</a>);</td></tr>
<tr><th id="103">103</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="5i" title='i' data-type='size_t' data-ref="5i" data-ref-filename="5i">i</dfn> = <var>0</var>; <a class="local col5 ref" href="#5i" title='i' data-ref="5i" data-ref-filename="5i">i</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>; ++<a class="local col5 ref" href="#5i" title='i' data-ref="5i" data-ref-filename="5i">i</a>) {</td></tr>
<tr><th id="104">104</th><td>    <b>if</b> (<a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::rms" title='AudioFeatures::rms' data-ref="AudioFeatures::rms" data-ref-filename="AudioFeatures..rms">rms</a>[<a class="local col5 ref" href="#5i" title='i' data-ref="5i" data-ref-filename="5i">i</a>] &lt; <a class="tu ref" href="#webrtc::kSilenceRms" title='webrtc::kSilenceRms' data-use='r' data-ref="webrtc::kSilenceRms" data-ref-filename="webrtc..kSilenceRms">kSilenceRms</a>) {</td></tr>
<tr><th id="105">105</th><td>      <i>// PitchAnalysis can cause NaNs in the pitch gain if it's fed silence.</i></td></tr>
<tr><th id="106">106</th><td><i>      // Bail out here instead.</i></td></tr>
<tr><th id="107">107</th><td>      <a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::silence" title='AudioFeatures::silence' data-ref="AudioFeatures::silence" data-ref-filename="AudioFeatures..silence">silence</a> = <b>true</b>;</td></tr>
<tr><th id="108">108</th><td>      <a class="member fn" href="#_ZN6webrtc12VadAudioProc11ResetBufferEv" title='webrtc::VadAudioProc::ResetBuffer' data-ref="_ZN6webrtc12VadAudioProc11ResetBufferEv" data-ref-filename="_ZN6webrtc12VadAudioProc11ResetBufferEv">ResetBuffer</a>();</td></tr>
<tr><th id="109">109</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="110">110</th><td>    }</td></tr>
<tr><th id="111">111</th><td>  }</td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td>  <a class="member fn" href="#_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m" title='webrtc::VadAudioProc::PitchAnalysis' data-ref="_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m" data-ref-filename="_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m">PitchAnalysis</a>(<a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::log_pitch_gain" title='AudioFeatures::log_pitch_gain' data-ref="AudioFeatures::log_pitch_gain" data-ref-filename="AudioFeatures..log_pitch_gain">log_pitch_gain</a>, <a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::pitch_lag_hz" title='AudioFeatures::pitch_lag_hz' data-ref="AudioFeatures::pitch_lag_hz" data-ref-filename="AudioFeatures..pitch_lag_hz">pitch_lag_hz</a>,</td></tr>
<tr><th id="114">114</th><td>                <a class="ref" href="common.h.html#kMaxNumFrames" title='kMaxNumFrames' data-ref="kMaxNumFrames" data-ref-filename="kMaxNumFrames">kMaxNumFrames</a>);</td></tr>
<tr><th id="115">115</th><td>  <a class="member fn" href="#_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm" title='webrtc::VadAudioProc::FindFirstSpectralPeaks' data-ref="_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm">FindFirstSpectralPeaks</a>(<a class="local col4 ref" href="#4features" title='features' data-ref="4features" data-ref-filename="4features">features</a>-&gt;<a class="ref field" href="common.h.html#AudioFeatures::spectral_peak" title='AudioFeatures::spectral_peak' data-ref="AudioFeatures::spectral_peak" data-ref-filename="AudioFeatures..spectral_peak">spectral_peak</a>, <a class="ref" href="common.h.html#kMaxNumFrames" title='kMaxNumFrames' data-ref="kMaxNumFrames" data-ref-filename="kMaxNumFrames">kMaxNumFrames</a>);</td></tr>
<tr><th id="116">116</th><td>  <a class="member fn" href="#_ZN6webrtc12VadAudioProc11ResetBufferEv" title='webrtc::VadAudioProc::ResetBuffer' data-ref="_ZN6webrtc12VadAudioProc11ResetBufferEv" data-ref-filename="_ZN6webrtc12VadAudioProc11ResetBufferEv">ResetBuffer</a>();</td></tr>
<tr><th id="117">117</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="118">118</th><td>}</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td><i>// Computes |kLpcOrder + 1| correlation coefficients.</i></td></tr>
<tr><th id="121">121</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm" title='webrtc::VadAudioProc::SubframeCorrelation' data-ref="_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm" data-ref-filename="_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm">SubframeCorrelation</dfn>(<em>double</em>* <dfn class="local col6 decl" id="6corr" title='corr' data-type='double *' data-ref="6corr" data-ref-filename="6corr">corr</dfn>,</td></tr>
<tr><th id="122">122</th><td>                                       <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="7length_corr" title='length_corr' data-type='size_t' data-ref="7length_corr" data-ref-filename="7length_corr">length_corr</dfn>,</td></tr>
<tr><th id="123">123</th><td>                                       <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="8subframe_index" title='subframe_index' data-type='size_t' data-ref="8subframe_index" data-ref-filename="8subframe_index">subframe_index</dfn>) {</td></tr>
<tr><th id="124">124</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#434" title="::rtc::SafeGe((length_corr), (kLpcOrder + 1)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 124, &quot;length_corr&quot; &quot; &quot; &quot;&gt;=&quot; &quot; &quot; &quot;kLpcOrder + 1&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (length_corr) &lt;&lt; (kLpcOrder + 1)" data-ref="_M/RTC_DCHECK_GE">RTC_DCHECK_GE</a>(<a class="local col7 ref" href="#7length_corr" title='length_corr' data-ref="7length_corr" data-ref-filename="7length_corr">length_corr</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>);</td></tr>
<tr><th id="125">125</th><td>  <em>double</em> <dfn class="local col9 decl" id="9windowed_audio" title='windowed_audio' data-type='double [240]' data-ref="9windowed_audio" data-ref-filename="9windowed_audio">windowed_audio</dfn>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a> + <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>];</td></tr>
<tr><th id="126">126</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="10buffer_index" title='buffer_index' data-type='size_t' data-ref="10buffer_index" data-ref-filename="10buffer_index">buffer_index</dfn> = <a class="local col8 ref" href="#8subframe_index" title='subframe_index' data-ref="8subframe_index" data-ref-filename="8subframe_index">subframe_index</a> * <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>;</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="11n" title='n' data-type='size_t' data-ref="11n" data-ref-filename="11n">n</dfn> = <var>0</var>; <a class="local col1 ref" href="#11n" title='n' data-ref="11n" data-ref-filename="11n">n</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a> + <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>; <a class="local col1 ref" href="#11n" title='n' data-ref="11n" data-ref-filename="11n">n</a>++)</td></tr>
<tr><th id="129">129</th><td>    <a class="local col9 ref" href="#9windowed_audio" title='windowed_audio' data-ref="9windowed_audio" data-ref-filename="9windowed_audio">windowed_audio</a>[<a class="local col1 ref" href="#11n" title='n' data-ref="11n" data-ref-filename="11n">n</a>] = <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="local col0 ref" href="#10buffer_index" title='buffer_index' data-ref="10buffer_index" data-ref-filename="10buffer_index">buffer_index</a>++] * <a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kLpcAnalWin" title='webrtc::kLpcAnalWin' data-ref="webrtc::kLpcAnalWin" data-ref-filename="webrtc..kLpcAnalWin">kLpcAnalWin</a>[<a class="local col1 ref" href="#11n" title='n' data-ref="11n" data-ref-filename="11n">n</a>];</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td>  <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/filter_functions.h.html#WebRtcIsac_AutoCorr" title='WebRtcIsac_AutoCorr' data-ref="WebRtcIsac_AutoCorr" data-ref-filename="WebRtcIsac_AutoCorr">WebRtcIsac_AutoCorr</a>(<a class="local col6 ref" href="#6corr" title='corr' data-ref="6corr" data-ref-filename="6corr">corr</a>, <a class="local col9 ref" href="#9windowed_audio" title='windowed_audio' data-ref="9windowed_audio" data-ref-filename="9windowed_audio">windowed_audio</a>,</td></tr>
<tr><th id="132">132</th><td>                      <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a> + <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a>);</td></tr>
<tr><th id="133">133</th><td>}</td></tr>
<tr><th id="134">134</th><td></td></tr>
<tr><th id="135">135</th><td><i>// Compute |kNum10msSubframes| sets of LPC coefficients, one per 10 ms input.</i></td></tr>
<tr><th id="136">136</th><td><i>// The analysis window is 15 ms long and it is centered on the first half of</i></td></tr>
<tr><th id="137">137</th><td><i>// each 10ms sub-frame. This is equivalent to computing LPC coefficients for the</i></td></tr>
<tr><th id="138">138</th><td><i>// first half of each 10 ms subframe.</i></td></tr>
<tr><th id="139">139</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm" title='webrtc::VadAudioProc::GetLpcPolynomials' data-ref="_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm">GetLpcPolynomials</dfn>(<em>double</em>* <dfn class="local col2 decl" id="12lpc" title='lpc' data-type='double *' data-ref="12lpc" data-ref-filename="12lpc">lpc</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="13length_lpc" title='length_lpc' data-type='size_t' data-ref="13length_lpc" data-ref-filename="13length_lpc">length_lpc</dfn>) {</td></tr>
<tr><th id="140">140</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#434" title="::rtc::SafeGe((length_lpc), (kNum10msSubframes * (kLpcOrder + 1))) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 140, &quot;length_lpc&quot; &quot; &quot; &quot;&gt;=&quot; &quot; &quot; &quot;kNum10msSubframes * (kLpcOrder + 1)&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (length_lpc) &lt;&lt; (kNum10msSubframes * (kLpcOrder + 1))" data-ref="_M/RTC_DCHECK_GE">RTC_DCHECK_GE</a>(<a class="local col3 ref" href="#13length_lpc" title='length_lpc' data-ref="13length_lpc" data-ref-filename="13length_lpc">length_lpc</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a> * (<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>));</td></tr>
<tr><th id="141">141</th><td>  <em>double</em> <dfn class="local col4 decl" id="14corr" title='corr' data-type='double [17]' data-ref="14corr" data-ref-filename="14corr">corr</dfn>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>];</td></tr>
<tr><th id="142">142</th><td>  <em>double</em> <dfn class="local col5 decl" id="15reflec_coeff" title='reflec_coeff' data-type='double [16]' data-ref="15reflec_coeff" data-ref-filename="15reflec_coeff">reflec_coeff</dfn>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a>];</td></tr>
<tr><th id="143">143</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="16i" title='i' data-type='size_t' data-ref="16i" data-ref-filename="16i">i</dfn> = <var>0</var>, <dfn class="local col7 decl" id="17offset_lpc" title='offset_lpc' data-type='size_t' data-ref="17offset_lpc" data-ref-filename="17offset_lpc">offset_lpc</dfn> = <var>0</var>; <a class="local col6 ref" href="#16i" title='i' data-ref="16i" data-ref-filename="16i">i</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>;</td></tr>
<tr><th id="144">144</th><td>       <a class="local col6 ref" href="#16i" title='i' data-ref="16i" data-ref-filename="16i">i</a>++, <a class="local col7 ref" href="#17offset_lpc" title='offset_lpc' data-ref="17offset_lpc" data-ref-filename="17offset_lpc">offset_lpc</a> += <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>) {</td></tr>
<tr><th id="145">145</th><td>    <a class="member fn" href="#_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm" title='webrtc::VadAudioProc::SubframeCorrelation' data-ref="_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm" data-ref-filename="_ZN6webrtc12VadAudioProc19SubframeCorrelationEPdmm">SubframeCorrelation</a>(<a class="local col4 ref" href="#14corr" title='corr' data-ref="14corr" data-ref-filename="14corr">corr</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>, <a class="local col6 ref" href="#16i" title='i' data-ref="16i" data-ref-filename="16i">i</a>);</td></tr>
<tr><th id="146">146</th><td>    <a class="local col4 ref" href="#14corr" title='corr' data-ref="14corr" data-ref-filename="14corr">corr</a>[<var>0</var>] *= <var>1.0001</var>;</td></tr>
<tr><th id="147">147</th><td>    <i>// This makes Lev-Durb a bit more stable.</i></td></tr>
<tr><th id="148">148</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="18k" title='k' data-type='size_t' data-ref="18k" data-ref-filename="18k">k</dfn> = <var>0</var>; <a class="local col8 ref" href="#18k" title='k' data-ref="18k" data-ref-filename="18k">k</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>; <a class="local col8 ref" href="#18k" title='k' data-ref="18k" data-ref-filename="18k">k</a>++) {</td></tr>
<tr><th id="149">149</th><td>      <a class="local col4 ref" href="#14corr" title='corr' data-ref="14corr" data-ref-filename="14corr">corr</a>[<a class="local col8 ref" href="#18k" title='k' data-ref="18k" data-ref-filename="18k">k</a>] *= <a class="ref" href="vad_audio_proc_internal.h.html#webrtc::kCorrWeight" title='webrtc::kCorrWeight' data-ref="webrtc::kCorrWeight" data-ref-filename="webrtc..kCorrWeight">kCorrWeight</a>[<a class="local col8 ref" href="#18k" title='k' data-ref="18k" data-ref-filename="18k">k</a>];</td></tr>
<tr><th id="150">150</th><td>    }</td></tr>
<tr><th id="151">151</th><td>    <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/isac_vad.h.html#WebRtcIsac_LevDurb" title='WebRtcIsac_LevDurb' data-ref="WebRtcIsac_LevDurb" data-ref-filename="WebRtcIsac_LevDurb">WebRtcIsac_LevDurb</a>(&amp;<a class="local col2 ref" href="#12lpc" title='lpc' data-ref="12lpc" data-ref-filename="12lpc">lpc</a>[<a class="local col7 ref" href="#17offset_lpc" title='offset_lpc' data-ref="17offset_lpc" data-ref-filename="17offset_lpc">offset_lpc</a>], <a class="local col5 ref" href="#15reflec_coeff" title='reflec_coeff' data-ref="15reflec_coeff" data-ref-filename="15reflec_coeff">reflec_coeff</a>, <a class="local col4 ref" href="#14corr" title='corr' data-ref="14corr" data-ref-filename="14corr">corr</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a>);</td></tr>
<tr><th id="152">152</th><td>  }</td></tr>
<tr><th id="153">153</th><td>}</td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><i  data-doc="_ZN6webrtcL22QuadraticInterpolationEfff">// Fit a second order curve to these 3 points and find the location of the</i></td></tr>
<tr><th id="156">156</th><td><i  data-doc="_ZN6webrtcL22QuadraticInterpolationEfff">// extremum. The points are inverted before curve fitting.</i></td></tr>
<tr><th id="157">157</th><td><em>static</em> <em>float</em> <dfn class="tu decl def fn" id="_ZN6webrtcL22QuadraticInterpolationEfff" title='webrtc::QuadraticInterpolation' data-type='float webrtc::QuadraticInterpolation(float prev_val, float curr_val, float next_val)' data-ref="_ZN6webrtcL22QuadraticInterpolationEfff" data-ref-filename="_ZN6webrtcL22QuadraticInterpolationEfff">QuadraticInterpolation</dfn>(<em>float</em> <dfn class="local col9 decl" id="19prev_val" title='prev_val' data-type='float' data-ref="19prev_val" data-ref-filename="19prev_val">prev_val</dfn>,</td></tr>
<tr><th id="158">158</th><td>                                    <em>float</em> <dfn class="local col0 decl" id="20curr_val" title='curr_val' data-type='float' data-ref="20curr_val" data-ref-filename="20curr_val">curr_val</dfn>,</td></tr>
<tr><th id="159">159</th><td>                                    <em>float</em> <dfn class="local col1 decl" id="21next_val" title='next_val' data-type='float' data-ref="21next_val" data-ref-filename="21next_val">next_val</dfn>) {</td></tr>
<tr><th id="160">160</th><td>  <i>// Doing the interpolation in |1 / A(z)|^2.</i></td></tr>
<tr><th id="161">161</th><td>  <em>float</em> <dfn class="local col2 decl" id="22fractional_index" title='fractional_index' data-type='float' data-ref="22fractional_index" data-ref-filename="22fractional_index">fractional_index</dfn> = <var>0</var>;</td></tr>
<tr><th id="162">162</th><td>  <a class="local col1 ref" href="#21next_val" title='next_val' data-ref="21next_val" data-ref-filename="21next_val">next_val</a> = <var>1.0f</var> / <a class="local col1 ref" href="#21next_val" title='next_val' data-ref="21next_val" data-ref-filename="21next_val">next_val</a>;</td></tr>
<tr><th id="163">163</th><td>  <a class="local col9 ref" href="#19prev_val" title='prev_val' data-ref="19prev_val" data-ref-filename="19prev_val">prev_val</a> = <var>1.0f</var> / <a class="local col9 ref" href="#19prev_val" title='prev_val' data-ref="19prev_val" data-ref-filename="19prev_val">prev_val</a>;</td></tr>
<tr><th id="164">164</th><td>  <a class="local col0 ref" href="#20curr_val" title='curr_val' data-ref="20curr_val" data-ref-filename="20curr_val">curr_val</a> = <var>1.0f</var> / <a class="local col0 ref" href="#20curr_val" title='curr_val' data-ref="20curr_val" data-ref-filename="20curr_val">curr_val</a>;</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>  <a class="local col2 ref" href="#22fractional_index" title='fractional_index' data-ref="22fractional_index" data-ref-filename="22fractional_index">fractional_index</a> =</td></tr>
<tr><th id="167">167</th><td>      -(<a class="local col1 ref" href="#21next_val" title='next_val' data-ref="21next_val" data-ref-filename="21next_val">next_val</a> - <a class="local col9 ref" href="#19prev_val" title='prev_val' data-ref="19prev_val" data-ref-filename="19prev_val">prev_val</a>) * <var>0.5f</var> / (<a class="local col1 ref" href="#21next_val" title='next_val' data-ref="21next_val" data-ref-filename="21next_val">next_val</a> + <a class="local col9 ref" href="#19prev_val" title='prev_val' data-ref="19prev_val" data-ref-filename="19prev_val">prev_val</a> - <var>2.f</var> * <a class="local col0 ref" href="#20curr_val" title='curr_val' data-ref="20curr_val" data-ref-filename="20curr_val">curr_val</a>);</td></tr>
<tr><th id="168">168</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#433" title="::rtc::SafeLt((fabs(fractional_index)), (1)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 168, &quot;fabs(fractional_index)&quot; &quot; &quot; &quot;&lt;&quot; &quot; &quot; &quot;1&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (fabs(fractional_index)) &lt;&lt; (1)" data-ref="_M/RTC_DCHECK_LT">RTC_DCHECK_LT</a>(<span class='ref fn' title='fabs' data-ref="_ZL4fabsf" data-ref-filename="_ZL4fabsf">fabs</span>(<a class="local col2 ref" href="#22fractional_index" title='fractional_index' data-ref="22fractional_index" data-ref-filename="22fractional_index">fractional_index</a>), <var>1</var>);</td></tr>
<tr><th id="169">169</th><td>  <b>return</b> <a class="local col2 ref" href="#22fractional_index" title='fractional_index' data-ref="22fractional_index" data-ref-filename="22fractional_index">fractional_index</a>;</td></tr>
<tr><th id="170">170</th><td>}</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td><i>// 1 / A(z), where A(z) is defined by |lpc| is a model of the spectral envelope</i></td></tr>
<tr><th id="173">173</th><td><i>// of the input signal. The local maximum of the spectral envelope corresponds</i></td></tr>
<tr><th id="174">174</th><td><i>// with the local minimum of A(z). It saves complexity, as we save one</i></td></tr>
<tr><th id="175">175</th><td><i>// inversion. Furthermore, we find the first local maximum of magnitude squared,</i></td></tr>
<tr><th id="176">176</th><td><i>// to save on one square root.</i></td></tr>
<tr><th id="177">177</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm" title='webrtc::VadAudioProc::FindFirstSpectralPeaks' data-ref="_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc22FindFirstSpectralPeaksEPdm">FindFirstSpectralPeaks</dfn>(<em>double</em>* <dfn class="local col3 decl" id="23f_peak" title='f_peak' data-type='double *' data-ref="23f_peak" data-ref-filename="23f_peak">f_peak</dfn>,</td></tr>
<tr><th id="178">178</th><td>                                          <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="24length_f_peak" title='length_f_peak' data-type='size_t' data-ref="24length_f_peak" data-ref-filename="24length_f_peak">length_f_peak</dfn>) {</td></tr>
<tr><th id="179">179</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#434" title="::rtc::SafeGe((length_f_peak), (kNum10msSubframes)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 179, &quot;length_f_peak&quot; &quot; &quot; &quot;&gt;=&quot; &quot; &quot; &quot;kNum10msSubframes&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (length_f_peak) &lt;&lt; (kNum10msSubframes)" data-ref="_M/RTC_DCHECK_GE">RTC_DCHECK_GE</a>(<a class="local col4 ref" href="#24length_f_peak" title='length_f_peak' data-ref="24length_f_peak" data-ref-filename="24length_f_peak">length_f_peak</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>);</td></tr>
<tr><th id="180">180</th><td>  <em>double</em> <dfn class="local col5 decl" id="25lpc" title='lpc' data-type='double [51]' data-ref="25lpc" data-ref-filename="25lpc">lpc</dfn>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a> * (<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>)];</td></tr>
<tr><th id="181">181</th><td>  <i>// For all sub-frames.</i></td></tr>
<tr><th id="182">182</th><td>  <a class="member fn" href="#_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm" title='webrtc::VadAudioProc::GetLpcPolynomials' data-ref="_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc17GetLpcPolynomialsEPdm">GetLpcPolynomials</a>(<a class="local col5 ref" href="#25lpc" title='lpc' data-ref="25lpc" data-ref-filename="25lpc">lpc</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a> * (<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>));</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td>  <em>const</em> <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col6 decl" id="26kNumDftCoefficients" title='kNumDftCoefficients' data-type='const size_t' data-ref="26kNumDftCoefficients" data-ref-filename="26kNumDftCoefficients">kNumDftCoefficients</dfn> = <a class="member" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a> / <var>2</var> + <var>1</var>;</td></tr>
<tr><th id="185">185</th><td>  <em>float</em> <dfn class="local col7 decl" id="27data" title='data' data-type='float [512]' data-ref="27data" data-ref-filename="27data">data</dfn>[<a class="member" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a>];</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="28i" title='i' data-type='size_t' data-ref="28i" data-ref-filename="28i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>; <a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>++) {</td></tr>
<tr><th id="188">188</th><td>    <i>// Convert to float with zero pad.</i></td></tr>
<tr><th id="189">189</th><td>    <span class='ref fn' title='memset' data-ref="memset" data-ref-filename="memset">memset</span>(<a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>, <var>0</var>, <b>sizeof</b>(<a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>));</td></tr>
<tr><th id="190">190</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="29n" title='n' data-type='size_t' data-ref="29n" data-ref-filename="29n">n</dfn> = <var>0</var>; <a class="local col9 ref" href="#29n" title='n' data-ref="29n" data-ref-filename="29n">n</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>; <a class="local col9 ref" href="#29n" title='n' data-ref="29n" data-ref-filename="29n">n</a>++) {</td></tr>
<tr><th id="191">191</th><td>      <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<a class="local col9 ref" href="#29n" title='n' data-ref="29n" data-ref-filename="29n">n</a>] = <b>static_cast</b>&lt;<em>float</em>&gt;(<a class="local col5 ref" href="#25lpc" title='lpc' data-ref="25lpc" data-ref-filename="25lpc">lpc</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a> * (<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kLpcOrder" title='webrtc::VadAudioProc::kLpcOrder' data-ref="webrtc::VadAudioProc::kLpcOrder" data-ref-filename="webrtc..VadAudioProc..kLpcOrder">kLpcOrder</a> + <var>1</var>) + <a class="local col9 ref" href="#29n" title='n' data-ref="29n" data-ref-filename="29n">n</a>]);</td></tr>
<tr><th id="192">192</th><td>    }</td></tr>
<tr><th id="193">193</th><td>    <i>// Transform to frequency domain.</i></td></tr>
<tr><th id="194">194</th><td>    <a class="ref fn" href="../../../common_audio/third_party/ooura/fft_size_256/fft4g.h.html#_ZN6webrtc11WebRtc_rdftEmiPfPmS0_" title='webrtc::WebRtc_rdft' data-ref="_ZN6webrtc11WebRtc_rdftEmiPfPmS0_" data-ref-filename="_ZN6webrtc11WebRtc_rdftEmiPfPmS0_">WebRtc_rdft</a>(<a class="member" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kDftSize" title='webrtc::VadAudioProc::kDftSize' data-ref="webrtc::VadAudioProc::kDftSize" data-ref-filename="webrtc..VadAudioProc..kDftSize">kDftSize</a>, <var>1</var>, <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>, <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::ip_" title='webrtc::VadAudioProc::ip_' data-ref="webrtc::VadAudioProc::ip_" data-ref-filename="webrtc..VadAudioProc..ip_">ip_</a>, <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::w_fft_" title='webrtc::VadAudioProc::w_fft_' data-ref="webrtc::VadAudioProc::w_fft_" data-ref-filename="webrtc..VadAudioProc..w_fft_">w_fft_</a>);</td></tr>
<tr><th id="195">195</th><td></td></tr>
<tr><th id="196">196</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="30index_peak" title='index_peak' data-type='size_t' data-ref="30index_peak" data-ref-filename="30index_peak">index_peak</dfn> = <var>0</var>;</td></tr>
<tr><th id="197">197</th><td>    <em>float</em> <dfn class="local col1 decl" id="31prev_magn_sqr" title='prev_magn_sqr' data-type='float' data-ref="31prev_magn_sqr" data-ref-filename="31prev_magn_sqr">prev_magn_sqr</dfn> = <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>0</var>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>0</var>];</td></tr>
<tr><th id="198">198</th><td>    <em>float</em> <dfn class="local col2 decl" id="32curr_magn_sqr" title='curr_magn_sqr' data-type='float' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</dfn> = <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var>] + <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>3</var>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>3</var>];</td></tr>
<tr><th id="199">199</th><td>    <em>float</em> <dfn class="local col3 decl" id="33next_magn_sqr" title='next_magn_sqr' data-type='float' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</dfn>;</td></tr>
<tr><th id="200">200</th><td>    <em>bool</em> <dfn class="local col4 decl" id="34found_peak" title='found_peak' data-type='bool' data-ref="34found_peak" data-ref-filename="34found_peak">found_peak</dfn> = <b>false</b>;</td></tr>
<tr><th id="201">201</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="35n" title='n' data-type='size_t' data-ref="35n" data-ref-filename="35n">n</dfn> = <var>2</var>; <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a> &lt; <a class="local col6 ref" href="#26kNumDftCoefficients" title='kNumDftCoefficients' data-ref="26kNumDftCoefficients" data-ref-filename="26kNumDftCoefficients">kNumDftCoefficients</a> - <var>1</var>; <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a>++) {</td></tr>
<tr><th id="202">202</th><td>      <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a> =</td></tr>
<tr><th id="203">203</th><td>          <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var> * <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var> * <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a>] + <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var> * <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a> + <var>1</var>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>2</var> * <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a> + <var>1</var>];</td></tr>
<tr><th id="204">204</th><td>      <b>if</b> (<a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a> &lt; <a class="local col1 ref" href="#31prev_magn_sqr" title='prev_magn_sqr' data-ref="31prev_magn_sqr" data-ref-filename="31prev_magn_sqr">prev_magn_sqr</a> &amp;&amp; <a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a> &lt; <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a>) {</td></tr>
<tr><th id="205">205</th><td>        <a class="local col4 ref" href="#34found_peak" title='found_peak' data-ref="34found_peak" data-ref-filename="34found_peak">found_peak</a> = <b>true</b>;</td></tr>
<tr><th id="206">206</th><td>        <a class="local col0 ref" href="#30index_peak" title='index_peak' data-ref="30index_peak" data-ref-filename="30index_peak">index_peak</a> = <a class="local col5 ref" href="#35n" title='n' data-ref="35n" data-ref-filename="35n">n</a> - <var>1</var>;</td></tr>
<tr><th id="207">207</th><td>        <b>break</b>;</td></tr>
<tr><th id="208">208</th><td>      }</td></tr>
<tr><th id="209">209</th><td>      <a class="local col1 ref" href="#31prev_magn_sqr" title='prev_magn_sqr' data-ref="31prev_magn_sqr" data-ref-filename="31prev_magn_sqr">prev_magn_sqr</a> = <a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a>;</td></tr>
<tr><th id="210">210</th><td>      <a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a> = <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a>;</td></tr>
<tr><th id="211">211</th><td>    }</td></tr>
<tr><th id="212">212</th><td>    <em>float</em> <dfn class="local col6 decl" id="36fractional_index" title='fractional_index' data-type='float' data-ref="36fractional_index" data-ref-filename="36fractional_index">fractional_index</dfn> = <var>0</var>;</td></tr>
<tr><th id="213">213</th><td>    <b>if</b> (!<a class="local col4 ref" href="#34found_peak" title='found_peak' data-ref="34found_peak" data-ref-filename="34found_peak">found_peak</a>) {</td></tr>
<tr><th id="214">214</th><td>      <i>// Checking if |kNumDftCoefficients - 1| is the local minimum.</i></td></tr>
<tr><th id="215">215</th><td>      <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a> = <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>1</var>] * <a class="local col7 ref" href="#27data" title='data' data-ref="27data" data-ref-filename="27data">data</a>[<var>1</var>];</td></tr>
<tr><th id="216">216</th><td>      <b>if</b> (<a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a> &lt; <a class="local col1 ref" href="#31prev_magn_sqr" title='prev_magn_sqr' data-ref="31prev_magn_sqr" data-ref-filename="31prev_magn_sqr">prev_magn_sqr</a> &amp;&amp; <a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a> &lt; <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a>) {</td></tr>
<tr><th id="217">217</th><td>        <a class="local col0 ref" href="#30index_peak" title='index_peak' data-ref="30index_peak" data-ref-filename="30index_peak">index_peak</a> = <a class="local col6 ref" href="#26kNumDftCoefficients" title='kNumDftCoefficients' data-ref="26kNumDftCoefficients" data-ref-filename="26kNumDftCoefficients">kNumDftCoefficients</a> - <var>1</var>;</td></tr>
<tr><th id="218">218</th><td>      }</td></tr>
<tr><th id="219">219</th><td>    } <b>else</b> {</td></tr>
<tr><th id="220">220</th><td>      <i>// A peak is found, do a simple quadratic interpolation to get a more</i></td></tr>
<tr><th id="221">221</th><td><i>      // accurate estimate of the peak location.</i></td></tr>
<tr><th id="222">222</th><td>      <a class="local col6 ref" href="#36fractional_index" title='fractional_index' data-ref="36fractional_index" data-ref-filename="36fractional_index">fractional_index</a> =</td></tr>
<tr><th id="223">223</th><td>          <a class="tu ref fn" href="#_ZN6webrtcL22QuadraticInterpolationEfff" title='webrtc::QuadraticInterpolation' data-use='c' data-ref="_ZN6webrtcL22QuadraticInterpolationEfff" data-ref-filename="_ZN6webrtcL22QuadraticInterpolationEfff">QuadraticInterpolation</a>(<a class="local col1 ref" href="#31prev_magn_sqr" title='prev_magn_sqr' data-ref="31prev_magn_sqr" data-ref-filename="31prev_magn_sqr">prev_magn_sqr</a>, <a class="local col2 ref" href="#32curr_magn_sqr" title='curr_magn_sqr' data-ref="32curr_magn_sqr" data-ref-filename="32curr_magn_sqr">curr_magn_sqr</a>, <a class="local col3 ref" href="#33next_magn_sqr" title='next_magn_sqr' data-ref="33next_magn_sqr" data-ref-filename="33next_magn_sqr">next_magn_sqr</a>);</td></tr>
<tr><th id="224">224</th><td>    }</td></tr>
<tr><th id="225">225</th><td>    <a class="local col3 ref" href="#23f_peak" title='f_peak' data-ref="23f_peak" data-ref-filename="23f_peak">f_peak</a>[<a class="local col8 ref" href="#28i" title='i' data-ref="28i" data-ref-filename="28i">i</a>] = (<a class="local col0 ref" href="#30index_peak" title='index_peak' data-ref="30index_peak" data-ref-filename="30index_peak">index_peak</a> + <a class="local col6 ref" href="#36fractional_index" title='fractional_index' data-ref="36fractional_index" data-ref-filename="36fractional_index">fractional_index</a>) * <a class="tu ref" href="#webrtc::kFrequencyResolution" title='webrtc::kFrequencyResolution' data-use='r' data-ref="webrtc::kFrequencyResolution" data-ref-filename="webrtc..kFrequencyResolution">kFrequencyResolution</a>;</td></tr>
<tr><th id="226">226</th><td>  }</td></tr>
<tr><th id="227">227</th><td>}</td></tr>
<tr><th id="228">228</th><td></td></tr>
<tr><th id="229">229</th><td><i>// Using iSAC functions to estimate pitch gains &amp; lags.</i></td></tr>
<tr><th id="230">230</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m" title='webrtc::VadAudioProc::PitchAnalysis' data-ref="_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m" data-ref-filename="_ZN6webrtc12VadAudioProc13PitchAnalysisEPdS1_m">PitchAnalysis</dfn>(<em>double</em>* <dfn class="local col7 decl" id="37log_pitch_gains" title='log_pitch_gains' data-type='double *' data-ref="37log_pitch_gains" data-ref-filename="37log_pitch_gains">log_pitch_gains</dfn>,</td></tr>
<tr><th id="231">231</th><td>                                 <em>double</em>* <dfn class="local col8 decl" id="38pitch_lags_hz" title='pitch_lags_hz' data-type='double *' data-ref="38pitch_lags_hz" data-ref-filename="38pitch_lags_hz">pitch_lags_hz</dfn>,</td></tr>
<tr><th id="232">232</th><td>                                 <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col9 decl" id="39length" title='length' data-type='size_t' data-ref="39length" data-ref-filename="39length">length</dfn>) {</td></tr>
<tr><th id="233">233</th><td>  <i>// TODO(turajs): This can be "imported" from iSAC &amp; and the next two</i></td></tr>
<tr><th id="234">234</th><td><i>  // constants.</i></td></tr>
<tr><th id="235">235</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#434" title="::rtc::SafeGe((length), (kNum10msSubframes)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 235, &quot;length&quot; &quot; &quot; &quot;&gt;=&quot; &quot; &quot; &quot;kNum10msSubframes&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (length) &lt;&lt; (kNum10msSubframes)" data-ref="_M/RTC_DCHECK_GE">RTC_DCHECK_GE</a>(<a class="local col9 ref" href="#39length" title='length' data-ref="39length" data-ref-filename="39length">length</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>);</td></tr>
<tr><th id="236">236</th><td>  <em>const</em> <em>int</em> <dfn class="local col0 decl" id="40kNumPitchSubframes" title='kNumPitchSubframes' data-type='const int' data-ref="40kNumPitchSubframes" data-ref-filename="40kNumPitchSubframes">kNumPitchSubframes</dfn> = <var>4</var>;</td></tr>
<tr><th id="237">237</th><td>  <em>double</em> <dfn class="local col1 decl" id="41gains" title='gains' data-type='double [4]' data-ref="41gains" data-ref-filename="41gains">gains</dfn>[<a class="local col0 ref" href="#40kNumPitchSubframes" title='kNumPitchSubframes' data-ref="40kNumPitchSubframes" data-ref-filename="40kNumPitchSubframes">kNumPitchSubframes</a>];</td></tr>
<tr><th id="238">238</th><td>  <em>double</em> <dfn class="local col2 decl" id="42lags" title='lags' data-type='double [4]' data-ref="42lags" data-ref-filename="42lags">lags</dfn>[<a class="local col0 ref" href="#40kNumPitchSubframes" title='kNumPitchSubframes' data-ref="40kNumPitchSubframes" data-ref-filename="40kNumPitchSubframes">kNumPitchSubframes</a>];</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td>  <em>const</em> <em>int</em> <dfn class="local col3 decl" id="43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-type='const int' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</dfn> = <var>240</var>;</td></tr>
<tr><th id="241">241</th><td>  <em>const</em> <em>int</em> <dfn class="local col4 decl" id="44kNumLookaheadSamples" title='kNumLookaheadSamples' data-type='const int' data-ref="44kNumLookaheadSamples" data-ref-filename="44kNumLookaheadSamples">kNumLookaheadSamples</dfn> = <var>24</var>;</td></tr>
<tr><th id="242">242</th><td></td></tr>
<tr><th id="243">243</th><td>  <em>float</em> <dfn class="local col5 decl" id="45lower" title='lower' data-type='float [240]' data-ref="45lower" data-ref-filename="45lower">lower</dfn>[<a class="local col3 ref" href="#43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</a>];</td></tr>
<tr><th id="244">244</th><td>  <em>float</em> <dfn class="local col6 decl" id="46upper" title='upper' data-type='float [240]' data-ref="46upper" data-ref-filename="46upper">upper</dfn>[<a class="local col3 ref" href="#43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</a>];</td></tr>
<tr><th id="245">245</th><td>  <em>double</em> <dfn class="local col7 decl" id="47lower_lookahead" title='lower_lookahead' data-type='double [240]' data-ref="47lower_lookahead" data-ref-filename="47lower_lookahead">lower_lookahead</dfn>[<a class="local col3 ref" href="#43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</a>];</td></tr>
<tr><th id="246">246</th><td>  <em>double</em> <dfn class="local col8 decl" id="48upper_lookahead" title='upper_lookahead' data-type='double [240]' data-ref="48upper_lookahead" data-ref-filename="48upper_lookahead">upper_lookahead</dfn>[<a class="local col3 ref" href="#43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</a>];</td></tr>
<tr><th id="247">247</th><td>  <em>double</em> <dfn class="local col9 decl" id="49lower_lookahead_pre_filter" title='lower_lookahead_pre_filter' data-type='double [264]' data-ref="49lower_lookahead_pre_filter" data-ref-filename="49lower_lookahead_pre_filter">lower_lookahead_pre_filter</dfn>[<a class="local col3 ref" href="#43kNumSubbandFrameSamples" title='kNumSubbandFrameSamples' data-ref="43kNumSubbandFrameSamples" data-ref-filename="43kNumSubbandFrameSamples">kNumSubbandFrameSamples</a> +</td></tr>
<tr><th id="248">248</th><td>                                    <a class="local col4 ref" href="#44kNumLookaheadSamples" title='kNumLookaheadSamples' data-ref="44kNumLookaheadSamples" data-ref-filename="44kNumLookaheadSamples">kNumLookaheadSamples</a>];</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>  <i>// Split signal to lower and upper bands</i></td></tr>
<tr><th id="251">251</th><td>  <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/isac_vad.h.html#WebRtcIsac_SplitAndFilterFloat" title='WebRtcIsac_SplitAndFilterFloat' data-ref="WebRtcIsac_SplitAndFilterFloat" data-ref-filename="WebRtcIsac_SplitAndFilterFloat">WebRtcIsac_SplitAndFilterFloat</a>(&amp;<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>], <a class="local col5 ref" href="#45lower" title='lower' data-ref="45lower" data-ref-filename="45lower">lower</a>,</td></tr>
<tr><th id="252">252</th><td>                                 <a class="local col6 ref" href="#46upper" title='upper' data-ref="46upper" data-ref-filename="46upper">upper</a>, <a class="local col7 ref" href="#47lower_lookahead" title='lower_lookahead' data-ref="47lower_lookahead" data-ref-filename="47lower_lookahead">lower_lookahead</a>, <a class="local col8 ref" href="#48upper_lookahead" title='upper_lookahead' data-ref="48upper_lookahead" data-ref-filename="48upper_lookahead">upper_lookahead</a>,</td></tr>
<tr><th id="253">253</th><td>                                 <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pre_filter_handle_" title='webrtc::VadAudioProc::pre_filter_handle_' data-ref="webrtc::VadAudioProc::pre_filter_handle_" data-ref-filename="webrtc..VadAudioProc..pre_filter_handle_">pre_filter_handle_</a>.<span class='ref fn' title='std::__1::unique_ptr::get' data-ref="_ZNKSt3__110unique_ptr3getEv" data-ref-filename="_ZNKSt3__110unique_ptr3getEv">get</span>());</td></tr>
<tr><th id="254">254</th><td>  <a class="ref fn" href="../../audio_coding/codecs/isac/main/source/pitch_estimator.h.html#WebRtcIsac_PitchAnalysis" title='WebRtcIsac_PitchAnalysis' data-ref="WebRtcIsac_PitchAnalysis" data-ref-filename="WebRtcIsac_PitchAnalysis">WebRtcIsac_PitchAnalysis</a>(<a class="local col7 ref" href="#47lower_lookahead" title='lower_lookahead' data-ref="47lower_lookahead" data-ref-filename="47lower_lookahead">lower_lookahead</a>, <a class="local col9 ref" href="#49lower_lookahead_pre_filter" title='lower_lookahead_pre_filter' data-ref="49lower_lookahead_pre_filter" data-ref-filename="49lower_lookahead_pre_filter">lower_lookahead_pre_filter</a>,</td></tr>
<tr><th id="255">255</th><td>                           <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::pitch_analysis_handle_" title='webrtc::VadAudioProc::pitch_analysis_handle_' data-ref="webrtc::VadAudioProc::pitch_analysis_handle_" data-ref-filename="webrtc..VadAudioProc..pitch_analysis_handle_">pitch_analysis_handle_</a>.<span class='ref fn' title='std::__1::unique_ptr::get' data-ref="_ZNKSt3__110unique_ptr3getEv" data-ref-filename="_ZNKSt3__110unique_ptr3getEv">get</span>(), <a class="local col2 ref" href="#42lags" title='lags' data-ref="42lags" data-ref-filename="42lags">lags</a>, <a class="local col1 ref" href="#41gains" title='gains' data-ref="41gains" data-ref-filename="41gains">gains</a>);</td></tr>
<tr><th id="256">256</th><td></td></tr>
<tr><th id="257">257</th><td>  <i>// Lags are computed on lower-band signal with sampling rate half of the</i></td></tr>
<tr><th id="258">258</th><td><i>  // input signal.</i></td></tr>
<tr><th id="259">259</th><td>  <a class="ref fn" href="pitch_internal.h.html#_ZN6webrtc27GetSubframesPitchParametersEiPdS0_iiS0_S0_S0_S0_" title='webrtc::GetSubframesPitchParameters' data-ref="_ZN6webrtc27GetSubframesPitchParametersEiPdS0_iiS0_S0_S0_S0_" data-ref-filename="_ZN6webrtc27GetSubframesPitchParametersEiPdS0_iiS0_S0_S0_S0_">GetSubframesPitchParameters</a>(</td></tr>
<tr><th id="260">260</th><td>      <a class="ref" href="common.h.html#kSampleRateHz" title='kSampleRateHz' data-ref="kSampleRateHz" data-ref-filename="kSampleRateHz">kSampleRateHz</a> / <var>2</var>, <a class="local col1 ref" href="#41gains" title='gains' data-ref="41gains" data-ref-filename="41gains">gains</a>, <a class="local col2 ref" href="#42lags" title='lags' data-ref="42lags" data-ref-filename="42lags">lags</a>, <a class="local col0 ref" href="#40kNumPitchSubframes" title='kNumPitchSubframes' data-ref="40kNumPitchSubframes" data-ref-filename="40kNumPitchSubframes">kNumPitchSubframes</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>,</td></tr>
<tr><th id="261">261</th><td>      &amp;<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::log_old_gain_" title='webrtc::VadAudioProc::log_old_gain_' data-ref="webrtc::VadAudioProc::log_old_gain_" data-ref-filename="webrtc..VadAudioProc..log_old_gain_">log_old_gain_</a>, &amp;<a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::old_lag_" title='webrtc::VadAudioProc::old_lag_' data-ref="webrtc::VadAudioProc::old_lag_" data-ref-filename="webrtc..VadAudioProc..old_lag_">old_lag_</a>, <a class="local col7 ref" href="#37log_pitch_gains" title='log_pitch_gains' data-ref="37log_pitch_gains" data-ref-filename="37log_pitch_gains">log_pitch_gains</a>, <a class="local col8 ref" href="#38pitch_lags_hz" title='pitch_lags_hz' data-ref="38pitch_lags_hz" data-ref-filename="38pitch_lags_hz">pitch_lags_hz</a>);</td></tr>
<tr><th id="262">262</th><td>}</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td><em>void</em> <a class="type" href="vad_audio_proc.h.html#webrtc::VadAudioProc" title='webrtc::VadAudioProc' data-ref="webrtc::VadAudioProc" data-ref-filename="webrtc..VadAudioProc">VadAudioProc</a>::<dfn class="decl def fn" id="_ZN6webrtc12VadAudioProc3RmsEPdm" title='webrtc::VadAudioProc::Rms' data-ref="_ZN6webrtc12VadAudioProc3RmsEPdm" data-ref-filename="_ZN6webrtc12VadAudioProc3RmsEPdm">Rms</dfn>(<em>double</em>* <dfn class="local col0 decl" id="50rms" title='rms' data-type='double *' data-ref="50rms" data-ref-filename="50rms">rms</dfn>, <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="51length_rms" title='length_rms' data-type='size_t' data-ref="51length_rms" data-ref-filename="51length_rms">length_rms</dfn>) {</td></tr>
<tr><th id="265">265</th><td>  <a class="macro" href="../../../rtc_base/checks.h.html#434" title="::rtc::SafeGe((length_rms), (kNum10msSubframes)) ? static_cast&lt;void&gt;(0) : ::rtc::webrtc_checks_impl::FatalLogCall&lt;true&gt;( &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.cc&quot;, 265, &quot;length_rms&quot; &quot; &quot; &quot;&gt;=&quot; &quot; &quot; &quot;kNum10msSubframes&quot;) &amp; ::rtc::webrtc_checks_impl::LogStreamer&lt;&gt;() &lt;&lt; (length_rms) &lt;&lt; (kNum10msSubframes)" data-ref="_M/RTC_DCHECK_GE">RTC_DCHECK_GE</a>(<a class="local col1 ref" href="#51length_rms" title='length_rms' data-ref="51length_rms" data-ref-filename="51length_rms">length_rms</a>, <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>);</td></tr>
<tr><th id="266">266</th><td>  <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col2 decl" id="52offset" title='offset' data-type='size_t' data-ref="52offset" data-ref-filename="52offset">offset</dfn> = <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumPastSignalSamples" title='webrtc::VadAudioProc::kNumPastSignalSamples' data-ref="webrtc::VadAudioProc::kNumPastSignalSamples" data-ref-filename="webrtc..VadAudioProc..kNumPastSignalSamples">kNumPastSignalSamples</a>;</td></tr>
<tr><th id="267">267</th><td>  <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="53i" title='i' data-type='size_t' data-ref="53i" data-ref-filename="53i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNum10msSubframes" title='webrtc::VadAudioProc::kNum10msSubframes' data-ref="webrtc::VadAudioProc::kNum10msSubframes" data-ref-filename="webrtc..VadAudioProc..kNum10msSubframes">kNum10msSubframes</a>; <a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>++) {</td></tr>
<tr><th id="268">268</th><td>    <a class="local col0 ref" href="#50rms" title='rms' data-ref="50rms" data-ref-filename="50rms">rms</a>[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>] = <var>0</var>;</td></tr>
<tr><th id="269">269</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="54n" title='n' data-type='size_t' data-ref="54n" data-ref-filename="54n">n</dfn> = <var>0</var>; <a class="local col4 ref" href="#54n" title='n' data-ref="54n" data-ref-filename="54n">n</a> &lt; <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>; <a class="local col4 ref" href="#54n" title='n' data-ref="54n" data-ref-filename="54n">n</a>++, <a class="local col2 ref" href="#52offset" title='offset' data-ref="52offset" data-ref-filename="52offset">offset</a>++)</td></tr>
<tr><th id="270">270</th><td>      <a class="local col0 ref" href="#50rms" title='rms' data-ref="50rms" data-ref-filename="50rms">rms</a>[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>] += <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="local col2 ref" href="#52offset" title='offset' data-ref="52offset" data-ref-filename="52offset">offset</a>] * <a class="member field" href="vad_audio_proc.h.html#webrtc::VadAudioProc::audio_buffer_" title='webrtc::VadAudioProc::audio_buffer_' data-ref="webrtc::VadAudioProc::audio_buffer_" data-ref-filename="webrtc..VadAudioProc..audio_buffer_">audio_buffer_</a>[<a class="local col2 ref" href="#52offset" title='offset' data-ref="52offset" data-ref-filename="52offset">offset</a>];</td></tr>
<tr><th id="271">271</th><td>    <a class="local col0 ref" href="#50rms" title='rms' data-ref="50rms" data-ref-filename="50rms">rms</a>[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>] = <span class='ref fn' title='sqrt' data-ref="sqrt" data-ref-filename="sqrt">sqrt</span>(<a class="local col0 ref" href="#50rms" title='rms' data-ref="50rms" data-ref-filename="50rms">rms</a>[<a class="local col3 ref" href="#53i" title='i' data-ref="53i" data-ref-filename="53i">i</a>] <span class='warning' title="arithmetic between floating-point type &apos;double&apos; and enumeration type &apos;webrtc::VadAudioProc::(anonymous enum at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/ThirdParty/libwebrtc/Source/webrtc/modules/audio_processing/vad/vad_audio_proc.h:63:3)&apos;">/</span> <a class="enum" href="vad_audio_proc.h.html#webrtc::VadAudioProc::kNumSubframeSamples" title='webrtc::VadAudioProc::kNumSubframeSamples' data-ref="webrtc::VadAudioProc::kNumSubframeSamples" data-ref-filename="webrtc..VadAudioProc..kNumSubframeSamples">kNumSubframeSamples</a>);</td></tr>
<tr><th id="272">272</th><td>  }</td></tr>
<tr><th id="273">273</th><td>}</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td>}  <i>// namespace webrtc</i></td></tr>
<tr><th id="276">276</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
