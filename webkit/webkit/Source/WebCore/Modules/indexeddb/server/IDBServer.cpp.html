<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>IDBServer.cpp source code [webkit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp'; var root_path = '../../../../../..'; var data_path = '../../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>webkit</a>/<a href='../../../..'>Source</a>/<a href='../../..'>WebCore</a>/<a href='../..'>Modules</a>/<a href='..'>indexeddb</a>/<a href='./'>server</a>/<a href='IDBServer.cpp.html'>IDBServer.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2015 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS''</i></td></tr>
<tr><th id="14">14</th><td><i> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,</i></td></tr>
<tr><th id="15">15</th><td><i> * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="16">16</th><td><i> * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS</i></td></tr>
<tr><th id="17">17</th><td><i> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</i></td></tr>
<tr><th id="18">18</th><td><i> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</i></td></tr>
<tr><th id="19">19</th><td><i> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</i></td></tr>
<tr><th id="20">20</th><td><i> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</i></td></tr>
<tr><th id="21">21</th><td><i> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</i></td></tr>
<tr><th id="22">22</th><td><i> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</i></td></tr>
<tr><th id="23">23</th><td><i> * THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="24">24</th><td><i> */</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="IDBServer.h.html">"IDBServer.h"</a></u></td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../shared/IDBRequestData.h.html">"IDBRequestData.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../shared/IDBResultData.h.html">"IDBResultData.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../../../platform/Logging.h.html">"Logging.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="MemoryIDBBackingStore.h.html">"MemoryIDBBackingStore.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../platform/sql/SQLiteDatabase.h.html">"SQLiteDatabase.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../../platform/sql/SQLiteDatabaseTracker.h.html">"SQLiteDatabaseTracker.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../platform/sql/SQLiteFileSystem.h.html">"SQLiteFileSystem.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="SQLiteIDBBackingStore.h.html">"SQLiteIDBBackingStore.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../platform/sql/SQLiteStatement.h.html">"SQLiteStatement.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../../page/SecurityOrigin.h.html">"SecurityOrigin.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../../storage/StorageQuotaManager.h.html">"StorageQuotaManager.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/CrossThreadCopier.h.html">&lt;wtf/CrossThreadCopier.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Locker.h.html">&lt;wtf/Locker.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html">&lt;wtf/MainThread.h&gt;</a></u></td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><b>namespace</b> <span class="namespace">WebCore</span> {</td></tr>
<tr><th id="45">45</th><td><b>namespace</b> <span class="namespace">IDBServer</span> {</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td><a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServerC1EN3PAL9SessionIDERKN3WTF6StringEONS4_8FunctionIFNS_19StorageQuotaManager8DecisionERKNS_12ClientOriginEyEEERNS4_4LockE" title='WebCore::IDBServer::IDBServer::IDBServer' data-ref="_ZN7WebCore9IDBServer9IDBServerC1EN3PAL9SessionIDERKN3WTF6StringEONS4_8FunctionIFNS_19StorageQuotaManager8DecisionERKNS_12ClientOriginEyEEERNS4_4LockE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServerC1EN3PAL9SessionIDERKN3WTF6StringEONS4_8FunctionIFNS_19StorageQuotaManager8DecisionERKNS_12ClientOriginEyEEERNS4_4LockE">IDBServer</dfn>(<span class="namespace">PAL::</span><a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/pal/SessionID.h.html#PAL::SessionID" title='PAL::SessionID' data-ref="PAL::SessionID" data-ref-filename="PAL..SessionID">SessionID</a> <dfn class="local col0 decl" id="400sessionID" title='sessionID' data-type='PAL::SessionID' data-ref="400sessionID" data-ref-filename="400sessionID">sessionID</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col1 decl" id="401databaseDirectoryPath" title='databaseDirectoryPath' data-type='const WTF::String &amp;' data-ref="401databaseDirectoryPath" data-ref-filename="401databaseDirectoryPath">databaseDirectoryPath</dfn>, <a class="typedef" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::StorageQuotaManagerSpaceRequester" title='WebCore::IDBServer::IDBServer::StorageQuotaManagerSpaceRequester' data-type='Function&lt;StorageQuotaManager::Decision (const WebCore::ClientOrigin &amp;, uint64_t)&gt;' data-ref="WebCore::IDBServer::IDBServer::StorageQuotaManagerSpaceRequester" data-ref-filename="WebCore..IDBServer..IDBServer..StorageQuotaManagerSpaceRequester">StorageQuotaManagerSpaceRequester</a>&amp;&amp; <dfn class="local col2 decl" id="402spaceRequester" title='spaceRequester' data-type='WebCore::IDBServer::IDBServer::StorageQuotaManagerSpaceRequester &amp;&amp;' data-ref="402spaceRequester" data-ref-filename="402spaceRequester">spaceRequester</dfn>, <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#WTF::Lock" title='WTF::Lock' data-ref="WTF::Lock" data-ref-filename="WTF..Lock">Lock</a>&amp; <dfn class="local col3 decl" id="403lock" title='lock' data-type='WTF::Lock &amp;' data-ref="403lock" data-ref-filename="403lock">lock</dfn>)</td></tr>
<tr><th id="48">48</th><td>    : <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/pal/SessionID.h.html#34" title='PAL::SessionID::SessionID' data-ref="_ZN3PAL9SessionIDC1ERKS0_" data-ref-filename="_ZN3PAL9SessionIDC1ERKS0_">(</a><a class="local col0 ref" href="#400sessionID" title='sessionID' data-ref="400sessionID" data-ref-filename="400sessionID">sessionID</a>)</td></tr>
<tr><th id="49">49</th><td>    , <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_spaceRequester" title='WebCore::IDBServer::IDBServer::m_spaceRequester' data-ref="WebCore::IDBServer::IDBServer::m_spaceRequester" data-ref-filename="WebCore..IDBServer..IDBServer..m_spaceRequester">m_spaceRequester</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#68" title='WTF::Function&lt;WebCore::StorageQuotaManager::Decision (const WebCore::ClientOrigin &amp;, unsigned long long)&gt;::Function' data-ref="_ZN3WTF8FunctionIFN7WebCore19StorageQuotaManager8DecisionERKNS1_12ClientOriginEyEEC1EOS8_" data-ref-filename="_ZN3WTF8FunctionIFN7WebCore19StorageQuotaManager8DecisionERKNS1_12ClientOriginEyEEC1EOS8_">(</a><a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(spaceRequester)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col2 ref" href="#402spaceRequester" title='spaceRequester' data-ref="402spaceRequester" data-ref-filename="402spaceRequester">spaceRequester</a></span>))</td></tr>
<tr><th id="50">50</th><td>    , <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>(<a class="local col3 ref" href="#403lock" title='lock' data-ref="403lock" data-ref-filename="403lock">lock</a>)</td></tr>
<tr><th id="51">51</th><td>{</td></tr>
<tr><th id="52">52</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 52, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(52, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2641); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="53">53</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(databaseDirectoryPath.isSafeToSendToAnotherThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 53, __PRETTY_FUNCTION__, &quot;databaseDirectoryPath.isSafeToSendToAnotherThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(53, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2643); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#401databaseDirectoryPath" title='databaseDirectoryPath' data-ref="401databaseDirectoryPath" data-ref-filename="401databaseDirectoryPath">databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String27isSafeToSendToAnotherThreadEv" title='WTF::String::isSafeToSendToAnotherThread' data-ref="_ZNK3WTF6String27isSafeToSendToAnotherThreadEv" data-ref-filename="_ZNK3WTF6String27isSafeToSendToAnotherThreadEv">isSafeToSendToAnotherThread</a>());</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringaSERKS0_" title='WTF::String::operator=' data-ref="_ZN3WTF6StringaSERKS0_" data-ref-filename="_ZN3WTF6StringaSERKS0_">=</a> <a class="local col1 ref" href="#401databaseDirectoryPath" title='databaseDirectoryPath' data-ref="401databaseDirectoryPath" data-ref-filename="401databaseDirectoryPath">databaseDirectoryPath</a>;</td></tr>
<tr><th id="56">56</th><td>    <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv" title='WebCore::IDBServer::IDBServer::upgradeFilesIfNecessary' data-ref="_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv">upgradeFilesIfNecessary</a>();</td></tr>
<tr><th id="57">57</th><td>}</td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td><a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServerD1Ev" title='WebCore::IDBServer::IDBServer::~IDBServer' data-ref="_ZN7WebCore9IDBServer9IDBServerD1Ev" data-ref-filename="_ZN7WebCore9IDBServer9IDBServerD1Ev">~IDBServer</dfn>()</td></tr>
<tr><th id="60">60</th><td>{</td></tr>
<tr><th id="61">61</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 61, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(61, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2645); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col4 decl" id="404database" title='database' data-type='std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt; &amp;' data-ref="404database" data-ref-filename="404database">database</dfn> : <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6valuesEv" title='WTF::HashMap::values' data-ref="_ZN3WTF7HashMap6valuesEv" data-ref-filename="_ZN3WTF7HashMap6valuesEv">values</a>())</td></tr>
<tr><th id="64">64</th><td>        <a class="local col4 ref" href="#404database" title='database' data-ref="404database" data-ref-filename="404database">database</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::immediateClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv">immediateClose</a>();</td></tr>
<tr><th id="65">65</th><td>}</td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer18registerConnectionERNS0_21IDBConnectionToClientE" title='WebCore::IDBServer::IDBServer::registerConnection' data-ref="_ZN7WebCore9IDBServer9IDBServer18registerConnectionERNS0_21IDBConnectionToClientE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer18registerConnectionERNS0_21IDBConnectionToClientE">registerConnection</dfn>(<a class="type" href="IDBConnectionToClient.h.html#WebCore::IDBServer::IDBConnectionToClient" title='WebCore::IDBServer::IDBConnectionToClient' data-ref="WebCore::IDBServer::IDBConnectionToClient" data-ref-filename="WebCore..IDBServer..IDBConnectionToClient">IDBConnectionToClient</a>&amp; <dfn class="local col5 decl" id="405connection" title='connection' data-type='WebCore::IDBServer::IDBConnectionToClient &amp;' data-ref="405connection" data-ref-filename="405connection">connection</dfn>)</td></tr>
<tr><th id="68">68</th><td>{</td></tr>
<tr><th id="69">69</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 69, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(69, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2647); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="70">70</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!m_connectionMap.contains(connection.identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 70, __PRETTY_FUNCTION__, &quot;!m_connectionMap.contains(connection.identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(70, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2649); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col5 ref" href="#405connection" title='connection' data-ref="405connection" data-ref-filename="405connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" title='WebCore::IDBServer::IDBConnectionToClient::identifier' data-ref="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv">identifier</a>()));</td></tr>
<tr><th id="71">71</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__" title='WTF::HashMap::set' data-ref="_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__" data-ref-filename="_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__">set</a>(<a class="local col5 ref" href="#405connection" title='connection' data-ref="405connection" data-ref-filename="405connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" title='WebCore::IDBServer::IDBConnectionToClient::identifier' data-ref="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv">identifier</a>(), &amp;<a class="local col5 ref" href="#405connection" title='connection' data-ref="405connection" data-ref-filename="405connection">connection</a>);</td></tr>
<tr><th id="72">72</th><td>}</td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer20unregisterConnectionERNS0_21IDBConnectionToClientE" title='WebCore::IDBServer::IDBServer::unregisterConnection' data-ref="_ZN7WebCore9IDBServer9IDBServer20unregisterConnectionERNS0_21IDBConnectionToClientE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer20unregisterConnectionERNS0_21IDBConnectionToClientE">unregisterConnection</dfn>(<a class="type" href="IDBConnectionToClient.h.html#WebCore::IDBServer::IDBConnectionToClient" title='WebCore::IDBServer::IDBConnectionToClient' data-ref="WebCore::IDBServer::IDBConnectionToClient" data-ref-filename="WebCore..IDBServer..IDBConnectionToClient">IDBConnectionToClient</a>&amp; <dfn class="local col6 decl" id="406connection" title='connection' data-type='WebCore::IDBServer::IDBConnectionToClient &amp;' data-ref="406connection" data-ref-filename="406connection">connection</dfn>)</td></tr>
<tr><th id="75">75</th><td>{</td></tr>
<tr><th id="76">76</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 76, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(76, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2651); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="77">77</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 77, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(77, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2653); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="78">78</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_connectionMap.contains(connection.identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 78, __PRETTY_FUNCTION__, &quot;m_connectionMap.contains(connection.identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(78, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2655); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col6 ref" href="#406connection" title='connection' data-ref="406connection" data-ref-filename="406connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" title='WebCore::IDBServer::IDBConnectionToClient::identifier' data-ref="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv">identifier</a>()));</td></tr>
<tr><th id="79">79</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_connectionMap.get(connection.identifier()) == &amp;connection)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 79, __PRETTY_FUNCTION__, &quot;m_connectionMap.get(connection.identifier()) == &amp;connection&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(79, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2657); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col6 ref" href="#406connection" title='connection' data-ref="406connection" data-ref-filename="406connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" title='WebCore::IDBServer::IDBConnectionToClient::identifier' data-ref="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv">identifier</a>()) == &amp;<a class="local col6 ref" href="#406connection" title='connection' data-ref="406connection" data-ref-filename="406connection">connection</a>);</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td>    <a class="local col6 ref" href="#406connection" title='connection' data-ref="406connection" data-ref-filename="406connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZN7WebCore9IDBServer21IDBConnectionToClient24connectionToClientClosedEv" title='WebCore::IDBServer::IDBConnectionToClient::connectionToClientClosed' data-ref="_ZN7WebCore9IDBServer21IDBConnectionToClient24connectionToClientClosedEv" data-ref-filename="_ZN7WebCore9IDBServer21IDBConnectionToClient24connectionToClientClosedEv">connectionToClientClosed</a>();</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col6 ref" href="#406connection" title='connection' data-ref="406connection" data-ref-filename="406connection">connection</a>.<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" title='WebCore::IDBServer::IDBConnectionToClient::identifier' data-ref="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer21IDBConnectionToClient10identifierEv">identifier</a>());</td></tr>
<tr><th id="84">84</th><td>}</td></tr>
<tr><th id="85">85</th><td></td></tr>
<tr><th id="86">86</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer19registerTransactionERNS0_28UniqueIDBDatabaseTransactionE" title='WebCore::IDBServer::IDBServer::registerTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer19registerTransactionERNS0_28UniqueIDBDatabaseTransactionE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer19registerTransactionERNS0_28UniqueIDBDatabaseTransactionE">registerTransaction</dfn>(<a class="type" href="UniqueIDBDatabaseTransaction.h.html#WebCore::IDBServer::UniqueIDBDatabaseTransaction" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction' data-ref="WebCore::IDBServer::UniqueIDBDatabaseTransaction" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabaseTransaction">UniqueIDBDatabaseTransaction</a>&amp; <dfn class="local col7 decl" id="407transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction &amp;' data-ref="407transaction" data-ref-filename="407transaction">transaction</dfn>)</td></tr>
<tr><th id="87">87</th><td>{</td></tr>
<tr><th id="88">88</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 88, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(88, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2659); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="89">89</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 89, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(89, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2661); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="90">90</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!m_transactions.contains(transaction.info().identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 90, __PRETTY_FUNCTION__, &quot;!m_transactions.contains(transaction.info().identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(90, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2663); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col7 ref" href="#407transaction" title='transaction' data-ref="407transaction" data-ref-filename="407transaction">transaction</a>.<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::info' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv">info</a>().<a class="ref fn" href="../shared/IDBTransactionInfo.h.html#_ZNK7WebCore18IDBTransactionInfo10identifierEv" title='WebCore::IDBTransactionInfo::identifier' data-ref="_ZNK7WebCore18IDBTransactionInfo10identifierEv" data-ref-filename="_ZNK7WebCore18IDBTransactionInfo10identifierEv">identifier</a>()));</td></tr>
<tr><th id="91">91</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap3setERKNT2_9TraitTypeEOTL0__" title='WTF::HashMap::set' data-ref="_ZN3WTF7HashMap3setERKNT2_9TraitTypeEOTL0__" data-ref-filename="_ZN3WTF7HashMap3setERKNT2_9TraitTypeEOTL0__">set</a>(<a class="local col7 ref" href="#407transaction" title='transaction' data-ref="407transaction" data-ref-filename="407transaction">transaction</a>.<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::info' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv">info</a>().<a class="ref fn" href="../shared/IDBTransactionInfo.h.html#_ZNK7WebCore18IDBTransactionInfo10identifierEv" title='WebCore::IDBTransactionInfo::identifier' data-ref="_ZNK7WebCore18IDBTransactionInfo10identifierEv" data-ref-filename="_ZNK7WebCore18IDBTransactionInfo10identifierEv">identifier</a>(), &amp;<a class="local col7 ref" href="#407transaction" title='transaction' data-ref="407transaction" data-ref-filename="407transaction">transaction</a>);</td></tr>
<tr><th id="92">92</th><td>}</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer21unregisterTransactionERNS0_28UniqueIDBDatabaseTransactionE" title='WebCore::IDBServer::IDBServer::unregisterTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer21unregisterTransactionERNS0_28UniqueIDBDatabaseTransactionE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer21unregisterTransactionERNS0_28UniqueIDBDatabaseTransactionE">unregisterTransaction</dfn>(<a class="type" href="UniqueIDBDatabaseTransaction.h.html#WebCore::IDBServer::UniqueIDBDatabaseTransaction" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction' data-ref="WebCore::IDBServer::UniqueIDBDatabaseTransaction" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabaseTransaction">UniqueIDBDatabaseTransaction</a>&amp; <dfn class="local col8 decl" id="408transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction &amp;' data-ref="408transaction" data-ref-filename="408transaction">transaction</dfn>)</td></tr>
<tr><th id="95">95</th><td>{</td></tr>
<tr><th id="96">96</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 96, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(96, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2665); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="97">97</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 97, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(97, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2667); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="98">98</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_transactions.contains(transaction.info().identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 98, __PRETTY_FUNCTION__, &quot;m_transactions.contains(transaction.info().identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(98, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2669); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col8 ref" href="#408transaction" title='transaction' data-ref="408transaction" data-ref-filename="408transaction">transaction</a>.<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::info' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv">info</a>().<a class="ref fn" href="../shared/IDBTransactionInfo.h.html#_ZNK7WebCore18IDBTransactionInfo10identifierEv" title='WebCore::IDBTransactionInfo::identifier' data-ref="_ZNK7WebCore18IDBTransactionInfo10identifierEv" data-ref-filename="_ZNK7WebCore18IDBTransactionInfo10identifierEv">identifier</a>()));</td></tr>
<tr><th id="99">99</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_transactions.get(transaction.info().identifier()) == &amp;transaction)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 99, __PRETTY_FUNCTION__, &quot;m_transactions.get(transaction.info().identifier()) == &amp;transaction&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(99, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2671); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col8 ref" href="#408transaction" title='transaction' data-ref="408transaction" data-ref-filename="408transaction">transaction</a>.<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::info' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv">info</a>().<a class="ref fn" href="../shared/IDBTransactionInfo.h.html#_ZNK7WebCore18IDBTransactionInfo10identifierEv" title='WebCore::IDBTransactionInfo::identifier' data-ref="_ZNK7WebCore18IDBTransactionInfo10identifierEv" data-ref-filename="_ZNK7WebCore18IDBTransactionInfo10identifierEv">identifier</a>()) == &amp;<a class="local col8 ref" href="#408transaction" title='transaction' data-ref="408transaction" data-ref-filename="408transaction">transaction</a>);</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col8 ref" href="#408transaction" title='transaction' data-ref="408transaction" data-ref-filename="408transaction">transaction</a>.<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::info' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction4infoEv">info</a>().<a class="ref fn" href="../shared/IDBTransactionInfo.h.html#_ZNK7WebCore18IDBTransactionInfo10identifierEv" title='WebCore::IDBTransactionInfo::identifier' data-ref="_ZNK7WebCore18IDBTransactionInfo10identifierEv" data-ref-filename="_ZNK7WebCore18IDBTransactionInfo10identifierEv">identifier</a>());</td></tr>
<tr><th id="102">102</th><td>}</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer26registerDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE" title='WebCore::IDBServer::IDBServer::registerDatabaseConnection' data-ref="_ZN7WebCore9IDBServer9IDBServer26registerDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer26registerDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE">registerDatabaseConnection</dfn>(<a class="type" href="UniqueIDBDatabaseConnection.h.html#WebCore::IDBServer::UniqueIDBDatabaseConnection" title='WebCore::IDBServer::UniqueIDBDatabaseConnection' data-ref="WebCore::IDBServer::UniqueIDBDatabaseConnection" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabaseConnection">UniqueIDBDatabaseConnection</a>&amp; <dfn class="local col9 decl" id="409connection" title='connection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection &amp;' data-ref="409connection" data-ref-filename="409connection">connection</dfn>)</td></tr>
<tr><th id="105">105</th><td>{</td></tr>
<tr><th id="106">106</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!m_databaseConnections.contains(connection.identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 106, __PRETTY_FUNCTION__, &quot;!m_databaseConnections.contains(connection.identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(106, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2673); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col9 ref" href="#409connection" title='connection' data-ref="409connection" data-ref-filename="409connection">connection</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Identified.h.html#_ZNK3WTF14IdentifiedBase10identifierEv" title='WTF::IdentifiedBase::identifier' data-ref="_ZNK3WTF14IdentifiedBase10identifierEv" data-ref-filename="_ZNK3WTF14IdentifiedBase10identifierEv">identifier</a>()));</td></tr>
<tr><th id="107">107</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__" title='WTF::HashMap::set' data-ref="_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__" data-ref-filename="_ZN3WTF7HashMap3setEONT2_9TraitTypeEOTL0__">set</a>(<a class="local col9 ref" href="#409connection" title='connection' data-ref="409connection" data-ref-filename="409connection">connection</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Identified.h.html#_ZNK3WTF14IdentifiedBase10identifierEv" title='WTF::IdentifiedBase::identifier' data-ref="_ZNK3WTF14IdentifiedBase10identifierEv" data-ref-filename="_ZNK3WTF14IdentifiedBase10identifierEv">identifier</a>(), &amp;<a class="local col9 ref" href="#409connection" title='connection' data-ref="409connection" data-ref-filename="409connection">connection</a>);</td></tr>
<tr><th id="108">108</th><td>}</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer28unregisterDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE" title='WebCore::IDBServer::IDBServer::unregisterDatabaseConnection' data-ref="_ZN7WebCore9IDBServer9IDBServer28unregisterDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer28unregisterDatabaseConnectionERNS0_27UniqueIDBDatabaseConnectionE">unregisterDatabaseConnection</dfn>(<a class="type" href="UniqueIDBDatabaseConnection.h.html#WebCore::IDBServer::UniqueIDBDatabaseConnection" title='WebCore::IDBServer::UniqueIDBDatabaseConnection' data-ref="WebCore::IDBServer::UniqueIDBDatabaseConnection" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabaseConnection">UniqueIDBDatabaseConnection</a>&amp; <dfn class="local col0 decl" id="410connection" title='connection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection &amp;' data-ref="410connection" data-ref-filename="410connection">connection</dfn>)</td></tr>
<tr><th id="111">111</th><td>{</td></tr>
<tr><th id="112">112</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_databaseConnections.contains(connection.identifier()))) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 112, __PRETTY_FUNCTION__, &quot;m_databaseConnections.contains(connection.identifier())&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(112, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2675); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" title='WTF::HashMap::contains' data-ref="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap8containsERKNT2_9TraitTypeE">contains</a>(<a class="local col0 ref" href="#410connection" title='connection' data-ref="410connection" data-ref-filename="410connection">connection</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Identified.h.html#_ZNK3WTF14IdentifiedBase10identifierEv" title='WTF::IdentifiedBase::identifier' data-ref="_ZNK3WTF14IdentifiedBase10identifierEv" data-ref-filename="_ZNK3WTF14IdentifiedBase10identifierEv">identifier</a>()));</td></tr>
<tr><th id="113">113</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col0 ref" href="#410connection" title='connection' data-ref="410connection" data-ref-filename="410connection">connection</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Identified.h.html#_ZNK3WTF14IdentifiedBase10identifierEv" title='WTF::IdentifiedBase::identifier' data-ref="_ZNK3WTF14IdentifiedBase10identifierEv" data-ref-filename="_ZNK3WTF14IdentifiedBase10identifierEv">identifier</a>());</td></tr>
<tr><th id="114">114</th><td>}</td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td><a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>&amp; <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" title='WebCore::IDBServer::IDBServer::getOrCreateUniqueIDBDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE">getOrCreateUniqueIDBDatabase</dfn>(<em>const</em> <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>&amp; <dfn class="local col1 decl" id="411identifier" title='identifier' data-type='const WebCore::IDBDatabaseIdentifier &amp;' data-ref="411identifier" data-ref-filename="411identifier">identifier</dfn>)</td></tr>
<tr><th id="117">117</th><td>{</td></tr>
<tr><th id="118">118</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 118, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(118, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2677); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="119">119</th><td></td></tr>
<tr><th id="120">120</th><td>    <em>auto</em> <dfn class="local col2 decl" id="412uniqueIDBDatabase" title='uniqueIDBDatabase' data-type='WTF::HashTableAddResult&lt;WTF::HashTableIterator&lt;WTF::HashTable&lt;WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;, WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;&gt;' data-ref="412uniqueIDBDatabase" data-ref-filename="412uniqueIDBDatabase">uniqueIDBDatabase</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap3addERKNT2_9TraitTypeEOTL0__" title='WTF::HashMap::add' data-ref="_ZN3WTF7HashMap3addERKNT2_9TraitTypeEOTL0__" data-ref-filename="_ZN3WTF7HashMap3addERKNT2_9TraitTypeEOTL0__">add</a>(<a class="local col1 ref" href="#411identifier" title='identifier' data-ref="411identifier" data-ref-filename="411identifier">identifier</a>, <b>nullptr</b>);</td></tr>
<tr><th id="121">121</th><td>    <b>if</b> (<a class="local col2 ref" href="#412uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="412uniqueIDBDatabase" data-ref-filename="412uniqueIDBDatabase">uniqueIDBDatabase</a>.<a class="ref field" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashTable.h.html#WTF::HashTableAddResult::isNewEntry" title='WTF::HashTableAddResult&lt;WTF::HashTableIterator&lt;WTF::HashTable&lt;WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;, WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;&gt;::isNewEntry' data-ref="WTF::HashTableAddResult::isNewEntry" data-ref-filename="WTF..HashTableAddResult..isNewEntry">isNewEntry</a>)</td></tr>
<tr><th id="122">122</th><td>        <a class="local col2 ref" href="#412uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="412uniqueIDBDatabase" data-ref-filename="412uniqueIDBDatabase">uniqueIDBDatabase</a>.<a class="ref field" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashTable.h.html#WTF::HashTableAddResult::iterator" title='WTF::HashTableAddResult&lt;WTF::HashTableIterator&lt;WTF::HashTable&lt;WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;, WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;&gt;::iterator' data-ref="WTF::HashTableAddResult::iterator" data-ref-filename="WTF..HashTableAddResult..iterator">iterator</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashTable.h.html#_ZNK3WTF17HashTableIteratorptEv" title='WTF::HashTableIterator::operator-&gt;' data-ref="_ZNK3WTF17HashTableIteratorptEv" data-ref-filename="_ZNK3WTF17HashTableIteratorptEv">-&gt;</a><a class="ref field" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/KeyValuePair.h.html#WTF::KeyValuePair::value" title='WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;::value' data-ref="WTF::KeyValuePair::value" data-ref-filename="WTF..KeyValuePair..value">value</a> <span class='ref fn' title='std::__1::unique_ptr::operator=' data-ref="_ZNSt3__110unique_ptraSEONS_10unique_ptrIT_T0_EE" data-ref-filename="_ZNSt3__110unique_ptraSEONS_10unique_ptrIT_T0_EE">=</span> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#_ZN3WTF10makeUniqueEDpOT0_" title='WTF::makeUnique' data-ref="_ZN3WTF10makeUniqueEDpOT0_" data-ref-filename="_ZN3WTF10makeUniqueEDpOT0_">makeUnique</a>&lt;<a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>&gt;(<span class='refarg'>*<b>this</b></span>, <a class="local col1 ref" href="#411identifier" title='identifier' data-ref="411identifier" data-ref-filename="411identifier">identifier</a>);</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td>    <b>return</b> <span class='ref fn' title='std::__1::unique_ptr::operator*' data-ref="_ZNKSt3__110unique_ptrdeEv" data-ref-filename="_ZNKSt3__110unique_ptrdeEv">*</span><a class="local col2 ref" href="#412uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="412uniqueIDBDatabase" data-ref-filename="412uniqueIDBDatabase">uniqueIDBDatabase</a>.<a class="ref field" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashTable.h.html#WTF::HashTableAddResult::iterator" title='WTF::HashTableAddResult&lt;WTF::HashTableIterator&lt;WTF::HashTable&lt;WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;, WebCore::IDBDatabaseIdentifier, WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::KeyValuePairKeyExtractor&lt;WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashMap&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;, WTF::DefaultHash&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;, WTF::HashTraits&lt;std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;, WTF::HashTableTraits&gt;::KeyValuePairTraits, WTF::HashTraits&lt;WebCore::IDBDatabaseIdentifier&gt;&gt;&gt;::iterator' data-ref="WTF::HashTableAddResult::iterator" data-ref-filename="WTF..HashTableAddResult..iterator">iterator</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashTable.h.html#_ZNK3WTF17HashTableIteratorptEv" title='WTF::HashTableIterator::operator-&gt;' data-ref="_ZNK3WTF17HashTableIteratorptEv" data-ref-filename="_ZNK3WTF17HashTableIteratorptEv">-&gt;</a><a class="ref field" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/KeyValuePair.h.html#WTF::KeyValuePair::value" title='WTF::KeyValuePair&lt;WebCore::IDBDatabaseIdentifier, std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;&gt;::value' data-ref="WTF::KeyValuePair::value" data-ref-filename="WTF..KeyValuePair..value">value</a>;</td></tr>
<tr><th id="125">125</th><td>}</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td><span class="namespace">std::</span><span class='type' title='std::__1::unique_ptr' data-ref="std::__1::unique_ptr" data-ref-filename="std..__1..unique_ptr">unique_ptr</span>&lt;<a class="type" href="IDBBackingStore.h.html#WebCore::IDBServer::IDBBackingStore" title='WebCore::IDBServer::IDBBackingStore' data-ref="WebCore::IDBServer::IDBBackingStore" data-ref-filename="WebCore..IDBServer..IDBBackingStore">IDBBackingStore</a>&gt; <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer18createBackingStoreERKNS_21IDBDatabaseIdentifierE" title='WebCore::IDBServer::IDBServer::createBackingStore' data-ref="_ZN7WebCore9IDBServer9IDBServer18createBackingStoreERKNS_21IDBDatabaseIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer18createBackingStoreERKNS_21IDBDatabaseIdentifierE">createBackingStore</dfn>(<em>const</em> <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>&amp; <dfn class="local col3 decl" id="413identifier" title='identifier' data-type='const WebCore::IDBDatabaseIdentifier &amp;' data-ref="413identifier" data-ref-filename="413identifier">identifier</dfn>)</td></tr>
<tr><th id="128">128</th><td>{</td></tr>
<tr><th id="129">129</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 129, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(129, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2679); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="130">130</th><td>    <b>if</b> (<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="131">131</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE" data-ref-filename="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE"></span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#_ZN3WTF10makeUniqueEDpOT0_" title='WTF::makeUnique' data-ref="_ZN3WTF10makeUniqueEDpOT0_" data-ref-filename="_ZN3WTF10makeUniqueEDpOT0_">makeUnique</a>&lt;<a class="type" href="MemoryIDBBackingStore.h.html#WebCore::IDBServer::MemoryIDBBackingStore" title='WebCore::IDBServer::MemoryIDBBackingStore' data-ref="WebCore::IDBServer::MemoryIDBBackingStore" data-ref-filename="WebCore..IDBServer..MemoryIDBBackingStore">MemoryIDBBackingStore</a>&gt;(<span class='refarg'><a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a></span>, <a class="local col3 ref" href="#413identifier" title='identifier' data-ref="413identifier" data-ref-filename="413identifier">identifier</a>);</td></tr>
<tr><th id="132">132</th><td></td></tr>
<tr><th id="133">133</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!m_sessionID.isEphemeral())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 133, __PRETTY_FUNCTION__, &quot;!m_sessionID.isEphemeral()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(133, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2681); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/pal/SessionID.h.html#_ZNK3PAL9SessionID11isEphemeralEv" title='PAL::SessionID::isEphemeral' data-ref="_ZNK3PAL9SessionID11isEphemeralEv" data-ref-filename="_ZNK3PAL9SessionID11isEphemeralEv">isEphemeral</a>());</td></tr>
<tr><th id="134">134</th><td>    <b>if</b> (<a class="local col3 ref" href="#413identifier" title='identifier' data-ref="413identifier" data-ref-filename="413identifier">identifier</a>.<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv" title='WebCore::IDBDatabaseIdentifier::isTransient' data-ref="_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv" data-ref-filename="_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv">isTransient</a>())</td></tr>
<tr><th id="135">135</th><td>        <b>return</b> <span class='ref fn fake' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE" data-ref-filename="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE"></span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#_ZN3WTF10makeUniqueEDpOT0_" title='WTF::makeUnique' data-ref="_ZN3WTF10makeUniqueEDpOT0_" data-ref-filename="_ZN3WTF10makeUniqueEDpOT0_">makeUnique</a>&lt;<a class="type" href="MemoryIDBBackingStore.h.html#WebCore::IDBServer::MemoryIDBBackingStore" title='WebCore::IDBServer::MemoryIDBBackingStore' data-ref="WebCore::IDBServer::MemoryIDBBackingStore" data-ref-filename="WebCore..IDBServer..MemoryIDBBackingStore">MemoryIDBBackingStore</a>&gt;(<span class='refarg'><a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a></span>, <a class="local col3 ref" href="#413identifier" title='identifier' data-ref="413identifier" data-ref-filename="413identifier">identifier</a>);</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td>    <b>return</b> <span class='ref fn fake' title='std::__1::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE" data-ref-filename="_ZNSt3__110unique_ptrC1EONS_10unique_ptrITL0__TL0_0_EE"></span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#_ZN3WTF10makeUniqueEDpOT0_" title='WTF::makeUnique' data-ref="_ZN3WTF10makeUniqueEDpOT0_" data-ref-filename="_ZN3WTF10makeUniqueEDpOT0_">makeUnique</a>&lt;<a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>&gt;(<span class='refarg'><a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a></span>, <a class="local col3 ref" href="#413identifier" title='identifier' data-ref="413identifier" data-ref-filename="413identifier">identifier</a>, <span class='refarg'><a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a></span>);</td></tr>
<tr><th id="138">138</th><td>}</td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer12openDatabaseERKNS_14IDBRequestDataE" title='WebCore::IDBServer::IDBServer::openDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer12openDatabaseERKNS_14IDBRequestDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer12openDatabaseERKNS_14IDBRequestDataE">openDatabase</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="414requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="414requestData" data-ref-filename="414requestData">requestData</dfn>)</td></tr>
<tr><th id="141">141</th><td>{</td></tr>
<tr><th id="142">142</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::openDatabase&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::openDatabase"</q>);</td></tr>
<tr><th id="143">143</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 143, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(143, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2683); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="144">144</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 144, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(144, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2685); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td>    <em>auto</em>&amp; <dfn class="local col5 decl" id="415uniqueIDBDatabase" title='uniqueIDBDatabase' data-type='WebCore::IDBServer::UniqueIDBDatabase &amp;' data-ref="415uniqueIDBDatabase" data-ref-filename="415uniqueIDBDatabase">uniqueIDBDatabase</dfn> = <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" title='WebCore::IDBServer::IDBServer::getOrCreateUniqueIDBDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE">getOrCreateUniqueIDBDatabase</a>(<a class="local col4 ref" href="#414requestData" title='requestData' data-ref="414requestData" data-ref-filename="414requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" title='WebCore::IDBRequestData::databaseIdentifier' data-ref="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="147">147</th><td></td></tr>
<tr><th id="148">148</th><td>    <em>auto</em> <dfn class="local col6 decl" id="416connection" title='connection' data-type='WebCore::IDBServer::IDBConnectionToClient *' data-ref="416connection" data-ref-filename="416connection">connection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#414requestData" title='requestData' data-ref="414requestData" data-ref-filename="414requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData17requestIdentifierEv" title='WebCore::IDBRequestData::requestIdentifier' data-ref="_ZNK7WebCore14IDBRequestData17requestIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData17requestIdentifierEv">requestIdentifier</a>().<a class="ref fn" href="../shared/IDBResourceIdentifier.h.html#_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv" title='WebCore::IDBResourceIdentifier::connectionIdentifier' data-ref="_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv" data-ref-filename="_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv">connectionIdentifier</a>());</td></tr>
<tr><th id="149">149</th><td>    <b>if</b> (!<a class="local col6 ref" href="#416connection" title='connection' data-ref="416connection" data-ref-filename="416connection">connection</a>) {</td></tr>
<tr><th id="150">150</th><td>        <i>// If the connection back to the client is gone, there's no way to open the database as</i></td></tr>
<tr><th id="151">151</th><td><i>        // well as no way to message back failure.</i></td></tr>
<tr><th id="152">152</th><td>        <b>return</b>;</td></tr>
<tr><th id="153">153</th><td>    }</td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td>    <a class="local col5 ref" href="#415uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="415uniqueIDBDatabase" data-ref-filename="415uniqueIDBDatabase">uniqueIDBDatabase</a>.<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDatabaseConnectionERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE" title='WebCore::IDBServer::UniqueIDBDatabase::openDatabaseConnection' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDatabaseConnectionERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDatabaseConnectionERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE">openDatabaseConnection</a>(<span class='refarg'>*<a class="local col6 ref" href="#416connection" title='connection' data-ref="416connection" data-ref-filename="416connection">connection</a></span>, <a class="local col4 ref" href="#414requestData" title='requestData' data-ref="414requestData" data-ref-filename="414requestData">requestData</a>);</td></tr>
<tr><th id="156">156</th><td>}</td></tr>
<tr><th id="157">157</th><td></td></tr>
<tr><th id="158">158</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer14deleteDatabaseERKNS_14IDBRequestDataE" title='WebCore::IDBServer::IDBServer::deleteDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer14deleteDatabaseERKNS_14IDBRequestDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer14deleteDatabaseERKNS_14IDBRequestDataE">deleteDatabase</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col7 decl" id="417requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="417requestData" data-ref-filename="417requestData">requestData</dfn>)</td></tr>
<tr><th id="159">159</th><td>{</td></tr>
<tr><th id="160">160</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::deleteDatabase - %s&quot;, requestData.databaseIdentifier().loggingString().utf8().data())" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::deleteDatabase - %s"</q>, <a class="local col7 ref" href="#417requestData" title='requestData' data-ref="417requestData" data-ref-filename="417requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" title='WebCore::IDBRequestData::databaseIdentifier' data-ref="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv">databaseIdentifier</a>().<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZNK7WebCore21IDBDatabaseIdentifier13loggingStringEv" title='WebCore::IDBDatabaseIdentifier::loggingString' data-ref="_ZNK7WebCore21IDBDatabaseIdentifier13loggingStringEv" data-ref-filename="_ZNK7WebCore21IDBDatabaseIdentifier13loggingStringEv">loggingString</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>());</td></tr>
<tr><th id="161">161</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 161, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(161, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2687); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="162">162</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 162, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(162, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2689); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td>    <em>auto</em> <dfn class="local col8 decl" id="418connection" title='connection' data-type='WebCore::IDBServer::IDBConnectionToClient *' data-ref="418connection" data-ref-filename="418connection">connection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#417requestData" title='requestData' data-ref="417requestData" data-ref-filename="417requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData17requestIdentifierEv" title='WebCore::IDBRequestData::requestIdentifier' data-ref="_ZNK7WebCore14IDBRequestData17requestIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData17requestIdentifierEv">requestIdentifier</a>().<a class="ref fn" href="../shared/IDBResourceIdentifier.h.html#_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv" title='WebCore::IDBResourceIdentifier::connectionIdentifier' data-ref="_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv" data-ref-filename="_ZNK7WebCore21IDBResourceIdentifier20connectionIdentifierEv">connectionIdentifier</a>());</td></tr>
<tr><th id="165">165</th><td>    <b>if</b> (!<a class="local col8 ref" href="#418connection" title='connection' data-ref="418connection" data-ref-filename="418connection">connection</a>) {</td></tr>
<tr><th id="166">166</th><td>        <i>// If the connection back to the client is gone, there's no way to delete the database as</i></td></tr>
<tr><th id="167">167</th><td><i>        // well as no way to message back failure.</i></td></tr>
<tr><th id="168">168</th><td>        <b>return</b>;</td></tr>
<tr><th id="169">169</th><td>    }</td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td>    <em>auto</em>* <dfn class="local col9 decl" id="419database" title='database' data-type='WebCore::IDBServer::UniqueIDBDatabase *' data-ref="419database" data-ref-filename="419database">database</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#417requestData" title='requestData' data-ref="417requestData" data-ref-filename="417requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" title='WebCore::IDBRequestData::databaseIdentifier' data-ref="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="172">172</th><td>    <b>if</b> (!<a class="local col9 ref" href="#419database" title='database' data-ref="419database" data-ref-filename="419database">database</a>)</td></tr>
<tr><th id="173">173</th><td>        <a class="local col9 ref" href="#419database" title='database' data-ref="419database" data-ref-filename="419database">database</a> = &amp;<a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" title='WebCore::IDBServer::IDBServer::getOrCreateUniqueIDBDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer28getOrCreateUniqueIDBDatabaseERKNS_21IDBDatabaseIdentifierE">getOrCreateUniqueIDBDatabase</a>(<a class="local col7 ref" href="#417requestData" title='requestData' data-ref="417requestData" data-ref-filename="417requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" title='WebCore::IDBRequestData::databaseIdentifier' data-ref="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>    <a class="local col9 ref" href="#419database" title='database' data-ref="419database" data-ref-filename="419database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase12handleDeleteERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE" title='WebCore::IDBServer::UniqueIDBDatabase::handleDelete' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase12handleDeleteERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase12handleDeleteERNS0_21IDBConnectionToClientERKNS_14IDBRequestDataE">handleDelete</a>(<span class='refarg'>*<a class="local col8 ref" href="#418connection" title='connection' data-ref="418connection" data-ref-filename="418connection">connection</a></span>, <a class="local col7 ref" href="#417requestData" title='requestData' data-ref="417requestData" data-ref-filename="417requestData">requestData</a>);</td></tr>
<tr><th id="176">176</th><td>    <b>if</b> (<a class="local col9 ref" href="#419database" title='database' data-ref="419database" data-ref-filename="419database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::tryClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv">tryClose</a>())</td></tr>
<tr><th id="177">177</th><td>        <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col9 ref" href="#419database" title='database' data-ref="419database" data-ref-filename="419database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="178">178</th><td>}</td></tr>
<tr><th id="179">179</th><td></td></tr>
<tr><th id="180">180</th><td><span class="namespace">std::</span><span class='type' title='std::__1::unique_ptr' data-ref="std::__1::unique_ptr" data-ref-filename="std..__1..unique_ptr">unique_ptr</span>&lt;<a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>&gt; <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer29closeAndTakeUniqueIDBDatabaseERNS0_17UniqueIDBDatabaseE" title='WebCore::IDBServer::IDBServer::closeAndTakeUniqueIDBDatabase' data-ref="_ZN7WebCore9IDBServer9IDBServer29closeAndTakeUniqueIDBDatabaseERNS0_17UniqueIDBDatabaseE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer29closeAndTakeUniqueIDBDatabaseERNS0_17UniqueIDBDatabaseE">closeAndTakeUniqueIDBDatabase</dfn>(<a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>&amp; <dfn class="local col0 decl" id="420database" title='database' data-type='WebCore::IDBServer::UniqueIDBDatabase &amp;' data-ref="420database" data-ref-filename="420database">database</dfn>)</td></tr>
<tr><th id="181">181</th><td>{</td></tr>
<tr><th id="182">182</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::closeUniqueIDBDatabase&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::closeUniqueIDBDatabase"</q>);</td></tr>
<tr><th id="183">183</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 183, __PRETTY_FUNCTION__, &quot;isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(183, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2691); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="184">184</th><td></td></tr>
<tr><th id="185">185</th><td>    <em>auto</em> <dfn class="local col1 decl" id="421uniquePointer" title='uniquePointer' data-type='std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt;' data-ref="421uniquePointer" data-ref-filename="421uniquePointer">uniquePointer</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap4takeERKNT2_9TraitTypeE" title='WTF::HashMap::take' data-ref="_ZN3WTF7HashMap4takeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap4takeERKNT2_9TraitTypeE">take</a>(<a class="local col0 ref" href="#420database" title='database' data-ref="420database" data-ref-filename="420database">database</a>.<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="186">186</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(uniquePointer)) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 186, __PRETTY_FUNCTION__, &quot;uniquePointer&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(186, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2693); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col1 ref" href="#421uniquePointer" title='uniquePointer' data-ref="421uniquePointer" data-ref-filename="421uniquePointer">uniquePointer</a>);</td></tr>
<tr><th id="187">187</th><td></td></tr>
<tr><th id="188">188</th><td>    <b>return</b> <a class="local col1 ref" href="#421uniquePointer" title='uniquePointer' data-ref="421uniquePointer" data-ref-filename="421uniquePointer">uniquePointer</a>;</td></tr>
<tr><th id="189">189</th><td>}</td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer16abortTransactionERKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::IDBServer::abortTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer16abortTransactionERKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer16abortTransactionERKNS_21IDBResourceIdentifierE">abortTransaction</dfn>(<em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col2 decl" id="422transactionIdentifier" title='transactionIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="422transactionIdentifier" data-ref-filename="422transactionIdentifier">transactionIdentifier</dfn>)</td></tr>
<tr><th id="192">192</th><td>{</td></tr>
<tr><th id="193">193</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::abortTransaction&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::abortTransaction"</q>);</td></tr>
<tr><th id="194">194</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 194, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(194, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2695); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="195">195</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 195, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(195, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2697); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td>    <em>auto</em> <dfn class="local col3 decl" id="423transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="423transaction" data-ref-filename="423transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col2 ref" href="#422transactionIdentifier" title='transactionIdentifier' data-ref="422transactionIdentifier" data-ref-filename="422transactionIdentifier">transactionIdentifier</a>);</td></tr>
<tr><th id="198">198</th><td>    <b>if</b> (!<a class="local col3 ref" href="#423transaction" title='transaction' data-ref="423transaction" data-ref-filename="423transaction">transaction</a>) {</td></tr>
<tr><th id="199">199</th><td>        <i>// If there is no transaction there is nothing to abort.</i></td></tr>
<tr><th id="200">200</th><td><i>        // We also have no access to a connection over which to message failure-to-abort.</i></td></tr>
<tr><th id="201">201</th><td>        <b>return</b>;</td></tr>
<tr><th id="202">202</th><td>    }</td></tr>
<tr><th id="203">203</th><td></td></tr>
<tr><th id="204">204</th><td>    <a class="local col3 ref" href="#423transaction" title='transaction' data-ref="423transaction" data-ref-filename="423transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction5abortEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::abort' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction5abortEv" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction5abortEv">abort</a>();</td></tr>
<tr><th id="205">205</th><td>}</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE" title='WebCore::IDBServer::IDBServer::createObjectStore' data-ref="_ZN7WebCore9IDBServer9IDBServer17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE">createObjectStore</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="424requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="424requestData" data-ref-filename="424requestData">requestData</dfn>, <em>const</em> <a class="type" href="../shared/IDBObjectStoreInfo.h.html#WebCore::IDBObjectStoreInfo" title='WebCore::IDBObjectStoreInfo' data-ref="WebCore::IDBObjectStoreInfo" data-ref-filename="WebCore..IDBObjectStoreInfo">IDBObjectStoreInfo</a>&amp; <dfn class="local col5 decl" id="425info" title='info' data-type='const WebCore::IDBObjectStoreInfo &amp;' data-ref="425info" data-ref-filename="425info">info</dfn>)</td></tr>
<tr><th id="208">208</th><td>{</td></tr>
<tr><th id="209">209</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::createObjectStore&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::createObjectStore"</q>);</td></tr>
<tr><th id="210">210</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 210, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(210, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2699); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="211">211</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 211, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(211, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2701); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="212">212</th><td></td></tr>
<tr><th id="213">213</th><td>    <em>auto</em> <dfn class="local col6 decl" id="426transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="426transaction" data-ref-filename="426transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#424requestData" title='requestData' data-ref="424requestData" data-ref-filename="424requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="214">214</th><td>    <b>if</b> (!<a class="local col6 ref" href="#426transaction" title='transaction' data-ref="426transaction" data-ref-filename="426transaction">transaction</a>)</td></tr>
<tr><th id="215">215</th><td>        <b>return</b>;</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 217, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(217, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2703); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col6 ref" href="#426transaction" title='transaction' data-ref="426transaction" data-ref-filename="426transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="218">218</th><td>    <a class="local col6 ref" href="#426transaction" title='transaction' data-ref="426transaction" data-ref-filename="426transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::createObjectStore' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17createObjectStoreERKNS_14IDBRequestDataERKNS_18IDBObjectStoreInfoE">createObjectStore</a>(<a class="local col4 ref" href="#424requestData" title='requestData' data-ref="424requestData" data-ref-filename="424requestData">requestData</a>, <a class="local col5 ref" href="#425info" title='info' data-ref="425info" data-ref-filename="425info">info</a>);</td></tr>
<tr><th id="219">219</th><td>}</td></tr>
<tr><th id="220">220</th><td></td></tr>
<tr><th id="221">221</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE" title='WebCore::IDBServer::IDBServer::deleteObjectStore' data-ref="_ZN7WebCore9IDBServer9IDBServer17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE">deleteObjectStore</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col7 decl" id="427requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="427requestData" data-ref-filename="427requestData">requestData</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col8 decl" id="428objectStoreName" title='objectStoreName' data-type='const WTF::String &amp;' data-ref="428objectStoreName" data-ref-filename="428objectStoreName">objectStoreName</dfn>)</td></tr>
<tr><th id="222">222</th><td>{</td></tr>
<tr><th id="223">223</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::deleteObjectStore&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::deleteObjectStore"</q>);</td></tr>
<tr><th id="224">224</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 224, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(224, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2705); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="225">225</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 225, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(225, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2707); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td>    <em>auto</em> <dfn class="local col9 decl" id="429transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="429transaction" data-ref-filename="429transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#427requestData" title='requestData' data-ref="427requestData" data-ref-filename="427requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="228">228</th><td>    <b>if</b> (!<a class="local col9 ref" href="#429transaction" title='transaction' data-ref="429transaction" data-ref-filename="429transaction">transaction</a>)</td></tr>
<tr><th id="229">229</th><td>        <b>return</b>;</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 231, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(231, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2709); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col9 ref" href="#429transaction" title='transaction' data-ref="429transaction" data-ref-filename="429transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="232">232</th><td>    <a class="local col9 ref" href="#429transaction" title='transaction' data-ref="429transaction" data-ref-filename="429transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::deleteObjectStore' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17deleteObjectStoreERKNS_14IDBRequestDataERKN3WTF6StringE">deleteObjectStore</a>(<a class="local col7 ref" href="#427requestData" title='requestData' data-ref="427requestData" data-ref-filename="427requestData">requestData</a>, <a class="local col8 ref" href="#428objectStoreName" title='objectStoreName' data-ref="428objectStoreName" data-ref-filename="428objectStoreName">objectStoreName</a>);</td></tr>
<tr><th id="233">233</th><td>}</td></tr>
<tr><th id="234">234</th><td></td></tr>
<tr><th id="235">235</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE" title='WebCore::IDBServer::IDBServer::renameObjectStore' data-ref="_ZN7WebCore9IDBServer9IDBServer17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE">renameObjectStore</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col0 decl" id="430requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="430requestData" data-ref-filename="430requestData">requestData</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col1 decl" id="431objectStoreIdentifier" title='objectStoreIdentifier' data-type='uint64_t' data-ref="431objectStoreIdentifier" data-ref-filename="431objectStoreIdentifier">objectStoreIdentifier</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col2 decl" id="432newName" title='newName' data-type='const WTF::String &amp;' data-ref="432newName" data-ref-filename="432newName">newName</dfn>)</td></tr>
<tr><th id="236">236</th><td>{</td></tr>
<tr><th id="237">237</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::renameObjectStore&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::renameObjectStore"</q>);</td></tr>
<tr><th id="238">238</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 238, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(238, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2711); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="239">239</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 239, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(239, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2713); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>    <em>auto</em> <dfn class="local col3 decl" id="433transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="433transaction" data-ref-filename="433transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col0 ref" href="#430requestData" title='requestData' data-ref="430requestData" data-ref-filename="430requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="242">242</th><td>    <b>if</b> (!<a class="local col3 ref" href="#433transaction" title='transaction' data-ref="433transaction" data-ref-filename="433transaction">transaction</a>)</td></tr>
<tr><th id="243">243</th><td>        <b>return</b>;</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 245, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(245, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2715); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col3 ref" href="#433transaction" title='transaction' data-ref="433transaction" data-ref-filename="433transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="246">246</th><td>    <a class="local col3 ref" href="#433transaction" title='transaction' data-ref="433transaction" data-ref-filename="433transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::renameObjectStore' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction17renameObjectStoreERKNS_14IDBRequestDataEyRKN3WTF6StringE">renameObjectStore</a>(<a class="local col0 ref" href="#430requestData" title='requestData' data-ref="430requestData" data-ref-filename="430requestData">requestData</a>, <a class="local col1 ref" href="#431objectStoreIdentifier" title='objectStoreIdentifier' data-ref="431objectStoreIdentifier" data-ref-filename="431objectStoreIdentifier">objectStoreIdentifier</a>, <a class="local col2 ref" href="#432newName" title='newName' data-ref="432newName" data-ref-filename="432newName">newName</a>);</td></tr>
<tr><th id="247">247</th><td>}</td></tr>
<tr><th id="248">248</th><td></td></tr>
<tr><th id="249">249</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer16clearObjectStoreERKNS_14IDBRequestDataEy" title='WebCore::IDBServer::IDBServer::clearObjectStore' data-ref="_ZN7WebCore9IDBServer9IDBServer16clearObjectStoreERKNS_14IDBRequestDataEy" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer16clearObjectStoreERKNS_14IDBRequestDataEy">clearObjectStore</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="434requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="434requestData" data-ref-filename="434requestData">requestData</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col5 decl" id="435objectStoreIdentifier" title='objectStoreIdentifier' data-type='uint64_t' data-ref="435objectStoreIdentifier" data-ref-filename="435objectStoreIdentifier">objectStoreIdentifier</dfn>)</td></tr>
<tr><th id="250">250</th><td>{</td></tr>
<tr><th id="251">251</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::clearObjectStore&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::clearObjectStore"</q>);</td></tr>
<tr><th id="252">252</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 252, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(252, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2717); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="253">253</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 253, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(253, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2719); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td>    <em>auto</em> <dfn class="local col6 decl" id="436transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="436transaction" data-ref-filename="436transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#434requestData" title='requestData' data-ref="434requestData" data-ref-filename="434requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="256">256</th><td>    <b>if</b> (!<a class="local col6 ref" href="#436transaction" title='transaction' data-ref="436transaction" data-ref-filename="436transaction">transaction</a>)</td></tr>
<tr><th id="257">257</th><td>        <b>return</b>;</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>    <a class="local col6 ref" href="#436transaction" title='transaction' data-ref="436transaction" data-ref-filename="436transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction16clearObjectStoreERKNS_14IDBRequestDataEy" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::clearObjectStore' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction16clearObjectStoreERKNS_14IDBRequestDataEy" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction16clearObjectStoreERKNS_14IDBRequestDataEy">clearObjectStore</a>(<a class="local col4 ref" href="#434requestData" title='requestData' data-ref="434requestData" data-ref-filename="434requestData">requestData</a>, <a class="local col5 ref" href="#435objectStoreIdentifier" title='objectStoreIdentifier' data-ref="435objectStoreIdentifier" data-ref-filename="435objectStoreIdentifier">objectStoreIdentifier</a>);</td></tr>
<tr><th id="260">260</th><td>}</td></tr>
<tr><th id="261">261</th><td></td></tr>
<tr><th id="262">262</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE" title='WebCore::IDBServer::IDBServer::createIndex' data-ref="_ZN7WebCore9IDBServer9IDBServer11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE">createIndex</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col7 decl" id="437requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="437requestData" data-ref-filename="437requestData">requestData</dfn>, <em>const</em> <a class="type" href="../shared/IDBIndexInfo.h.html#WebCore::IDBIndexInfo" title='WebCore::IDBIndexInfo' data-ref="WebCore::IDBIndexInfo" data-ref-filename="WebCore..IDBIndexInfo">IDBIndexInfo</a>&amp; <dfn class="local col8 decl" id="438info" title='info' data-type='const WebCore::IDBIndexInfo &amp;' data-ref="438info" data-ref-filename="438info">info</dfn>)</td></tr>
<tr><th id="263">263</th><td>{</td></tr>
<tr><th id="264">264</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::createIndex&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::createIndex"</q>);</td></tr>
<tr><th id="265">265</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 265, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(265, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2721); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="266">266</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 266, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(266, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2723); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="267">267</th><td></td></tr>
<tr><th id="268">268</th><td>    <em>auto</em> <dfn class="local col9 decl" id="439transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="439transaction" data-ref-filename="439transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#437requestData" title='requestData' data-ref="437requestData" data-ref-filename="437requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="269">269</th><td>    <b>if</b> (!<a class="local col9 ref" href="#439transaction" title='transaction' data-ref="439transaction" data-ref-filename="439transaction">transaction</a>)</td></tr>
<tr><th id="270">270</th><td>        <b>return</b>;</td></tr>
<tr><th id="271">271</th><td></td></tr>
<tr><th id="272">272</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 272, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(272, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2725); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col9 ref" href="#439transaction" title='transaction' data-ref="439transaction" data-ref-filename="439transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="273">273</th><td>    <a class="local col9 ref" href="#439transaction" title='transaction' data-ref="439transaction" data-ref-filename="439transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::createIndex' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11createIndexERKNS_14IDBRequestDataERKNS_12IDBIndexInfoE">createIndex</a>(<a class="local col7 ref" href="#437requestData" title='requestData' data-ref="437requestData" data-ref-filename="437requestData">requestData</a>, <a class="local col8 ref" href="#438info" title='info' data-ref="438info" data-ref-filename="438info">info</a>);</td></tr>
<tr><th id="274">274</th><td>}</td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE" title='WebCore::IDBServer::IDBServer::deleteIndex' data-ref="_ZN7WebCore9IDBServer9IDBServer11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE">deleteIndex</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col0 decl" id="440requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="440requestData" data-ref-filename="440requestData">requestData</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col1 decl" id="441objectStoreIdentifier" title='objectStoreIdentifier' data-type='uint64_t' data-ref="441objectStoreIdentifier" data-ref-filename="441objectStoreIdentifier">objectStoreIdentifier</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col2 decl" id="442indexName" title='indexName' data-type='const WTF::String &amp;' data-ref="442indexName" data-ref-filename="442indexName">indexName</dfn>)</td></tr>
<tr><th id="277">277</th><td>{</td></tr>
<tr><th id="278">278</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::deleteIndex&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::deleteIndex"</q>);</td></tr>
<tr><th id="279">279</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 279, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(279, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2727); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="280">280</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 280, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(280, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2729); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="281">281</th><td></td></tr>
<tr><th id="282">282</th><td>    <em>auto</em> <dfn class="local col3 decl" id="443transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="443transaction" data-ref-filename="443transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col0 ref" href="#440requestData" title='requestData' data-ref="440requestData" data-ref-filename="440requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="283">283</th><td>    <b>if</b> (!<a class="local col3 ref" href="#443transaction" title='transaction' data-ref="443transaction" data-ref-filename="443transaction">transaction</a>)</td></tr>
<tr><th id="284">284</th><td>        <b>return</b>;</td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 286, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(286, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2731); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col3 ref" href="#443transaction" title='transaction' data-ref="443transaction" data-ref-filename="443transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="287">287</th><td>    <a class="local col3 ref" href="#443transaction" title='transaction' data-ref="443transaction" data-ref-filename="443transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::deleteIndex' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11deleteIndexERKNS_14IDBRequestDataEyRKN3WTF6StringE">deleteIndex</a>(<a class="local col0 ref" href="#440requestData" title='requestData' data-ref="440requestData" data-ref-filename="440requestData">requestData</a>, <a class="local col1 ref" href="#441objectStoreIdentifier" title='objectStoreIdentifier' data-ref="441objectStoreIdentifier" data-ref-filename="441objectStoreIdentifier">objectStoreIdentifier</a>, <a class="local col2 ref" href="#442indexName" title='indexName' data-ref="442indexName" data-ref-filename="442indexName">indexName</a>);</td></tr>
<tr><th id="288">288</th><td>}</td></tr>
<tr><th id="289">289</th><td></td></tr>
<tr><th id="290">290</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE" title='WebCore::IDBServer::IDBServer::renameIndex' data-ref="_ZN7WebCore9IDBServer9IDBServer11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE">renameIndex</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="444requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="444requestData" data-ref-filename="444requestData">requestData</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col5 decl" id="445objectStoreIdentifier" title='objectStoreIdentifier' data-type='uint64_t' data-ref="445objectStoreIdentifier" data-ref-filename="445objectStoreIdentifier">objectStoreIdentifier</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col6 decl" id="446indexIdentifier" title='indexIdentifier' data-type='uint64_t' data-ref="446indexIdentifier" data-ref-filename="446indexIdentifier">indexIdentifier</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col7 decl" id="447newName" title='newName' data-type='const WTF::String &amp;' data-ref="447newName" data-ref-filename="447newName">newName</dfn>)</td></tr>
<tr><th id="291">291</th><td>{</td></tr>
<tr><th id="292">292</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::renameIndex&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::renameIndex"</q>);</td></tr>
<tr><th id="293">293</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 293, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(293, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2733); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="294">294</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 294, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(294, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2735); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>    <em>auto</em> <dfn class="local col8 decl" id="448transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="448transaction" data-ref-filename="448transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#444requestData" title='requestData' data-ref="444requestData" data-ref-filename="444requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="297">297</th><td>    <b>if</b> (!<a class="local col8 ref" href="#448transaction" title='transaction' data-ref="448transaction" data-ref-filename="448transaction">transaction</a>)</td></tr>
<tr><th id="298">298</th><td>        <b>return</b>;</td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(transaction-&gt;isVersionChange())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 300, __PRETTY_FUNCTION__, &quot;transaction-&gt;isVersionChange()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(300, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2737); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="local col8 ref" href="#448transaction" title='transaction' data-ref="448transaction" data-ref-filename="448transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::isVersionChange' data-ref="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv" data-ref-filename="_ZNK7WebCore9IDBServer28UniqueIDBDatabaseTransaction15isVersionChangeEv">isVersionChange</a>());</td></tr>
<tr><th id="301">301</th><td>    <a class="local col8 ref" href="#448transaction" title='transaction' data-ref="448transaction" data-ref-filename="448transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::renameIndex' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction11renameIndexERKNS_14IDBRequestDataEyyRKN3WTF6StringE">renameIndex</a>(<a class="local col4 ref" href="#444requestData" title='requestData' data-ref="444requestData" data-ref-filename="444requestData">requestData</a>, <a class="local col5 ref" href="#445objectStoreIdentifier" title='objectStoreIdentifier' data-ref="445objectStoreIdentifier" data-ref-filename="445objectStoreIdentifier">objectStoreIdentifier</a>, <a class="local col6 ref" href="#446indexIdentifier" title='indexIdentifier' data-ref="446indexIdentifier" data-ref-filename="446indexIdentifier">indexIdentifier</a>, <a class="local col7 ref" href="#447newName" title='newName' data-ref="447newName" data-ref-filename="447newName">newName</a>);</td></tr>
<tr><th id="302">302</th><td>}</td></tr>
<tr><th id="303">303</th><td></td></tr>
<tr><th id="304">304</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE" title='WebCore::IDBServer::IDBServer::putOrAdd' data-ref="_ZN7WebCore9IDBServer9IDBServer8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE">putOrAdd</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col9 decl" id="449requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="449requestData" data-ref-filename="449requestData">requestData</dfn>, <em>const</em> <a class="type" href="../IDBKeyData.h.html#WebCore::IDBKeyData" title='WebCore::IDBKeyData' data-ref="WebCore::IDBKeyData" data-ref-filename="WebCore..IDBKeyData">IDBKeyData</a>&amp; <dfn class="local col0 decl" id="450keyData" title='keyData' data-type='const WebCore::IDBKeyData &amp;' data-ref="450keyData" data-ref-filename="450keyData">keyData</dfn>, <em>const</em> <a class="type" href="../IDBValue.h.html#WebCore::IDBValue" title='WebCore::IDBValue' data-ref="WebCore::IDBValue" data-ref-filename="WebCore..IDBValue">IDBValue</a>&amp; <dfn class="local col1 decl" id="451value" title='value' data-type='const WebCore::IDBValue &amp;' data-ref="451value" data-ref-filename="451value">value</dfn>, <span class="namespace">IndexedDB::</span><a class="type" href="../IndexedDB.h.html#WebCore::IndexedDB::ObjectStoreOverwriteMode" title='WebCore::IndexedDB::ObjectStoreOverwriteMode' data-ref="WebCore::IndexedDB::ObjectStoreOverwriteMode" data-ref-filename="WebCore..IndexedDB..ObjectStoreOverwriteMode">ObjectStoreOverwriteMode</a> <dfn class="local col2 decl" id="452overwriteMode" title='overwriteMode' data-type='IndexedDB::ObjectStoreOverwriteMode' data-ref="452overwriteMode" data-ref-filename="452overwriteMode">overwriteMode</dfn>)</td></tr>
<tr><th id="305">305</th><td>{</td></tr>
<tr><th id="306">306</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::putOrAdd&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::putOrAdd"</q>);</td></tr>
<tr><th id="307">307</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 307, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(307, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2739); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="308">308</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 308, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(308, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2741); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="309">309</th><td></td></tr>
<tr><th id="310">310</th><td>    <em>auto</em> <dfn class="local col3 decl" id="453transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="453transaction" data-ref-filename="453transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col9 ref" href="#449requestData" title='requestData' data-ref="449requestData" data-ref-filename="449requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="311">311</th><td>    <b>if</b> (!<a class="local col3 ref" href="#453transaction" title='transaction' data-ref="453transaction" data-ref-filename="453transaction">transaction</a>)</td></tr>
<tr><th id="312">312</th><td>        <b>return</b>;</td></tr>
<tr><th id="313">313</th><td></td></tr>
<tr><th id="314">314</th><td>    <a class="local col3 ref" href="#453transaction" title='transaction' data-ref="453transaction" data-ref-filename="453transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::putOrAdd' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8putOrAddERKNS_14IDBRequestDataERKNS_10IDBKeyDataERKNS_8IDBValueENS_9IndexedDB24ObjectStoreOverwriteModeE">putOrAdd</a>(<a class="local col9 ref" href="#449requestData" title='requestData' data-ref="449requestData" data-ref-filename="449requestData">requestData</a>, <a class="local col0 ref" href="#450keyData" title='keyData' data-ref="450keyData" data-ref-filename="450keyData">keyData</a>, <a class="local col1 ref" href="#451value" title='value' data-ref="451value" data-ref-filename="451value">value</a>, <a class="local col2 ref" href="#452overwriteMode" title='overwriteMode' data-ref="452overwriteMode" data-ref-filename="452overwriteMode">overwriteMode</a>);</td></tr>
<tr><th id="315">315</th><td>}</td></tr>
<tr><th id="316">316</th><td></td></tr>
<tr><th id="317">317</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE" title='WebCore::IDBServer::IDBServer::getRecord' data-ref="_ZN7WebCore9IDBServer9IDBServer9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE">getRecord</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="454requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="454requestData" data-ref-filename="454requestData">requestData</dfn>, <em>const</em> <a class="type" href="../shared/IDBGetRecordData.h.html#WebCore::IDBGetRecordData" title='WebCore::IDBGetRecordData' data-ref="WebCore::IDBGetRecordData" data-ref-filename="WebCore..IDBGetRecordData">IDBGetRecordData</a>&amp; <dfn class="local col5 decl" id="455getRecordData" title='getRecordData' data-type='const WebCore::IDBGetRecordData &amp;' data-ref="455getRecordData" data-ref-filename="455getRecordData">getRecordData</dfn>)</td></tr>
<tr><th id="318">318</th><td>{</td></tr>
<tr><th id="319">319</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::getRecord&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::getRecord"</q>);</td></tr>
<tr><th id="320">320</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 320, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(320, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2743); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="321">321</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 321, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(321, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2745); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td>    <em>auto</em> <dfn class="local col6 decl" id="456transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="456transaction" data-ref-filename="456transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#454requestData" title='requestData' data-ref="454requestData" data-ref-filename="454requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="324">324</th><td>    <b>if</b> (!<a class="local col6 ref" href="#456transaction" title='transaction' data-ref="456transaction" data-ref-filename="456transaction">transaction</a>)</td></tr>
<tr><th id="325">325</th><td>        <b>return</b>;</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td>    <a class="local col6 ref" href="#456transaction" title='transaction' data-ref="456transaction" data-ref-filename="456transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::getRecord' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction9getRecordERKNS_14IDBRequestDataERKNS_16IDBGetRecordDataE">getRecord</a>(<a class="local col4 ref" href="#454requestData" title='requestData' data-ref="454requestData" data-ref-filename="454requestData">requestData</a>, <a class="local col5 ref" href="#455getRecordData" title='getRecordData' data-ref="455getRecordData" data-ref-filename="455getRecordData">getRecordData</a>);</td></tr>
<tr><th id="328">328</th><td>}</td></tr>
<tr><th id="329">329</th><td></td></tr>
<tr><th id="330">330</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE" title='WebCore::IDBServer::IDBServer::getAllRecords' data-ref="_ZN7WebCore9IDBServer9IDBServer13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE">getAllRecords</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col7 decl" id="457requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="457requestData" data-ref-filename="457requestData">requestData</dfn>, <em>const</em> <a class="type" href="../shared/IDBGetAllRecordsData.h.html#WebCore::IDBGetAllRecordsData" title='WebCore::IDBGetAllRecordsData' data-ref="WebCore::IDBGetAllRecordsData" data-ref-filename="WebCore..IDBGetAllRecordsData">IDBGetAllRecordsData</a>&amp; <dfn class="local col8 decl" id="458getAllRecordsData" title='getAllRecordsData' data-type='const WebCore::IDBGetAllRecordsData &amp;' data-ref="458getAllRecordsData" data-ref-filename="458getAllRecordsData">getAllRecordsData</dfn>)</td></tr>
<tr><th id="331">331</th><td>{</td></tr>
<tr><th id="332">332</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::getAllRecords&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::getAllRecords"</q>);</td></tr>
<tr><th id="333">333</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 333, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(333, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2747); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="334">334</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 334, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(334, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2749); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="335">335</th><td></td></tr>
<tr><th id="336">336</th><td>    <em>auto</em> <dfn class="local col9 decl" id="459transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="459transaction" data-ref-filename="459transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#457requestData" title='requestData' data-ref="457requestData" data-ref-filename="457requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="337">337</th><td>    <b>if</b> (!<a class="local col9 ref" href="#459transaction" title='transaction' data-ref="459transaction" data-ref-filename="459transaction">transaction</a>)</td></tr>
<tr><th id="338">338</th><td>        <b>return</b>;</td></tr>
<tr><th id="339">339</th><td></td></tr>
<tr><th id="340">340</th><td>    <a class="local col9 ref" href="#459transaction" title='transaction' data-ref="459transaction" data-ref-filename="459transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::getAllRecords' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13getAllRecordsERKNS_14IDBRequestDataERKNS_20IDBGetAllRecordsDataE">getAllRecords</a>(<a class="local col7 ref" href="#457requestData" title='requestData' data-ref="457requestData" data-ref-filename="457requestData">requestData</a>, <a class="local col8 ref" href="#458getAllRecordsData" title='getAllRecordsData' data-ref="458getAllRecordsData" data-ref-filename="458getAllRecordsData">getAllRecordsData</a>);</td></tr>
<tr><th id="341">341</th><td>}</td></tr>
<tr><th id="342">342</th><td></td></tr>
<tr><th id="343">343</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" title='WebCore::IDBServer::IDBServer::getCount' data-ref="_ZN7WebCore9IDBServer9IDBServer8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE">getCount</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col0 decl" id="460requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="460requestData" data-ref-filename="460requestData">requestData</dfn>, <em>const</em> <a class="type" href="../IDBKeyRangeData.h.html#WebCore::IDBKeyRangeData" title='WebCore::IDBKeyRangeData' data-ref="WebCore::IDBKeyRangeData" data-ref-filename="WebCore..IDBKeyRangeData">IDBKeyRangeData</a>&amp; <dfn class="local col1 decl" id="461keyRangeData" title='keyRangeData' data-type='const WebCore::IDBKeyRangeData &amp;' data-ref="461keyRangeData" data-ref-filename="461keyRangeData">keyRangeData</dfn>)</td></tr>
<tr><th id="344">344</th><td>{</td></tr>
<tr><th id="345">345</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::getCount&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::getCount"</q>);</td></tr>
<tr><th id="346">346</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 346, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(346, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2751); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="347">347</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 347, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(347, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2753); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td>    <em>auto</em> <dfn class="local col2 decl" id="462transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="462transaction" data-ref-filename="462transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col0 ref" href="#460requestData" title='requestData' data-ref="460requestData" data-ref-filename="460requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="350">350</th><td>    <b>if</b> (!<a class="local col2 ref" href="#462transaction" title='transaction' data-ref="462transaction" data-ref-filename="462transaction">transaction</a>)</td></tr>
<tr><th id="351">351</th><td>        <b>return</b>;</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>    <a class="local col2 ref" href="#462transaction" title='transaction' data-ref="462transaction" data-ref-filename="462transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::getCount' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction8getCountERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE">getCount</a>(<a class="local col0 ref" href="#460requestData" title='requestData' data-ref="460requestData" data-ref-filename="460requestData">requestData</a>, <a class="local col1 ref" href="#461keyRangeData" title='keyRangeData' data-ref="461keyRangeData" data-ref-filename="461keyRangeData">keyRangeData</a>);</td></tr>
<tr><th id="354">354</th><td>}</td></tr>
<tr><th id="355">355</th><td></td></tr>
<tr><th id="356">356</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" title='WebCore::IDBServer::IDBServer::deleteRecord' data-ref="_ZN7WebCore9IDBServer9IDBServer12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE">deleteRecord</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col3 decl" id="463requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="463requestData" data-ref-filename="463requestData">requestData</dfn>, <em>const</em> <a class="type" href="../IDBKeyRangeData.h.html#WebCore::IDBKeyRangeData" title='WebCore::IDBKeyRangeData' data-ref="WebCore::IDBKeyRangeData" data-ref-filename="WebCore..IDBKeyRangeData">IDBKeyRangeData</a>&amp; <dfn class="local col4 decl" id="464keyRangeData" title='keyRangeData' data-type='const WebCore::IDBKeyRangeData &amp;' data-ref="464keyRangeData" data-ref-filename="464keyRangeData">keyRangeData</dfn>)</td></tr>
<tr><th id="357">357</th><td>{</td></tr>
<tr><th id="358">358</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::deleteRecord&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::deleteRecord"</q>);</td></tr>
<tr><th id="359">359</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 359, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(359, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2755); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="360">360</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 360, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(360, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2757); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>    <em>auto</em> <dfn class="local col5 decl" id="465transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="465transaction" data-ref-filename="465transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col3 ref" href="#463requestData" title='requestData' data-ref="463requestData" data-ref-filename="463requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="363">363</th><td>    <b>if</b> (!<a class="local col5 ref" href="#465transaction" title='transaction' data-ref="465transaction" data-ref-filename="465transaction">transaction</a>)</td></tr>
<tr><th id="364">364</th><td>        <b>return</b>;</td></tr>
<tr><th id="365">365</th><td></td></tr>
<tr><th id="366">366</th><td>    <a class="local col5 ref" href="#465transaction" title='transaction' data-ref="465transaction" data-ref-filename="465transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::deleteRecord' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction12deleteRecordERKNS_14IDBRequestDataERKNS_15IDBKeyRangeDataE">deleteRecord</a>(<a class="local col3 ref" href="#463requestData" title='requestData' data-ref="463requestData" data-ref-filename="463requestData">requestData</a>, <a class="local col4 ref" href="#464keyRangeData" title='keyRangeData' data-ref="464keyRangeData" data-ref-filename="464keyRangeData">keyRangeData</a>);</td></tr>
<tr><th id="367">367</th><td>}</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE" title='WebCore::IDBServer::IDBServer::openCursor' data-ref="_ZN7WebCore9IDBServer9IDBServer10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE">openCursor</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col6 decl" id="466requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="466requestData" data-ref-filename="466requestData">requestData</dfn>, <em>const</em> <a class="type" href="../shared/IDBCursorInfo.h.html#WebCore::IDBCursorInfo" title='WebCore::IDBCursorInfo' data-ref="WebCore::IDBCursorInfo" data-ref-filename="WebCore..IDBCursorInfo">IDBCursorInfo</a>&amp; <dfn class="local col7 decl" id="467info" title='info' data-type='const WebCore::IDBCursorInfo &amp;' data-ref="467info" data-ref-filename="467info">info</dfn>)</td></tr>
<tr><th id="370">370</th><td>{</td></tr>
<tr><th id="371">371</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::openCursor&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::openCursor"</q>);</td></tr>
<tr><th id="372">372</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 372, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(372, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2759); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="373">373</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 373, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(373, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2761); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="374">374</th><td></td></tr>
<tr><th id="375">375</th><td>    <em>auto</em> <dfn class="local col8 decl" id="468transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="468transaction" data-ref-filename="468transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col6 ref" href="#466requestData" title='requestData' data-ref="466requestData" data-ref-filename="466requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="376">376</th><td>    <b>if</b> (!<a class="local col8 ref" href="#468transaction" title='transaction' data-ref="468transaction" data-ref-filename="468transaction">transaction</a>)</td></tr>
<tr><th id="377">377</th><td>        <b>return</b>;</td></tr>
<tr><th id="378">378</th><td></td></tr>
<tr><th id="379">379</th><td>    <a class="local col8 ref" href="#468transaction" title='transaction' data-ref="468transaction" data-ref-filename="468transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::openCursor' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction10openCursorERKNS_14IDBRequestDataERKNS_13IDBCursorInfoE">openCursor</a>(<a class="local col6 ref" href="#466requestData" title='requestData' data-ref="466requestData" data-ref-filename="466requestData">requestData</a>, <a class="local col7 ref" href="#467info" title='info' data-ref="467info" data-ref-filename="467info">info</a>);</td></tr>
<tr><th id="380">380</th><td>}</td></tr>
<tr><th id="381">381</th><td></td></tr>
<tr><th id="382">382</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE" title='WebCore::IDBServer::IDBServer::iterateCursor' data-ref="_ZN7WebCore9IDBServer9IDBServer13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE">iterateCursor</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col9 decl" id="469requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="469requestData" data-ref-filename="469requestData">requestData</dfn>, <em>const</em> <a class="type" href="../IDBTransaction.h.html#WebCore::IDBIterateCursorData" title='WebCore::IDBIterateCursorData' data-ref="WebCore::IDBIterateCursorData" data-ref-filename="WebCore..IDBIterateCursorData">IDBIterateCursorData</a>&amp; <dfn class="local col0 decl" id="470data" title='data' data-type='const WebCore::IDBIterateCursorData &amp;' data-ref="470data" data-ref-filename="470data">data</dfn>)</td></tr>
<tr><th id="383">383</th><td>{</td></tr>
<tr><th id="384">384</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::iterateCursor&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::iterateCursor"</q>);</td></tr>
<tr><th id="385">385</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 385, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(385, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2763); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="386">386</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 386, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(386, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2765); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td>    <em>auto</em> <dfn class="local col1 decl" id="471transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="471transaction" data-ref-filename="471transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col9 ref" href="#469requestData" title='requestData' data-ref="469requestData" data-ref-filename="469requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" title='WebCore::IDBRequestData::transactionIdentifier' data-ref="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData21transactionIdentifierEv">transactionIdentifier</a>());</td></tr>
<tr><th id="389">389</th><td>    <b>if</b> (!<a class="local col1 ref" href="#471transaction" title='transaction' data-ref="471transaction" data-ref-filename="471transaction">transaction</a>)</td></tr>
<tr><th id="390">390</th><td>        <b>return</b>;</td></tr>
<tr><th id="391">391</th><td></td></tr>
<tr><th id="392">392</th><td>    <a class="local col1 ref" href="#471transaction" title='transaction' data-ref="471transaction" data-ref-filename="471transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::iterateCursor' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction13iterateCursorERKNS_14IDBRequestDataERKNS_20IDBIterateCursorDataE">iterateCursor</a>(<a class="local col9 ref" href="#469requestData" title='requestData' data-ref="469requestData" data-ref-filename="469requestData">requestData</a>, <a class="local col0 ref" href="#470data" title='data' data-ref="470data" data-ref-filename="470data">data</a>);</td></tr>
<tr><th id="393">393</th><td>}</td></tr>
<tr><th id="394">394</th><td></td></tr>
<tr><th id="395">395</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer20establishTransactionEyRKNS_18IDBTransactionInfoE" title='WebCore::IDBServer::IDBServer::establishTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer20establishTransactionEyRKNS_18IDBTransactionInfoE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer20establishTransactionEyRKNS_18IDBTransactionInfoE">establishTransaction</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col2 decl" id="472databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="472databaseConnectionIdentifier" data-ref-filename="472databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>, <em>const</em> <a class="type" href="../shared/IDBTransactionInfo.h.html#WebCore::IDBTransactionInfo" title='WebCore::IDBTransactionInfo' data-ref="WebCore::IDBTransactionInfo" data-ref-filename="WebCore..IDBTransactionInfo">IDBTransactionInfo</a>&amp; <dfn class="local col3 decl" id="473info" title='info' data-type='const WebCore::IDBTransactionInfo &amp;' data-ref="473info" data-ref-filename="473info">info</dfn>)</td></tr>
<tr><th id="396">396</th><td>{</td></tr>
<tr><th id="397">397</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::establishTransaction&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::establishTransaction"</q>);</td></tr>
<tr><th id="398">398</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 398, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(398, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2767); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="399">399</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 399, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(399, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2769); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="400">400</th><td></td></tr>
<tr><th id="401">401</th><td>    <em>auto</em>* <dfn class="local col4 decl" id="474databaseConnection" title='databaseConnection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="474databaseConnection" data-ref-filename="474databaseConnection">databaseConnection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col2 ref" href="#472databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="472databaseConnectionIdentifier" data-ref-filename="472databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="402">402</th><td>    <b>if</b> (!<a class="local col4 ref" href="#474databaseConnection" title='databaseConnection' data-ref="474databaseConnection" data-ref-filename="474databaseConnection">databaseConnection</a>)</td></tr>
<tr><th id="403">403</th><td>        <b>return</b>;</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td>    <em>auto</em>* <dfn class="local col5 decl" id="475database" title='database' data-type='WebCore::IDBServer::UniqueIDBDatabase *' data-ref="475database" data-ref-filename="475database">database</dfn> = <a class="local col4 ref" href="#474databaseConnection" title='databaseConnection' data-ref="474databaseConnection" data-ref-filename="474databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::database' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv">database</a>();</td></tr>
<tr><th id="406">406</th><td>    <a class="local col4 ref" href="#474databaseConnection" title='databaseConnection' data-ref="474databaseConnection" data-ref-filename="474databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection20establishTransactionERKNS_18IDBTransactionInfoE" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::establishTransaction' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection20establishTransactionERKNS_18IDBTransactionInfoE" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection20establishTransactionERKNS_18IDBTransactionInfoE">establishTransaction</a>(<a class="local col3 ref" href="#473info" title='info' data-ref="473info" data-ref-filename="473info">info</a>);</td></tr>
<tr><th id="407">407</th><td>    <b>if</b> (<a class="local col5 ref" href="#475database" title='database' data-ref="475database" data-ref-filename="475database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::tryClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv">tryClose</a>())</td></tr>
<tr><th id="408">408</th><td>        <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col5 ref" href="#475database" title='database' data-ref="475database" data-ref-filename="475database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="409">409</th><td>}</td></tr>
<tr><th id="410">410</th><td></td></tr>
<tr><th id="411">411</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer17commitTransactionERKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::IDBServer::commitTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer17commitTransactionERKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer17commitTransactionERKNS_21IDBResourceIdentifierE">commitTransaction</dfn>(<em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col6 decl" id="476transactionIdentifier" title='transactionIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="476transactionIdentifier" data-ref-filename="476transactionIdentifier">transactionIdentifier</dfn>)</td></tr>
<tr><th id="412">412</th><td>{</td></tr>
<tr><th id="413">413</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::commitTransaction&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::commitTransaction"</q>);</td></tr>
<tr><th id="414">414</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 414, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(414, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2771); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="415">415</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 415, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(415, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2773); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="416">416</th><td></td></tr>
<tr><th id="417">417</th><td>    <em>auto</em> <dfn class="local col7 decl" id="477transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="477transaction" data-ref-filename="477transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col6 ref" href="#476transactionIdentifier" title='transactionIdentifier' data-ref="476transactionIdentifier" data-ref-filename="476transactionIdentifier">transactionIdentifier</a>);</td></tr>
<tr><th id="418">418</th><td>    <b>if</b> (!<a class="local col7 ref" href="#477transaction" title='transaction' data-ref="477transaction" data-ref-filename="477transaction">transaction</a>) {</td></tr>
<tr><th id="419">419</th><td>        <i>// If there is no transaction there is nothing to commit.</i></td></tr>
<tr><th id="420">420</th><td><i>        // We also have no access to a connection over which to message failure-to-commit.</i></td></tr>
<tr><th id="421">421</th><td>        <b>return</b>;</td></tr>
<tr><th id="422">422</th><td>    }</td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>    <a class="local col7 ref" href="#477transaction" title='transaction' data-ref="477transaction" data-ref-filename="477transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction6commitEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::commit' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction6commitEv" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction6commitEv">commit</a>();</td></tr>
<tr><th id="425">425</th><td>}</td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer41didFinishHandlingVersionChangeTransactionEyRKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::IDBServer::didFinishHandlingVersionChangeTransaction' data-ref="_ZN7WebCore9IDBServer9IDBServer41didFinishHandlingVersionChangeTransactionEyRKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer41didFinishHandlingVersionChangeTransactionEyRKNS_21IDBResourceIdentifierE">didFinishHandlingVersionChangeTransaction</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col8 decl" id="478databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="478databaseConnectionIdentifier" data-ref-filename="478databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>, <em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col9 decl" id="479transactionIdentifier" title='transactionIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="479transactionIdentifier" data-ref-filename="479transactionIdentifier">transactionIdentifier</dfn>)</td></tr>
<tr><th id="428">428</th><td>{</td></tr>
<tr><th id="429">429</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::didFinishHandlingVersionChangeTransaction - %s&quot;, transactionIdentifier.loggingString().utf8().data())" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::didFinishHandlingVersionChangeTransaction - %s"</q>, <a class="local col9 ref" href="#479transactionIdentifier" title='transactionIdentifier' data-ref="479transactionIdentifier" data-ref-filename="479transactionIdentifier">transactionIdentifier</a>.<a class="ref fn" href="../shared/IDBResourceIdentifier.h.html#_ZNK7WebCore21IDBResourceIdentifier13loggingStringEv" title='WebCore::IDBResourceIdentifier::loggingString' data-ref="_ZNK7WebCore21IDBResourceIdentifier13loggingStringEv" data-ref-filename="_ZNK7WebCore21IDBResourceIdentifier13loggingStringEv">loggingString</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>());</td></tr>
<tr><th id="430">430</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 430, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(430, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2775); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="431">431</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 431, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(431, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2777); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="432">432</th><td></td></tr>
<tr><th id="433">433</th><td>    <em>auto</em>* <dfn class="local col0 decl" id="480connection" title='connection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="480connection" data-ref-filename="480connection">connection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col8 ref" href="#478databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="478databaseConnectionIdentifier" data-ref-filename="478databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="434">434</th><td>    <b>if</b> (!<a class="local col0 ref" href="#480connection" title='connection' data-ref="480connection" data-ref-filename="480connection">connection</a>)</td></tr>
<tr><th id="435">435</th><td>        <b>return</b>;</td></tr>
<tr><th id="436">436</th><td></td></tr>
<tr><th id="437">437</th><td>    <a class="local col0 ref" href="#480connection" title='connection' data-ref="480connection" data-ref-filename="480connection">connection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection30didFinishHandlingVersionChangeERKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::didFinishHandlingVersionChange' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection30didFinishHandlingVersionChangeERKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection30didFinishHandlingVersionChangeERKNS_21IDBResourceIdentifierE">didFinishHandlingVersionChange</a>(<a class="local col9 ref" href="#479transactionIdentifier" title='transactionIdentifier' data-ref="479transactionIdentifier" data-ref-filename="479transactionIdentifier">transactionIdentifier</a>);</td></tr>
<tr><th id="438">438</th><td>}</td></tr>
<tr><th id="439">439</th><td></td></tr>
<tr><th id="440">440</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer30databaseConnectionPendingCloseEy" title='WebCore::IDBServer::IDBServer::databaseConnectionPendingClose' data-ref="_ZN7WebCore9IDBServer9IDBServer30databaseConnectionPendingCloseEy" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer30databaseConnectionPendingCloseEy">databaseConnectionPendingClose</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col1 decl" id="481databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="481databaseConnectionIdentifier" data-ref-filename="481databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>)</td></tr>
<tr><th id="441">441</th><td>{</td></tr>
<tr><th id="442">442</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::databaseConnectionPendingClose - %&quot; &quot;ll&quot; &quot;u&quot;, databaseConnectionIdentifier)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::databaseConnectionPendingClose - %"</q> <span class="macro" title="&quot;ll&quot; &quot;u&quot;" data-ref="_M/PRIu64">PRIu64</span>, <a class="local col1 ref" href="#481databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="481databaseConnectionIdentifier" data-ref-filename="481databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="443">443</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 443, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(443, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2779); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="444">444</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 444, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(444, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2781); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="445">445</th><td></td></tr>
<tr><th id="446">446</th><td>    <em>auto</em> <dfn class="local col2 decl" id="482databaseConnection" title='databaseConnection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="482databaseConnection" data-ref-filename="482databaseConnection">databaseConnection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col1 ref" href="#481databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="481databaseConnectionIdentifier" data-ref-filename="481databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="447">447</th><td>    <b>if</b> (!<a class="local col2 ref" href="#482databaseConnection" title='databaseConnection' data-ref="482databaseConnection" data-ref-filename="482databaseConnection">databaseConnection</a>)</td></tr>
<tr><th id="448">448</th><td>        <b>return</b>;</td></tr>
<tr><th id="449">449</th><td></td></tr>
<tr><th id="450">450</th><td>    <a class="local col2 ref" href="#482databaseConnection" title='databaseConnection' data-ref="482databaseConnection" data-ref-filename="482databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection32connectionPendingCloseFromClientEv" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::connectionPendingCloseFromClient' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection32connectionPendingCloseFromClientEv" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection32connectionPendingCloseFromClientEv">connectionPendingCloseFromClient</a>();</td></tr>
<tr><th id="451">451</th><td>}</td></tr>
<tr><th id="452">452</th><td></td></tr>
<tr><th id="453">453</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer24databaseConnectionClosedEy" title='WebCore::IDBServer::IDBServer::databaseConnectionClosed' data-ref="_ZN7WebCore9IDBServer9IDBServer24databaseConnectionClosedEy" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer24databaseConnectionClosedEy">databaseConnectionClosed</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col3 decl" id="483databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="483databaseConnectionIdentifier" data-ref-filename="483databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>)</td></tr>
<tr><th id="454">454</th><td>{</td></tr>
<tr><th id="455">455</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::databaseConnectionClosed - %&quot; &quot;ll&quot; &quot;u&quot;, databaseConnectionIdentifier)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::databaseConnectionClosed - %"</q> <span class="macro" title="&quot;ll&quot; &quot;u&quot;" data-ref="_M/PRIu64">PRIu64</span>, <a class="local col3 ref" href="#483databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="483databaseConnectionIdentifier" data-ref-filename="483databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="456">456</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 456, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(456, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2783); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="457">457</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 457, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(457, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2785); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="458">458</th><td></td></tr>
<tr><th id="459">459</th><td>    <em>auto</em>* <dfn class="local col4 decl" id="484databaseConnection" title='databaseConnection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="484databaseConnection" data-ref-filename="484databaseConnection">databaseConnection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col3 ref" href="#483databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="483databaseConnectionIdentifier" data-ref-filename="483databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="460">460</th><td>    <b>if</b> (!<a class="local col4 ref" href="#484databaseConnection" title='databaseConnection' data-ref="484databaseConnection" data-ref-filename="484databaseConnection">databaseConnection</a>)</td></tr>
<tr><th id="461">461</th><td>        <b>return</b>;</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td>    <em>auto</em>* <dfn class="local col5 decl" id="485database" title='database' data-type='WebCore::IDBServer::UniqueIDBDatabase *' data-ref="485database" data-ref-filename="485database">database</dfn> = <a class="local col4 ref" href="#484databaseConnection" title='databaseConnection' data-ref="484databaseConnection" data-ref-filename="484databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::database' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection8databaseEv">database</a>();</td></tr>
<tr><th id="464">464</th><td>    <a class="local col4 ref" href="#484databaseConnection" title='databaseConnection' data-ref="484databaseConnection" data-ref-filename="484databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::connectionClosedFromClient' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv">connectionClosedFromClient</a>();</td></tr>
<tr><th id="465">465</th><td>    <b>if</b> (<a class="local col5 ref" href="#485database" title='database' data-ref="485database" data-ref-filename="485database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::tryClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv">tryClose</a>())</td></tr>
<tr><th id="466">466</th><td>        <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col5 ref" href="#485database" title='database' data-ref="485database" data-ref-filename="485database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="467">467</th><td>}</td></tr>
<tr><th id="468">468</th><td></td></tr>
<tr><th id="469">469</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer25abortOpenAndUpgradeNeededEyRKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::IDBServer::abortOpenAndUpgradeNeeded' data-ref="_ZN7WebCore9IDBServer9IDBServer25abortOpenAndUpgradeNeededEyRKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer25abortOpenAndUpgradeNeededEyRKNS_21IDBResourceIdentifierE">abortOpenAndUpgradeNeeded</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col6 decl" id="486databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="486databaseConnectionIdentifier" data-ref-filename="486databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>, <em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col7 decl" id="487transactionIdentifier" title='transactionIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="487transactionIdentifier" data-ref-filename="487transactionIdentifier">transactionIdentifier</dfn>)</td></tr>
<tr><th id="470">470</th><td>{</td></tr>
<tr><th id="471">471</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::abortOpenAndUpgradeNeeded&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::abortOpenAndUpgradeNeeded"</q>);</td></tr>
<tr><th id="472">472</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 472, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(472, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2787); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="473">473</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 473, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(473, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2789); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="474">474</th><td></td></tr>
<tr><th id="475">475</th><td>    <em>auto</em> <dfn class="local col8 decl" id="488transaction" title='transaction' data-type='WebCore::IDBServer::UniqueIDBDatabaseTransaction *' data-ref="488transaction" data-ref-filename="488transaction">transaction</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_transactions" title='WebCore::IDBServer::IDBServer::m_transactions' data-ref="WebCore::IDBServer::IDBServer::m_transactions" data-ref-filename="WebCore..IDBServer..IDBServer..m_transactions">m_transactions</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col7 ref" href="#487transactionIdentifier" title='transactionIdentifier' data-ref="487transactionIdentifier" data-ref-filename="487transactionIdentifier">transactionIdentifier</a>);</td></tr>
<tr><th id="476">476</th><td>    <b>if</b> (<a class="local col8 ref" href="#488transaction" title='transaction' data-ref="488transaction" data-ref-filename="488transaction">transaction</a>)</td></tr>
<tr><th id="477">477</th><td>        <a class="local col8 ref" href="#488transaction" title='transaction' data-ref="488transaction" data-ref-filename="488transaction">transaction</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseTransaction.h.html#_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction20abortWithoutCallbackEv" title='WebCore::IDBServer::UniqueIDBDatabaseTransaction::abortWithoutCallback' data-ref="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction20abortWithoutCallbackEv" data-ref-filename="_ZN7WebCore9IDBServer28UniqueIDBDatabaseTransaction20abortWithoutCallbackEv">abortWithoutCallback</a>();</td></tr>
<tr><th id="478">478</th><td></td></tr>
<tr><th id="479">479</th><td>    <em>auto</em> <dfn class="local col9 decl" id="489databaseConnection" title='databaseConnection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="489databaseConnection" data-ref-filename="489databaseConnection">databaseConnection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col6 ref" href="#486databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="486databaseConnectionIdentifier" data-ref-filename="486databaseConnectionIdentifier">databaseConnectionIdentifier</a>);</td></tr>
<tr><th id="480">480</th><td>    <b>if</b> (!<a class="local col9 ref" href="#489databaseConnection" title='databaseConnection' data-ref="489databaseConnection" data-ref-filename="489databaseConnection">databaseConnection</a>)</td></tr>
<tr><th id="481">481</th><td>        <b>return</b>;</td></tr>
<tr><th id="482">482</th><td></td></tr>
<tr><th id="483">483</th><td>    <a class="local col9 ref" href="#489databaseConnection" title='databaseConnection' data-ref="489databaseConnection" data-ref-filename="489databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::connectionClosedFromClient' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection26connectionClosedFromClientEv">connectionClosedFromClient</a>();</td></tr>
<tr><th id="484">484</th><td>}</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer25didFireVersionChangeEventEyRKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE" title='WebCore::IDBServer::IDBServer::didFireVersionChangeEvent' data-ref="_ZN7WebCore9IDBServer9IDBServer25didFireVersionChangeEventEyRKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer25didFireVersionChangeEventEyRKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE">didFireVersionChangeEvent</dfn>(<span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col0 decl" id="490databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-type='uint64_t' data-ref="490databaseConnectionIdentifier" data-ref-filename="490databaseConnectionIdentifier">databaseConnectionIdentifier</dfn>, <em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col1 decl" id="491requestIdentifier" title='requestIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="491requestIdentifier" data-ref-filename="491requestIdentifier">requestIdentifier</dfn>, <span class="namespace">IndexedDB::</span><a class="type" href="../IndexedDB.h.html#WebCore::IndexedDB::ConnectionClosedOnBehalfOfServer" title='WebCore::IndexedDB::ConnectionClosedOnBehalfOfServer' data-ref="WebCore::IndexedDB::ConnectionClosedOnBehalfOfServer" data-ref-filename="WebCore..IndexedDB..ConnectionClosedOnBehalfOfServer">ConnectionClosedOnBehalfOfServer</a> <dfn class="local col2 decl" id="492connectionClosed" title='connectionClosed' data-type='IndexedDB::ConnectionClosedOnBehalfOfServer' data-ref="492connectionClosed" data-ref-filename="492connectionClosed">connectionClosed</dfn>)</td></tr>
<tr><th id="487">487</th><td>{</td></tr>
<tr><th id="488">488</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::didFireVersionChangeEvent&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::didFireVersionChangeEvent"</q>);</td></tr>
<tr><th id="489">489</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 489, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(489, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2791); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="490">490</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 490, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(490, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2793); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="491">491</th><td></td></tr>
<tr><th id="492">492</th><td>    <b>if</b> (<em>auto</em> <dfn class="local col3 decl" id="493databaseConnection" title='databaseConnection' data-type='WebCore::IDBServer::UniqueIDBDatabaseConnection *' data-ref="493databaseConnection" data-ref-filename="493databaseConnection"><a class="local col3 ref" href="#493databaseConnection" title='databaseConnection' data-ref="493databaseConnection" data-ref-filename="493databaseConnection">databaseConnection</a></dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseConnections" title='WebCore::IDBServer::IDBServer::m_databaseConnections' data-ref="WebCore::IDBServer::IDBServer::m_databaseConnections" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseConnections">m_databaseConnections</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col0 ref" href="#490databaseConnectionIdentifier" title='databaseConnectionIdentifier' data-ref="490databaseConnectionIdentifier" data-ref-filename="490databaseConnectionIdentifier">databaseConnectionIdentifier</a>))</td></tr>
<tr><th id="493">493</th><td>        <a class="local col3 ref" href="#493databaseConnection" title='databaseConnection' data-ref="493databaseConnection" data-ref-filename="493databaseConnection">databaseConnection</a>-&gt;<a class="ref fn" href="UniqueIDBDatabaseConnection.h.html#_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection25didFireVersionChangeEventERKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE" title='WebCore::IDBServer::UniqueIDBDatabaseConnection::didFireVersionChangeEvent' data-ref="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection25didFireVersionChangeEventERKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE" data-ref-filename="_ZN7WebCore9IDBServer27UniqueIDBDatabaseConnection25didFireVersionChangeEventERKNS_21IDBResourceIdentifierENS_9IndexedDB32ConnectionClosedOnBehalfOfServerE">didFireVersionChangeEvent</a>(<a class="local col1 ref" href="#491requestIdentifier" title='requestIdentifier' data-ref="491requestIdentifier" data-ref-filename="491requestIdentifier">requestIdentifier</a>, <a class="local col2 ref" href="#492connectionClosed" title='connectionClosed' data-ref="492connectionClosed" data-ref-filename="492connectionClosed">connectionClosed</a>);</td></tr>
<tr><th id="494">494</th><td>}</td></tr>
<tr><th id="495">495</th><td></td></tr>
<tr><th id="496">496</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer22openDBRequestCancelledERKNS_14IDBRequestDataE" title='WebCore::IDBServer::IDBServer::openDBRequestCancelled' data-ref="_ZN7WebCore9IDBServer9IDBServer22openDBRequestCancelledERKNS_14IDBRequestDataE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer22openDBRequestCancelledERKNS_14IDBRequestDataE">openDBRequestCancelled</dfn>(<em>const</em> <a class="type" href="../shared/IDBRequestData.h.html#WebCore::IDBRequestData" title='WebCore::IDBRequestData' data-ref="WebCore::IDBRequestData" data-ref-filename="WebCore..IDBRequestData">IDBRequestData</a>&amp; <dfn class="local col4 decl" id="494requestData" title='requestData' data-type='const WebCore::IDBRequestData &amp;' data-ref="494requestData" data-ref-filename="494requestData">requestData</dfn>)</td></tr>
<tr><th id="497">497</th><td>{</td></tr>
<tr><th id="498">498</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;IDBServer::openDBRequestCancelled&quot;)" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"IDBServer::openDBRequestCancelled"</q>);</td></tr>
<tr><th id="499">499</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 499, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(499, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2795); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="500">500</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 500, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(500, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2797); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="501">501</th><td></td></tr>
<tr><th id="502">502</th><td>    <em>auto</em>* <dfn class="local col5 decl" id="495uniqueIDBDatabase" title='uniqueIDBDatabase' data-type='WebCore::IDBServer::UniqueIDBDatabase *' data-ref="495uniqueIDBDatabase" data-ref-filename="495uniqueIDBDatabase">uniqueIDBDatabase</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col4 ref" href="#494requestData" title='requestData' data-ref="494requestData" data-ref-filename="494requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" title='WebCore::IDBRequestData::databaseIdentifier' data-ref="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="503">503</th><td>    <b>if</b> (!<a class="local col5 ref" href="#495uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="495uniqueIDBDatabase" data-ref-filename="495uniqueIDBDatabase">uniqueIDBDatabase</a>)</td></tr>
<tr><th id="504">504</th><td>        <b>return</b>;</td></tr>
<tr><th id="505">505</th><td></td></tr>
<tr><th id="506">506</th><td>    <a class="local col5 ref" href="#495uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="495uniqueIDBDatabase" data-ref-filename="495uniqueIDBDatabase">uniqueIDBDatabase</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDBRequestCancelledERKNS_21IDBResourceIdentifierE" title='WebCore::IDBServer::UniqueIDBDatabase::openDBRequestCancelled' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDBRequestCancelledERKNS_21IDBResourceIdentifierE" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase22openDBRequestCancelledERKNS_21IDBResourceIdentifierE">openDBRequestCancelled</a>(<a class="local col4 ref" href="#494requestData" title='requestData' data-ref="494requestData" data-ref-filename="494requestData">requestData</a>.<a class="ref fn" href="../shared/IDBRequestData.h.html#_ZNK7WebCore14IDBRequestData17requestIdentifierEv" title='WebCore::IDBRequestData::requestIdentifier' data-ref="_ZNK7WebCore14IDBRequestData17requestIdentifierEv" data-ref-filename="_ZNK7WebCore14IDBRequestData17requestIdentifierEv">requestIdentifier</a>());</td></tr>
<tr><th id="507">507</th><td>    <b>if</b> (<a class="local col5 ref" href="#495uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="495uniqueIDBDatabase" data-ref-filename="495uniqueIDBDatabase">uniqueIDBDatabase</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::tryClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase8tryCloseEv">tryClose</a>())</td></tr>
<tr><th id="508">508</th><td>        <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col5 ref" href="#495uniqueIDBDatabase" title='uniqueIDBDatabase' data-ref="495uniqueIDBDatabase" data-ref-filename="495uniqueIDBDatabase">uniqueIDBDatabase</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="509">509</th><td>}</td></tr>
<tr><th id="510">510</th><td></td></tr>
<tr><th id="511">511</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer30getAllDatabaseNamesAndVersionsEN3WTF16ObjectIdentifierINS_21ProcessIdentifierTypeEEERKNS_21IDBResourceIdentifierERKNS_12ClientOriginE" title='WebCore::IDBServer::IDBServer::getAllDatabaseNamesAndVersions' data-ref="_ZN7WebCore9IDBServer9IDBServer30getAllDatabaseNamesAndVersionsEN3WTF16ObjectIdentifierINS_21ProcessIdentifierTypeEEERKNS_21IDBResourceIdentifierERKNS_12ClientOriginE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer30getAllDatabaseNamesAndVersionsEN3WTF16ObjectIdentifierINS_21ProcessIdentifierTypeEEERKNS_21IDBResourceIdentifierERKNS_12ClientOriginE">getAllDatabaseNamesAndVersions</dfn>(<a class="typedef" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBConnectionIdentifier" title='WebCore::IDBConnectionIdentifier' data-type='WebCore::ProcessIdentifier' data-ref="WebCore::IDBConnectionIdentifier" data-ref-filename="WebCore..IDBConnectionIdentifier">IDBConnectionIdentifier</a> <dfn class="local col6 decl" id="496serverConnectionIdentifier" title='serverConnectionIdentifier' data-type='WebCore::IDBConnectionIdentifier' data-ref="496serverConnectionIdentifier" data-ref-filename="496serverConnectionIdentifier">serverConnectionIdentifier</dfn>, <em>const</em> <a class="type" href="../shared/IDBResourceIdentifier.h.html#WebCore::IDBResourceIdentifier" title='WebCore::IDBResourceIdentifier' data-ref="WebCore::IDBResourceIdentifier" data-ref-filename="WebCore..IDBResourceIdentifier">IDBResourceIdentifier</a>&amp; <dfn class="local col7 decl" id="497requestIdentifier" title='requestIdentifier' data-type='const WebCore::IDBResourceIdentifier &amp;' data-ref="497requestIdentifier" data-ref-filename="497requestIdentifier">requestIdentifier</dfn>, <em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp; <dfn class="local col8 decl" id="498origin" title='origin' data-type='const WebCore::ClientOrigin &amp;' data-ref="498origin" data-ref-filename="498origin">origin</dfn>)</td></tr>
<tr><th id="512">512</th><td>{</td></tr>
<tr><th id="513">513</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 513, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(513, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2799); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="514">514</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 514, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(514, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2801); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="515">515</th><td></td></tr>
<tr><th id="516">516</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col9 decl" id="499oldDirectory" title='oldDirectory' data-type='WTF::String' data-ref="499oldDirectory" data-ref-filename="499oldDirectory">oldDirectory</dfn> = <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>::<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" title='WebCore::IDBDatabaseIdentifier::databaseDirectoryRelativeToRoot' data-ref="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" data-ref-filename="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_">databaseDirectoryRelativeToRoot</a>(<a class="local col8 ref" href="#498origin" title='origin' data-ref="498origin" data-ref-filename="498origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::topOrigin" title='WebCore::ClientOrigin::topOrigin' data-ref="WebCore::ClientOrigin::topOrigin" data-ref-filename="WebCore..ClientOrigin..topOrigin">topOrigin</a>, <a class="local col8 ref" href="#498origin" title='origin' data-ref="498origin" data-ref-filename="498origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::clientOrigin" title='WebCore::ClientOrigin::clientOrigin' data-ref="WebCore::ClientOrigin::clientOrigin" data-ref-filename="WebCore..ClientOrigin..clientOrigin">clientOrigin</a>, <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v0"</q>);</td></tr>
<tr><th id="517">517</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&gt; <dfn class="local col0 decl" id="500fileNames" title='fileNames' data-type='Vector&lt;WTF::String&gt;' data-ref="500fileNames" data-ref-filename="500fileNames">fileNames</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col9 ref" href="#499oldDirectory" title='oldDirectory' data-ref="499oldDirectory" data-ref-filename="499oldDirectory">oldDirectory</a>);</td></tr>
<tr><th id="518">518</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../shared/IDBDatabaseNameAndVersion.h.html#WebCore::IDBDatabaseNameAndVersion" title='WebCore::IDBDatabaseNameAndVersion' data-ref="WebCore::IDBDatabaseNameAndVersion" data-ref-filename="WebCore..IDBDatabaseNameAndVersion">IDBDatabaseNameAndVersion</a>&gt; <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZN3WTF6VectorC1Ev" title='WTF::Vector::Vector&lt;type-parameter-0-0, , type-parameter-0-2, , Malloc&gt;' data-ref="_ZN3WTF6VectorC1Ev" data-ref-filename="_ZN3WTF6VectorC1Ev"></a><dfn class="local col1 decl" id="501databases" title='databases' data-type='Vector&lt;WebCore::IDBDatabaseNameAndVersion&gt;' data-ref="501databases" data-ref-filename="501databases">databases</dfn>;</td></tr>
<tr><th id="519">519</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col2 decl" id="502fileName" title='fileName' data-type='WTF::String &amp;' data-ref="502fileName" data-ref-filename="502fileName">fileName</dfn> : <a class="local col0 ref" href="#500fileNames" title='fileNames' data-ref="500fileNames" data-ref-filename="500fileNames">fileNames</a>) {</td></tr>
<tr><th id="520">520</th><td>        <em>auto</em> <dfn class="local col3 decl" id="503databaseTuple" title='databaseTuple' data-type='std::__1::optional&lt;WebCore::IDBDatabaseNameAndVersion&gt;' data-ref="503databaseTuple" data-ref-filename="503databaseTuple">databaseTuple</dfn> = <a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::databaseNameAndVersionFromFile' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE">databaseNameAndVersionFromFile</a>(<a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::fullDatabasePathForDirectory' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE">fullDatabasePathForDirectory</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col9 ref" href="#499oldDirectory" title='oldDirectory' data-ref="499oldDirectory" data-ref-filename="499oldDirectory">oldDirectory</a>, <a class="local col2 ref" href="#502fileName" title='fileName' data-ref="502fileName" data-ref-filename="502fileName">fileName</a>)));</td></tr>
<tr><th id="521">521</th><td>        <b>if</b> (<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col3 ref" href="#503databaseTuple" title='databaseTuple' data-ref="503databaseTuple" data-ref-filename="503databaseTuple">databaseTuple</a>)</td></tr>
<tr><th id="522">522</th><td>            <a class="local col1 ref" href="#501databases" title='databases' data-ref="501databases" data-ref-filename="501databases">databases</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZN3WTF6Vector6appendEOT_" title='WTF::Vector::append' data-ref="_ZN3WTF6Vector6appendEOT_" data-ref-filename="_ZN3WTF6Vector6appendEOT_">append</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(*databaseTuple)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span></span><a class="local col3 ref" href="#503databaseTuple" title='databaseTuple' data-ref="503databaseTuple" data-ref-filename="503databaseTuple">databaseTuple</a>));</td></tr>
<tr><th id="523">523</th><td>    }</td></tr>
<tr><th id="524">524</th><td></td></tr>
<tr><th id="525">525</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col4 decl" id="504directory" title='directory' data-type='WTF::String' data-ref="504directory" data-ref-filename="504directory">directory</dfn> = <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>::<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" title='WebCore::IDBDatabaseIdentifier::databaseDirectoryRelativeToRoot' data-ref="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" data-ref-filename="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_">databaseDirectoryRelativeToRoot</a>(<a class="local col8 ref" href="#498origin" title='origin' data-ref="498origin" data-ref-filename="498origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::topOrigin" title='WebCore::ClientOrigin::topOrigin' data-ref="WebCore::ClientOrigin::topOrigin" data-ref-filename="WebCore..ClientOrigin..topOrigin">topOrigin</a>, <a class="local col8 ref" href="#498origin" title='origin' data-ref="498origin" data-ref-filename="498origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::clientOrigin" title='WebCore::ClientOrigin::clientOrigin' data-ref="WebCore::ClientOrigin::clientOrigin" data-ref-filename="WebCore..ClientOrigin..clientOrigin">clientOrigin</a>, <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>);</td></tr>
<tr><th id="526">526</th><td>    <a class="local col0 ref" href="#500fileNames" title='fileNames' data-ref="500fileNames" data-ref-filename="500fileNames">fileNames</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZN3WTF6VectoraSEONS_6VectorIT_XT0_ET1_XT2_ET3_EE" title='WTF::Vector::operator=' data-ref="_ZN3WTF6VectoraSEONS_6VectorIT_XT0_ET1_XT2_ET3_EE" data-ref-filename="_ZN3WTF6VectoraSEONS_6VectorIT_XT0_ET1_XT2_ET3_EE">=</a> <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col4 ref" href="#504directory" title='directory' data-ref="504directory" data-ref-filename="504directory">directory</a>);</td></tr>
<tr><th id="527">527</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col5 decl" id="505fileName" title='fileName' data-type='WTF::String &amp;' data-ref="505fileName" data-ref-filename="505fileName">fileName</dfn> : <a class="local col0 ref" href="#500fileNames" title='fileNames' data-ref="500fileNames" data-ref-filename="500fileNames">fileNames</a>) {</td></tr>
<tr><th id="528">528</th><td>        <em>auto</em> <dfn class="local col6 decl" id="506databaseTuple" title='databaseTuple' data-type='std::__1::optional&lt;WebCore::IDBDatabaseNameAndVersion&gt;' data-ref="506databaseTuple" data-ref-filename="506databaseTuple">databaseTuple</dfn> = <a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::databaseNameAndVersionFromFile' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore30databaseNameAndVersionFromFileERKN3WTF6StringE">databaseNameAndVersionFromFile</a>(<a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::fullDatabasePathForDirectory' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore28fullDatabasePathForDirectoryERKN3WTF6StringE">fullDatabasePathForDirectory</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col4 ref" href="#504directory" title='directory' data-ref="504directory" data-ref-filename="504directory">directory</a>, <a class="local col5 ref" href="#505fileName" title='fileName' data-ref="505fileName" data-ref-filename="505fileName">fileName</a>)));</td></tr>
<tr><th id="529">529</th><td>        <b>if</b> (<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col6 ref" href="#506databaseTuple" title='databaseTuple' data-ref="506databaseTuple" data-ref-filename="506databaseTuple">databaseTuple</a>)</td></tr>
<tr><th id="530">530</th><td>            <a class="local col1 ref" href="#501databases" title='databases' data-ref="501databases" data-ref-filename="501databases">databases</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZN3WTF6Vector6appendEOT_" title='WTF::Vector::append' data-ref="_ZN3WTF6Vector6appendEOT_" data-ref-filename="_ZN3WTF6Vector6appendEOT_">append</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(*databaseTuple)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span></span><a class="local col6 ref" href="#506databaseTuple" title='databaseTuple' data-ref="506databaseTuple" data-ref-filename="506databaseTuple">databaseTuple</a>));</td></tr>
<tr><th id="531">531</th><td>    }</td></tr>
<tr><th id="532">532</th><td></td></tr>
<tr><th id="533">533</th><td>    <em>auto</em> <dfn class="local col7 decl" id="507connection" title='connection' data-type='WebCore::IDBServer::IDBConnectionToClient *' data-ref="507connection" data-ref-filename="507connection">connection</dfn> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_connectionMap" title='WebCore::IDBServer::IDBServer::m_connectionMap' data-ref="WebCore::IDBServer::IDBServer::m_connectionMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_connectionMap">m_connectionMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" title='WTF::HashMap::get' data-ref="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE" data-ref-filename="_ZNK3WTF7HashMap3getERKNT2_9TraitTypeE">get</a>(<a class="local col6 ref" href="#496serverConnectionIdentifier" title='serverConnectionIdentifier' data-ref="496serverConnectionIdentifier" data-ref-filename="496serverConnectionIdentifier">serverConnectionIdentifier</a>);</td></tr>
<tr><th id="534">534</th><td>    <b>if</b> (!<a class="local col7 ref" href="#507connection" title='connection' data-ref="507connection" data-ref-filename="507connection">connection</a>)</td></tr>
<tr><th id="535">535</th><td>        <b>return</b>;</td></tr>
<tr><th id="536">536</th><td></td></tr>
<tr><th id="537">537</th><td>    <a class="local col7 ref" href="#507connection" title='connection' data-ref="507connection" data-ref-filename="507connection">connection</a>-&gt;<a class="ref fn" href="IDBConnectionToClient.cpp.html#_ZN7WebCore9IDBServer21IDBConnectionToClient33didGetAllDatabaseNamesAndVersionsERKNS_21IDBResourceIdentifierEON3WTF6VectorINS_25IDBDatabaseNameAndVers14565182" title='WebCore::IDBServer::IDBConnectionToClient::didGetAllDatabaseNamesAndVersions' data-ref="_ZN7WebCore9IDBServer21IDBConnectionToClient33didGetAllDatabaseNamesAndVersionsERKNS_21IDBResourceIdentifierEON3WTF6VectorINS_25IDBDatabaseNameAndVers14565182" data-ref-filename="_ZN7WebCore9IDBServer21IDBConnectionToClient33didGetAllDatabaseNamesAndVersionsERKNS_21IDBResourceIdentifierEON3WTF6VectorINS_25IDBDatabaseNameAndVers14565182">didGetAllDatabaseNamesAndVersions</a>(<a class="local col7 ref" href="#497requestIdentifier" title='requestIdentifier' data-ref="497requestIdentifier" data-ref-filename="497requestIdentifier">requestIdentifier</a>, <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(databases)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col1 ref" href="#501databases" title='databases' data-ref="501databases" data-ref-filename="501databases">databases</a></span>));</td></tr>
<tr><th id="538">538</th><td>}</td></tr>
<tr><th id="539">539</th><td></td></tr>
<tr><th id="540">540</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" title='WebCore::IDBServer::collectOriginsForVersion' data-ref="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" data-ref-filename="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011">collectOriginsForVersion</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col8 decl" id="508versionPath" title='versionPath' data-type='const WTF::String &amp;' data-ref="508versionPath" data-ref-filename="508versionPath">versionPath</dfn>, <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::HashSet" title='WTF::HashSet' data-ref="WTF::HashSet" data-ref-filename="WTF..HashSet">HashSet</a>&lt;<span class="namespace">WebCore::</span><a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt;&amp; <dfn class="local col9 decl" id="509securityOrigins" title='securityOrigins' data-type='HashSet&lt;WebCore::SecurityOriginData&gt; &amp;' data-ref="509securityOrigins" data-ref-filename="509securityOrigins">securityOrigins</dfn>)</td></tr>
<tr><th id="541">541</th><td>{</td></tr>
<tr><th id="542">542</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col0 decl" id="510databaseIdentifier" title='databaseIdentifier' data-type='WTF::String &amp;' data-ref="510databaseIdentifier" data-ref-filename="510databaseIdentifier">databaseIdentifier</dfn> : <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col8 ref" href="#508versionPath" title='versionPath' data-ref="508versionPath" data-ref-filename="508versionPath">versionPath</a>)) {</td></tr>
<tr><th id="543">543</th><td>        <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col1 decl" id="511securityOrigin" title='securityOrigin' data-type='std::__1::optional&lt;WebCore::SecurityOriginData&gt;' data-ref="511securityOrigin" data-ref-filename="511securityOrigin"><a class="local col1 ref" href="#511securityOrigin" title='securityOrigin' data-ref="511securityOrigin" data-ref-filename="511securityOrigin">securityOrigin</a></dfn> = <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>::<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" title='WebCore::SecurityOriginData::fromDatabaseIdentifier' data-ref="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" data-ref-filename="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE">fromDatabaseIdentifier</a>(<a class="local col0 ref" href="#510databaseIdentifier" title='databaseIdentifier' data-ref="510databaseIdentifier" data-ref-filename="510databaseIdentifier">databaseIdentifier</a>)) {</td></tr>
<tr><th id="544">544</th><td>            <a class="local col9 ref" href="#509securityOrigins" title='securityOrigins' data-ref="509securityOrigins" data-ref-filename="509securityOrigins">securityOrigins</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSet3addEONT1_9TraitTypeE" title='WTF::HashSet::add' data-ref="_ZN3WTF7HashSet3addEONT1_9TraitTypeE" data-ref-filename="_ZN3WTF7HashSet3addEONT1_9TraitTypeE">add</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(*securityOrigin)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span></span><a class="local col1 ref" href="#511securityOrigin" title='securityOrigin' data-ref="511securityOrigin" data-ref-filename="511securityOrigin">securityOrigin</a>));</td></tr>
<tr><th id="545">545</th><td>        </td></tr>
<tr><th id="546">546</th><td>            <b>for</b> (<em>auto</em>&amp; <dfn class="local col2 decl" id="512databaseIdentifier" title='databaseIdentifier' data-type='WTF::String &amp;' data-ref="512databaseIdentifier" data-ref-filename="512databaseIdentifier">databaseIdentifier</dfn> : <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col8 ref" href="#508versionPath" title='versionPath' data-ref="508versionPath" data-ref-filename="508versionPath">versionPath</a>, <a class="local col0 ref" href="#510databaseIdentifier" title='databaseIdentifier' data-ref="510databaseIdentifier" data-ref-filename="510databaseIdentifier">databaseIdentifier</a>))) {</td></tr>
<tr><th id="547">547</th><td>                <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col3 decl" id="513securityOrigin" title='securityOrigin' data-type='std::__1::optional&lt;WebCore::SecurityOriginData&gt;' data-ref="513securityOrigin" data-ref-filename="513securityOrigin"><a class="local col3 ref" href="#513securityOrigin" title='securityOrigin' data-ref="513securityOrigin" data-ref-filename="513securityOrigin">securityOrigin</a></dfn> = <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>::<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" title='WebCore::SecurityOriginData::fromDatabaseIdentifier' data-ref="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" data-ref-filename="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE">fromDatabaseIdentifier</a>(<a class="local col2 ref" href="#512databaseIdentifier" title='databaseIdentifier' data-ref="512databaseIdentifier" data-ref-filename="512databaseIdentifier">databaseIdentifier</a>))</td></tr>
<tr><th id="548">548</th><td>                    <a class="local col9 ref" href="#509securityOrigins" title='securityOrigins' data-ref="509securityOrigins" data-ref-filename="509securityOrigins">securityOrigins</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSet3addEONT1_9TraitTypeE" title='WTF::HashSet::add' data-ref="_ZN3WTF7HashSet3addEONT1_9TraitTypeE" data-ref-filename="_ZN3WTF7HashSet3addEONT1_9TraitTypeE">add</a>(<a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(*securityOrigin)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><span class='ref fn' title='std::__1::optional::operator*' data-ref="_ZNRSt3__18optionaldeEv" data-ref-filename="_ZNRSt3__18optionaldeEv">*</span></span><a class="local col3 ref" href="#513securityOrigin" title='securityOrigin' data-ref="513securityOrigin" data-ref-filename="513securityOrigin">securityOrigin</a>));</td></tr>
<tr><th id="549">549</th><td>            }</td></tr>
<tr><th id="550">550</th><td>        }</td></tr>
<tr><th id="551">551</th><td>    }</td></tr>
<tr><th id="552">552</th><td>}</td></tr>
<tr><th id="553">553</th><td></td></tr>
<tr><th id="554">554</th><td><a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::HashSet" title='WTF::HashSet' data-ref="WTF::HashSet" data-ref-filename="WTF..HashSet">HashSet</a>&lt;<a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt; <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZNK7WebCore9IDBServer9IDBServer10getOriginsEv" title='WebCore::IDBServer::IDBServer::getOrigins' data-ref="_ZNK7WebCore9IDBServer9IDBServer10getOriginsEv" data-ref-filename="_ZNK7WebCore9IDBServer9IDBServer10getOriginsEv">getOrigins</dfn>() <em>const</em></td></tr>
<tr><th id="555">555</th><td>{</td></tr>
<tr><th id="556">556</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 556, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(556, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2803); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="557">557</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 557, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(557, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2805); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="558">558</th><td></td></tr>
<tr><th id="559">559</th><td>    <b>if</b> (<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>())</td></tr>
<tr><th id="560">560</th><td>        <b>return</b> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSetC1Ev" title='WTF::HashSet::HashSet&lt;ValueArg, type-parameter-0-1, type-parameter-0-2, type-parameter-0-3&gt;' data-ref="_ZN3WTF7HashSetC1Ev" data-ref-filename="_ZN3WTF7HashSetC1Ev">{</a> };</td></tr>
<tr><th id="561">561</th><td></td></tr>
<tr><th id="562">562</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::HashSet" title='WTF::HashSet' data-ref="WTF::HashSet" data-ref-filename="WTF..HashSet">HashSet</a>&lt;<span class="namespace">WebCore::</span><a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt; <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSetC1Ev" title='WTF::HashSet::HashSet&lt;ValueArg, type-parameter-0-1, type-parameter-0-2, type-parameter-0-3&gt;' data-ref="_ZN3WTF7HashSetC1Ev" data-ref-filename="_ZN3WTF7HashSetC1Ev"></a><dfn class="local col4 decl" id="514securityOrigins" title='securityOrigins' data-type='HashSet&lt;WebCore::SecurityOriginData&gt;' data-ref="514securityOrigins" data-ref-filename="514securityOrigins">securityOrigins</dfn>;</td></tr>
<tr><th id="563">563</th><td>    <a class="ref fn" href="#_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" title='WebCore::IDBServer::collectOriginsForVersion' data-ref="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" data-ref-filename="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011">collectOriginsForVersion</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v0"</q>), <span class='refarg'><a class="local col4 ref" href="#514securityOrigins" title='securityOrigins' data-ref="514securityOrigins" data-ref-filename="514securityOrigins">securityOrigins</a></span>);</td></tr>
<tr><th id="564">564</th><td>    <a class="ref fn" href="#_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" title='WebCore::IDBServer::collectOriginsForVersion' data-ref="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011" data-ref-filename="_ZN7WebCore9IDBServerL24collectOriginsForVersionERKN3WTF6StringERNS1_7HashSetINS_18SecurityOriginDataENS1_11DefaultHashIS6_EENS1_10HashTraitsIS6_EENS13915011">collectOriginsForVersion</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>), <span class='refarg'><a class="local col4 ref" href="#514securityOrigins" title='securityOrigins' data-ref="514securityOrigins" data-ref-filename="514securityOrigins">securityOrigins</a></span>);</td></tr>
<tr><th id="565">565</th><td></td></tr>
<tr><th id="566">566</th><td>    <b>return</b> <a class="local col4 ref" href="#514securityOrigins" title='securityOrigins' data-ref="514securityOrigins" data-ref-filename="514securityOrigins">securityOrigins</a>;</td></tr>
<tr><th id="567">567</th><td>}</td></tr>
<tr><th id="568">568</th><td></td></tr>
<tr><th id="569">569</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer36closeAndDeleteDatabasesModifiedSinceEN3WTF8WallTimeE" title='WebCore::IDBServer::IDBServer::closeAndDeleteDatabasesModifiedSince' data-ref="_ZN7WebCore9IDBServer9IDBServer36closeAndDeleteDatabasesModifiedSinceEN3WTF8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer36closeAndDeleteDatabasesModifiedSinceEN3WTF8WallTimeE">closeAndDeleteDatabasesModifiedSince</dfn>(<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a> <dfn class="local col5 decl" id="515modificationTime" title='modificationTime' data-type='WTF::WallTime' data-ref="515modificationTime" data-ref-filename="515modificationTime">modificationTime</dfn>)</td></tr>
<tr><th id="570">570</th><td>{</td></tr>
<tr><th id="571">571</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 571, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(571, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2807); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="572">572</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 572, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(572, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2809); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="573">573</th><td></td></tr>
<tr><th id="574">574</th><td>    <i>// If the modification time is in the future, don't both doing anything.</i></td></tr>
<tr><th id="575">575</th><td>    <b>if</b> (<a class="local col5 ref" href="#515modificationTime" title='modificationTime' data-ref="515modificationTime" data-ref-filename="515modificationTime">modificationTime</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimegtES0_" title='WTF::WallTime::operator&gt;' data-ref="_ZNK3WTF8WallTimegtES0_" data-ref-filename="_ZNK3WTF8WallTimegtES0_">&gt;</a> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a>::<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZN3WTF8WallTime3nowEv" title='WTF::WallTime::now' data-ref="_ZN3WTF8WallTime3nowEv" data-ref-filename="_ZN3WTF8WallTime3nowEv">now</a>())</td></tr>
<tr><th id="576">576</th><td>        <b>return</b>;</td></tr>
<tr><th id="577">577</th><td></td></tr>
<tr><th id="578">578</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::HashSet" title='WTF::HashSet' data-ref="WTF::HashSet" data-ref-filename="WTF..HashSet">HashSet</a>&lt;<a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>*&gt; <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSetC1Ev" title='WTF::HashSet::HashSet&lt;ValueArg, type-parameter-0-1, type-parameter-0-2, type-parameter-0-3&gt;' data-ref="_ZN3WTF7HashSetC1Ev" data-ref-filename="_ZN3WTF7HashSetC1Ev"></a><dfn class="local col6 decl" id="516openDatabases" title='openDatabases' data-type='HashSet&lt;WebCore::IDBServer::UniqueIDBDatabase *&gt;' data-ref="516openDatabases" data-ref-filename="516openDatabases">openDatabases</dfn>;</td></tr>
<tr><th id="579">579</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col7 decl" id="517database" title='database' data-type='std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt; &amp;' data-ref="517database" data-ref-filename="517database">database</dfn> : <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6valuesEv" title='WTF::HashMap::values' data-ref="_ZN3WTF7HashMap6valuesEv" data-ref-filename="_ZN3WTF7HashMap6valuesEv">values</a>())</td></tr>
<tr><th id="580">580</th><td>        <a class="local col7 ref" href="#517database" title='database' data-ref="517database" data-ref-filename="517database">database</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::immediateClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv">immediateClose</a>();</td></tr>
<tr><th id="581">581</th><td></td></tr>
<tr><th id="582">582</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap5clearEv" title='WTF::HashMap::clear' data-ref="_ZN3WTF7HashMap5clearEv" data-ref-filename="_ZN3WTF7HashMap5clearEv">clear</a>();</td></tr>
<tr><th id="583">583</th><td></td></tr>
<tr><th id="584">584</th><td>    <b>if</b> (!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="585">585</th><td>        <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" title='WebCore::IDBServer::IDBServer::removeDatabasesModifiedSinceForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE">removeDatabasesModifiedSinceForVersion</a>(<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col5 ref" href="#515modificationTime" title='modificationTime' data-ref="515modificationTime" data-ref-filename="515modificationTime">modificationTime</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v0"</q>);</td></tr>
<tr><th id="586">586</th><td>        <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" title='WebCore::IDBServer::IDBServer::removeDatabasesModifiedSinceForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE">removeDatabasesModifiedSinceForVersion</a>(<a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col5 ref" href="#515modificationTime" title='modificationTime' data-ref="515modificationTime" data-ref-filename="515modificationTime">modificationTime</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>);</td></tr>
<tr><th id="587">587</th><td>    }</td></tr>
<tr><th id="588">588</th><td>}</td></tr>
<tr><th id="589">589</th><td></td></tr>
<tr><th id="590">590</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" title='WebCore::IDBServer::IDBServer::closeDatabasesForOrigins' data-ref="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001">closeDatabasesForOrigins</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt;&amp; <dfn class="local col8 decl" id="518targetOrigins" title='targetOrigins' data-type='const Vector&lt;WebCore::SecurityOriginData&gt; &amp;' data-ref="518targetOrigins" data-ref-filename="518targetOrigins">targetOrigins</dfn>, <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Function" title='WTF::Function' data-ref="WTF::Function" data-ref-filename="WTF..Function">Function</a>&lt;<em>bool</em>(<em>const</em> <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp;, <em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp;)&gt;&amp;&amp; <dfn class="local col9 decl" id="519filter" title='filter' data-type='Function&lt;bool (const WebCore::SecurityOriginData &amp;, const WebCore::ClientOrigin &amp;)&gt; &amp;&amp;' data-ref="519filter" data-ref-filename="519filter">filter</dfn>)</td></tr>
<tr><th id="591">591</th><td>{</td></tr>
<tr><th id="592">592</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 592, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(592, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2811); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="593">593</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 593, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(593, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2813); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="594">594</th><td></td></tr>
<tr><th id="595">595</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::HashSet" title='WTF::HashSet' data-ref="WTF::HashSet" data-ref-filename="WTF..HashSet">HashSet</a>&lt;<a class="type" href="UniqueIDBDatabase.h.html#WebCore::IDBServer::UniqueIDBDatabase" title='WebCore::IDBServer::UniqueIDBDatabase' data-ref="WebCore::IDBServer::UniqueIDBDatabase" data-ref-filename="WebCore..IDBServer..UniqueIDBDatabase">UniqueIDBDatabase</a>*&gt; <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSetC1Ev" title='WTF::HashSet::HashSet&lt;ValueArg, type-parameter-0-1, type-parameter-0-2, type-parameter-0-3&gt;' data-ref="_ZN3WTF7HashSetC1Ev" data-ref-filename="_ZN3WTF7HashSetC1Ev"></a><dfn class="local col0 decl" id="520openDatabases" title='openDatabases' data-type='HashSet&lt;WebCore::IDBServer::UniqueIDBDatabase *&gt;' data-ref="520openDatabases" data-ref-filename="520openDatabases">openDatabases</dfn>;</td></tr>
<tr><th id="596">596</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col1 decl" id="521database" title='database' data-type='std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt; &amp;' data-ref="521database" data-ref-filename="521database">database</dfn> : <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6valuesEv" title='WTF::HashMap::values' data-ref="_ZN3WTF7HashMap6valuesEv" data-ref-filename="_ZN3WTF7HashMap6valuesEv">values</a>()) {</td></tr>
<tr><th id="597">597</th><td>        <em>const</em> <em>auto</em>&amp; <dfn class="local col2 decl" id="522databaseOrigin" title='databaseOrigin' data-type='const WebCore::ClientOrigin &amp;' data-ref="522databaseOrigin" data-ref-filename="522databaseOrigin">databaseOrigin</dfn> = <a class="local col1 ref" href="#521database" title='database' data-ref="521database" data-ref-filename="521database">database</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>().<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZNK7WebCore21IDBDatabaseIdentifier6originEv" title='WebCore::IDBDatabaseIdentifier::origin' data-ref="_ZNK7WebCore21IDBDatabaseIdentifier6originEv" data-ref-filename="_ZNK7WebCore21IDBDatabaseIdentifier6originEv">origin</a>();</td></tr>
<tr><th id="598">598</th><td>        <em>bool</em> <dfn class="local col3 decl" id="523filtered" title='filtered' data-type='bool' data-ref="523filtered" data-ref-filename="523filtered">filtered</dfn> = <span class="namespace">WTF::</span><a class="tu ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Algorithms.h.html#_ZN3WTF5anyOfEOT_T0_" title='WTF::anyOf' data-use='c' data-ref="_ZN3WTF5anyOfEOT_T0_" data-ref-filename="_ZN3WTF5anyOfEOT_T0_">anyOf</a>(<a class="local col8 ref" href="#518targetOrigins" title='targetOrigins' data-ref="518targetOrigins" data-ref-filename="518targetOrigins">targetOrigins</a>, [&amp;<a class="local col2 ref" href="#522databaseOrigin" title='databaseOrigin' data-ref="522databaseOrigin" data-ref-filename="522databaseOrigin">databaseOrigin</a>, &amp;<a class="local col9 ref" href="#519filter" title='filter' data-ref="519filter" data-ref-filename="519filter">filter</a>](<em>auto</em>&amp; <dfn class="local col4 decl" id="524targetOrigin" title='targetOrigin' data-type='auto &amp;' data-ref="524targetOrigin" data-ref-filename="524targetOrigin">targetOrigin</dfn>) {</td></tr>
<tr><th id="599">599</th><td>            <b>return</b> <a class="local col9 ref" href="#519filter" title='filter' data-ref="519filter" data-ref-filename="519filter">filter</a>(<a class="local col4 ref" href="#524targetOrigin" title='targetOrigin' data-ref="524targetOrigin" data-ref-filename="524targetOrigin">targetOrigin</a>, <a class="local col2 ref" href="#522databaseOrigin" title='databaseOrigin' data-ref="522databaseOrigin" data-ref-filename="522databaseOrigin">databaseOrigin</a>);</td></tr>
<tr><th id="600">600</th><td>        });</td></tr>
<tr><th id="601">601</th><td>        <b>if</b> (<a class="local col3 ref" href="#523filtered" title='filtered' data-ref="523filtered" data-ref-filename="523filtered">filtered</a>)</td></tr>
<tr><th id="602">602</th><td>            <a class="local col0 ref" href="#520openDatabases" title='openDatabases' data-ref="520openDatabases" data-ref-filename="520openDatabases">openDatabases</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashSet.h.html#_ZN3WTF7HashSet3addEONT1_9TraitTypeE" title='WTF::HashSet::add' data-ref="_ZN3WTF7HashSet3addEONT1_9TraitTypeE" data-ref-filename="_ZN3WTF7HashSet3addEONT1_9TraitTypeE">add</a>(<a class="local col1 ref" href="#521database" title='database' data-ref="521database" data-ref-filename="521database">database</a>.<span class='ref fn' title='std::__1::unique_ptr::get' data-ref="_ZNKSt3__110unique_ptr3getEv" data-ref-filename="_ZNKSt3__110unique_ptr3getEv">get</span>());</td></tr>
<tr><th id="603">603</th><td>    }</td></tr>
<tr><th id="604">604</th><td></td></tr>
<tr><th id="605">605</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col5 decl" id="525database" title='database' data-type='WebCore::IDBServer::UniqueIDBDatabase *const &amp;' data-ref="525database" data-ref-filename="525database">database</dfn> : <a class="local col0 ref" href="#520openDatabases" title='openDatabases' data-ref="520openDatabases" data-ref-filename="520openDatabases">openDatabases</a>) {</td></tr>
<tr><th id="606">606</th><td>        <a class="local col5 ref" href="#525database" title='database' data-ref="525database" data-ref-filename="525database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" title='WebCore::IDBServer::UniqueIDBDatabase::immediateClose' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase14immediateCloseEv">immediateClose</a>();</td></tr>
<tr><th id="607">607</th><td>        <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" title='WTF::HashMap::remove' data-ref="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE" data-ref-filename="_ZN3WTF7HashMap6removeERKNT2_9TraitTypeE">remove</a>(<a class="local col5 ref" href="#525database" title='database' data-ref="525database" data-ref-filename="525database">database</a>-&gt;<a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>());</td></tr>
<tr><th id="608">608</th><td>    }</td></tr>
<tr><th id="609">609</th><td>}</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer33closeAndDeleteDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEE" title='WebCore::IDBServer::IDBServer::closeAndDeleteDatabasesForOrigins' data-ref="_ZN7WebCore9IDBServer9IDBServer33closeAndDeleteDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer33closeAndDeleteDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEE">closeAndDeleteDatabasesForOrigins</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt;&amp; <dfn class="local col6 decl" id="526origins" title='origins' data-type='const Vector&lt;WebCore::SecurityOriginData&gt; &amp;' data-ref="526origins" data-ref-filename="526origins">origins</dfn>)</td></tr>
<tr><th id="612">612</th><td>{</td></tr>
<tr><th id="613">613</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 613, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(613, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2815); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="614">614</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 614, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(614, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2817); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="615">615</th><td></td></tr>
<tr><th id="616">616</th><td>    <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" title='WebCore::IDBServer::IDBServer::closeDatabasesForOrigins' data-ref="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001">closeDatabasesForOrigins</a>(<a class="local col6 ref" href="#526origins" title='origins' data-ref="526origins" data-ref-filename="526origins">origins</a>, <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[](<em>const</em> <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col7 decl" id="527origin" title='origin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="527origin" data-ref-filename="527origin">origin</dfn>, <em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp; <dfn class="local col8 decl" id="528databaseOrigin" title='databaseOrigin' data-type='const WebCore::ClientOrigin &amp;' data-ref="528databaseOrigin" data-ref-filename="528databaseOrigin">databaseOrigin</dfn>) -&gt; <em>bool</em> {</td></tr>
<tr><th id="617">617</th><td>        <b>return</b> <a class="local col8 ref" href="#528databaseOrigin" title='databaseOrigin' data-ref="528databaseOrigin" data-ref-filename="528databaseOrigin">databaseOrigin</a>.<a class="ref fn" href="../../../page/ClientOrigin.h.html#_ZNK7WebCore12ClientOrigin9isRelatedERKNS_18SecurityOriginDataE" title='WebCore::ClientOrigin::isRelated' data-ref="_ZNK7WebCore12ClientOrigin9isRelatedERKNS_18SecurityOriginDataE" data-ref-filename="_ZNK7WebCore12ClientOrigin9isRelatedERKNS_18SecurityOriginDataE">isRelated</a>(<a class="local col7 ref" href="#527origin" title='origin' data-ref="527origin" data-ref-filename="527origin">origin</a>);</td></tr>
<tr><th id="618">618</th><td>    });</td></tr>
<tr><th id="619">619</th><td></td></tr>
<tr><th id="620">620</th><td>    <b>if</b> (!<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="621">621</th><td>        <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" title='WebCore::IDBServer::IDBServer::removeDatabasesWithOriginsForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881">removeDatabasesWithOriginsForVersion</a>(<a class="local col6 ref" href="#526origins" title='origins' data-ref="526origins" data-ref-filename="526origins">origins</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v0"</q>);</td></tr>
<tr><th id="622">622</th><td>        <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" title='WebCore::IDBServer::IDBServer::removeDatabasesWithOriginsForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881">removeDatabasesWithOriginsForVersion</a>(<a class="local col6 ref" href="#526origins" title='origins' data-ref="526origins" data-ref-filename="526origins">origins</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>);</td></tr>
<tr><th id="623">623</th><td>    }</td></tr>
<tr><th id="624">624</th><td>}</td></tr>
<tr><th id="625">625</th><td></td></tr>
<tr><th id="626">626</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForFullOriginPath' data-ref="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForFullOriginPath</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col9 decl" id="529originPath" title='originPath' data-type='const WTF::String &amp;' data-ref="529originPath" data-ref-filename="529originPath">originPath</dfn>, <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a> <dfn class="local col0 decl" id="530modifiedSince" title='modifiedSince' data-type='WTF::WallTime' data-ref="530modifiedSince" data-ref-filename="530modifiedSince">modifiedSince</dfn>)</td></tr>
<tr><th id="627">627</th><td>{</td></tr>
<tr><th id="628">628</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#489" title="WTFLog(&amp;LogIndexedDB, &quot;removeAllDatabasesForOriginPath with originPath %s&quot;, originPath.utf8().data())" data-ref="_M/LOG">LOG</a>(IndexedDB, <q>"removeAllDatabasesForOriginPath with originPath %s"</q>, <a class="local col9 ref" href="#529originPath" title='originPath' data-ref="529originPath" data-ref-filename="529originPath">originPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>().<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/CString.h.html#_ZNK3WTF7CString4dataEv" title='WTF::CString::data' data-ref="_ZNK3WTF7CString4dataEv" data-ref-filename="_ZNK3WTF7CString4dataEv">data</a>());</td></tr>
<tr><th id="629">629</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&gt; <dfn class="local col1 decl" id="531databaseNames" title='databaseNames' data-type='Vector&lt;WTF::String&gt;' data-ref="531databaseNames" data-ref-filename="531databaseNames">databaseNames</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col9 ref" href="#529originPath" title='originPath' data-ref="529originPath" data-ref-filename="529originPath">originPath</a>);</td></tr>
<tr><th id="630">630</th><td></td></tr>
<tr><th id="631">631</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col2 decl" id="532databaseName" title='databaseName' data-type='WTF::String &amp;' data-ref="532databaseName" data-ref-filename="532databaseName">databaseName</dfn> : <a class="local col1 ref" href="#531databaseNames" title='databaseNames' data-ref="531databaseNames" data-ref-filename="531databaseNames">databaseNames</a>) {</td></tr>
<tr><th id="632">632</th><td>        <em>auto</em> <dfn class="local col3 decl" id="533databasePath" title='databasePath' data-type='WTF::String' data-ref="533databasePath" data-ref-filename="533databasePath">databasePath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col9 ref" href="#529originPath" title='originPath' data-ref="529originPath" data-ref-filename="529originPath">originPath</a>, <a class="local col2 ref" href="#532databaseName" title='databaseName' data-ref="532databaseName" data-ref-filename="532databaseName">databaseName</a>);</td></tr>
<tr><th id="633">633</th><td>        <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col4 decl" id="534databaseFile" title='databaseFile' data-type='WTF::String' data-ref="534databaseFile" data-ref-filename="534databaseFile">databaseFile</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#533databasePath" title='databasePath' data-ref="533databasePath" data-ref-filename="533databasePath">databasePath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"IndexedDB.sqlite3"</q>);</td></tr>
<tr><th id="634">634</th><td>        <b>if</b> (<a class="local col0 ref" href="#530modifiedSince" title='modifiedSince' data-ref="530modifiedSince" data-ref-filename="530modifiedSince">modifiedSince</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimegtES0_" title='WTF::WallTime::operator&gt;' data-ref="_ZNK3WTF8WallTimegtES0_" data-ref-filename="_ZNK3WTF8WallTimegtES0_">&gt;</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimengEv" title='WTF::WallTime::operator-' data-ref="_ZNK3WTF8WallTimengEv" data-ref-filename="_ZNK3WTF8WallTimengEv">-</a><a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a>::<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZN3WTF8WallTime8infinityEv" title='WTF::WallTime::infinity' data-ref="_ZN3WTF8WallTime8infinityEv" data-ref-filename="_ZN3WTF8WallTime8infinityEv">infinity</a>() &amp;&amp; <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" title='WTF::FileSystemImpl::fileExists' data-ref="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE">fileExists</a>(<a class="local col4 ref" href="#534databaseFile" title='databaseFile' data-ref="534databaseFile" data-ref-filename="534databaseFile">databaseFile</a>)) {</td></tr>
<tr><th id="635">635</th><td>            <em>auto</em> <dfn class="local col5 decl" id="535modificationTime" title='modificationTime' data-type='std::__1::optional&lt;WTF::WallTime&gt;' data-ref="535modificationTime" data-ref-filename="535modificationTime">modificationTime</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl20fileModificationTimeERKNS_6StringE" title='WTF::FileSystemImpl::fileModificationTime' data-ref="_ZN3WTF14FileSystemImpl20fileModificationTimeERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl20fileModificationTimeERKNS_6StringE">fileModificationTime</a>(<a class="local col4 ref" href="#534databaseFile" title='databaseFile' data-ref="534databaseFile" data-ref-filename="534databaseFile">databaseFile</a>);</td></tr>
<tr><th id="636">636</th><td>            <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="local col5 ref" href="#535modificationTime" title='modificationTime' data-ref="535modificationTime" data-ref-filename="535modificationTime">modificationTime</a>)</td></tr>
<tr><th id="637">637</th><td>                <b>continue</b>;</td></tr>
<tr><th id="638">638</th><td></td></tr>
<tr><th id="639">639</th><td>            <b>if</b> (<a class="local col5 ref" href="#535modificationTime" title='modificationTime' data-ref="535modificationTime" data-ref-filename="535modificationTime">modificationTime</a>.<span class='ref fn' title='std::__1::optional::value' data-ref="_ZNRSt3__18optional5valueEv" data-ref-filename="_ZNRSt3__18optional5valueEv">value</span>() <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimeltES0_" title='WTF::WallTime::operator&lt;' data-ref="_ZNK3WTF8WallTimeltES0_" data-ref-filename="_ZNK3WTF8WallTimeltES0_">&lt;</a> <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col0 ref" href="#530modifiedSince" title='modifiedSince' data-ref="530modifiedSince" data-ref-filename="530modifiedSince">modifiedSince</a>)</td></tr>
<tr><th id="640">640</th><td>                <b>continue</b>;</td></tr>
<tr><th id="641">641</th><td>        }</td></tr>
<tr><th id="642">642</th><td></td></tr>
<tr><th id="643">643</th><td>        <i>// Deleting this database means we need to delete all files that represent it.</i></td></tr>
<tr><th id="644">644</th><td><i>        // This includes:</i></td></tr>
<tr><th id="645">645</th><td><i>        //     - The directory itself, which is named after the database.</i></td></tr>
<tr><th id="646">646</th><td><i>        //     - IndexedDB.sqlite3 and related SQLite files.</i></td></tr>
<tr><th id="647">647</th><td><i>        //     - Blob files that we stored in the directory.</i></td></tr>
<tr><th id="648">648</th><td><i>        //</i></td></tr>
<tr><th id="649">649</th><td><i>        // To be conservative, we should *not* try to delete files that are unexpected;</i></td></tr>
<tr><th id="650">650</th><td><i>        // We should only delete files we think we put there.</i></td></tr>
<tr><th id="651">651</th><td>        <b>for</b> (<em>auto</em>&amp; <dfn class="local col6 decl" id="536fileName" title='fileName' data-type='WTF::String &amp;' data-ref="536fileName" data-ref-filename="536fileName">fileName</dfn> : <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col3 ref" href="#533databasePath" title='databasePath' data-ref="533databasePath" data-ref-filename="533databasePath">databasePath</a>)) {</td></tr>
<tr><th id="652">652</th><td>            <i>// IndexedDB blob files are named "N.blob" where N is a decimal integer,</i></td></tr>
<tr><th id="653">653</th><td><i>            // so those are the only blob files we should be trying to delete.</i></td></tr>
<tr><th id="654">654</th><td>            <em>auto</em> <dfn class="local col7 decl" id="537fileNameLength" title='fileNameLength' data-type='unsigned int' data-ref="537fileNameLength" data-ref-filename="537fileNameLength">fileNameLength</dfn> = <a class="local col6 ref" href="#536fileName" title='fileName' data-ref="536fileName" data-ref-filename="536fileName">fileName</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String6lengthEv" title='WTF::String::length' data-ref="_ZNK3WTF6String6lengthEv" data-ref-filename="_ZNK3WTF6String6lengthEv">length</a>();</td></tr>
<tr><th id="655">655</th><td>            <b>if</b> (<a class="local col7 ref" href="#537fileNameLength" title='fileNameLength' data-ref="537fileNameLength" data-ref-filename="537fileNameLength">fileNameLength</a> &lt; <var>6</var>)</td></tr>
<tr><th id="656">656</th><td>                <b>continue</b>;</td></tr>
<tr><th id="657">657</th><td>            <b>if</b> (!<a class="local col6 ref" href="#536fileName" title='fileName' data-ref="536fileName" data-ref-filename="536fileName">fileName</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String8endsWithERAT__Kc" title='WTF::String::endsWith' data-ref="_ZNK3WTF6String8endsWithERAT__Kc" data-ref-filename="_ZNK3WTF6String8endsWithERAT__Kc">endsWith</a>(<q>".blob"</q>))</td></tr>
<tr><th id="658">658</th><td>                <b>continue</b>;</td></tr>
<tr><th id="659">659</th><td></td></tr>
<tr><th id="660">660</th><td>            <em>bool</em> <dfn class="local col8 decl" id="538validFileName" title='validFileName' data-type='bool' data-ref="538validFileName" data-ref-filename="538validFileName">validFileName</dfn> = <b>true</b>;</td></tr>
<tr><th id="661">661</th><td>            <b>for</b> (<em>unsigned</em> <dfn class="local col9 decl" id="539i" title='i' data-type='unsigned int' data-ref="539i" data-ref-filename="539i">i</dfn> = <var>0</var>; <a class="local col9 ref" href="#539i" title='i' data-ref="539i" data-ref-filename="539i">i</a> &lt; <a class="local col7 ref" href="#537fileNameLength" title='fileNameLength' data-ref="537fileNameLength" data-ref-filename="537fileNameLength">fileNameLength</a> - <var>5</var>; ++<a class="local col9 ref" href="#539i" title='i' data-ref="539i" data-ref-filename="539i">i</a>) {</td></tr>
<tr><th id="662">662</th><td>                <b>if</b> (!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/ASCIICType.h.html#_ZN3WTF12isASCIIDigitET_" title='WTF::isASCIIDigit' data-ref="_ZN3WTF12isASCIIDigitET_" data-ref-filename="_ZN3WTF12isASCIIDigitET_">isASCIIDigit</a>(<a class="local col6 ref" href="#536fileName" title='fileName' data-ref="536fileName" data-ref-filename="536fileName">fileName</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6StringixEj" title='WTF::String::operator[]' data-ref="_ZNK3WTF6StringixEj" data-ref-filename="_ZNK3WTF6StringixEj">[<a class="local col9 ref" href="#539i" title='i' data-ref="539i" data-ref-filename="539i">i</a>]</a>)) {</td></tr>
<tr><th id="663">663</th><td>                    <a class="local col8 ref" href="#538validFileName" title='validFileName' data-ref="538validFileName" data-ref-filename="538validFileName">validFileName</a> = <b>false</b>;</td></tr>
<tr><th id="664">664</th><td>                    <b>break</b>;</td></tr>
<tr><th id="665">665</th><td>                }</td></tr>
<tr><th id="666">666</th><td>            }</td></tr>
<tr><th id="667">667</th><td></td></tr>
<tr><th id="668">668</th><td>            <b>if</b> (<a class="local col8 ref" href="#538validFileName" title='validFileName' data-ref="538validFileName" data-ref-filename="538validFileName">validFileName</a>)</td></tr>
<tr><th id="669">669</th><td>                <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl10deleteFileERKNS_6StringE" title='WTF::FileSystemImpl::deleteFile' data-ref="_ZN3WTF14FileSystemImpl10deleteFileERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl10deleteFileERKNS_6StringE">deleteFile</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#533databasePath" title='databasePath' data-ref="533databasePath" data-ref-filename="533databasePath">databasePath</a>, <a class="local col6 ref" href="#536fileName" title='fileName' data-ref="536fileName" data-ref-filename="536fileName">fileName</a>));</td></tr>
<tr><th id="670">670</th><td>        }</td></tr>
<tr><th id="671">671</th><td></td></tr>
<tr><th id="672">672</th><td>        <i>// Now delete IndexedDB.sqlite3 and related SQLite files.</i></td></tr>
<tr><th id="673">673</th><td>        <a class="type" href="../../../platform/sql/SQLiteFileSystem.h.html#WebCore::SQLiteFileSystem" title='WebCore::SQLiteFileSystem' data-ref="WebCore::SQLiteFileSystem" data-ref-filename="WebCore..SQLiteFileSystem">SQLiteFileSystem</a>::<a class="ref fn" href="../../../platform/sql/SQLiteFileSystem.h.html#_ZN7WebCore16SQLiteFileSystem18deleteDatabaseFileERKN3WTF6StringE" title='WebCore::SQLiteFileSystem::deleteDatabaseFile' data-ref="_ZN7WebCore16SQLiteFileSystem18deleteDatabaseFileERKN3WTF6StringE" data-ref-filename="_ZN7WebCore16SQLiteFileSystem18deleteDatabaseFileERKN3WTF6StringE">deleteDatabaseFile</a>(<a class="local col4 ref" href="#534databaseFile" title='databaseFile' data-ref="534databaseFile" data-ref-filename="534databaseFile">databaseFile</a>);</td></tr>
<tr><th id="674">674</th><td></td></tr>
<tr><th id="675">675</th><td>        <i>// And finally, if we can, delete the empty directory.</i></td></tr>
<tr><th id="676">676</th><td>        <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::deleteEmptyDirectory' data-ref="_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE">deleteEmptyDirectory</a>(<a class="local col3 ref" href="#533databasePath" title='databasePath' data-ref="533databasePath" data-ref-filename="533databasePath">databasePath</a>);</td></tr>
<tr><th id="677">677</th><td>    }</td></tr>
<tr><th id="678">678</th><td></td></tr>
<tr><th id="679">679</th><td>    <i>// If no databases remain for this origin, we can delete the origin directory as well.</i></td></tr>
<tr><th id="680">680</th><td>    <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::deleteEmptyDirectory' data-ref="_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl20deleteEmptyDirectoryERKNS_6StringE">deleteEmptyDirectory</a>(<a class="local col9 ref" href="#529originPath" title='originPath' data-ref="529originPath" data-ref-filename="529originPath">originPath</a>);</td></tr>
<tr><th id="681">681</th><td>}</td></tr>
<tr><th id="682">682</th><td></td></tr>
<tr><th id="683">683</th><td><em>static</em> <em>void</em> <dfn class="decl def fn" id="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForOriginPath' data-ref="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForOriginPath</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col0 decl" id="540originPath" title='originPath' data-type='const WTF::String &amp;' data-ref="540originPath" data-ref-filename="540originPath">originPath</dfn>, <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a> <dfn class="local col1 decl" id="541modifiedSince" title='modifiedSince' data-type='WTF::WallTime' data-ref="541modifiedSince" data-ref-filename="541modifiedSince">modifiedSince</dfn>)</td></tr>
<tr><th id="684">684</th><td>{</td></tr>
<tr><th id="685">685</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col2 decl" id="542databaseIdentifier" title='databaseIdentifier' data-type='WTF::String' data-ref="542databaseIdentifier" data-ref-filename="542databaseIdentifier">databaseIdentifier</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl40lastComponentOfPathIgnoringTrailingSlashERKNS_6StringE" title='WTF::FileSystemImpl::lastComponentOfPathIgnoringTrailingSlash' data-ref="_ZN3WTF14FileSystemImpl40lastComponentOfPathIgnoringTrailingSlashERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl40lastComponentOfPathIgnoringTrailingSlashERKNS_6StringE">lastComponentOfPathIgnoringTrailingSlash</a>(<a class="local col0 ref" href="#540originPath" title='originPath' data-ref="540originPath" data-ref-filename="540originPath">originPath</a>);</td></tr>
<tr><th id="686">686</th><td>    <b>if</b> (!<span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>::<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" title='WebCore::SecurityOriginData::fromDatabaseIdentifier' data-ref="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" data-ref-filename="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE">fromDatabaseIdentifier</a>(<a class="local col2 ref" href="#542databaseIdentifier" title='databaseIdentifier' data-ref="542databaseIdentifier" data-ref-filename="542databaseIdentifier">databaseIdentifier</a>))</td></tr>
<tr><th id="687">687</th><td>        <b>return</b>;</td></tr>
<tr><th id="688">688</th><td>    </td></tr>
<tr><th id="689">689</th><td>    <em>auto</em> <dfn class="local col3 decl" id="543directoryNames" title='directoryNames' data-type='WTF::Vector&lt;WTF::String, 0, WTF::CrashOnOverflow, 16, WTF::FastMalloc&gt;' data-ref="543directoryNames" data-ref-filename="543directoryNames">directoryNames</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col0 ref" href="#540originPath" title='originPath' data-ref="540originPath" data-ref-filename="540originPath">originPath</a>);</td></tr>
<tr><th id="690">690</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col4 decl" id="544databaseIdentifier" title='databaseIdentifier' data-type='WTF::String &amp;' data-ref="544databaseIdentifier" data-ref-filename="544databaseIdentifier">databaseIdentifier</dfn> : <a class="local col3 ref" href="#543directoryNames" title='directoryNames' data-ref="543directoryNames" data-ref-filename="543directoryNames">directoryNames</a>) {</td></tr>
<tr><th id="691">691</th><td>        <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col5 decl" id="545securityOrigin" title='securityOrigin' data-type='std::__1::optional&lt;WebCore::SecurityOriginData&gt;' data-ref="545securityOrigin" data-ref-filename="545securityOrigin"><a class="local col5 ref" href="#545securityOrigin" title='securityOrigin' data-ref="545securityOrigin" data-ref-filename="545securityOrigin">securityOrigin</a></dfn> = <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>::<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" title='WebCore::SecurityOriginData::fromDatabaseIdentifier' data-ref="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" data-ref-filename="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE">fromDatabaseIdentifier</a>(<a class="local col4 ref" href="#544databaseIdentifier" title='databaseIdentifier' data-ref="544databaseIdentifier" data-ref-filename="544databaseIdentifier">databaseIdentifier</a>))</td></tr>
<tr><th id="692">692</th><td>            <a class="ref fn" href="#_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForFullOriginPath' data-ref="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForFullOriginPath</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col0 ref" href="#540originPath" title='originPath' data-ref="540originPath" data-ref-filename="540originPath">originPath</a>, <a class="local col4 ref" href="#544databaseIdentifier" title='databaseIdentifier' data-ref="544databaseIdentifier" data-ref-filename="544databaseIdentifier">databaseIdentifier</a>), <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col1 ref" href="#541modifiedSince" title='modifiedSince' data-ref="541modifiedSince" data-ref-filename="541modifiedSince">modifiedSince</a>);</td></tr>
<tr><th id="693">693</th><td>    }</td></tr>
<tr><th id="694">694</th><td>    </td></tr>
<tr><th id="695">695</th><td>    <a class="ref fn" href="#_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForFullOriginPath' data-ref="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL35removeAllDatabasesForFullOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForFullOriginPath</a>(<a class="local col0 ref" href="#540originPath" title='originPath' data-ref="540originPath" data-ref-filename="540originPath">originPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col1 ref" href="#541modifiedSince" title='modifiedSince' data-ref="541modifiedSince" data-ref-filename="541modifiedSince">modifiedSince</a>);</td></tr>
<tr><th id="696">696</th><td>}</td></tr>
<tr><th id="697">697</th><td></td></tr>
<tr><th id="698">698</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" title='WebCore::IDBServer::IDBServer::removeDatabasesModifiedSinceForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer38removeDatabasesModifiedSinceForVersionEN3WTF8WallTimeERKNS2_6StringE">removeDatabasesModifiedSinceForVersion</dfn>(<a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a> <dfn class="local col6 decl" id="546modifiedSince" title='modifiedSince' data-type='WTF::WallTime' data-ref="546modifiedSince" data-ref-filename="546modifiedSince">modifiedSince</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col7 decl" id="547version" title='version' data-type='const WTF::String &amp;' data-ref="547version" data-ref-filename="547version">version</dfn>)</td></tr>
<tr><th id="699">699</th><td>{</td></tr>
<tr><th id="700">700</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col8 decl" id="548versionPath" title='versionPath' data-type='WTF::String' data-ref="548versionPath" data-ref-filename="548versionPath">versionPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="local col7 ref" href="#547version" title='version' data-ref="547version" data-ref-filename="547version">version</a>);</td></tr>
<tr><th id="701">701</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col9 decl" id="549databaseIdentifier" title='databaseIdentifier' data-type='WTF::String &amp;' data-ref="549databaseIdentifier" data-ref-filename="549databaseIdentifier">databaseIdentifier</dfn> : <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col8 ref" href="#548versionPath" title='versionPath' data-ref="548versionPath" data-ref-filename="548versionPath">versionPath</a>)) {</td></tr>
<tr><th id="702">702</th><td>        <b>if</b> (<em>auto</em> <span class='ref fn fake' title='std::__1::optional::operator bool' data-ref="_ZNKSt3__18optionalcvbEv" data-ref-filename="_ZNKSt3__18optionalcvbEv"></span><dfn class="local col0 decl" id="550securityOrigin" title='securityOrigin' data-type='std::__1::optional&lt;WebCore::SecurityOriginData&gt;' data-ref="550securityOrigin" data-ref-filename="550securityOrigin"><a class="local col0 ref" href="#550securityOrigin" title='securityOrigin' data-ref="550securityOrigin" data-ref-filename="550securityOrigin">securityOrigin</a></dfn> = <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>::<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" title='WebCore::SecurityOriginData::fromDatabaseIdentifier' data-ref="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE" data-ref-filename="_ZN7WebCore18SecurityOriginData22fromDatabaseIdentifierERKN3WTF6StringE">fromDatabaseIdentifier</a>(<a class="local col9 ref" href="#549databaseIdentifier" title='databaseIdentifier' data-ref="549databaseIdentifier" data-ref-filename="549databaseIdentifier">databaseIdentifier</a>))</td></tr>
<tr><th id="703">703</th><td>            <a class="ref fn" href="#_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForOriginPath' data-ref="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForOriginPath</a>(<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col8 ref" href="#548versionPath" title='versionPath' data-ref="548versionPath" data-ref-filename="548versionPath">versionPath</a>, <a class="local col9 ref" href="#549databaseIdentifier" title='databaseIdentifier' data-ref="549databaseIdentifier" data-ref-filename="549databaseIdentifier">databaseIdentifier</a>), <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#41" title='WTF::WallTime::WallTime' data-ref="_ZN3WTF8WallTimeC1ERKS0_" data-ref-filename="_ZN3WTF8WallTimeC1ERKS0_"></a><a class="local col6 ref" href="#546modifiedSince" title='modifiedSince' data-ref="546modifiedSince" data-ref-filename="546modifiedSince">modifiedSince</a>);</td></tr>
<tr><th id="704">704</th><td>    }</td></tr>
<tr><th id="705">705</th><td>}</td></tr>
<tr><th id="706">706</th><td></td></tr>
<tr><th id="707">707</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" title='WebCore::IDBServer::IDBServer::removeDatabasesWithOriginsForVersion' data-ref="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer36removeDatabasesWithOriginsForVersionERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10Fast7871881">removeDatabasesWithOriginsForVersion</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt; &amp;<dfn class="local col1 decl" id="551origins" title='origins' data-type='const Vector&lt;WebCore::SecurityOriginData&gt; &amp;' data-ref="551origins" data-ref-filename="551origins">origins</dfn>, <em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col2 decl" id="552version" title='version' data-type='const WTF::String &amp;' data-ref="552version" data-ref-filename="552version">version</dfn>)</td></tr>
<tr><th id="708">708</th><td>{</td></tr>
<tr><th id="709">709</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col3 decl" id="553versionPath" title='versionPath' data-type='WTF::String' data-ref="553versionPath" data-ref-filename="553versionPath">versionPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="local col2 ref" href="#552version" title='version' data-ref="552version" data-ref-filename="552version">version</a>);</td></tr>
<tr><th id="710">710</th><td>    <b>for</b> (<em>const</em> <em>auto</em>&amp; <dfn class="local col4 decl" id="554origin" title='origin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="554origin" data-ref-filename="554origin">origin</dfn> : <a class="local col1 ref" href="#551origins" title='origins' data-ref="551origins" data-ref-filename="551origins">origins</a>) {</td></tr>
<tr><th id="711">711</th><td>        <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col5 decl" id="555originPath" title='originPath' data-type='WTF::String' data-ref="555originPath" data-ref-filename="555originPath">originPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#553versionPath" title='versionPath' data-ref="553versionPath" data-ref-filename="553versionPath">versionPath</a>, <a class="local col4 ref" href="#554origin" title='origin' data-ref="554origin" data-ref-filename="554origin">origin</a>.<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" title='WebCore::SecurityOriginData::databaseIdentifier' data-ref="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="712">712</th><td>        <a class="ref fn" href="#_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForOriginPath' data-ref="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForOriginPath</a>(<a class="local col5 ref" href="#555originPath" title='originPath' data-ref="555originPath" data-ref-filename="555originPath">originPath</a>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimengEv" title='WTF::WallTime::operator-' data-ref="_ZNK3WTF8WallTimengEv" data-ref-filename="_ZNK3WTF8WallTimengEv">-</a><a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a>::<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZN3WTF8WallTime8infinityEv" title='WTF::WallTime::infinity' data-ref="_ZN3WTF8WallTime8infinityEv" data-ref-filename="_ZN3WTF8WallTime8infinityEv">infinity</a>());</td></tr>
<tr><th id="713">713</th><td>        </td></tr>
<tr><th id="714">714</th><td>        <b>for</b> (<em>auto</em>&amp; <dfn class="local col6 decl" id="556topOrigin" title='topOrigin' data-type='WTF::String &amp;' data-ref="556topOrigin" data-ref-filename="556topOrigin">topOrigin</dfn> : <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" title='WTF::FileSystemImpl::listDirectory' data-ref="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl13listDirectoryERKNS_6StringE">listDirectory</a>(<a class="local col3 ref" href="#553versionPath" title='versionPath' data-ref="553versionPath" data-ref-filename="553versionPath">versionPath</a>)) {</td></tr>
<tr><th id="715">715</th><td>            <em>auto</em> <dfn class="local col7 decl" id="557topOriginPath" title='topOriginPath' data-type='WTF::String' data-ref="557topOriginPath" data-ref-filename="557topOriginPath">topOriginPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#553versionPath" title='versionPath' data-ref="553versionPath" data-ref-filename="553versionPath">versionPath</a>, <a class="local col6 ref" href="#556topOrigin" title='topOrigin' data-ref="556topOrigin" data-ref-filename="556topOrigin">topOrigin</a>);</td></tr>
<tr><th id="716">716</th><td>            <a class="local col5 ref" href="#555originPath" title='originPath' data-ref="555originPath" data-ref-filename="555originPath">originPath</a> <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringaSEOS0_" title='WTF::String::operator=' data-ref="_ZN3WTF6StringaSEOS0_" data-ref-filename="_ZN3WTF6StringaSEOS0_">=</a> <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col7 ref" href="#557topOriginPath" title='topOriginPath' data-ref="557topOriginPath" data-ref-filename="557topOriginPath">topOriginPath</a>, <a class="local col4 ref" href="#554origin" title='origin' data-ref="554origin" data-ref-filename="554origin">origin</a>.<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" title='WebCore::SecurityOriginData::databaseIdentifier' data-ref="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="717">717</th><td>            <a class="ref fn" href="#_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" title='WebCore::IDBServer::removeAllDatabasesForOriginPath' data-ref="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE" data-ref-filename="_ZN7WebCore9IDBServerL31removeAllDatabasesForOriginPathERKN3WTF6StringENS1_8WallTimeE">removeAllDatabasesForOriginPath</a>(<a class="local col5 ref" href="#555originPath" title='originPath' data-ref="555originPath" data-ref-filename="555originPath">originPath</a>, <a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZNK3WTF8WallTimengEv" title='WTF::WallTime::operator-' data-ref="_ZNK3WTF8WallTimengEv" data-ref-filename="_ZNK3WTF8WallTimengEv">-</a><a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#WTF::WallTime" title='WTF::WallTime' data-ref="WTF::WallTime" data-ref-filename="WTF..WallTime">WallTime</a>::<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/WallTime.h.html#_ZN3WTF8WallTime8infinityEv" title='WTF::WallTime::infinity' data-ref="_ZN3WTF8WallTime8infinityEv" data-ref-filename="_ZN3WTF8WallTime8infinityEv">infinity</a>());</td></tr>
<tr><th id="718">718</th><td>        }</td></tr>
<tr><th id="719">719</th><td>    }</td></tr>
<tr><th id="720">720</th><td>}</td></tr>
<tr><th id="721">721</th><td></td></tr>
<tr><th id="722">722</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer12renameOriginERKNS_18SecurityOriginDataES4_" title='WebCore::IDBServer::IDBServer::renameOrigin' data-ref="_ZN7WebCore9IDBServer9IDBServer12renameOriginERKNS_18SecurityOriginDataES4_" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer12renameOriginERKNS_18SecurityOriginDataES4_">renameOrigin</dfn>(<em>const</em> <span class="namespace">WebCore::</span><a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col8 decl" id="558oldOrigin" title='oldOrigin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="558oldOrigin" data-ref-filename="558oldOrigin">oldOrigin</dfn>, <em>const</em> <span class="namespace">WebCore::</span><a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col9 decl" id="559newOrigin" title='newOrigin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="559newOrigin" data-ref-filename="559newOrigin">newOrigin</dfn>)</td></tr>
<tr><th id="723">723</th><td>{</td></tr>
<tr><th id="724">724</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::Vector" title='WTF::Vector' data-ref="WTF::Vector" data-ref-filename="WTF..Vector">Vector</a>&lt;<a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&gt; <dfn class="local col0 decl" id="560targetOrigins" title='targetOrigins' data-type='Vector&lt;WebCore::SecurityOriginData&gt;' data-ref="560targetOrigins" data-ref-filename="560targetOrigins">targetOrigins</dfn> = <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Vector.h.html#_ZN3WTF6VectorC1ESt16initializer_listIT_E" title='WTF::Vector::Vector&lt;type-parameter-0-0, , type-parameter-0-2, , Malloc&gt;' data-ref="_ZN3WTF6VectorC1ESt16initializer_listIT_E" data-ref-filename="_ZN3WTF6VectorC1ESt16initializer_listIT_E"></a>{ <a class="local col8 ref" href="#558oldOrigin" title='oldOrigin' data-ref="558oldOrigin" data-ref-filename="558oldOrigin">oldOrigin</a> };</td></tr>
<tr><th id="725">725</th><td>    <a class="member fn" href="#_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" title='WebCore::IDBServer::IDBServer::closeDatabasesForOrigins' data-ref="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer24closeDatabasesForOriginsERKN3WTF6VectorINS_18SecurityOriginDataELm0ENS2_15CrashOnOverflowELm16ENS2_10FastMallocEEEONS6591001">closeDatabasesForOrigins</a>(<a class="local col0 ref" href="#560targetOrigins" title='targetOrigins' data-ref="560targetOrigins" data-ref-filename="560targetOrigins">targetOrigins</a>, <a class="tu ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[](<em>const</em> <a class="type" href="../../../page/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col1 decl" id="561targetOrigin" title='targetOrigin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="561targetOrigin" data-ref-filename="561targetOrigin">targetOrigin</dfn>, <em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp; <dfn class="local col2 decl" id="562databaseOrigin" title='databaseOrigin' data-type='const WebCore::ClientOrigin &amp;' data-ref="562databaseOrigin" data-ref-filename="562databaseOrigin">databaseOrigin</dfn>) -&gt; <em>bool</em> {</td></tr>
<tr><th id="726">726</th><td>        <b>return</b> <a class="local col2 ref" href="#562databaseOrigin" title='databaseOrigin' data-ref="562databaseOrigin" data-ref-filename="562databaseOrigin">databaseOrigin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::topOrigin" title='WebCore::ClientOrigin::topOrigin' data-ref="WebCore::ClientOrigin::topOrigin" data-ref-filename="WebCore..ClientOrigin..topOrigin">topOrigin</a> <a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZN7WebCoreeqERKNS_18SecurityOriginDataES2_" title='WebCore::operator==' data-ref="_ZN7WebCoreeqERKNS_18SecurityOriginDataES2_" data-ref-filename="_ZN7WebCoreeqERKNS_18SecurityOriginDataES2_">==</a> <a class="local col1 ref" href="#561targetOrigin" title='targetOrigin' data-ref="561targetOrigin" data-ref-filename="561targetOrigin">targetOrigin</a>;</td></tr>
<tr><th id="727">727</th><td>    });</td></tr>
<tr><th id="728">728</th><td></td></tr>
<tr><th id="729">729</th><td>    <em>auto</em> <dfn class="local col3 decl" id="563versionPath" title='versionPath' data-type='WTF::String' data-ref="563versionPath" data-ref-filename="563versionPath">versionPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>);</td></tr>
<tr><th id="730">730</th><td>    <em>auto</em> <dfn class="local col4 decl" id="564oldOriginPath" title='oldOriginPath' data-type='WTF::String' data-ref="564oldOriginPath" data-ref-filename="564oldOriginPath">oldOriginPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#563versionPath" title='versionPath' data-ref="563versionPath" data-ref-filename="563versionPath">versionPath</a>, <a class="local col8 ref" href="#558oldOrigin" title='oldOrigin' data-ref="558oldOrigin" data-ref-filename="558oldOrigin">oldOrigin</a>.<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" title='WebCore::SecurityOriginData::databaseIdentifier' data-ref="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="731">731</th><td>    <em>auto</em> <dfn class="local col5 decl" id="565newOriginPath" title='newOriginPath' data-type='WTF::String' data-ref="565newOriginPath" data-ref-filename="565newOriginPath">newOriginPath</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="local col3 ref" href="#563versionPath" title='versionPath' data-ref="563versionPath" data-ref-filename="563versionPath">versionPath</a>, <a class="local col9 ref" href="#559newOrigin" title='newOrigin' data-ref="559newOrigin" data-ref-filename="559newOrigin">newOrigin</a>.<a class="ref fn" href="../../../page/SecurityOriginData.h.html#_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" title='WebCore::SecurityOriginData::databaseIdentifier' data-ref="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv" data-ref-filename="_ZNK7WebCore18SecurityOriginData18databaseIdentifierEv">databaseIdentifier</a>());</td></tr>
<tr><th id="732">732</th><td>    <b>if</b> (<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" title='WTF::FileSystemImpl::fileExists' data-ref="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE">fileExists</a>(<a class="local col4 ref" href="#564oldOriginPath" title='oldOriginPath' data-ref="564oldOriginPath" data-ref-filename="564oldOriginPath">oldOriginPath</a>))</td></tr>
<tr><th id="733">733</th><td>        <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl8moveFileERKNS_6StringES3_" title='WTF::FileSystemImpl::moveFile' data-ref="_ZN3WTF14FileSystemImpl8moveFileERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl8moveFileERKNS_6StringES3_">moveFile</a>(<a class="local col4 ref" href="#564oldOriginPath" title='oldOriginPath' data-ref="564oldOriginPath" data-ref-filename="564oldOriginPath">oldOriginPath</a>, <a class="local col5 ref" href="#565newOriginPath" title='newOriginPath' data-ref="565newOriginPath" data-ref-filename="565newOriginPath">newOriginPath</a>);</td></tr>
<tr><th id="734">734</th><td>}</td></tr>
<tr><th id="735">735</th><td></td></tr>
<tr><th id="736">736</th><td><a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager" title='WebCore::StorageQuotaManager' data-ref="WebCore::StorageQuotaManager" data-ref-filename="WebCore..StorageQuotaManager">StorageQuotaManager</a>::<a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager::Decision" title='WebCore::StorageQuotaManager::Decision' data-ref="WebCore::StorageQuotaManager::Decision" data-ref-filename="WebCore..StorageQuotaManager..Decision">Decision</a> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer12requestSpaceERKNS_12ClientOriginEy" title='WebCore::IDBServer::IDBServer::requestSpace' data-ref="_ZN7WebCore9IDBServer9IDBServer12requestSpaceERKNS_12ClientOriginEy" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer12requestSpaceERKNS_12ClientOriginEy">requestSpace</dfn>(<em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp; <dfn class="local col6 decl" id="566origin" title='origin' data-type='const WebCore::ClientOrigin &amp;' data-ref="566origin" data-ref-filename="566origin">origin</dfn>, <span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <dfn class="local col7 decl" id="567taskSize" title='taskSize' data-type='uint64_t' data-ref="567taskSize" data-ref-filename="567taskSize">taskSize</dfn>) <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/ThreadSafetyAnalysis.h.html#48" title="__attribute__((no_thread_safety_analysis))" data-ref="_M/WTF_IGNORES_THREAD_SAFETY_ANALYSIS">WTF_IGNORES_THREAD_SAFETY_ANALYSIS</a></td></tr>
<tr><th id="737">737</th><td>{</td></tr>
<tr><th id="738">738</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 738, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(738, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2819); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="739">739</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 739, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(739, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2821); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="740">740</th><td></td></tr>
<tr><th id="741">741</th><td>    <a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager" title='WebCore::StorageQuotaManager' data-ref="WebCore::StorageQuotaManager" data-ref-filename="WebCore..StorageQuotaManager">StorageQuotaManager</a>::<a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager::Decision" title='WebCore::StorageQuotaManager::Decision' data-ref="WebCore::StorageQuotaManager::Decision" data-ref-filename="WebCore..StorageQuotaManager..Decision">Decision</a> <dfn class="local col8 decl" id="568result" title='result' data-type='StorageQuotaManager::Decision' data-ref="568result" data-ref-filename="568result">result</dfn> = <a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager" title='WebCore::StorageQuotaManager' data-ref="WebCore::StorageQuotaManager" data-ref-filename="WebCore..StorageQuotaManager">StorageQuotaManager</a>::<a class="type" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager::Decision" title='WebCore::StorageQuotaManager::Decision' data-ref="WebCore::StorageQuotaManager::Decision" data-ref-filename="WebCore..StorageQuotaManager..Decision">Decision</a>::<a class="enum" href="../../../storage/StorageQuotaManager.h.html#WebCore::StorageQuotaManager::Decision::Deny" title='WebCore::StorageQuotaManager::Decision::Deny' data-ref="WebCore::StorageQuotaManager::Decision::Deny" data-ref-filename="WebCore..StorageQuotaManager..Decision..Deny">Deny</a>;</td></tr>
<tr><th id="742">742</th><td></td></tr>
<tr><th id="743">743</th><td>    <i>// Release lock because space requesting could be blocked.</i></td></tr>
<tr><th id="744">744</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF4Lock6unlockEv" title='WTF::Lock::unlock' data-ref="_ZN3WTF4Lock6unlockEv" data-ref-filename="_ZN3WTF4Lock6unlockEv">unlock</a>();</td></tr>
<tr><th id="745">745</th><td>    <a class="local col8 ref" href="#568result" title='result' data-ref="568result" data-ref-filename="568result">result</a> = <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_spaceRequester" title='WebCore::IDBServer::IDBServer::m_spaceRequester' data-ref="WebCore::IDBServer::IDBServer::m_spaceRequester" data-ref-filename="WebCore..IDBServer..IDBServer..m_spaceRequester">m_spaceRequester</a><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZNK3WTF8FunctionIFT_DpT0_EEclES3_" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK3WTF8FunctionIFT_DpT0_EEclES3_" data-ref-filename="_ZNK3WTF8FunctionIFT_DpT0_EEclES3_">(<a class="local col6 ref" href="#566origin" title='origin' data-ref="566origin" data-ref-filename="566origin">origin</a>, <a class="local col7 ref" href="#567taskSize" title='taskSize' data-ref="567taskSize" data-ref-filename="567taskSize">taskSize</a>)</a>;</td></tr>
<tr><th id="746">746</th><td>    <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZN3WTF4Lock4lockEv" title='WTF::Lock::lock' data-ref="_ZN3WTF4Lock4lockEv" data-ref-filename="_ZN3WTF4Lock4lockEv">lock</a>();</td></tr>
<tr><th id="747">747</th><td></td></tr>
<tr><th id="748">748</th><td>    <b>return</b> <a class="local col8 ref" href="#568result" title='result' data-ref="568result" data-ref-filename="568result">result</a>;</td></tr>
<tr><th id="749">749</th><td>}</td></tr>
<tr><th id="750">750</th><td></td></tr>
<tr><th id="751">751</th><td><span class='typedef' title='uint64_t' data-type='unsigned long long' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</span> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer9diskUsageERKN3WTF6StringERKNS_12ClientOriginE" title='WebCore::IDBServer::IDBServer::diskUsage' data-ref="_ZN7WebCore9IDBServer9IDBServer9diskUsageERKN3WTF6StringERKNS_12ClientOriginE" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer9diskUsageERKN3WTF6StringERKNS_12ClientOriginE">diskUsage</dfn>(<em>const</em> <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col9 decl" id="569rootDirectory" title='rootDirectory' data-type='const WTF::String &amp;' data-ref="569rootDirectory" data-ref-filename="569rootDirectory">rootDirectory</dfn>, <em>const</em> <a class="type" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin" title='WebCore::ClientOrigin' data-ref="WebCore::ClientOrigin" data-ref-filename="WebCore..ClientOrigin">ClientOrigin</a>&amp; <dfn class="local col0 decl" id="570origin" title='origin' data-type='const WebCore::ClientOrigin &amp;' data-ref="570origin" data-ref-filename="570origin">origin</dfn>)</td></tr>
<tr><th id="752">752</th><td>{</td></tr>
<tr><th id="753">753</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(!isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 753, __PRETTY_FUNCTION__, &quot;!isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(753, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2823); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(!<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="754">754</th><td></td></tr>
<tr><th id="755">755</th><td>    <em>auto</em> <dfn class="local col1 decl" id="571oldVersionOriginDirectory" title='oldVersionOriginDirectory' data-type='WTF::String' data-ref="571oldVersionOriginDirectory" data-ref-filename="571oldVersionOriginDirectory">oldVersionOriginDirectory</dfn> = <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>::<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" title='WebCore::IDBDatabaseIdentifier::databaseDirectoryRelativeToRoot' data-ref="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" data-ref-filename="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_">databaseDirectoryRelativeToRoot</a>(<a class="local col0 ref" href="#570origin" title='origin' data-ref="570origin" data-ref-filename="570origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::topOrigin" title='WebCore::ClientOrigin::topOrigin' data-ref="WebCore::ClientOrigin::topOrigin" data-ref-filename="WebCore..ClientOrigin..topOrigin">topOrigin</a>, <a class="local col0 ref" href="#570origin" title='origin' data-ref="570origin" data-ref-filename="570origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::clientOrigin" title='WebCore::ClientOrigin::clientOrigin' data-ref="WebCore::ClientOrigin::clientOrigin" data-ref-filename="WebCore..ClientOrigin..clientOrigin">clientOrigin</a>, <a class="local col9 ref" href="#569rootDirectory" title='rootDirectory' data-ref="569rootDirectory" data-ref-filename="569rootDirectory">rootDirectory</a>, <q>"v0"<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF14StringLiteralsli4_strEPKcm" title='WTF::StringLiterals::operator&quot;&quot;_str' data-ref="_ZN3WTF14StringLiteralsli4_strEPKcm" data-ref-filename="_ZN3WTF14StringLiteralsli4_strEPKcm">_str</a></q>);</td></tr>
<tr><th id="756">756</th><td>    <em>auto</em> <dfn class="local col2 decl" id="572newVersionOriginDirectory" title='newVersionOriginDirectory' data-type='WTF::String' data-ref="572newVersionOriginDirectory" data-ref-filename="572newVersionOriginDirectory">newVersionOriginDirectory</dfn> = <a class="type" href="../IDBDatabaseIdentifier.h.html#WebCore::IDBDatabaseIdentifier" title='WebCore::IDBDatabaseIdentifier' data-ref="WebCore::IDBDatabaseIdentifier" data-ref-filename="WebCore..IDBDatabaseIdentifier">IDBDatabaseIdentifier</a>::<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" title='WebCore::IDBDatabaseIdentifier::databaseDirectoryRelativeToRoot' data-ref="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_" data-ref-filename="_ZN7WebCore21IDBDatabaseIdentifier31databaseDirectoryRelativeToRootERKNS_18SecurityOriginDataES3_RKN3WTF6StringES7_">databaseDirectoryRelativeToRoot</a>(<a class="local col0 ref" href="#570origin" title='origin' data-ref="570origin" data-ref-filename="570origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::topOrigin" title='WebCore::ClientOrigin::topOrigin' data-ref="WebCore::ClientOrigin::topOrigin" data-ref-filename="WebCore..ClientOrigin..topOrigin">topOrigin</a>, <a class="local col0 ref" href="#570origin" title='origin' data-ref="570origin" data-ref-filename="570origin">origin</a>.<a class="ref field" href="../../../page/ClientOrigin.h.html#WebCore::ClientOrigin::clientOrigin" title='WebCore::ClientOrigin::clientOrigin' data-ref="WebCore::ClientOrigin::clientOrigin" data-ref-filename="WebCore..ClientOrigin..clientOrigin">clientOrigin</a>, <a class="local col9 ref" href="#569rootDirectory" title='rootDirectory' data-ref="569rootDirectory" data-ref-filename="569rootDirectory">rootDirectory</a>, <q>"v1"<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF14StringLiteralsli4_strEPKcm" title='WTF::StringLiterals::operator&quot;&quot;_str' data-ref="_ZN3WTF14StringLiteralsli4_strEPKcm" data-ref-filename="_ZN3WTF14StringLiteralsli4_strEPKcm">_str</a></q>);</td></tr>
<tr><th id="757">757</th><td>    <b>return</b> <a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::databasesSizeForDirectory' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE">databasesSizeForDirectory</a>(<a class="local col1 ref" href="#571oldVersionOriginDirectory" title='oldVersionOriginDirectory' data-ref="571oldVersionOriginDirectory" data-ref-filename="571oldVersionOriginDirectory">oldVersionOriginDirectory</a>) + <a class="type" href="SQLiteIDBBackingStore.h.html#WebCore::IDBServer::SQLiteIDBBackingStore" title='WebCore::IDBServer::SQLiteIDBBackingStore' data-ref="WebCore::IDBServer::SQLiteIDBBackingStore" data-ref-filename="WebCore..IDBServer..SQLiteIDBBackingStore">SQLiteIDBBackingStore</a>::<a class="ref fn" href="SQLiteIDBBackingStore.h.html#_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE" title='WebCore::IDBServer::SQLiteIDBBackingStore::databasesSizeForDirectory' data-ref="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE" data-ref-filename="_ZN7WebCore9IDBServer21SQLiteIDBBackingStore25databasesSizeForDirectoryERKN3WTF6StringE">databasesSizeForDirectory</a>(<a class="local col2 ref" href="#572newVersionOriginDirectory" title='newVersionOriginDirectory' data-ref="572newVersionOriginDirectory" data-ref-filename="572newVersionOriginDirectory">newVersionOriginDirectory</a>);</td></tr>
<tr><th id="758">758</th><td>}</td></tr>
<tr><th id="759">759</th><td></td></tr>
<tr><th id="760">760</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv" title='WebCore::IDBServer::IDBServer::upgradeFilesIfNecessary' data-ref="_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer23upgradeFilesIfNecessaryEv">upgradeFilesIfNecessary</dfn>()</td></tr>
<tr><th id="761">761</th><td>{</td></tr>
<tr><th id="762">762</th><td>    <b>if</b> (<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>() || !<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" title='WTF::FileSystemImpl::fileExists' data-ref="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE">fileExists</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>))</td></tr>
<tr><th id="763">763</th><td>        <b>return</b>;</td></tr>
<tr><th id="764">764</th><td></td></tr>
<tr><th id="765">765</th><td>    <a class="type" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a> <dfn class="local col3 decl" id="573newVersionDirectory" title='newVersionDirectory' data-type='WTF::String' data-ref="573newVersionDirectory" data-ref-filename="573newVersionDirectory">newVersionDirectory</dfn> = <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" title='WTF::FileSystemImpl::pathByAppendingComponent' data-ref="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_" data-ref-filename="_ZN3WTF14FileSystemImpl24pathByAppendingComponentERKNS_6StringES3_">pathByAppendingComponent</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" title='WebCore::IDBServer::IDBServer::m_databaseDirectoryPath' data-ref="WebCore::IDBServer::IDBServer::m_databaseDirectoryPath" data-ref-filename="WebCore..IDBServer..IDBServer..m_databaseDirectoryPath">m_databaseDirectoryPath</a>, <a class="ref fn fake" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1EPKc" title='WTF::String::String' data-ref="_ZN3WTF6StringC1EPKc" data-ref-filename="_ZN3WTF6StringC1EPKc"></a><q>"v1"</q>);</td></tr>
<tr><th id="766">766</th><td>    <b>if</b> (!<span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" title='WTF::FileSystemImpl::fileExists' data-ref="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl10fileExistsERKNS_6StringE">fileExists</a>(<a class="local col3 ref" href="#573newVersionDirectory" title='newVersionDirectory' data-ref="573newVersionDirectory" data-ref-filename="573newVersionDirectory">newVersionDirectory</a>))</td></tr>
<tr><th id="767">767</th><td>        <span class="namespace">FileSystem::</span><a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/FileSystem.h.html#_ZN3WTF14FileSystemImpl18makeAllDirectoriesERKNS_6StringE" title='WTF::FileSystemImpl::makeAllDirectories' data-ref="_ZN3WTF14FileSystemImpl18makeAllDirectoriesERKNS_6StringE" data-ref-filename="_ZN3WTF14FileSystemImpl18makeAllDirectoriesERKNS_6StringE">makeAllDirectories</a>(<a class="local col3 ref" href="#573newVersionDirectory" title='newVersionDirectory' data-ref="573newVersionDirectory" data-ref-filename="573newVersionDirectory">newVersionDirectory</a>);</td></tr>
<tr><th id="768">768</th><td>}</td></tr>
<tr><th id="769">769</th><td></td></tr>
<tr><th id="770">770</th><td><em>void</em> <a class="type" href="IDBServer.h.html#WebCore::IDBServer::IDBServer" title='WebCore::IDBServer::IDBServer' data-ref="WebCore::IDBServer::IDBServer" data-ref-filename="WebCore..IDBServer..IDBServer">IDBServer</a>::<dfn class="decl def fn" id="_ZN7WebCore9IDBServer9IDBServer34stopDatabaseActivitiesOnMainThreadEv" title='WebCore::IDBServer::IDBServer::stopDatabaseActivitiesOnMainThread' data-ref="_ZN7WebCore9IDBServer9IDBServer34stopDatabaseActivitiesOnMainThreadEv" data-ref-filename="_ZN7WebCore9IDBServer9IDBServer34stopDatabaseActivitiesOnMainThreadEv">stopDatabaseActivitiesOnMainThread</dfn>()</td></tr>
<tr><th id="771">771</th><td>{</td></tr>
<tr><th id="772">772</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(isMainThread())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 772, __PRETTY_FUNCTION__, &quot;isMainThread()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(772, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2825); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF12isMainThreadEv" title='WTF::isMainThread' data-ref="_ZN3WTF12isMainThreadEv" data-ref-filename="_ZN3WTF12isMainThreadEv">isMainThread</a>());</td></tr>
<tr><th id="773">773</th><td>    <a class="macro" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(m_lock.isHeld())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, 773, __PRETTY_FUNCTION__, &quot;m_lock.isHeld()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(773, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebCore/Modules/indexeddb/server/IDBServer.cpp&quot;, __PRETTY_FUNCTION__, 2827); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_lock" title='WebCore::IDBServer::IDBServer::m_lock' data-ref="WebCore::IDBServer::IDBServer::m_lock" data-ref-filename="WebCore..IDBServer..IDBServer..m_lock">m_lock</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/Lock.h.html#_ZNK3WTF4Lock6isHeldEv" title='WTF::Lock::isHeld' data-ref="_ZNK3WTF4Lock6isHeldEv" data-ref-filename="_ZNK3WTF4Lock6isHeldEv">isHeld</a>());</td></tr>
<tr><th id="774">774</th><td></td></tr>
<tr><th id="775">775</th><td>    <i>// Only stop non-ephemeral IDBServer that can hold database file lock.</i></td></tr>
<tr><th id="776">776</th><td>    <b>if</b> (<a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_sessionID" title='WebCore::IDBServer::IDBServer::m_sessionID' data-ref="WebCore::IDBServer::IDBServer::m_sessionID" data-ref-filename="WebCore..IDBServer..IDBServer..m_sessionID">m_sessionID</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/pal/SessionID.h.html#_ZNK3PAL9SessionID11isEphemeralEv" title='PAL::SessionID::isEphemeral' data-ref="_ZNK3PAL9SessionID11isEphemeralEv" data-ref-filename="_ZNK3PAL9SessionID11isEphemeralEv">isEphemeral</a>())</td></tr>
<tr><th id="777">777</th><td>        <b>return</b>;</td></tr>
<tr><th id="778">778</th><td></td></tr>
<tr><th id="779">779</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col4 decl" id="574database" title='database' data-type='std::__1::unique_ptr&lt;WebCore::IDBServer::UniqueIDBDatabase, std::__1::default_delete&lt;WebCore::IDBServer::UniqueIDBDatabase&gt;&gt; &amp;' data-ref="574database" data-ref-filename="574database">database</dfn> : <a class="member field" href="IDBServer.h.html#WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" title='WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap' data-ref="WebCore::IDBServer::IDBServer::m_uniqueIDBDatabaseMap" data-ref-filename="WebCore..IDBServer..IDBServer..m_uniqueIDBDatabaseMap">m_uniqueIDBDatabaseMap</a>.<a class="ref fn" href="../../../../../WebKitBuild/Debug/usr/local/include/wtf/HashMap.h.html#_ZN3WTF7HashMap6valuesEv" title='WTF::HashMap::values' data-ref="_ZN3WTF7HashMap6valuesEv" data-ref-filename="_ZN3WTF7HashMap6valuesEv">values</a>()) {</td></tr>
<tr><th id="780">780</th><td>        <i>// Only stop databases with non-ephemeral backing store that can hold database file lock.</i></td></tr>
<tr><th id="781">781</th><td>        <b>if</b> (!<a class="local col4 ref" href="#574database" title='database' data-ref="574database" data-ref-filename="574database">database</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="UniqueIDBDatabase.h.html#_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" title='WebCore::IDBServer::UniqueIDBDatabase::identifier' data-ref="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv" data-ref-filename="_ZNK7WebCore9IDBServer17UniqueIDBDatabase10identifierEv">identifier</a>().<a class="ref fn" href="../IDBDatabaseIdentifier.h.html#_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv" title='WebCore::IDBDatabaseIdentifier::isTransient' data-ref="_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv" data-ref-filename="_ZNK7WebCore21IDBDatabaseIdentifier11isTransientEv">isTransient</a>())</td></tr>
<tr><th id="782">782</th><td>            <a class="local col4 ref" href="#574database" title='database' data-ref="574database" data-ref-filename="574database">database</a><span class='ref fn' title='std::__1::unique_ptr::operator-&gt;' data-ref="_ZNKSt3__110unique_ptrptEv" data-ref-filename="_ZNKSt3__110unique_ptrptEv">-&gt;</span><a class="ref fn" href="UniqueIDBDatabase.h.html#_ZN7WebCore9IDBServer17UniqueIDBDatabase23abortActiveTransactionsEv" title='WebCore::IDBServer::UniqueIDBDatabase::abortActiveTransactions' data-ref="_ZN7WebCore9IDBServer17UniqueIDBDatabase23abortActiveTransactionsEv" data-ref-filename="_ZN7WebCore9IDBServer17UniqueIDBDatabase23abortActiveTransactionsEv">abortActiveTransactions</a>();</td></tr>
<tr><th id="783">783</th><td>    }</td></tr>
<tr><th id="784">784</th><td>}</td></tr>
<tr><th id="785">785</th><td></td></tr>
<tr><th id="786">786</th><td>} <i>// namespace IDBServer</i></td></tr>
<tr><th id="787">787</th><td>} <i>// namespace WebCore</i></td></tr>
<tr><th id="788">788</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../../../WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource34.cpp.html'>webkit/WebKitBuild/Debug/DerivedSources/WebCore/unified-sources/UnifiedSource34.cpp</a><br/>Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
