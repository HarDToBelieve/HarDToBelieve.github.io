<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MediaPermissionUtilities.mm source code [webkit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'webkit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm'; var root_path = '../../../../..'; var data_path = '../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>webkit</a>/<a href='../../..'>Source</a>/<a href='../..'>WebKit</a>/<a href='..'>UIProcess</a>/<a href='./'>Cocoa</a>/<a href='MediaPermissionUtilities.mm.html'>MediaPermissionUtilities.mm</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 2020-2021 Apple Inc. All rights reserved.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS''</i></td></tr>
<tr><th id="14">14</th><td><i> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,</i></td></tr>
<tr><th id="15">15</th><td><i> * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="16">16</th><td><i> * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS</i></td></tr>
<tr><th id="17">17</th><td><i> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</i></td></tr>
<tr><th id="18">18</th><td><i> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</i></td></tr>
<tr><th id="19">19</th><td><i> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</i></td></tr>
<tr><th id="20">20</th><td><i> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</i></td></tr>
<tr><th id="21">21</th><td><i> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</i></td></tr>
<tr><th id="22">22</th><td><i> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF</i></td></tr>
<tr><th id="23">23</th><td><i> * THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="24">24</th><td><i> */</i></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#import <a href="../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#import <a href="../MediaPermissionUtilities.h.html">"MediaPermissionUtilities.h"</a></u></td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td><u>#import <a href="../../Shared/Cocoa/SandboxUtilities.h.html">"SandboxUtilities.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#import <a href="../../Shared/Cocoa/TCCSoftLink.h.html">"TCCSoftLink.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#import <a href="../API/Cocoa/WKWebViewInternal.h.html">"WKWebViewInternal.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#import <a href="../WebPageProxy.h.html">"WebPageProxy.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#import <a href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html">&lt;WebCore/LocalizedStrings.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#import <a href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html">&lt;WebCore/SecurityOriginData.h&gt;</a></u></td></tr>
<tr><th id="35">35</th><td><u>#import &lt;mutex&gt;</u></td></tr>
<tr><th id="36">36</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html">&lt;pal/cocoa/AVFoundationSoftLink.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/SpeechSoftLink.h.html">&lt;pal/cocoa/SpeechSoftLink.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html">&lt;wtf/BlockPtr.h&gt;</a></u></td></tr>
<tr><th id="39">39</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/wtf/URLHelpers.h.html">&lt;wtf/URLHelpers.h&gt;</a></u></td></tr>
<tr><th id="40">40</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/cf/CFBundleSPI.h.html">&lt;wtf/spi/cf/CFBundleSPI.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#import <a href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/darwin/SandboxSPI.h.html">&lt;wtf/spi/darwin/SandboxSPI.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><b>namespace</b> <span class="namespace">WebKit</span> {</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><em>bool</em> <dfn class="decl def fn" id="_ZN6WebKit30checkSandboxRequirementForTypeENS_19MediaPermissionTypeE" title='WebKit::checkSandboxRequirementForType' data-ref="_ZN6WebKit30checkSandboxRequirementForTypeENS_19MediaPermissionTypeE" data-ref-filename="_ZN6WebKit30checkSandboxRequirementForTypeENS_19MediaPermissionTypeE">checkSandboxRequirementForType</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a> <dfn class="local col4 decl" id="4type" title='type' data-type='WebKit::MediaPermissionType' data-ref="4type" data-ref-filename="4type">type</dfn>)</td></tr>
<tr><th id="46">46</th><td>{</td></tr>
<tr><th id="47">47</th><td><u>#<span data-ppcond="47">if</span> <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined 1 &amp;&amp; 1)" data-ref="_M/PLATFORM">PLATFORM</a>(MAC)</u></td></tr>
<tr><th id="48">48</th><td>    <em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::once_flag' data-ref="std::__1::once_flag" data-ref-filename="std..__1..once_flag">once_flag</span> <span class='ref fn fake' title='std::__1::once_flag::once_flag' data-ref="_ZNSt3__19once_flagC1Ev" data-ref-filename="_ZNSt3__19once_flagC1Ev"></span><dfn class="local col5 decl" id="5audioFlag" title='audioFlag' data-type='std::once_flag' data-ref="5audioFlag" data-ref-filename="5audioFlag">audioFlag</dfn>;</td></tr>
<tr><th id="49">49</th><td>    <em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::once_flag' data-ref="std::__1::once_flag" data-ref-filename="std..__1..once_flag">once_flag</span> <span class='ref fn fake' title='std::__1::once_flag::once_flag' data-ref="_ZNSt3__19once_flagC1Ev" data-ref-filename="_ZNSt3__19once_flagC1Ev"></span><dfn class="local col6 decl" id="6videoFlag" title='videoFlag' data-type='std::once_flag' data-ref="6videoFlag" data-ref-filename="6videoFlag">videoFlag</dfn>;</td></tr>
<tr><th id="50">50</th><td>    <em>static</em> <em>bool</em> <dfn class="local col7 decl" id="7isAudioEntitled" title='isAudioEntitled' data-type='bool' data-ref="7isAudioEntitled" data-ref-filename="7isAudioEntitled">isAudioEntitled</dfn> = <b>true</b>;</td></tr>
<tr><th id="51">51</th><td>    <em>static</em> <em>bool</em> <dfn class="local col8 decl" id="8isVideoEntitled" title='isVideoEntitled' data-type='bool' data-ref="8isVideoEntitled" data-ref-filename="8isVideoEntitled">isVideoEntitled</dfn> = <b>true</b>;</td></tr>
<tr><th id="52">52</th><td>    </td></tr>
<tr><th id="53">53</th><td>    <em>auto</em> <dfn class="local col9 decl" id="9checkFunction" title='checkFunction' data-type='(lambda at /Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm:53:26)' data-ref="9checkFunction" data-ref-filename="9checkFunction">checkFunction</dfn> = [](<em>const</em> <em>char</em>* <dfn class="local col0 decl" id="10operation" title='operation' data-type='const char *' data-ref="10operation" data-ref-filename="10operation">operation</dfn>, <em>bool</em>* <dfn class="local col1 decl" id="11entitled" title='entitled' data-type='bool *' data-ref="11entitled" data-ref-filename="11entitled">entitled</dfn>) {</td></tr>
<tr><th id="54">54</th><td>        <b>if</b> (!<a class="ref fn" href="../../Shared/Cocoa/SandboxUtilities.h.html#_ZN6WebKit25currentProcessIsSandboxedEv" title='WebKit::currentProcessIsSandboxed' data-ref="_ZN6WebKit25currentProcessIsSandboxedEv" data-ref-filename="_ZN6WebKit25currentProcessIsSandboxedEv">currentProcessIsSandboxed</a>())</td></tr>
<tr><th id="55">55</th><td>            <b>return</b>;</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td>        <em>int</em> <dfn class="local col2 decl" id="12result" title='result' data-type='int' data-ref="12result" data-ref-filename="12result">result</dfn> = <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/darwin/SandboxSPI.h.html#sandbox_check" title='sandbox_check' data-ref="sandbox_check" data-ref-filename="sandbox_check">sandbox_check</a>(<span class='ref fn' title='getpid' data-ref="getpid" data-ref-filename="getpid">getpid</span>(), <a class="local col0 ref" href="#10operation" title='operation' data-ref="10operation" data-ref-filename="10operation">operation</a>, <b>static_cast</b>&lt;<b>enum</b> <a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/darwin/SandboxSPI.h.html#sandbox_filter_type" title='sandbox_filter_type' data-ref="sandbox_filter_type" data-ref-filename="sandbox_filter_type">sandbox_filter_type</a>&gt;(<a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/darwin/SandboxSPI.h.html#SANDBOX_CHECK_NO_REPORT" title='SANDBOX_CHECK_NO_REPORT' data-ref="SANDBOX_CHECK_NO_REPORT" data-ref-filename="SANDBOX_CHECK_NO_REPORT">SANDBOX_CHECK_NO_REPORT</a> | <a class="enum" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/darwin/SandboxSPI.h.html#SANDBOX_FILTER_NONE" title='SANDBOX_FILTER_NONE' data-ref="SANDBOX_FILTER_NONE" data-ref-filename="SANDBOX_FILTER_NONE">SANDBOX_FILTER_NONE</a>));</td></tr>
<tr><th id="58">58</th><td>        <b>if</b> (<a class="local col2 ref" href="#12result" title='result' data-ref="12result" data-ref-filename="12result">result</a> == -<var>1</var>)</td></tr>
<tr><th id="59">59</th><td>            <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#WTFLogAlways" title='WTFLogAlways' data-ref="WTFLogAlways" data-ref-filename="WTFLogAlways">WTFLogAlways</a>(<q>"Error checking '%s' sandbox access, errno=%ld"</q>, <a class="local col0 ref" href="#10operation" title='operation' data-ref="10operation" data-ref-filename="10operation">operation</a>, (<em>long</em>)<span class="macro" title="(*__error())" data-ref="_M/errno">errno</span>);</td></tr>
<tr><th id="60">60</th><td>        *<a class="local col1 ref" href="#11entitled" title='entitled' data-ref="11entitled" data-ref-filename="11entitled">entitled</a> = !<a class="local col2 ref" href="#12result" title='result' data-ref="12result" data-ref-filename="12result">result</a>;</td></tr>
<tr><th id="61">61</th><td>    };</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>    <b>switch</b> (<a class="local col4 ref" href="#4type" title='type' data-ref="4type" data-ref-filename="4type">type</a>) {</td></tr>
<tr><th id="64">64</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Audio" title='WebKit::MediaPermissionType::Audio' data-ref="WebKit::MediaPermissionType::Audio" data-ref-filename="WebKit..MediaPermissionType..Audio">Audio</a>:</td></tr>
<tr><th id="65">65</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::call_once' data-ref="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_" data-ref-filename="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_">call_once</span>(<span class='refarg'><a class="local col5 ref" href="#5audioFlag" title='audioFlag' data-ref="5audioFlag" data-ref-filename="5audioFlag">audioFlag</a></span>, <span class='refarg'><a class="local col9 ref" href="#9checkFunction" title='checkFunction' data-ref="9checkFunction" data-ref-filename="9checkFunction">checkFunction</a></span>, <q>"device-microphone"</q>, &amp;<a class="local col7 ref" href="#7isAudioEntitled" title='isAudioEntitled' data-ref="7isAudioEntitled" data-ref-filename="7isAudioEntitled">isAudioEntitled</a>);</td></tr>
<tr><th id="66">66</th><td>        <b>return</b> <a class="local col7 ref" href="#7isAudioEntitled" title='isAudioEntitled' data-ref="7isAudioEntitled" data-ref-filename="7isAudioEntitled">isAudioEntitled</a>;</td></tr>
<tr><th id="67">67</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Video" title='WebKit::MediaPermissionType::Video' data-ref="WebKit::MediaPermissionType::Video" data-ref-filename="WebKit..MediaPermissionType..Video">Video</a>:</td></tr>
<tr><th id="68">68</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::call_once' data-ref="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_" data-ref-filename="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_">call_once</span>(<span class='refarg'><a class="local col6 ref" href="#6videoFlag" title='videoFlag' data-ref="6videoFlag" data-ref-filename="6videoFlag">videoFlag</a></span>, <span class='refarg'><a class="local col9 ref" href="#9checkFunction" title='checkFunction' data-ref="9checkFunction" data-ref-filename="9checkFunction">checkFunction</a></span>, <q>"device-camera"</q>, &amp;<a class="local col8 ref" href="#8isVideoEntitled" title='isVideoEntitled' data-ref="8isVideoEntitled" data-ref-filename="8isVideoEntitled">isVideoEntitled</a>);</td></tr>
<tr><th id="69">69</th><td>        <b>return</b> <a class="local col8 ref" href="#8isVideoEntitled" title='isVideoEntitled' data-ref="8isVideoEntitled" data-ref-filename="8isVideoEntitled">isVideoEntitled</a>;</td></tr>
<tr><th id="70">70</th><td>    }</td></tr>
<tr><th id="71">71</th><td><u>#<span data-ppcond="47">endif</span></u></td></tr>
<tr><th id="72">72</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="73">73</th><td>}</td></tr>
<tr><th id="74">74</th><td></td></tr>
<tr><th id="75">75</th><td><em>bool</em> <dfn class="decl def fn" id="_ZN6WebKit34checkUsageDescriptionStringForTypeENS_19MediaPermissionTypeE" title='WebKit::checkUsageDescriptionStringForType' data-ref="_ZN6WebKit34checkUsageDescriptionStringForTypeENS_19MediaPermissionTypeE" data-ref-filename="_ZN6WebKit34checkUsageDescriptionStringForTypeENS_19MediaPermissionTypeE">checkUsageDescriptionStringForType</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a> <dfn class="local col3 decl" id="13type" title='type' data-type='WebKit::MediaPermissionType' data-ref="13type" data-ref-filename="13type">type</dfn>)</td></tr>
<tr><th id="76">76</th><td>{</td></tr>
<tr><th id="77">77</th><td>    <em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::once_flag' data-ref="std::__1::once_flag" data-ref-filename="std..__1..once_flag">once_flag</span> <span class='ref fn fake' title='std::__1::once_flag::once_flag' data-ref="_ZNSt3__19once_flagC1Ev" data-ref-filename="_ZNSt3__19once_flagC1Ev"></span><dfn class="local col4 decl" id="14audioDescriptionFlag" title='audioDescriptionFlag' data-type='std::once_flag' data-ref="14audioDescriptionFlag" data-ref-filename="14audioDescriptionFlag">audioDescriptionFlag</dfn>;</td></tr>
<tr><th id="78">78</th><td>    <em>static</em> <span class="namespace">std::</span><span class='type' title='std::__1::once_flag' data-ref="std::__1::once_flag" data-ref-filename="std..__1..once_flag">once_flag</span> <span class='ref fn fake' title='std::__1::once_flag::once_flag' data-ref="_ZNSt3__19once_flagC1Ev" data-ref-filename="_ZNSt3__19once_flagC1Ev"></span><dfn class="local col5 decl" id="15videoDescriptionFlag" title='videoDescriptionFlag' data-type='std::once_flag' data-ref="15videoDescriptionFlag" data-ref-filename="15videoDescriptionFlag">videoDescriptionFlag</dfn>;</td></tr>
<tr><th id="79">79</th><td>    <em>static</em> <em>bool</em> <dfn class="local col6 decl" id="16hasMicrophoneDescriptionString" title='hasMicrophoneDescriptionString' data-type='bool' data-ref="16hasMicrophoneDescriptionString" data-ref-filename="16hasMicrophoneDescriptionString">hasMicrophoneDescriptionString</dfn> = <b>false</b>;</td></tr>
<tr><th id="80">80</th><td>    <em>static</em> <em>bool</em> <dfn class="local col7 decl" id="17hasCameraDescriptionString" title='hasCameraDescriptionString' data-type='bool' data-ref="17hasCameraDescriptionString" data-ref-filename="17hasCameraDescriptionString">hasCameraDescriptionString</dfn> = <b>false</b>;</td></tr>
<tr><th id="81">81</th><td></td></tr>
<tr><th id="82">82</th><td>    <b>switch</b> (<a class="local col3 ref" href="#13type" title='type' data-ref="13type" data-ref-filename="13type">type</a>) {</td></tr>
<tr><th id="83">83</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Audio" title='WebKit::MediaPermissionType::Audio' data-ref="WebKit::MediaPermissionType::Audio" data-ref-filename="WebKit..MediaPermissionType..Audio">Audio</a>:</td></tr>
<tr><th id="84">84</th><td>        <em>static</em> <a class="typedef" href="../../Platform/spi/ios/TCCSPI.h.html#TCCAccessPreflightResult" title='TCCAccessPreflightResult' data-type='enum TCCAccessPreflightResult' data-ref="TCCAccessPreflightResult" data-ref-filename="TCCAccessPreflightResult">TCCAccessPreflightResult</a> <dfn class="local col8 decl" id="18audioAccess" title='audioAccess' data-type='TCCAccessPreflightResult' data-ref="18audioAccess" data-ref-filename="18audioAccess">audioAccess</dfn> = <a class="macro" href="../../Shared/Cocoa/TCCSoftLink.h.html#43" title="WebKit::softLink_TCC_TCCAccessPreflight" data-ref="_M/TCCAccessPreflight">TCCAccessPreflight</a>(<a class="ref fn" href="../../Shared/Cocoa/TCCSoftLink.h.html#36" title='WebKit::get_TCC_kTCCServiceMicrophone' data-ref="_ZN6WebKit29get_TCC_kTCCServiceMicrophoneEv" data-ref-filename="_ZN6WebKit29get_TCC_kTCCServiceMicrophoneEv">get_TCC_kTCCServiceMicrophone</a>(), <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="85">85</th><td>        <b>if</b> (<a class="local col8 ref" href="#18audioAccess" title='audioAccess' data-ref="18audioAccess" data-ref-filename="18audioAccess">audioAccess</a> == <a class="enum" href="../../Platform/spi/ios/TCCSPI.h.html#kTCCAccessPreflightGranted" title='kTCCAccessPreflightGranted' data-ref="kTCCAccessPreflightGranted" data-ref-filename="kTCCAccessPreflightGranted">kTCCAccessPreflightGranted</a>)</td></tr>
<tr><th id="86">86</th><td>            <b>return</b> <b>true</b>;</td></tr>
<tr><th id="87">87</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::call_once' data-ref="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_" data-ref-filename="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_">call_once</span>(<span class='refarg'><a class="local col4 ref" href="#14audioDescriptionFlag" title='audioDescriptionFlag' data-ref="14audioDescriptionFlag" data-ref-filename="14audioDescriptionFlag">audioDescriptionFlag</a></span>, [] {</td></tr>
<tr><th id="88">88</th><td>            <a class="local col6 ref" href="#16hasMicrophoneDescriptionString" title='hasMicrophoneDescriptionString' data-ref="16hasMicrophoneDescriptionString" data-ref-filename="16hasMicrophoneDescriptionString">hasMicrophoneDescriptionString</a> = <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF17dynamic_objc_castEP11objc_object" title='WTF::dynamic_objc_cast' data-ref="_ZN3WTF17dynamic_objc_castEP11objc_object" data-ref-filename="_ZN3WTF17dynamic_objc_castEP11objc_object">dynamic_objc_cast</a>&lt;NSString&gt;(NSBundle.mainBundle.infoDictionary[@<q>"NSMicrophoneUsageDescription"</q>]).length &gt; <var>0</var>;</td></tr>
<tr><th id="89">89</th><td>        });</td></tr>
<tr><th id="90">90</th><td>        <b>return</b> <a class="local col6 ref" href="#16hasMicrophoneDescriptionString" title='hasMicrophoneDescriptionString' data-ref="16hasMicrophoneDescriptionString" data-ref-filename="16hasMicrophoneDescriptionString">hasMicrophoneDescriptionString</a>;</td></tr>
<tr><th id="91">91</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Video" title='WebKit::MediaPermissionType::Video' data-ref="WebKit::MediaPermissionType::Video" data-ref-filename="WebKit..MediaPermissionType..Video">Video</a>:</td></tr>
<tr><th id="92">92</th><td>        <em>static</em> <a class="typedef" href="../../Platform/spi/ios/TCCSPI.h.html#TCCAccessPreflightResult" title='TCCAccessPreflightResult' data-type='enum TCCAccessPreflightResult' data-ref="TCCAccessPreflightResult" data-ref-filename="TCCAccessPreflightResult">TCCAccessPreflightResult</a> <dfn class="local col9 decl" id="19videoAccess" title='videoAccess' data-type='TCCAccessPreflightResult' data-ref="19videoAccess" data-ref-filename="19videoAccess">videoAccess</dfn> = <a class="macro" href="../../Shared/Cocoa/TCCSoftLink.h.html#43" title="WebKit::softLink_TCC_TCCAccessPreflight" data-ref="_M/TCCAccessPreflight">TCCAccessPreflight</a>(<a class="ref fn" href="../../Shared/Cocoa/TCCSoftLink.h.html#35" title='WebKit::get_TCC_kTCCServiceCamera' data-ref="_ZN6WebKit25get_TCC_kTCCServiceCameraEv" data-ref-filename="_ZN6WebKit25get_TCC_kTCCServiceCameraEv">get_TCC_kTCCServiceCamera</a>(), <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="93">93</th><td>        <b>if</b> (<a class="local col9 ref" href="#19videoAccess" title='videoAccess' data-ref="19videoAccess" data-ref-filename="19videoAccess">videoAccess</a> == <a class="enum" href="../../Platform/spi/ios/TCCSPI.h.html#kTCCAccessPreflightGranted" title='kTCCAccessPreflightGranted' data-ref="kTCCAccessPreflightGranted" data-ref-filename="kTCCAccessPreflightGranted">kTCCAccessPreflightGranted</a>)</td></tr>
<tr><th id="94">94</th><td>            <b>return</b> <b>true</b>;</td></tr>
<tr><th id="95">95</th><td>        <span class="namespace">std::</span><span class='ref fn' title='std::__1::call_once' data-ref="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_" data-ref-filename="_ZNSt3__1L9call_onceERNS_9once_flagEOT_DpOT0_">call_once</span>(<span class='refarg'><a class="local col5 ref" href="#15videoDescriptionFlag" title='videoDescriptionFlag' data-ref="15videoDescriptionFlag" data-ref-filename="15videoDescriptionFlag">videoDescriptionFlag</a></span>, [] {</td></tr>
<tr><th id="96">96</th><td>            <a class="local col7 ref" href="#17hasCameraDescriptionString" title='hasCameraDescriptionString' data-ref="17hasCameraDescriptionString" data-ref-filename="17hasCameraDescriptionString">hasCameraDescriptionString</a> = <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF17dynamic_objc_castEP11objc_object" title='WTF::dynamic_objc_cast' data-ref="_ZN3WTF17dynamic_objc_castEP11objc_object" data-ref-filename="_ZN3WTF17dynamic_objc_castEP11objc_object">dynamic_objc_cast</a>&lt;NSString&gt;(NSBundle.mainBundle.infoDictionary[@<q>"NSCameraUsageDescription"</q>]).length &gt; <var>0</var>;</td></tr>
<tr><th id="97">97</th><td>        });</td></tr>
<tr><th id="98">98</th><td>        <b>return</b> <a class="local col7 ref" href="#17hasCameraDescriptionString" title='hasCameraDescriptionString' data-ref="17hasCameraDescriptionString" data-ref-filename="17hasCameraDescriptionString">hasCameraDescriptionString</a>;</td></tr>
<tr><th id="99">99</th><td>    }</td></tr>
<tr><th id="100">100</th><td>}</td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td><em>bool</em> <dfn class="decl def fn" id="_ZN6WebKit47checkUsageDescriptionStringForSpeechRecognitionEv" title='WebKit::checkUsageDescriptionStringForSpeechRecognition' data-ref="_ZN6WebKit47checkUsageDescriptionStringForSpeechRecognitionEv" data-ref-filename="_ZN6WebKit47checkUsageDescriptionStringForSpeechRecognitionEv">checkUsageDescriptionStringForSpeechRecognition</dfn>()</td></tr>
<tr><th id="103">103</th><td>{</td></tr>
<tr><th id="104">104</th><td>    <b>return</b> <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF17dynamic_objc_castEP11objc_object" title='WTF::dynamic_objc_cast' data-ref="_ZN3WTF17dynamic_objc_castEP11objc_object" data-ref-filename="_ZN3WTF17dynamic_objc_castEP11objc_object">dynamic_objc_cast</a>&lt;NSString&gt;(NSBundle.mainBundle.infoDictionary[@<q>"NSSpeechRecognitionUsageDescription"</q>]).length &gt; <var>0</var>;</td></tr>
<tr><th id="105">105</th><td>}</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td><em>static</em> NSString* <dfn class="decl def fn" id="_ZN6WebKitL13visibleDomainERKN3WTF6StringE" title='WebKit::visibleDomain' data-ref="_ZN6WebKitL13visibleDomainERKN3WTF6StringE" data-ref-filename="_ZN6WebKitL13visibleDomainERKN3WTF6StringE">visibleDomain</dfn>(<em>const</em> <a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col0 decl" id="20host" title='host' data-type='const WTF::String &amp;' data-ref="20host" data-ref-filename="20host">host</dfn>)</td></tr>
<tr><th id="108">108</th><td>{</td></tr>
<tr><th id="109">109</th><td>    <em>auto</em> <dfn class="local col1 decl" id="21domain" title='domain' data-type='WTF::String' data-ref="21domain" data-ref-filename="21domain">domain</dfn> = <span class="namespace">WTF::URLHelpers::</span><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/URLHelpers.h.html#_ZN3WTF10URLHelpers14userVisibleURLERKNS_7CStringE" title='WTF::URLHelpers::userVisibleURL' data-ref="_ZN3WTF10URLHelpers14userVisibleURLERKNS_7CStringE" data-ref-filename="_ZN3WTF10URLHelpers14userVisibleURLERKNS_7CStringE">userVisibleURL</a>(<a class="local col0 ref" href="#20host" title='host' data-ref="20host" data-ref-filename="20host">host</a>.<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String4utf8Ev" title='WTF::String::utf8' data-ref="_ZNK3WTF6String4utf8Ev" data-ref-filename="_ZNK3WTF6String4utf8Ev">utf8</a>());</td></tr>
<tr><th id="110">110</th><td>    <b>return</b> <a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6StringcvP8NSStringEv" title='WTF::String::operator NSString *' data-ref="_ZNK3WTF6StringcvP8NSStringEv" data-ref-filename="_ZNK3WTF6StringcvP8NSStringEv"></a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF34startsWithLettersIgnoringASCIICaseERKNS_6StringERAT__Kc" title='WTF::startsWithLettersIgnoringASCIICase' data-ref="_ZN3WTF34startsWithLettersIgnoringASCIICaseERKNS_6StringERAT__Kc" data-ref-filename="_ZN3WTF34startsWithLettersIgnoringASCIICaseERKNS_6StringERAT__Kc">startsWithLettersIgnoringASCIICase</a>(<a class="local col1 ref" href="#21domain" title='domain' data-ref="21domain" data-ref-filename="21domain">domain</a>, <q>"www."</q>) ? <a class="local col1 ref" href="#21domain" title='domain' data-ref="21domain" data-ref-filename="21domain">domain</a>.<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String9substringEjj" title='WTF::String::substring' data-ref="_ZNK3WTF6String9substringEjj" data-ref-filename="_ZNK3WTF6String9substringEjj">substring</a>(<var>4</var>) : <a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTF6StringC1ERKS0_" title='WTF::String::String' data-ref="_ZN3WTF6StringC1ERKS0_" data-ref-filename="_ZN3WTF6StringC1ERKS0_"></a><a class="local col1 ref" href="#21domain" title='domain' data-ref="21domain" data-ref-filename="21domain">domain</a>;</td></tr>
<tr><th id="111">111</th><td>}</td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td><em>static</em> NSString *<dfn class="decl def fn" id="_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE" title='WebKit::alertMessageText' data-ref="_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE" data-ref-filename="_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE">alertMessageText</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a> <dfn class="local col2 decl" id="22reason" title='reason' data-type='WebKit::MediaPermissionReason' data-ref="22reason" data-ref-filename="22reason">reason</dfn>, <em>const</em> <span class="namespace">WebCore::</span><a class="type" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col3 decl" id="23origin" title='origin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="23origin" data-ref-filename="23origin">origin</dfn>)</td></tr>
<tr><th id="114">114</th><td>{</td></tr>
<tr><th id="115">115</th><td>    NSString *<dfn class="local col4 decl" id="24visibleOrigin" title='visibleOrigin' data-type='NSString *' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</dfn>;</td></tr>
<tr><th id="116">116</th><td>    <b>if</b> (<a class="local col3 ref" href="#23origin" title='origin' data-ref="23origin" data-ref-filename="23origin">origin</a>.<a class="ref field" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData::protocol" title='WebCore::SecurityOriginData::protocol' data-ref="WebCore::SecurityOriginData::protocol" data-ref-filename="WebCore..SecurityOriginData..protocol">protocol</a> <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTFneERKNS_6StringEPKc" title='WTF::operator!=' data-ref="_ZN3WTFneERKNS_6StringEPKc" data-ref-filename="_ZN3WTFneERKNS_6StringEPKc">!=</a> <q>"http"</q> &amp;&amp; <a class="local col3 ref" href="#23origin" title='origin' data-ref="23origin" data-ref-filename="23origin">origin</a>.<a class="ref field" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData::protocol" title='WebCore::SecurityOriginData::protocol' data-ref="WebCore::SecurityOriginData::protocol" data-ref-filename="WebCore..SecurityOriginData..protocol">protocol</a> <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZN3WTFneERKNS_6StringEPKc" title='WTF::operator!=' data-ref="_ZN3WTFneERKNS_6StringEPKc" data-ref-filename="_ZN3WTFneERKNS_6StringEPKc">!=</a> <q>"https"</q>) {</td></tr>
<tr><th id="117">117</th><td>        NSBundle *<dfn class="local col5 decl" id="25appBundle" title='appBundle' data-type='NSBundle *' data-ref="25appBundle" data-ref-filename="25appBundle">appBundle</dfn> = [NSBundle mainBundle];</td></tr>
<tr><th id="118">118</th><td>        NSString *<dfn class="local col6 decl" id="26displayName" title='displayName' data-type='NSString *' data-ref="26displayName" data-ref-filename="26displayName">displayName</dfn> = <a class="local col5 ref" href="#25appBundle" title='appBundle' data-ref="25appBundle" data-ref-filename="25appBundle">appBundle</a>.infoDictionary[(<b>__bridge</b> NSString *)<a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/spi/cf/CFBundleSPI.h.html#_kCFBundleDisplayNameKey" title='_kCFBundleDisplayNameKey' data-ref="_kCFBundleDisplayNameKey" data-ref-filename="_kCFBundleDisplayNameKey">_kCFBundleDisplayNameKey</a>];</td></tr>
<tr><th id="119">119</th><td>        NSString *<dfn class="local col7 decl" id="27readableName" title='readableName' data-type='NSString *' data-ref="27readableName" data-ref-filename="27readableName">readableName</dfn> = <a class="local col5 ref" href="#25appBundle" title='appBundle' data-ref="25appBundle" data-ref-filename="25appBundle">appBundle</a>.infoDictionary[(<b>__bridge</b> NSString *)<span class='ref' title='kCFBundleNameKey' data-ref="kCFBundleNameKey" data-ref-filename="kCFBundleNameKey">kCFBundleNameKey</span>];</td></tr>
<tr><th id="120">120</th><td>        <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a> = <a class="local col6 ref" href="#26displayName" title='displayName' data-ref="26displayName" data-ref-filename="26displayName">displayName</a> ?: <a class="local col7 ref" href="#27readableName" title='readableName' data-ref="27readableName" data-ref-filename="27readableName">readableName</a>;</td></tr>
<tr><th id="121">121</th><td>    } <b>else</b></td></tr>
<tr><th id="122">122</th><td>        <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a> = <a class="ref fn" href="#_ZN6WebKitL13visibleDomainERKN3WTF6StringE" title='WebKit::visibleDomain' data-ref="_ZN6WebKitL13visibleDomainERKN3WTF6StringE" data-ref-filename="_ZN6WebKitL13visibleDomainERKN3WTF6StringE">visibleDomain</a>(<a class="local col3 ref" href="#23origin" title='origin' data-ref="23origin" data-ref-filename="23origin">origin</a>.<a class="ref field" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData::host" title='WebCore::SecurityOriginData::host' data-ref="WebCore::SecurityOriginData::host" data-ref-filename="WebCore..SecurityOriginData..host">host</a>);</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td>    <b>switch</b> (<a class="local col2 ref" href="#22reason" title='reason' data-ref="22reason" data-ref-filename="22reason">reason</a>) {</td></tr>
<tr><th id="125">125</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Camera" title='WebKit::MediaPermissionReason::Camera' data-ref="WebKit::MediaPermissionReason::Camera" data-ref-filename="WebKit..MediaPermissionReason..Camera">Camera</a>:</td></tr>
<tr><th id="126">126</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;Allow “%@” to use your camera?&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"Allow “%@” to use your camera?"</q>, @<q>"Message for user camera access prompt"</q>), <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a>];</td></tr>
<tr><th id="127">127</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::CameraAndMicrophone" title='WebKit::MediaPermissionReason::CameraAndMicrophone' data-ref="WebKit::MediaPermissionReason::CameraAndMicrophone" data-ref-filename="WebKit..MediaPermissionReason..CameraAndMicrophone">CameraAndMicrophone</a>:</td></tr>
<tr><th id="128">128</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;Allow “%@” to use your camera and microphone?&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"Allow “%@” to use your camera and microphone?"</q>, @<q>"Message for user media prompt"</q>), <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a>];</td></tr>
<tr><th id="129">129</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Microphone" title='WebKit::MediaPermissionReason::Microphone' data-ref="WebKit::MediaPermissionReason::Microphone" data-ref-filename="WebKit..MediaPermissionReason..Microphone">Microphone</a>:</td></tr>
<tr><th id="130">130</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;Allow “%@” to use your microphone?&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"Allow “%@” to use your microphone?"</q>, @<q>"Message for user microphone access prompt"</q>), <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a>];</td></tr>
<tr><th id="131">131</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::DeviceOrientation" title='WebKit::MediaPermissionReason::DeviceOrientation' data-ref="WebKit::MediaPermissionReason::DeviceOrientation" data-ref-filename="WebKit..MediaPermissionReason..DeviceOrientation">DeviceOrientation</a>:</td></tr>
<tr><th id="132">132</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;“%@” Would Like to Access Motion and Orientation&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"“%@” Would Like to Access Motion and Orientation"</q>, @<q>"Message for requesting access to the device motion and orientation"</q>), <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a>];</td></tr>
<tr><th id="133">133</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Geolocation" title='WebKit::MediaPermissionReason::Geolocation' data-ref="WebKit::MediaPermissionReason::Geolocation" data-ref-filename="WebKit..MediaPermissionReason..Geolocation">Geolocation</a>:</td></tr>
<tr><th id="134">134</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;Allow “%@” to use your current location?&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"Allow “%@” to use your current location?"</q>, @<q>"Message for geolocation prompt"</q>), <a class="local col4 ref" href="#24visibleOrigin" title='visibleOrigin' data-ref="24visibleOrigin" data-ref-filename="24visibleOrigin">visibleOrigin</a>];</td></tr>
<tr><th id="135">135</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::SpeechRecognition" title='WebKit::MediaPermissionReason::SpeechRecognition' data-ref="WebKit::MediaPermissionReason::SpeechRecognition" data-ref-filename="WebKit..MediaPermissionReason..SpeechRecognition">SpeechRecognition</a>:</td></tr>
<tr><th id="136">136</th><td>        <b>return</b> [NSString stringWithFormat:<a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#400" title="WebCore::localizedNSString(@&quot;Allow “%@” to capture your audio and use it for speech recognition?&quot;)" data-ref="_M/WEB_UI_NSSTRING">WEB_UI_NSSTRING</a>(@<q>"Allow “%@” to capture your audio and use it for speech recognition?"</q>, @<q>"Message for spechrecognition prompt"</q>), <a class="ref fn" href="#_ZN6WebKitL13visibleDomainERKN3WTF6StringE" title='WebKit::visibleDomain' data-ref="_ZN6WebKitL13visibleDomainERKN3WTF6StringE" data-ref-filename="_ZN6WebKitL13visibleDomainERKN3WTF6StringE">visibleDomain</a>(<a class="local col3 ref" href="#23origin" title='origin' data-ref="23origin" data-ref-filename="23origin">origin</a>.<a class="ref field" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData::host" title='WebCore::SecurityOriginData::host' data-ref="WebCore::SecurityOriginData::host" data-ref-filename="WebCore..SecurityOriginData..host">host</a>)];</td></tr>
<tr><th id="137">137</th><td>    }</td></tr>
<tr><th id="138">138</th><td>}</td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td><em>static</em> NSString *<dfn class="decl def fn" id="_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE" title='WebKit::allowButtonText' data-ref="_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE" data-ref-filename="_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE">allowButtonText</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a> <dfn class="local col8 decl" id="28reason" title='reason' data-type='WebKit::MediaPermissionReason' data-ref="28reason" data-ref-filename="28reason">reason</dfn>)</td></tr>
<tr><th id="141">141</th><td>{</td></tr>
<tr><th id="142">142</th><td>    <b>switch</b> (<a class="local col8 ref" href="#28reason" title='reason' data-ref="28reason" data-ref-filename="28reason">reason</a>) {</td></tr>
<tr><th id="143">143</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Camera" title='WebKit::MediaPermissionReason::Camera' data-ref="WebKit::MediaPermissionReason::Camera" data-ref-filename="WebKit..MediaPermissionReason..Camera">Camera</a>:</td></tr>
<tr><th id="144">144</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::CameraAndMicrophone" title='WebKit::MediaPermissionReason::CameraAndMicrophone' data-ref="WebKit::MediaPermissionReason::CameraAndMicrophone" data-ref-filename="WebKit..MediaPermissionReason..CameraAndMicrophone">CameraAndMicrophone</a>:</td></tr>
<tr><th id="145">145</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Microphone" title='WebKit::MediaPermissionReason::Microphone' data-ref="WebKit::MediaPermissionReason::Microphone" data-ref-filename="WebKit..MediaPermissionReason..Microphone">Microphone</a>:</td></tr>
<tr><th id="146">146</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Allow (usermedia)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Allow"</q>, <q>"Allow (usermedia)"</q>, @<q>"Allow button title in user media prompt"</q>);</td></tr>
<tr><th id="147">147</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::DeviceOrientation" title='WebKit::MediaPermissionReason::DeviceOrientation' data-ref="WebKit::MediaPermissionReason::DeviceOrientation" data-ref-filename="WebKit..MediaPermissionReason..DeviceOrientation">DeviceOrientation</a>:</td></tr>
<tr><th id="148">148</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Allow (device motion and orientation access)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Allow"</q>, <q>"Allow (device motion and orientation access)"</q>, @<q>"Button title in Device Orientation Permission API prompt"</q>);</td></tr>
<tr><th id="149">149</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Geolocation" title='WebKit::MediaPermissionReason::Geolocation' data-ref="WebKit::MediaPermissionReason::Geolocation" data-ref-filename="WebKit..MediaPermissionReason..Geolocation">Geolocation</a>:</td></tr>
<tr><th id="150">150</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Allow (geolocation)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Allow"</q>, <q>"Allow (geolocation)"</q>, @<q>"Allow button title in geolocation prompt"</q>);</td></tr>
<tr><th id="151">151</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::SpeechRecognition" title='WebKit::MediaPermissionReason::SpeechRecognition' data-ref="WebKit::MediaPermissionReason::SpeechRecognition" data-ref-filename="WebKit..MediaPermissionReason..SpeechRecognition">SpeechRecognition</a>:</td></tr>
<tr><th id="152">152</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Allow (speechrecognition)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Allow"</q>, <q>"Allow (speechrecognition)"</q>, @<q>"Allow button title in speech recognition prompt"</q>);</td></tr>
<tr><th id="153">153</th><td>    }</td></tr>
<tr><th id="154">154</th><td>}</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td><em>static</em> NSString *<dfn class="decl def fn" id="_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE" title='WebKit::doNotAllowButtonText' data-ref="_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE" data-ref-filename="_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE">doNotAllowButtonText</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a> <dfn class="local col9 decl" id="29reason" title='reason' data-type='WebKit::MediaPermissionReason' data-ref="29reason" data-ref-filename="29reason">reason</dfn>)</td></tr>
<tr><th id="157">157</th><td>{</td></tr>
<tr><th id="158">158</th><td>    <b>switch</b> (<a class="local col9 ref" href="#29reason" title='reason' data-ref="29reason" data-ref-filename="29reason">reason</a>) {</td></tr>
<tr><th id="159">159</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Camera" title='WebKit::MediaPermissionReason::Camera' data-ref="WebKit::MediaPermissionReason::Camera" data-ref-filename="WebKit..MediaPermissionReason..Camera">Camera</a>:</td></tr>
<tr><th id="160">160</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::CameraAndMicrophone" title='WebKit::MediaPermissionReason::CameraAndMicrophone' data-ref="WebKit::MediaPermissionReason::CameraAndMicrophone" data-ref-filename="WebKit..MediaPermissionReason..CameraAndMicrophone">CameraAndMicrophone</a>:</td></tr>
<tr><th id="161">161</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Microphone" title='WebKit::MediaPermissionReason::Microphone' data-ref="WebKit::MediaPermissionReason::Microphone" data-ref-filename="WebKit..MediaPermissionReason..Microphone">Microphone</a>:</td></tr>
<tr><th id="162">162</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Don’t Allow (usermedia)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Don’t Allow"</q>, <q>"Don’t Allow (usermedia)"</q>, @<q>"Disallow button title in user media prompt"</q>);</td></tr>
<tr><th id="163">163</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::DeviceOrientation" title='WebKit::MediaPermissionReason::DeviceOrientation' data-ref="WebKit::MediaPermissionReason::DeviceOrientation" data-ref-filename="WebKit..MediaPermissionReason..DeviceOrientation">DeviceOrientation</a>:</td></tr>
<tr><th id="164">164</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Cancel (device motion and orientation access)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Cancel"</q>, <q>"Cancel (device motion and orientation access)"</q>, @<q>"Button title in Device Orientation Permission API prompt"</q>);</td></tr>
<tr><th id="165">165</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::Geolocation" title='WebKit::MediaPermissionReason::Geolocation' data-ref="WebKit::MediaPermissionReason::Geolocation" data-ref-filename="WebKit..MediaPermissionReason..Geolocation">Geolocation</a>:</td></tr>
<tr><th id="166">166</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Don’t Allow (geolocation)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Don’t Allow"</q>, <q>"Don’t Allow (geolocation)"</q>, @<q>"Disallow button title in geolocation prompt"</q>);</td></tr>
<tr><th id="167">167</th><td>    <b>case</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason::SpeechRecognition" title='WebKit::MediaPermissionReason::SpeechRecognition' data-ref="WebKit::MediaPermissionReason::SpeechRecognition" data-ref-filename="WebKit..MediaPermissionReason..SpeechRecognition">SpeechRecognition</a>:</td></tr>
<tr><th id="168">168</th><td>        <b>return</b> <a class="macro" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/LocalizedStrings.h.html#386" title="WebCore::localizedString(&quot;Don’t Allow (speechrecognition)&quot;)" data-ref="_M/WEB_UI_STRING_KEY">WEB_UI_STRING_KEY</a>(@<q>"Don’t Allow"</q>, <q>"Don’t Allow (speechrecognition)"</q>, @<q>"Disallow button title in speech recognition prompt"</q>);</td></tr>
<tr><th id="169">169</th><td>    }</td></tr>
<tr><th id="170">170</th><td>}</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td><em>void</em> <dfn class="decl def fn" id="_ZN6WebKit18alertForPermissionERNS_12WebPageProxyENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataEON3WTF17CompletionHandlerIFvbEEE" title='WebKit::alertForPermission' data-ref="_ZN6WebKit18alertForPermissionERNS_12WebPageProxyENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataEON3WTF17CompletionHandlerIFvbEEE" data-ref-filename="_ZN6WebKit18alertForPermissionERNS_12WebPageProxyENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataEON3WTF17CompletionHandlerIFvbEEE">alertForPermission</dfn>(<a class="type" href="../WebPageProxy.h.html#WebKit::WebPageProxy" title='WebKit::WebPageProxy' data-ref="WebKit::WebPageProxy" data-ref-filename="WebKit..WebPageProxy">WebPageProxy</a>&amp; <dfn class="local col0 decl" id="30page" title='page' data-type='WebKit::WebPageProxy &amp;' data-ref="30page" data-ref-filename="30page">page</dfn>, <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionReason" title='WebKit::MediaPermissionReason' data-ref="WebKit::MediaPermissionReason" data-ref-filename="WebKit..MediaPermissionReason">MediaPermissionReason</a> <dfn class="local col1 decl" id="31reason" title='reason' data-type='WebKit::MediaPermissionReason' data-ref="31reason" data-ref-filename="31reason">reason</dfn>, <em>const</em> <span class="namespace">WebCore::</span><a class="type" href="../../../../WebKitBuild/Debug/WebCore.framework/Versions/A/PrivateHeaders/SecurityOriginData.h.html#WebCore::SecurityOriginData" title='WebCore::SecurityOriginData' data-ref="WebCore::SecurityOriginData" data-ref-filename="WebCore..SecurityOriginData">SecurityOriginData</a>&amp; <dfn class="local col2 decl" id="32origin" title='origin' data-type='const WebCore::SecurityOriginData &amp;' data-ref="32origin" data-ref-filename="32origin">origin</dfn>, <a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::CompletionHandler" title='WTF::CompletionHandler' data-ref="WTF::CompletionHandler" data-ref-filename="WTF..CompletionHandler">CompletionHandler</a>&lt;<em>void</em>(<em>bool</em>)&gt;&amp;&amp; <dfn class="local col3 decl" id="33completionHandler" title='completionHandler' data-type='CompletionHandler&lt;void (bool)&gt; &amp;&amp;' data-ref="33completionHandler" data-ref-filename="33completionHandler">completionHandler</dfn>)</td></tr>
<tr><th id="173">173</th><td>{</td></tr>
<tr><th id="174">174</th><td><u>#<span data-ppcond="174">if</span> <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined WTF_PLATFORM_IOS_FAMILY &amp;&amp; WTF_PLATFORM_IOS_FAMILY)" data-ref="_M/PLATFORM">PLATFORM</a>(IOS_FAMILY)</u></td></tr>
<tr><th id="175">175</th><td>    <b>if</b> (reason == MediaPermissionReason::DeviceOrientation) {</td></tr>
<tr><th id="176">176</th><td>        <b>if</b> (<em>auto</em>&amp; userPermissionHandler = page.deviceOrientationUserPermissionHandlerForTesting())</td></tr>
<tr><th id="177">177</th><td>            <b>return</b> completionHandler(userPermissionHandler());</td></tr>
<tr><th id="178">178</th><td>    }</td></tr>
<tr><th id="179">179</th><td><u>#<span data-ppcond="174">endif</span></u></td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td>    <em>auto</em> <dfn class="local col4 decl" id="34webView" title='webView' data-type='WTF::RetainPtr&lt;WKWebView&gt;' data-ref="34webView" data-ref-filename="34webView">webView</dfn> = <a class="local col0 ref" href="#30page" title='page' data-ref="30page" data-ref-filename="30page">page</a>.<a class="ref fn" href="../WebPageProxy.h.html#_ZN6WebKit12WebPageProxy9cocoaViewEv" title='WebKit::WebPageProxy::cocoaView' data-ref="_ZN6WebKit12WebPageProxy9cocoaViewEv" data-ref-filename="_ZN6WebKit12WebPageProxy9cocoaViewEv">cocoaView</a>();</td></tr>
<tr><th id="182">182</th><td>    <b>if</b> (<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrntEv" title='WTF::RetainPtr::operator!' data-ref="_ZNK3WTF9RetainPtrntEv" data-ref-filename="_ZNK3WTF9RetainPtrntEv">!</a><a class="local col4 ref" href="#34webView" title='webView' data-ref="34webView" data-ref-filename="34webView">webView</a>) {</td></tr>
<tr><th id="183">183</th><td>        <a class="local col3 ref" href="#33completionHandler" title='completionHandler' data-ref="33completionHandler" data-ref-filename="33completionHandler">completionHandler</a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_">(<b>false</b>)</a>;</td></tr>
<tr><th id="184">184</th><td>        <b>return</b>;</td></tr>
<tr><th id="185">185</th><td>    }</td></tr>
<tr><th id="186">186</th><td>    </td></tr>
<tr><th id="187">187</th><td>    <em>auto</em> *<dfn class="local col5 decl" id="35alertTitle" title='alertTitle' data-type='NSString *' data-ref="35alertTitle" data-ref-filename="35alertTitle">alertTitle</dfn> = <a class="ref fn" href="#_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE" title='WebKit::alertMessageText' data-ref="_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE" data-ref-filename="_ZN6WebKitL16alertMessageTextENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataE">alertMessageText</a>(<a class="local col1 ref" href="#31reason" title='reason' data-ref="31reason" data-ref-filename="31reason">reason</a>, <a class="local col2 ref" href="#32origin" title='origin' data-ref="32origin" data-ref-filename="32origin">origin</a>);</td></tr>
<tr><th id="188">188</th><td>    <b>if</b> (!<a class="local col5 ref" href="#35alertTitle" title='alertTitle' data-ref="35alertTitle" data-ref-filename="35alertTitle">alertTitle</a>) {</td></tr>
<tr><th id="189">189</th><td>        <a class="local col3 ref" href="#33completionHandler" title='completionHandler' data-ref="33completionHandler" data-ref-filename="33completionHandler">completionHandler</a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_">(<b>false</b>)</a>;</td></tr>
<tr><th id="190">190</th><td>        <b>return</b>;</td></tr>
<tr><th id="191">191</th><td>    }</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td>    <em>auto</em> *<dfn class="local col6 decl" id="36allowButtonString" title='allowButtonString' data-type='NSString *' data-ref="36allowButtonString" data-ref-filename="36allowButtonString">allowButtonString</dfn> = <a class="ref fn" href="#_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE" title='WebKit::allowButtonText' data-ref="_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE" data-ref-filename="_ZN6WebKitL15allowButtonTextENS_21MediaPermissionReasonE">allowButtonText</a>(<a class="local col1 ref" href="#31reason" title='reason' data-ref="31reason" data-ref-filename="31reason">reason</a>);</td></tr>
<tr><th id="194">194</th><td>    <em>auto</em> *<dfn class="local col7 decl" id="37doNotAllowButtonString" title='doNotAllowButtonString' data-type='NSString *' data-ref="37doNotAllowButtonString" data-ref-filename="37doNotAllowButtonString">doNotAllowButtonString</dfn> = <a class="ref fn" href="#_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE" title='WebKit::doNotAllowButtonText' data-ref="_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE" data-ref-filename="_ZN6WebKitL20doNotAllowButtonTextENS_21MediaPermissionReasonE">doNotAllowButtonText</a>(<a class="local col1 ref" href="#31reason" title='reason' data-ref="31reason" data-ref-filename="31reason">reason</a>);</td></tr>
<tr><th id="195">195</th><td>    <em>auto</em> <dfn class="local col8 decl" id="38completionBlock" title='completionBlock' data-type='WTF::BlockPtr&lt;void (bool)&gt;' data-ref="38completionBlock" data-ref-filename="38completionBlock">completionBlock</dfn> = <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZN3WTF12makeBlockPtrEOT_" title='WTF::makeBlockPtr' data-ref="_ZN3WTF12makeBlockPtrEOT_" data-ref-filename="_ZN3WTF12makeBlockPtrEOT_">makeBlockPtr</a>(<a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(completionHandler)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col3 ref" href="#33completionHandler" title='completionHandler' data-ref="33completionHandler" data-ref-filename="33completionHandler">completionHandler</a></span>));</td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td><u>#<span data-ppcond="197">if</span> <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformLegacy.h.html#38" title="(defined 1 &amp;&amp; 1)" data-ref="_M/PLATFORM">PLATFORM</a>(MAC)</u></td></tr>
<tr><th id="198">198</th><td>    <em>auto</em> <dfn class="local col9 decl" id="39alert" title='alert' data-type='WTF::RetainPtr&lt;NSAlert&gt;' data-ref="39alert" data-ref-filename="39alert">alert</dfn> = <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF7adoptNSET_" title='WTF::adoptNS' data-ref="_ZN3WTF7adoptNSET_" data-ref-filename="_ZN3WTF7adoptNSET_">adoptNS</a>([NSAlert <b>new</b>]);</td></tr>
<tr><th id="199">199</th><td>    [<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col9 ref" href="#39alert" title='alert' data-ref="39alert" data-ref-filename="39alert">alert</a> setMessageText:<a class="local col5 ref" href="#35alertTitle" title='alertTitle' data-ref="35alertTitle" data-ref-filename="35alertTitle">alertTitle</a>];</td></tr>
<tr><th id="200">200</th><td>    NSButton *<dfn class="local col0 decl" id="40button" title='button' data-type='NSButton *' data-ref="40button" data-ref-filename="40button">button</dfn> = [<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col9 ref" href="#39alert" title='alert' data-ref="39alert" data-ref-filename="39alert">alert</a> addButtonWithTitle:<a class="local col6 ref" href="#36allowButtonString" title='allowButtonString' data-ref="36allowButtonString" data-ref-filename="36allowButtonString">allowButtonString</a>];</td></tr>
<tr><th id="201">201</th><td>    <a class="local col0 ref" href="#40button" title='button' data-ref="40button" data-ref-filename="40button">button</a>.keyEquivalent = @<q>""</q>;</td></tr>
<tr><th id="202">202</th><td>    <a class="local col0 ref" href="#40button" title='button' data-ref="40button" data-ref-filename="40button">button</a> = [<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col9 ref" href="#39alert" title='alert' data-ref="39alert" data-ref-filename="39alert">alert</a> addButtonWithTitle:<a class="local col7 ref" href="#37doNotAllowButtonString" title='doNotAllowButtonString' data-ref="37doNotAllowButtonString" data-ref-filename="37doNotAllowButtonString">doNotAllowButtonString</a>];</td></tr>
<tr><th id="203">203</th><td>    <a class="local col0 ref" href="#40button" title='button' data-ref="40button" data-ref-filename="40button">button</a>.keyEquivalent = @<q>"\E"</q>;</td></tr>
<tr><th id="204">204</th><td>    [<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col9 ref" href="#39alert" title='alert' data-ref="39alert" data-ref-filename="39alert">alert</a> beginSheetModalForWindow:[<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col4 ref" href="#34webView" title='webView' data-ref="34webView" data-ref-filename="34webView">webView</a> window] completionHandler:<a class="ref fn fake" href="#204" title='WebKit::alertForPermission(WebKit::WebPageProxy &amp;, WebKit::MediaPermissionReason, const WebCore::SecurityOriginData &amp;, CompletionHandler&lt;void (bool)&gt; &amp;&amp;)::(anonymous class)::' data-ref="_ZZN6WebKit18alertForPermissionERNS_12WebPageProxyENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataEON3WTF17CompletionHandlerIFvbEEEEN3$_0C1ERKSC_" data-ref-filename="_ZZN6WebKit18alertForPermissionERNS_12WebPageProxyENS_21MediaPermissionReasonERKN7WebCore18SecurityOriginDataEON3WTF17CompletionHandlerIFvbEEEEN3$_0C1ERKSC_"></a>[<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZN3WTF8BlockPtrIFT_DpT0_EEC1ERKNS0_IS4_EE" title='WTF::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN3WTF8BlockPtrIFT_DpT0_EEC1ERKNS0_IS4_EE" data-ref-filename="_ZN3WTF8BlockPtrIFT_DpT0_EEC1ERKNS0_IS4_EE"><a class="local col8 ref" href="#38completionBlock" title='completionBlock' data-ref="38completionBlock" data-ref-filename="38completionBlock">completionBlock</a></a>](<span class='typedef' title='NSModalResponse' data-type='NSInteger' data-ref="NSModalResponse" data-ref-filename="NSModalResponse">NSModalResponse</span> <dfn class="local col1 decl" id="41returnCode" title='returnCode' data-type='NSModalResponse' data-ref="41returnCode" data-ref-filename="41returnCode">returnCode</dfn>) {</td></tr>
<tr><th id="205">205</th><td>        <em>auto</em> <dfn class="local col2 decl" id="42shouldAllow" title='shouldAllow' data-type='bool' data-ref="42shouldAllow" data-ref-filename="42shouldAllow">shouldAllow</dfn> = <a class="local col1 ref" href="#41returnCode" title='returnCode' data-ref="41returnCode" data-ref-filename="41returnCode">returnCode</a> == <span class='ref' title='NSAlertFirstButtonReturn' data-ref="NSAlertFirstButtonReturn" data-ref-filename="NSAlertFirstButtonReturn">NSAlertFirstButtonReturn</span>;</td></tr>
<tr><th id="206">206</th><td>        <a class="local col8 ref" href="#38completionBlock" title='completionBlock' data-ref="38completionBlock" data-ref-filename="38completionBlock">completionBlock</a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZNK3WTF8BlockPtrIFT_DpT0_EEclES3_" title='WTF::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK3WTF8BlockPtrIFT_DpT0_EEclES3_" data-ref-filename="_ZNK3WTF8BlockPtrIFT_DpT0_EEclES3_">(<a class="local col2 ref" href="#42shouldAllow" title='shouldAllow' data-ref="42shouldAllow" data-ref-filename="42shouldAllow">shouldAllow</a>)</a>;</td></tr>
<tr><th id="207">207</th><td>    }];</td></tr>
<tr><th id="208">208</th><td><u>#<span data-ppcond="197">else</span></u></td></tr>
<tr><th id="209">209</th><td>    UIAlertController* alert = [UIAlertController alertControllerWithTitle:alertTitle message:nil preferredStyle:UIAlertControllerStyleAlert];</td></tr>
<tr><th id="210">210</th><td>    UIAlertAction* allowAction = [UIAlertAction actionWithTitle:allowButtonString style:UIAlertActionStyleDefault handler:[completionBlock](UIAlertAction *action) {</td></tr>
<tr><th id="211">211</th><td>        completionBlock(<b>true</b>);</td></tr>
<tr><th id="212">212</th><td>    }];</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td>    UIAlertAction* doNotAllowAction = [UIAlertAction actionWithTitle:doNotAllowButtonString style:UIAlertActionStyleCancel handler:[completionBlock](UIAlertAction *action) {</td></tr>
<tr><th id="215">215</th><td>        completionBlock(<b>false</b>);</td></tr>
<tr><th id="216">216</th><td>    }];</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td>    [alert addAction:doNotAllowAction];</td></tr>
<tr><th id="219">219</th><td>    [alert addAction:allowAction];</td></tr>
<tr><th id="220">220</th><td></td></tr>
<tr><th id="221">221</th><td>    [[UIViewController _viewControllerForFullScreenPresentationFromView:webView.get()] presentViewController:alert animated:YES completion:nil];</td></tr>
<tr><th id="222">222</th><td><u>#<span data-ppcond="197">endif</span></u></td></tr>
<tr><th id="223">223</th><td>}</td></tr>
<tr><th id="224">224</th><td></td></tr>
<tr><th id="225">225</th><td><u>#<span data-ppcond="225">if</span> <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformHave.h.html#36" title="(defined 1 &amp;&amp; 1)" data-ref="_M/HAVE">HAVE</a>(AVCAPTUREDEVICE)</u></td></tr>
<tr><th id="226">226</th><td></td></tr>
<tr><th id="227">227</th><td><em>void</em> <dfn class="decl def fn" id="_ZN6WebKit29requestAVCaptureAccessForTypeENS_19MediaPermissionTypeEON3WTF17CompletionHandlerIFvbEEE" title='WebKit::requestAVCaptureAccessForType' data-ref="_ZN6WebKit29requestAVCaptureAccessForTypeENS_19MediaPermissionTypeEON3WTF17CompletionHandlerIFvbEEE" data-ref-filename="_ZN6WebKit29requestAVCaptureAccessForTypeENS_19MediaPermissionTypeEON3WTF17CompletionHandlerIFvbEEE">requestAVCaptureAccessForType</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a> <dfn class="local col3 decl" id="43type" title='type' data-type='WebKit::MediaPermissionType' data-ref="43type" data-ref-filename="43type">type</dfn>, <a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::CompletionHandler" title='WTF::CompletionHandler' data-ref="WTF::CompletionHandler" data-ref-filename="WTF..CompletionHandler">CompletionHandler</a>&lt;<em>void</em>(<em>bool</em> <dfn class="local col5 decl" id="45authorized" title='authorized' data-type='bool' data-ref="45authorized" data-ref-filename="45authorized">authorized</dfn>)&gt;&amp;&amp; <dfn class="local col4 decl" id="44completionHandler" title='completionHandler' data-type='CompletionHandler&lt;void (bool)&gt; &amp;&amp;' data-ref="44completionHandler" data-ref-filename="44completionHandler">completionHandler</dfn>)</td></tr>
<tr><th id="228">228</th><td>{</td></tr>
<tr><th id="229">229</th><td>    <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(isMainRunLoop())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm&quot;, 229, __PRETTY_FUNCTION__, &quot;isMainRunLoop()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(229, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm&quot;, __PRETTY_FUNCTION__, 2004); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF13isMainRunLoopEv" title='WTF::isMainRunLoop' data-ref="_ZN3WTF13isMainRunLoopEv" data-ref-filename="_ZN3WTF13isMainRunLoopEv">isMainRunLoop</a>());</td></tr>
<tr><th id="230">230</th><td></td></tr>
<tr><th id="231">231</th><td>    <span class='typedef' title='AVMediaType' data-type='NSString *' data-ref="AVMediaType" data-ref-filename="AVMediaType">AVMediaType</span> <dfn class="local col6 decl" id="46mediaType" title='mediaType' data-type='AVMediaType' data-ref="46mediaType" data-ref-filename="46mediaType">mediaType</dfn> = <a class="local col3 ref" href="#43type" title='type' data-ref="43type" data-ref-filename="43type">type</a> == <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Audio" title='WebKit::MediaPermissionType::Audio' data-ref="WebKit::MediaPermissionType::Audio" data-ref-filename="WebKit..MediaPermissionType..Audio">Audio</a> ? <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#120" title="PAL::get_AVFoundation_AVMediaTypeAudio()" data-ref="_M/AVMediaTypeAudio">AVMediaTypeAudio</a> : <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#116" title="PAL::get_AVFoundation_AVMediaTypeVideo()" data-ref="_M/AVMediaTypeVideo">AVMediaTypeVideo</a>;</td></tr>
<tr><th id="232">232</th><td>    <em>auto</em> <dfn class="local col7 decl" id="47decisionHandler" title='decisionHandler' data-type='WTF::BlockPtr&lt;void (bool)&gt;' data-ref="47decisionHandler" data-ref-filename="47decisionHandler">decisionHandler</dfn> = <a class="tu ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZN3WTF12makeBlockPtrEOT_" title='WTF::makeBlockPtr' data-use='c' data-ref="_ZN3WTF12makeBlockPtrEOT_" data-ref-filename="_ZN3WTF12makeBlockPtrEOT_">makeBlockPtr</a>([<dfn class="local col8 decl" id="48completionHandler" title='completionHandler' data-type='WTF::CompletionHandler&lt;void (bool)&gt;' data-ref="48completionHandler" data-ref-filename="48completionHandler">completionHandler</dfn> = <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(completionHandler)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#44completionHandler" title='completionHandler' data-ref="44completionHandler" data-ref-filename="44completionHandler">completionHandler</a></span>)](<span class='typedef' title='BOOL' data-type='bool' data-ref="BOOL" data-ref-filename="BOOL">BOOL</span> <dfn class="local col9 decl" id="49authorized" title='authorized' data-type='BOOL' data-ref="49authorized" data-ref-filename="49authorized">authorized</dfn>) <em>mutable</em> {</td></tr>
<tr><th id="233">233</th><td>        <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE" title='WTF::callOnMainRunLoop' data-ref="_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE" data-ref-filename="_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE">callOnMainRunLoop</a>(<a class="tu ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col0 decl" id="50completionHandler" title='completionHandler' data-type='WTF::CompletionHandler&lt;void (bool)&gt;' data-ref="50completionHandler" data-ref-filename="50completionHandler">completionHandler</dfn> = <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(completionHandler)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col8 ref" href="#48completionHandler" title='completionHandler' data-ref="48completionHandler" data-ref-filename="48completionHandler">completionHandler</a></span>), <a class="local col9 ref" href="#49authorized" title='authorized' data-ref="49authorized" data-ref-filename="49authorized">authorized</a>]() <em>mutable</em> {</td></tr>
<tr><th id="234">234</th><td>            <a class="local col0 ref" href="#50completionHandler" title='completionHandler' data-ref="50completionHandler" data-ref-filename="50completionHandler">completionHandler</a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_">(<a class="local col9 ref" href="#49authorized" title='authorized' data-ref="49authorized" data-ref-filename="49authorized">authorized</a>)</a>;</td></tr>
<tr><th id="235">235</th><td>        });</td></tr>
<tr><th id="236">236</th><td>    });</td></tr>
<tr><th id="237">237</th><td>    [<span class="namespace">PAL::</span><a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#94" title='PAL::getAVCaptureDeviceClass' data-ref="PAL::getAVCaptureDeviceClass" data-ref-filename="PAL..getAVCaptureDeviceClass">getAVCaptureDeviceClass</a>() requestAccessForMediaType:<a class="local col6 ref" href="#46mediaType" title='mediaType' data-ref="46mediaType" data-ref-filename="46mediaType">mediaType</a> completionHandler:<a class="local col7 ref" href="#47decisionHandler" title='decisionHandler' data-ref="47decisionHandler" data-ref-filename="47decisionHandler">decisionHandler</a>.<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" title='WTF::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::get' data-ref="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" data-ref-filename="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv">get</a>()];</td></tr>
<tr><th id="238">238</th><td>}</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td><a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a> <dfn class="decl def fn" id="_ZN6WebKit27checkAVCaptureAccessForTypeENS_19MediaPermissionTypeE" title='WebKit::checkAVCaptureAccessForType' data-ref="_ZN6WebKit27checkAVCaptureAccessForTypeENS_19MediaPermissionTypeE" data-ref-filename="_ZN6WebKit27checkAVCaptureAccessForTypeENS_19MediaPermissionTypeE">checkAVCaptureAccessForType</dfn>(<a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a> <dfn class="local col1 decl" id="51type" title='type' data-type='WebKit::MediaPermissionType' data-ref="51type" data-ref-filename="51type">type</dfn>)</td></tr>
<tr><th id="241">241</th><td>{</td></tr>
<tr><th id="242">242</th><td>    <span class='typedef' title='AVMediaType' data-type='NSString *' data-ref="AVMediaType" data-ref-filename="AVMediaType">AVMediaType</span> <dfn class="local col2 decl" id="52mediaType" title='mediaType' data-type='AVMediaType' data-ref="52mediaType" data-ref-filename="52mediaType">mediaType</dfn> = <a class="local col1 ref" href="#51type" title='type' data-ref="51type" data-ref-filename="51type">type</a> == <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType" title='WebKit::MediaPermissionType' data-ref="WebKit::MediaPermissionType" data-ref-filename="WebKit..MediaPermissionType">MediaPermissionType</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionType::Audio" title='WebKit::MediaPermissionType::Audio' data-ref="WebKit::MediaPermissionType::Audio" data-ref-filename="WebKit..MediaPermissionType..Audio">Audio</a> ? <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#120" title="PAL::get_AVFoundation_AVMediaTypeAudio()" data-ref="_M/AVMediaTypeAudio">AVMediaTypeAudio</a> : <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#116" title="PAL::get_AVFoundation_AVMediaTypeVideo()" data-ref="_M/AVMediaTypeVideo">AVMediaTypeVideo</a>;</td></tr>
<tr><th id="243">243</th><td>    <em>auto</em> <dfn class="local col3 decl" id="53authorizationStatus" title='authorizationStatus' data-type='AVAuthorizationStatus' data-ref="53authorizationStatus" data-ref-filename="53authorizationStatus">authorizationStatus</dfn> = [<span class="namespace">PAL::</span><a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/AVFoundationSoftLink.h.html#94" title='PAL::getAVCaptureDeviceClass' data-ref="PAL::getAVCaptureDeviceClass" data-ref-filename="PAL..getAVCaptureDeviceClass">getAVCaptureDeviceClass</a>() authorizationStatusForMediaType:<a class="local col2 ref" href="#52mediaType" title='mediaType' data-ref="52mediaType" data-ref-filename="52mediaType">mediaType</a>];</td></tr>
<tr><th id="244">244</th><td>    <b>if</b> (<a class="local col3 ref" href="#53authorizationStatus" title='authorizationStatus' data-ref="53authorizationStatus" data-ref-filename="53authorizationStatus">authorizationStatus</a> == <span class='enum' title='AVAuthorizationStatusDenied' data-ref="AVAuthorizationStatusDenied" data-ref-filename="AVAuthorizationStatusDenied">AVAuthorizationStatusDenied</span> || <a class="local col3 ref" href="#53authorizationStatus" title='authorizationStatus' data-ref="53authorizationStatus" data-ref-filename="53authorizationStatus">authorizationStatus</a> == <span class='enum' title='AVAuthorizationStatusRestricted' data-ref="AVAuthorizationStatusRestricted" data-ref-filename="AVAuthorizationStatusRestricted">AVAuthorizationStatusRestricted</span>)</td></tr>
<tr><th id="245">245</th><td>        <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Denied" title='WebKit::MediaPermissionResult::Denied' data-ref="WebKit::MediaPermissionResult::Denied" data-ref-filename="WebKit..MediaPermissionResult..Denied">Denied</a>;</td></tr>
<tr><th id="246">246</th><td>    <b>if</b> (<a class="local col3 ref" href="#53authorizationStatus" title='authorizationStatus' data-ref="53authorizationStatus" data-ref-filename="53authorizationStatus">authorizationStatus</a> == <span class='enum' title='AVAuthorizationStatusNotDetermined' data-ref="AVAuthorizationStatusNotDetermined" data-ref-filename="AVAuthorizationStatusNotDetermined">AVAuthorizationStatusNotDetermined</span>)</td></tr>
<tr><th id="247">247</th><td>        <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Unknown" title='WebKit::MediaPermissionResult::Unknown' data-ref="WebKit::MediaPermissionResult::Unknown" data-ref-filename="WebKit..MediaPermissionResult..Unknown">Unknown</a>;</td></tr>
<tr><th id="248">248</th><td>    <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Granted" title='WebKit::MediaPermissionResult::Granted' data-ref="WebKit::MediaPermissionResult::Granted" data-ref-filename="WebKit..MediaPermissionResult..Granted">Granted</a>;</td></tr>
<tr><th id="249">249</th><td>}</td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td><u>#<span data-ppcond="225">endif</span> // HAVE(AVCAPTUREDEVICE)</u></td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td><u>#<span data-ppcond="253">if</span> <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/PlatformHave.h.html#36" title="(defined 1 &amp;&amp; 1)" data-ref="_M/HAVE">HAVE</a>(SPEECHRECOGNIZER)</u></td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td><em>void</em> <dfn class="decl def fn" id="_ZN6WebKit30requestSpeechRecognitionAccessEON3WTF17CompletionHandlerIFvbEEE" title='WebKit::requestSpeechRecognitionAccess' data-ref="_ZN6WebKit30requestSpeechRecognitionAccessEON3WTF17CompletionHandlerIFvbEEE" data-ref-filename="_ZN6WebKit30requestSpeechRecognitionAccessEON3WTF17CompletionHandlerIFvbEEE">requestSpeechRecognitionAccess</dfn>(<a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Forward.h.html#WTF::CompletionHandler" title='WTF::CompletionHandler' data-ref="WTF::CompletionHandler" data-ref-filename="WTF..CompletionHandler">CompletionHandler</a>&lt;<em>void</em>(<em>bool</em> <dfn class="local col5 decl" id="55authorized" title='authorized' data-type='bool' data-ref="55authorized" data-ref-filename="55authorized">authorized</dfn>)&gt;&amp;&amp; <dfn class="local col4 decl" id="54completionHandler" title='completionHandler' data-type='CompletionHandler&lt;void (bool)&gt; &amp;&amp;' data-ref="54completionHandler" data-ref-filename="54completionHandler">completionHandler</dfn>)</td></tr>
<tr><th id="256">256</th><td>{</td></tr>
<tr><th id="257">257</th><td>    <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Assertions.h.html#347" title="do { if (!(isMainRunLoop())) { WTFReportAssertionFailure(&quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm&quot;, 257, __PRETTY_FUNCTION__, &quot;isMainRunLoop()&quot;); do { WTF::isIntegralOrPointerType(); compilerFenceForCrash(); WTFCrashWithInfo(257, &quot;/Volumes/ExternalSSD/Projects/webkit/WebKit/Source/WebKit/UIProcess/Cocoa/MediaPermissionUtilities.mm&quot;, __PRETTY_FUNCTION__, 2006); } while (false); } } while (0)" data-ref="_M/ASSERT">ASSERT</a>(<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF13isMainRunLoopEv" title='WTF::isMainRunLoop' data-ref="_ZN3WTF13isMainRunLoopEv" data-ref-filename="_ZN3WTF13isMainRunLoopEv">isMainRunLoop</a>());</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>    <em>auto</em> <dfn class="local col6 decl" id="56decisionHandler" title='decisionHandler' data-type='WTF::BlockPtr&lt;void (SFSpeechRecognizerAuthorizationStatus)&gt;' data-ref="56decisionHandler" data-ref-filename="56decisionHandler">decisionHandler</dfn> = <a class="tu ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZN3WTF12makeBlockPtrEOT_" title='WTF::makeBlockPtr' data-use='c' data-ref="_ZN3WTF12makeBlockPtrEOT_" data-ref-filename="_ZN3WTF12makeBlockPtrEOT_">makeBlockPtr</a>([<dfn class="local col7 decl" id="57completionHandler" title='completionHandler' data-type='WTF::CompletionHandler&lt;void (bool)&gt;' data-ref="57completionHandler" data-ref-filename="57completionHandler">completionHandler</dfn> = <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(completionHandler)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col4 ref" href="#54completionHandler" title='completionHandler' data-ref="54completionHandler" data-ref-filename="54completionHandler">completionHandler</a></span>)](<span class='typedef' title='SFSpeechRecognizerAuthorizationStatus' data-type='enum SFSpeechRecognizerAuthorizationStatus' data-ref="SFSpeechRecognizerAuthorizationStatus" data-ref-filename="SFSpeechRecognizerAuthorizationStatus">SFSpeechRecognizerAuthorizationStatus</span> <dfn class="local col8 decl" id="58status" title='status' data-type='SFSpeechRecognizerAuthorizationStatus' data-ref="58status" data-ref-filename="58status">status</dfn>) <em>mutable</em> {</td></tr>
<tr><th id="260">260</th><td>        <em>bool</em> <dfn class="local col9 decl" id="59authorized" title='authorized' data-type='bool' data-ref="59authorized" data-ref-filename="59authorized">authorized</dfn> = <a class="local col8 ref" href="#58status" title='status' data-ref="58status" data-ref-filename="58status">status</a> == <span class='enum' title='SFSpeechRecognizerAuthorizationStatusAuthorized' data-ref="SFSpeechRecognizerAuthorizationStatusAuthorized" data-ref-filename="SFSpeechRecognizerAuthorizationStatusAuthorized">SFSpeechRecognizerAuthorizationStatusAuthorized</span>;</td></tr>
<tr><th id="261">261</th><td>        <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/MainThread.h.html#_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE" title='WTF::callOnMainRunLoop' data-ref="_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE" data-ref-filename="_ZN3WTF17callOnMainRunLoopEONS_8FunctionIFvvEEE">callOnMainRunLoop</a>(<a class="tu ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/Function.h.html#_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" title='WTF::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::Function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-use='c' data-ref="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__" data-ref-filename="_ZN3WTF8FunctionIFT_DpT0_EEC1EOTL0__"></a>[<dfn class="local col0 decl" id="60completionHandler" title='completionHandler' data-type='WTF::CompletionHandler&lt;void (bool)&gt;' data-ref="60completionHandler" data-ref-filename="60completionHandler">completionHandler</dfn> = <a class="macro" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/StdLibExtras.h.html#568" title="std::move&lt;WTF::CheckMoveParameter&gt;(completionHandler)" data-ref="_M/WTFMove">WTFMove</a>(<span class='refarg'><a class="local col7 ref" href="#57completionHandler" title='completionHandler' data-ref="57completionHandler" data-ref-filename="57completionHandler">completionHandler</a></span>), <a class="local col9 ref" href="#59authorized" title='authorized' data-ref="59authorized" data-ref-filename="59authorized">authorized</a>]() <em>mutable</em> {</td></tr>
<tr><th id="262">262</th><td>            <a class="local col0 ref" href="#60completionHandler" title='completionHandler' data-ref="60completionHandler" data-ref-filename="60completionHandler">completionHandler</a><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/CompletionHandler.h.html#_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" title='WTF::CompletionHandler&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_" data-ref-filename="_ZN3WTF17CompletionHandlerIFT_DpT0_EEclES3_">(<a class="local col9 ref" href="#59authorized" title='authorized' data-ref="59authorized" data-ref-filename="59authorized">authorized</a>)</a>;</td></tr>
<tr><th id="263">263</th><td>        });</td></tr>
<tr><th id="264">264</th><td>    });</td></tr>
<tr><th id="265">265</th><td>    [<span class="namespace">PAL::</span><a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/SpeechSoftLink.h.html#38" title='PAL::getSFSpeechRecognizerClass' data-ref="PAL::getSFSpeechRecognizerClass" data-ref-filename="PAL..getSFSpeechRecognizerClass">getSFSpeechRecognizerClass</a>() requestAuthorization:<a class="local col6 ref" href="#56decisionHandler" title='decisionHandler' data-ref="56decisionHandler" data-ref-filename="56decisionHandler">decisionHandler</a>.<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/BlockPtr.h.html#_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" title='WTF::BlockPtr&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::get' data-ref="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv" data-ref-filename="_ZNK3WTF8BlockPtrIFT_DpT0_EE3getEv">get</a>()];</td></tr>
<tr><th id="266">266</th><td>}</td></tr>
<tr><th id="267">267</th><td></td></tr>
<tr><th id="268">268</th><td><a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a> <dfn class="decl def fn" id="_ZN6WebKit35checkSpeechRecognitionServiceAccessEv" title='WebKit::checkSpeechRecognitionServiceAccess' data-ref="_ZN6WebKit35checkSpeechRecognitionServiceAccessEv" data-ref-filename="_ZN6WebKit35checkSpeechRecognitionServiceAccessEv">checkSpeechRecognitionServiceAccess</dfn>()</td></tr>
<tr><th id="269">269</th><td>{</td></tr>
<tr><th id="270">270</th><td>    <em>auto</em> <dfn class="local col1 decl" id="61authorizationStatus" title='authorizationStatus' data-type='SFSpeechRecognizerAuthorizationStatus' data-ref="61authorizationStatus" data-ref-filename="61authorizationStatus">authorizationStatus</dfn> = [<span class="namespace">PAL::</span><a class="ref" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/SpeechSoftLink.h.html#38" title='PAL::getSFSpeechRecognizerClass' data-ref="PAL::getSFSpeechRecognizerClass" data-ref-filename="PAL..getSFSpeechRecognizerClass">getSFSpeechRecognizerClass</a>() authorizationStatus];</td></tr>
<tr><th id="271">271</th><td>    <b>if</b> (<a class="local col1 ref" href="#61authorizationStatus" title='authorizationStatus' data-ref="61authorizationStatus" data-ref-filename="61authorizationStatus">authorizationStatus</a> == <span class='enum' title='SFSpeechRecognizerAuthorizationStatusDenied' data-ref="SFSpeechRecognizerAuthorizationStatusDenied" data-ref-filename="SFSpeechRecognizerAuthorizationStatusDenied">SFSpeechRecognizerAuthorizationStatusDenied</span> || <a class="local col1 ref" href="#61authorizationStatus" title='authorizationStatus' data-ref="61authorizationStatus" data-ref-filename="61authorizationStatus">authorizationStatus</a> == <span class='enum' title='SFSpeechRecognizerAuthorizationStatusRestricted' data-ref="SFSpeechRecognizerAuthorizationStatusRestricted" data-ref-filename="SFSpeechRecognizerAuthorizationStatusRestricted">SFSpeechRecognizerAuthorizationStatusRestricted</span>)</td></tr>
<tr><th id="272">272</th><td>        <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Denied" title='WebKit::MediaPermissionResult::Denied' data-ref="WebKit::MediaPermissionResult::Denied" data-ref-filename="WebKit..MediaPermissionResult..Denied">Denied</a>;</td></tr>
<tr><th id="273">273</th><td>    <b>if</b> (<a class="local col1 ref" href="#61authorizationStatus" title='authorizationStatus' data-ref="61authorizationStatus" data-ref-filename="61authorizationStatus">authorizationStatus</a> == <span class='enum' title='SFSpeechRecognizerAuthorizationStatusAuthorized' data-ref="SFSpeechRecognizerAuthorizationStatusAuthorized" data-ref-filename="SFSpeechRecognizerAuthorizationStatusAuthorized">SFSpeechRecognizerAuthorizationStatusAuthorized</span>)</td></tr>
<tr><th id="274">274</th><td>        <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Granted" title='WebKit::MediaPermissionResult::Granted' data-ref="WebKit::MediaPermissionResult::Granted" data-ref-filename="WebKit..MediaPermissionResult..Granted">Granted</a>;</td></tr>
<tr><th id="275">275</th><td>    <b>return</b> <a class="type" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult" title='WebKit::MediaPermissionResult' data-ref="WebKit::MediaPermissionResult" data-ref-filename="WebKit..MediaPermissionResult">MediaPermissionResult</a>::<a class="enum" href="../MediaPermissionUtilities.h.html#WebKit::MediaPermissionResult::Unknown" title='WebKit::MediaPermissionResult::Unknown' data-ref="WebKit::MediaPermissionResult::Unknown" data-ref-filename="WebKit..MediaPermissionResult..Unknown">Unknown</a>;</td></tr>
<tr><th id="276">276</th><td>}</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td><em>bool</em> <dfn class="decl def fn" id="_ZN6WebKit41checkSpeechRecognitionServiceAvailabilityERKN3WTF6StringE" title='WebKit::checkSpeechRecognitionServiceAvailability' data-ref="_ZN6WebKit41checkSpeechRecognitionServiceAvailabilityERKN3WTF6StringE" data-ref-filename="_ZN6WebKit41checkSpeechRecognitionServiceAvailabilityERKN3WTF6StringE">checkSpeechRecognitionServiceAvailability</dfn>(<em>const</em> <a class="type" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#WTF::String" title='WTF::String' data-ref="WTF::String" data-ref-filename="WTF..String">String</a>&amp; <dfn class="local col2 decl" id="62localeIdentifier" title='localeIdentifier' data-type='const WTF::String &amp;' data-ref="62localeIdentifier" data-ref-filename="62localeIdentifier">localeIdentifier</dfn>)</td></tr>
<tr><th id="279">279</th><td>{</td></tr>
<tr><th id="280">280</th><td>    <em>auto</em> <dfn class="local col3 decl" id="63recognizer" title='recognizer' data-type='WTF::RetainPtr&lt;SFSpeechRecognizer&gt;' data-ref="63recognizer" data-ref-filename="63recognizer">recognizer</dfn> = <a class="local col2 ref" href="#62localeIdentifier" title='localeIdentifier' data-ref="62localeIdentifier" data-ref-filename="62localeIdentifier">localeIdentifier</a>.<a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6String7isEmptyEv" title='WTF::String::isEmpty' data-ref="_ZNK3WTF6String7isEmptyEv" data-ref-filename="_ZNK3WTF6String7isEmptyEv">isEmpty</a>() ? <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF7adoptNSET_" title='WTF::adoptNS' data-ref="_ZN3WTF7adoptNSET_" data-ref-filename="_ZN3WTF7adoptNSET_">adoptNS</a>([<span class="namespace">PAL::</span><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/SpeechSoftLink.h.html#38" title='PAL::allocSFSpeechRecognizerInstance' data-ref="_ZN3PAL31allocSFSpeechRecognizerInstanceEv" data-ref-filename="_ZN3PAL31allocSFSpeechRecognizerInstanceEv">allocSFSpeechRecognizerInstance</a>() init]) : <a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZN3WTF7adoptNSET_" title='WTF::adoptNS' data-ref="_ZN3WTF7adoptNSET_" data-ref-filename="_ZN3WTF7adoptNSET_">adoptNS</a>([<span class="namespace">PAL::</span><a class="ref fn" href="../../../../WebKitBuild/Debug/usr/local/include/pal/cocoa/SpeechSoftLink.h.html#38" title='PAL::allocSFSpeechRecognizerInstance' data-ref="_ZN3PAL31allocSFSpeechRecognizerInstanceEv" data-ref-filename="_ZN3PAL31allocSFSpeechRecognizerInstanceEv">allocSFSpeechRecognizerInstance</a>() initWithLocale:[NSLocale localeWithLocaleIdentifier:<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/text/WTFString.h.html#_ZNK3WTF6StringcvP8NSStringEv" title='WTF::String::operator NSString *' data-ref="_ZNK3WTF6StringcvP8NSStringEv" data-ref-filename="_ZNK3WTF6StringcvP8NSStringEv"></a><a class="local col2 ref" href="#62localeIdentifier" title='localeIdentifier' data-ref="62localeIdentifier" data-ref-filename="62localeIdentifier">localeIdentifier</a>]]);</td></tr>
<tr><th id="281">281</th><td>    <b>return</b> <a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvbEv" title='WTF::RetainPtr::operator bool' data-ref="_ZNK3WTF9RetainPtrcvbEv" data-ref-filename="_ZNK3WTF9RetainPtrcvbEv"></a><a class="local col3 ref" href="#63recognizer" title='recognizer' data-ref="63recognizer" data-ref-filename="63recognizer">recognizer</a> &amp;&amp; [<a class="ref fn fake" href="../../../../WebKitBuild/Debug/usr/local/include/wtf/RetainPtr.h.html#_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" title='WTF::RetainPtr::operator typename remove_pointer&lt;type-parameter-0-0&gt;::type *' data-ref="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv" data-ref-filename="_ZNK3WTF9RetainPtrcvPNSt3__114remove_pointerIT_E4typeEEv"></a><a class="local col3 ref" href="#63recognizer" title='recognizer' data-ref="63recognizer" data-ref-filename="63recognizer">recognizer</a> isAvailable];</td></tr>
<tr><th id="282">282</th><td>}</td></tr>
<tr><th id="283">283</th><td></td></tr>
<tr><th id="284">284</th><td><u>#<span data-ppcond="253">endif</span> // HAVE(SPEECHRECOGNIZER)</u></td></tr>
<tr><th id="285">285</th><td></td></tr>
<tr><th id="286">286</th><td>} <i>// namespace WebKit</i></td></tr>
<tr><th id="287">287</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../../WebKitBuild/Debug/DerivedSources/WebKit2/unified-sources/UnifiedSource35-mm.mm.html'>webkit/WebKitBuild/Debug/DerivedSources/WebKit2/unified-sources/UnifiedSource35-mm.mm</a><br/>Generated on <em>2021-Jul-06</em> from project webkit<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
